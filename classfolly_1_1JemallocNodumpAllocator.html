<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::JemallocNodumpAllocator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1JemallocNodumpAllocator.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1JemallocNodumpAllocator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::JemallocNodumpAllocator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a445e59bec165f1b7be8bd2b33d2f6a0a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0a">State</a> { <a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd">State::ENABLED</a>, 
<a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0aa055c1a591abb0e8cd86dc969727bcc0b">State::DISABLED</a>
 }</td></tr>
<tr class="separator:a445e59bec165f1b7be8bd2b33d2f6a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af2bd2b0be7ef764d731e80386bf3183a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#af2bd2b0be7ef764d731e80386bf3183a">JemallocNodumpAllocator</a> (<a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0a">State</a> <a class="el" href="http__parser_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>=<a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd">State::ENABLED</a>)</td></tr>
<tr class="separator:af2bd2b0be7ef764d731e80386bf3183a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9104a59ad8a371c9829e34fbc36a7d"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a2b9104a59ad8a371c9829e34fbc36a7d">allocate</a> (size_t <a class="el" href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">size</a>)</td></tr>
<tr class="separator:a2b9104a59ad8a371c9829e34fbc36a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e21c61e1ea007bc634289d9b249a76"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#ab1e21c61e1ea007bc634289d9b249a76">reallocate</a> (void *p, size_t <a class="el" href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">size</a>)</td></tr>
<tr class="separator:ab1e21c61e1ea007bc634289d9b249a76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af214d3831779a0f20643b6ce819d7a53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#af214d3831779a0f20643b6ce819d7a53">deallocate</a> (void *p, size_t=0)</td></tr>
<tr class="separator:af214d3831779a0f20643b6ce819d7a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9441c59c7e42bcac9fe06a1de3068453"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a9441c59c7e42bcac9fe06a1de3068453">getArenaIndex</a> () const </td></tr>
<tr class="separator:a9441c59c7e42bcac9fe06a1de3068453"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f18cee4c4f10d3c7c209aae6f713db8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a6f18cee4c4f10d3c7c209aae6f713db8">getFlags</a> () const </td></tr>
<tr class="separator:a6f18cee4c4f10d3c7c209aae6f713db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a99392912c7c1d0c9b465f5d0e7049869"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a99392912c7c1d0c9b465f5d0e7049869">deallocate</a> (void *p, void *userData)</td></tr>
<tr class="separator:a99392912c7c1d0c9b465f5d0e7049869"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afe1ec4df6c3922b62b17e52b86f7028c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#afe1ec4df6c3922b62b17e52b86f7028c">extend_and_setup_arena</a> ()</td></tr>
<tr class="separator:afe1ec4df6c3922b62b17e52b86f7028c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9915178bd50ca87f1529a19aa6ae70af"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a> {0}</td></tr>
<tr class="separator:a9915178bd50ca87f1529a19aa6ae70af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4bbd8467c764809eaf65da53c9b3bfd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">flags_</a> {0}</td></tr>
<tr class="separator:ae4bbd8467c764809eaf65da53c9b3bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An allocator which uses Jemalloc to create an dedicated arena to allocate memory from. The only special property set on the allocated memory is that the memory is not dump-able.</p>
<p>This is done by setting MADV_DONTDUMP using the <code>madvise</code> system call. <a class="el" href="structA.html">A</a> custom hook installed which is called when allocating a new chunk / extent of memory. All it does is call the original jemalloc hook to allocate the memory and then set the advise on it before returning the pointer to the allocated memory. Jemalloc does not use allocated chunks / extents across different arenas, without <code>munmap</code>-ing them first, and the advises are not sticky i.e. they are unset if <code>munmap</code> is done. Also this arena can't be used by any other part of the code by just calling <code>malloc</code>.</p>
<p>If target system doesn't support MADV_DONTDUMP or jemalloc doesn't support custom arena hook, <a class="el" href="classfolly_1_1JemallocNodumpAllocator.html">JemallocNodumpAllocator</a> would fall back to using malloc / free. Such behavior can be identified by using !defined(FOLLY_JEMALLOC_NODUMP_ALLOCATOR_SUPPORTED).</p>
<p>Similarly, if binary isn't linked with jemalloc, the logic would fall back to malloc / free. </p>

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00068">68</a> of file <a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a445e59bec165f1b7be8bd2b33d2f6a0a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0a">folly::JemallocNodumpAllocator::State</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd"></a>ENABLED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a445e59bec165f1b7be8bd2b33d2f6a0aa055c1a591abb0e8cd86dc969727bcc0b"></a>DISABLED&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00070">70</a> of file <a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                   {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="AsyncSocketTest2_8cpp.html#a71edb480ed61e1ecc6dde62005bf0134ac8cf6eea8f096ed51160b484d97c5bbd">ENABLED</a>,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="AsyncSocketTest2_8cpp.html#a71edb480ed61e1ecc6dde62005bf0134a055c1a591abb0e8cd86dc969727bcc0b">DISABLED</a>,</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  };</div><div class="ttc" id="AsyncSocketTest2_8cpp_html_a71edb480ed61e1ecc6dde62005bf0134a055c1a591abb0e8cd86dc969727bcc0b"><div class="ttname"><a href="AsyncSocketTest2_8cpp.html#a71edb480ed61e1ecc6dde62005bf0134a055c1a591abb0e8cd86dc969727bcc0b">TFOState::DISABLED</a></div></div>
<div class="ttc" id="AsyncSocketTest2_8cpp_html_a71edb480ed61e1ecc6dde62005bf0134ac8cf6eea8f096ed51160b484d97c5bbd"><div class="ttname"><a href="AsyncSocketTest2_8cpp.html#a71edb480ed61e1ecc6dde62005bf0134ac8cf6eea8f096ed51160b484d97c5bbd">TFOState::ENABLED</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af2bd2b0be7ef764d731e80386bf3183a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::JemallocNodumpAllocator::JemallocNodumpAllocator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0a">State</a>&#160;</td>
          <td class="paramname"><em>state</em> = <code><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd">State::ENABLED</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00026">26</a> of file <a class="el" href="JemallocNodumpAllocator_8cpp_source.html">JemallocNodumpAllocator.cpp</a>.</p>

<p>References <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00114">arena_index_</a>, <a class="el" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd">ENABLED</a>, <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00032">extend_and_setup_arena()</a>, and <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3">folly::INFO</a>.</p>

<p>Referenced by <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00163">folly::globalJemallocNodumpAllocator()</a>.</p>
<div class="fragment"><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;                                                            {</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="http__parser_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> == <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd">State::ENABLED</a> &amp;&amp; <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#afe1ec4df6c3922b62b17e52b86f7028c">extend_and_setup_arena</a>()) {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3">INFO</a>) &lt;&lt; <span class="stringliteral">&quot;Set up arena: &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a>;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  }</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;}</div><div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#a445e59bec165f1b7be8bd2b33d2f6a0aac8cf6eea8f096ed51160b484d97c5bbd">folly::JemallocNodumpAllocator::State::ENABLED</a></div></div>
<div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_afe1ec4df6c3922b62b17e52b86f7028c"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#afe1ec4df6c3922b62b17e52b86f7028c">folly::JemallocNodumpAllocator::extend_and_setup_arena</a></div><div class="ttdeci">bool extend_and_setup_arena()</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8cpp_source.html#l00032">JemallocNodumpAllocator.cpp:32</a></div></div>
<div class="ttc" id="namespacefolly_html_a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3"><div class="ttname"><a href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3">folly::LogLevel::INFO</a></div></div>
<div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_a9915178bd50ca87f1529a19aa6ae70af"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">folly::JemallocNodumpAllocator::arena_index_</a></div><div class="ttdeci">unsigned arena_index_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00114">JemallocNodumpAllocator.h:114</a></div></div>
<div class="ttc" id="http__parser_8c_html_adc6e5733fc3c22f0a7b2914188c49c90"><div class="ttname"><a href="http__parser_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a></div><div class="ttdeci">state</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8c_source.html#l00272">http_parser.c:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2b9104a59ad8a371c9829e34fbc36a7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * folly::JemallocNodumpAllocator::allocate </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00107">107</a> of file <a class="el" href="JemallocNodumpAllocator_8cpp_source.html">JemallocNodumpAllocator.cpp</a>.</p>

<p>References <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00115">flags_</a>, and <a class="el" href="MallocImpl_8cpp_source.html#l00035">mallocx</a>.</p>

<p>Referenced by <a class="el" href="JemallocNodumpAllocatorTest_8cpp_source.html#l00023">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                                   {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MallocImpl_8cpp.html#adc9869ed7f33f431b67edf121693febe">mallocx</a> != <span class="keyword">nullptr</span> ? <a class="code" href="MallocImpl_8cpp.html#adc9869ed7f33f431b67edf121693febe">mallocx</a>(<a class="code" href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">size</a>, <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">flags_</a>) : malloc(<a class="code" href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">size</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_ae4bbd8467c764809eaf65da53c9b3bfd"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">folly::JemallocNodumpAllocator::flags_</a></div><div class="ttdeci">int flags_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00115">JemallocNodumpAllocator.h:115</a></div></div>
<div class="ttc" id="namespacefolly_html_a0606ba855bcb96a1673880aa3b404993"><div class="ttname"><a href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">folly::size</a></div><div class="ttdeci">constexpr auto size(C const &amp;c) -&gt; decltype(c.size())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00045">Access.h:45</a></div></div>
<div class="ttc" id="MallocImpl_8cpp_html_adc9869ed7f33f431b67edf121693febe"><div class="ttname"><a href="MallocImpl_8cpp.html#adc9869ed7f33f431b67edf121693febe">mallocx</a></div><div class="ttdeci">void *(* mallocx)(size_t, int)</div><div class="ttdef"><b>Definition:</b> <a href="MallocImpl_8cpp_source.html#l00035">MallocImpl.cpp:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a99392912c7c1d0c9b465f5d0e7049869"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::JemallocNodumpAllocator::deallocate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00158">158</a> of file <a class="el" href="JemallocNodumpAllocator_8cpp_source.html">JemallocNodumpAllocator.cpp</a>.</p>

<p>References <a class="el" href="MallocImpl_8cpp_source.html#l00039">dallocx</a>, <a class="el" href="BitVectorCodingTest_8cpp_source.html#l00094">bm::free()</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>.</p>

<p>Referenced by <a class="el" href="JemallocNodumpAllocatorTest_8cpp_source.html#l00023">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                                                {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">const</span> <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a><span class="keyword">&gt;</span>(userData);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="MallocImpl_8cpp.html#ae9b829aa5651f6db24f25f620d288773">dallocx</a> != <span class="keyword">nullptr</span> ? <a class="code" href="MallocImpl_8cpp.html#ae9b829aa5651f6db24f25f620d288773">dallocx</a>(p, static_cast&lt;int&gt;(flags)) : <a class="code" href="namespacebm.html#ad1f2831d164bf5bc0b15eae7b05fcd64">free</a>(p);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="ttc" id="MallocImpl_8cpp_html_ae9b829aa5651f6db24f25f620d288773"><div class="ttname"><a href="MallocImpl_8cpp.html#ae9b829aa5651f6db24f25f620d288773">dallocx</a></div><div class="ttdeci">void(* dallocx)(void *, int)</div><div class="ttdef"><b>Definition:</b> <a href="MallocImpl_8cpp_source.html#l00039">MallocImpl.cpp:39</a></div></div>
<div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="namespacebm_html_ad1f2831d164bf5bc0b15eae7b05fcd64"><div class="ttname"><a href="namespacebm.html#ad1f2831d164bf5bc0b15eae7b05fcd64">bm::free</a></div><div class="ttdeci">void free()</div><div class="ttdef"><b>Definition:</b> <a href="BitVectorCodingTest_8cpp_source.html#l00094">BitVectorCodingTest.cpp:94</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af214d3831779a0f20643b6ce819d7a53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::JemallocNodumpAllocator::deallocate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00154">154</a> of file <a class="el" href="JemallocNodumpAllocator_8cpp_source.html">JemallocNodumpAllocator.cpp</a>.</p>

<p>References <a class="el" href="MallocImpl_8cpp_source.html#l00039">dallocx</a>, <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00115">flags_</a>, and <a class="el" href="BitVectorCodingTest_8cpp_source.html#l00094">bm::free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                                        {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="MallocImpl_8cpp.html#ae9b829aa5651f6db24f25f620d288773">dallocx</a> != <span class="keyword">nullptr</span> ? <a class="code" href="MallocImpl_8cpp.html#ae9b829aa5651f6db24f25f620d288773">dallocx</a>(p, <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">flags_</a>) : <a class="code" href="namespacebm.html#ad1f2831d164bf5bc0b15eae7b05fcd64">free</a>(p);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div><div class="ttc" id="MallocImpl_8cpp_html_ae9b829aa5651f6db24f25f620d288773"><div class="ttname"><a href="MallocImpl_8cpp.html#ae9b829aa5651f6db24f25f620d288773">dallocx</a></div><div class="ttdeci">void(* dallocx)(void *, int)</div><div class="ttdef"><b>Definition:</b> <a href="MallocImpl_8cpp_source.html#l00039">MallocImpl.cpp:39</a></div></div>
<div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_ae4bbd8467c764809eaf65da53c9b3bfd"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">folly::JemallocNodumpAllocator::flags_</a></div><div class="ttdeci">int flags_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00115">JemallocNodumpAllocator.h:115</a></div></div>
<div class="ttc" id="namespacebm_html_ad1f2831d164bf5bc0b15eae7b05fcd64"><div class="ttname"><a href="namespacebm.html#ad1f2831d164bf5bc0b15eae7b05fcd64">bm::free</a></div><div class="ttdeci">void free()</div><div class="ttdef"><b>Definition:</b> <a href="BitVectorCodingTest_8cpp_source.html#l00094">BitVectorCodingTest.cpp:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe1ec4df6c3922b62b17e52b86f7028c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::JemallocNodumpAllocator::extend_and_setup_arena </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00032">32</a> of file <a class="el" href="JemallocNodumpAllocator_8cpp_source.html">JemallocNodumpAllocator.cpp</a>.</p>

<p>References <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00114">arena_index_</a>, <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">folly::FATAL</a>, <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00115">flags_</a>, <a class="el" href="MallocImpl_8cpp_source.html#l00042">mallctl</a>, <a class="el" href="JemallocHugePageAllocator_8cpp_source.html#l00039">MALLOCX_ARENA</a>, and <a class="el" href="JemallocHugePageAllocator_8cpp_source.html#l00040">MALLOCX_TCACHE_NONE</a>.</p>

<p>Referenced by <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00088">getFlags()</a>, and <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00026">JemallocNodumpAllocator()</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                                     {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifdef FOLLY_JEMALLOC_NODUMP_ALLOCATOR_SUPPORTED</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MallocImpl_8cpp.html#ac77af0531212e242b8a39fe7f773ce7a">mallctl</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// Not linked with jemalloc.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  }</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordtype">size_t</span> len = <span class="keyword">sizeof</span>(<a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a>);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ret = <a class="code" href="MallocImpl_8cpp.html#ac77af0531212e242b8a39fe7f773ce7a">mallctl</a>(</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;#ifdef FOLLY_JEMALLOC_NODUMP_ALLOCATOR_CHUNK</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;          <span class="stringliteral">&quot;arenas.extend&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;#<span class="keywordflow">else</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;          <span class="stringliteral">&quot;arenas.create&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;#endif</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;          ,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;          &amp;<a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a>,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;          &amp;len,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;          <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;          0)) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">FATAL</a>) &lt;&lt; <span class="stringliteral">&quot;Unable to extend arena: &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(ret);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">flags_</a> = <a class="code" href="JemallocHugePageAllocator_8cpp.html#a9a90c92bcae45b469b33b04056c99288">MALLOCX_ARENA</a>(<a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a>) | <a class="code" href="JemallocHugePageAllocator_8cpp.html#af2f6b8b9b0103181d3eba16f495854ac">MALLOCX_TCACHE_NONE</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#ifdef FOLLY_JEMALLOC_NODUMP_ALLOCATOR_CHUNK</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> key =</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;arena.&quot;</span>, <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a>, <span class="stringliteral">&quot;.chunk_hooks&quot;</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  chunk_hooks_t hooks;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  len = <span class="keyword">sizeof</span>(hooks);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Read the existing hooks</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ret = <a class="code" href="MallocImpl_8cpp.html#ac77af0531212e242b8a39fe7f773ce7a">mallctl</a>(key.c_str(), &amp;hooks, &amp;len, <span class="keyword">nullptr</span>, 0)) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">FATAL</a>) &lt;&lt; <span class="stringliteral">&quot;Unable to get the hooks: &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(ret);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">if</span> (original_alloc_ == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    original_alloc_ = hooks.alloc;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    DCHECK_EQ(original_alloc_, hooks.alloc);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// Set the custom hook</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  hooks.alloc = &amp;JemallocNodumpAllocator::alloc;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ret =</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;          <a class="code" href="MallocImpl_8cpp.html#ac77af0531212e242b8a39fe7f773ce7a">mallctl</a>(key.c_str(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;hooks, <span class="keyword">sizeof</span>(hooks))) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">FATAL</a>) &lt;&lt; <span class="stringliteral">&quot;Unable to set the hooks: &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(ret);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> key =</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;arena.&quot;</span>, <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a>, <span class="stringliteral">&quot;.extent_hooks&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="structextent__hooks__s.html">extent_hooks_t</a>* hooks;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  len = <span class="keyword">sizeof</span>(hooks);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// Read the existing hooks</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ret = <a class="code" href="MallocImpl_8cpp.html#ac77af0531212e242b8a39fe7f773ce7a">mallctl</a>(key.c_str(), &amp;hooks, &amp;len, <span class="keyword">nullptr</span>, 0)) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">FATAL</a>) &lt;&lt; <span class="stringliteral">&quot;Unable to get the hooks: &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(ret);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span> (original_alloc_ == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    original_alloc_ = hooks-&gt;alloc;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    DCHECK_EQ(original_alloc_, hooks-&gt;alloc);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Set the custom hook</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  extent_hooks_ = *hooks;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  extent_hooks_.alloc = &amp;JemallocNodumpAllocator::alloc;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="structextent__hooks__s.html">extent_hooks_t</a>* new_hooks = &amp;extent_hooks_;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ret = <a class="code" href="MallocImpl_8cpp.html#ac77af0531212e242b8a39fe7f773ce7a">mallctl</a>(</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;          key.c_str(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;new_hooks, <span class="keyword">sizeof</span>(new_hooks))) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">FATAL</a>) &lt;&lt; <span class="stringliteral">&quot;Unable to set the hooks: &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(ret);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#else // FOLLY_JEMALLOC_NODUMP_ALLOCATOR_SUPPORTED</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#endif // FOLLY_JEMALLOC_NODUMP_ALLOCATOR_SUPPORTED</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div><div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_ae4bbd8467c764809eaf65da53c9b3bfd"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">folly::JemallocNodumpAllocator::flags_</a></div><div class="ttdeci">int flags_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00115">JemallocNodumpAllocator.h:115</a></div></div>
<div class="ttc" id="JemallocHugePageAllocator_8cpp_html_a9a90c92bcae45b469b33b04056c99288"><div class="ttname"><a href="JemallocHugePageAllocator_8cpp.html#a9a90c92bcae45b469b33b04056c99288">MALLOCX_ARENA</a></div><div class="ttdeci">#define MALLOCX_ARENA(x)</div><div class="ttdef"><b>Definition:</b> <a href="JemallocHugePageAllocator_8cpp_source.html#l00039">JemallocHugePageAllocator.cpp:39</a></div></div>
<div class="ttc" id="structextent__hooks__s_html"><div class="ttname"><a href="structextent__hooks__s.html">extent_hooks_s</a></div><div class="ttdef"><b>Definition:</b> <a href="JemallocHugePageAllocator_8cpp_source.html#l00051">JemallocHugePageAllocator.cpp:51</a></div></div>
<div class="ttc" id="MallocImpl_8cpp_html_ac77af0531212e242b8a39fe7f773ce7a"><div class="ttname"><a href="MallocImpl_8cpp.html#ac77af0531212e242b8a39fe7f773ce7a">mallctl</a></div><div class="ttdeci">int(* mallctl)(const char *, void *, size_t *, void *, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="MallocImpl_8cpp_source.html#l00042">MallocImpl.cpp:42</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="namespacefolly_html_a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc"><div class="ttname"><a href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">folly::LogLevel::FATAL</a></div></div>
<div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_a9915178bd50ca87f1529a19aa6ae70af"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">folly::JemallocNodumpAllocator::arena_index_</a></div><div class="ttdeci">unsigned arena_index_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00114">JemallocNodumpAllocator.h:114</a></div></div>
<div class="ttc" id="JemallocHugePageAllocator_8cpp_html_af2f6b8b9b0103181d3eba16f495854ac"><div class="ttname"><a href="JemallocHugePageAllocator_8cpp.html#af2f6b8b9b0103181d3eba16f495854ac">MALLOCX_TCACHE_NONE</a></div><div class="ttdeci">#define MALLOCX_TCACHE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="JemallocHugePageAllocator_8cpp_source.html#l00040">JemallocHugePageAllocator.cpp:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9441c59c7e42bcac9fe06a1de3068453"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned folly::JemallocNodumpAllocator::getArenaIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00085">85</a> of file <a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a>.</p>

<p>References <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00114">arena_index_</a>.</p>

<p>Referenced by <a class="el" href="JemallocNodumpAllocatorTest_8cpp_source.html#l00023">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                 {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">arena_index_</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_a9915178bd50ca87f1529a19aa6ae70af"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#a9915178bd50ca87f1529a19aa6ae70af">folly::JemallocNodumpAllocator::arena_index_</a></div><div class="ttdeci">unsigned arena_index_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00114">JemallocNodumpAllocator.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6f18cee4c4f10d3c7c209aae6f713db8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::JemallocNodumpAllocator::getFlags </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00088">88</a> of file <a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a>.</p>

<p>References <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00032">extend_and_setup_arena()</a>, and <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00115">flags_</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                       {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">flags_</a>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div><div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_ae4bbd8467c764809eaf65da53c9b3bfd"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">folly::JemallocNodumpAllocator::flags_</a></div><div class="ttdeci">int flags_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00115">JemallocNodumpAllocator.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab1e21c61e1ea007bc634289d9b249a76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * folly::JemallocNodumpAllocator::reallocate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00111">111</a> of file <a class="el" href="JemallocNodumpAllocator_8cpp_source.html">JemallocNodumpAllocator.cpp</a>.</p>

<p>References <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00115">flags_</a>, <a class="el" href="MallocImpl_8cpp_source.html#l00036">rallocx</a>, and <a class="el" href="Access_8h_source.html#l00045">folly::size()</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                                              {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MallocImpl_8cpp.html#a81872a5787f44cb4a30efd43d177ff66">rallocx</a> != <span class="keyword">nullptr</span> ? <a class="code" href="MallocImpl_8cpp.html#a81872a5787f44cb4a30efd43d177ff66">rallocx</a>(p, <a class="code" href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">size</a>, <a class="code" href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">flags_</a>) : realloc(p, <a class="code" href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">size</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="ttc" id="classfolly_1_1JemallocNodumpAllocator_html_ae4bbd8467c764809eaf65da53c9b3bfd"><div class="ttname"><a href="classfolly_1_1JemallocNodumpAllocator.html#ae4bbd8467c764809eaf65da53c9b3bfd">folly::JemallocNodumpAllocator::flags_</a></div><div class="ttdeci">int flags_</div><div class="ttdef"><b>Definition:</b> <a href="JemallocNodumpAllocator_8h_source.html#l00115">JemallocNodumpAllocator.h:115</a></div></div>
<div class="ttc" id="namespacefolly_html_a0606ba855bcb96a1673880aa3b404993"><div class="ttname"><a href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">folly::size</a></div><div class="ttdeci">constexpr auto size(C const &amp;c) -&gt; decltype(c.size())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00045">Access.h:45</a></div></div>
<div class="ttc" id="MallocImpl_8cpp_html_a81872a5787f44cb4a30efd43d177ff66"><div class="ttname"><a href="MallocImpl_8cpp.html#a81872a5787f44cb4a30efd43d177ff66">rallocx</a></div><div class="ttdeci">void *(* rallocx)(void *, size_t, int)</div><div class="ttdef"><b>Definition:</b> <a href="MallocImpl_8cpp_source.html#l00036">MallocImpl.cpp:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a9915178bd50ca87f1529a19aa6ae70af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned folly::JemallocNodumpAllocator::arena_index_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00114">114</a> of file <a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a>.</p>

<p>Referenced by <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00032">extend_and_setup_arena()</a>, <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00085">getArenaIndex()</a>, and <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00026">JemallocNodumpAllocator()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4bbd8467c764809eaf65da53c9b3bfd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::JemallocNodumpAllocator::flags_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00115">115</a> of file <a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a>.</p>

<p>Referenced by <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00107">allocate()</a>, <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00154">deallocate()</a>, <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00032">extend_and_setup_arena()</a>, <a class="el" href="JemallocNodumpAllocator_8h_source.html#l00088">getFlags()</a>, and <a class="el" href="JemallocNodumpAllocator_8cpp_source.html#l00111">reallocate()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/experimental/<a class="el" href="JemallocNodumpAllocator_8h_source.html">JemallocNodumpAllocator.h</a></li>
<li>proxygen/folly/folly/experimental/<a class="el" href="JemallocNodumpAllocator_8cpp_source.html">JemallocNodumpAllocator.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1JemallocNodumpAllocator.html">JemallocNodumpAllocator</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
