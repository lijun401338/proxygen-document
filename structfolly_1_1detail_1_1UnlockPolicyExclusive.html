<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::detail::UnlockPolicyExclusive&lt; LockTraits &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structfolly_1_1detail_1_1UnlockPolicyExclusive.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="structfolly_1_1detail_1_1UnlockPolicyExclusive-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::detail::UnlockPolicyExclusive&lt; LockTraits &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="LockTraits_8h_source.html">LockTraits.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::detail::UnlockPolicyExclusive&lt; LockTraits &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="structfolly_1_1detail_1_1UnlockPolicyExclusive.png" usemap="#folly::detail::UnlockPolicyExclusive_3C_20LockTraits_20_3E_map" alt=""/>
  <map id="folly::detail::UnlockPolicyExclusive_3C_20LockTraits_20_3E_map" name="folly::detail::UnlockPolicyExclusive&lt; LockTraits &gt;_map">
<area href="structfolly_1_1LockPolicyExclusive.html" alt="folly::LockPolicyExclusive" shape="rect" coords="0,56,287,80"/>
<area href="structfolly_1_1LockPolicyTryExclusive.html" alt="folly::LockPolicyTryExclusive" shape="rect" coords="297,56,584,80"/>
<area href="structfolly_1_1LockPolicyFromUpgradeToExclusive.html" alt="folly::LockPolicyFromUpgradeToExclusive" shape="rect" coords="0,112,287,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a1dc34028210e6f5036a7a444a1f9ce5f"><td class="memTemplParams" colspan="2">template&lt;typename Mutex &gt; </td></tr>
<tr class="memitem:a1dc34028210e6f5036a7a444a1f9ce5f"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structfolly_1_1detail_1_1UnlockPolicyExclusive.html#a1dc34028210e6f5036a7a444a1f9ce5f">unlock</a> (<a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &amp;<a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">mutex</a>)</td></tr>
<tr class="separator:a1dc34028210e6f5036a7a444a1f9ce5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;template&lt; typename... &gt; class LockTraits&gt;<br />
struct folly::detail::UnlockPolicyExclusive&lt; LockTraits &gt;</h3>

<p>Unlock helpers</p>
<p>These help in determining whether it is safe for <a class="el" href="structfolly_1_1Synchronized.html#a0c066566bebd6270cbaac80e6363684d">Synchronized::LockedPtr</a> instances to be move assigned from one another. It is safe if they both have the same unlock policy, and it is not if they don't have the same unlock policy. For example</p>
<p>auto wlock = <a class="el" href="namespacefolly_1_1detail.html#a5f33a5a02c2e1470bc6c268c8a8a183f">synchronized.wlock()</a>; wlock.unlock();</p>
<p>wlock = <a class="el" href="namespacefolly_1_1detail.html#a25f59e233ee60f719c0bc9c8e4aa5564">synchronized.rlock()</a>;</p>
<p>This code would try to release the shared lock with a call to <a class="el" href="structfolly_1_1detail_1_1UnlockPolicyExclusive.html#a1dc34028210e6f5036a7a444a1f9ce5f">unlock()</a>, resulting in possibly undefined behavior. By allowing the LockPolicy classes (defined below) to know what their unlocking behavior is, we can prevent against this by disabling unsafe conversions to and from incompatible <a class="el" href="classfolly_1_1LockedPtr.html">LockedPtr</a> types (they are incompatible if the underlying LockPolicy has different unlock policies. </p>

<p>Definition at line <a class="el" href="LockTraits_8h_source.html#l00372">372</a> of file <a class="el" href="LockTraits_8h_source.html">LockTraits.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1dc34028210e6f5036a7a444a1f9ce5f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename... &gt; class LockTraits&gt; </div>
<div class="memtemplate">
template&lt;typename Mutex &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="structfolly_1_1detail_1_1UnlockPolicyExclusive.html">folly::detail::UnlockPolicyExclusive</a>&lt; <a class="el" href="structfolly_1_1LockTraits.html">LockTraits</a> &gt;::unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &amp;&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockTraits_8h_source.html#l00374">374</a> of file <a class="el" href="LockTraits_8h_source.html">LockTraits.h</a>.</p>

<p>Referenced by <a class="el" href="LockTraitsTest_8cpp_source.html#l00304">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                   {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    LockTraits&lt;Mutex&gt;::unlock(<a class="code" href="StaticSingletonManager_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">mutex</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="ttc" id="StaticSingletonManager_8cpp_html_a1be3f7fa26e4521098de5f1ec0f865f3"><div class="ttname"><a href="StaticSingletonManager_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">mutex</a></div><div class="ttdeci">std::mutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="StaticSingletonManager_8cpp_source.html#l00039">StaticSingletonManager.cpp:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>proxygen/folly/folly/<a class="el" href="LockTraits_8h_source.html">LockTraits.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="namespacefolly_1_1detail.html">detail</a></li><li class="navelem"><a class="el" href="structfolly_1_1detail_1_1UnlockPolicyExclusive.html">UnlockPolicyExclusive</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
