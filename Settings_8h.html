<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: proxygen/folly/folly/experimental/settings/Settings.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Settings_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Settings.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;functional&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;<a class="el" href="Range_8h_source.html">folly/Range.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="SettingsMetadata_8h_source.html">folly/experimental/settings/SettingsMetadata.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="SettingsImpl_8h_source.html">folly/experimental/settings/detail/SettingsImpl.h</a>&gt;</code><br />
</div>
<p><a href="Settings_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1settings_1_1detail_1_1SettingWrapper.html">folly::settings::detail::SettingWrapper&lt; T, TrivialPtr &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1settings_1_1detail_1_1TypeIdentity.html">folly::settings::detail::TypeIdentity&lt; T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1settings_1_1detail_1_1SnapshotSettingWrapper.html">folly::settings::detail::SnapshotSettingWrapper&lt; T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1settings_1_1Snapshot.html">folly::settings::Snapshot</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacefolly"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly.html">folly</a></td></tr>
<tr class="memdesc:namespacefolly"><td class="mdescLeft">&#160;</td><td class="mdescRight">&mdash;&mdash; Concurrent Priority <a class="el" href="classQueue.html">Queue</a> Implementation &mdash;&mdash; <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacefolly_1_1settings"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1settings.html">folly::settings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacefolly_1_1settings_1_1detail"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1settings_1_1detail.html">folly::settings::detail</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a65230564d74fa4f2deb2474920d99261"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Settings_8h.html#a65230564d74fa4f2deb2474920d99261">FOLLY_SETTINGS_DEFINE_LOCAL_FUNC__</a>(_project,  _name,  _Type,  _overloadType)</td></tr>
<tr class="separator:a65230564d74fa4f2deb2474920d99261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa9cf10855a751635a3bf07224359f7a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Settings_8h.html#afa9cf10855a751635a3bf07224359f7a">FOLLY_SETTING_DEFINE</a>(_project,  _name,  _Type,  _def,  _desc)</td></tr>
<tr class="separator:afa9cf10855a751635a3bf07224359f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c9d17d42fc3330400ea0796b9f8771a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Settings_8h.html#a3c9d17d42fc3330400ea0796b9f8771a">FOLLY_SETTING_DECLARE</a>(_project,  _name,  _Type)&#160;&#160;&#160;<a class="el" href="Settings_8h.html#a65230564d74fa4f2deb2474920d99261">FOLLY_SETTINGS_DEFINE_LOCAL_FUNC__</a>(_project, _name, _Type, int)</td></tr>
<tr class="separator:a3c9d17d42fc3330400ea0796b9f8771a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4b038be03070d75572d31063d5d5b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Settings_8h.html#adf4b038be03070d75572d31063d5d5b8">FOLLY_SETTING</a>(_project,  _name)&#160;&#160;&#160;FOLLY_SETTINGS_LOCAL_FUNC__##_project##_##_name(0)</td></tr>
<tr class="separator:adf4b038be03070d75572d31063d5d5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a38721af76aaec1e5280f2a6e8c526ea3"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a38721af76aaec1e5280f2a6e8c526ea3"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1settings_1_1detail.html#a38721af76aaec1e5280f2a6e8c526ea3">folly::settings::detail::TypeIdentityT</a> = typename TypeIdentity&lt; <a class="el" href="http__parser__cpp_8cpp.html#ad24d0de3f597ca60dd95c4bc59c2ff73">T</a> &gt;::<a class="el" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a></td></tr>
<tr class="separator:a38721af76aaec1e5280f2a6e8c526ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ace5fd8561a5df27000f3471c5a881c5d"><td class="memItemLeft" align="right" valign="top">Optional&lt; SettingMetadata &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1settings.html#ace5fd8561a5df27000f3471c5a881c5d">folly::settings::getSettingsMeta</a> (StringPiece settingName)</td></tr>
<tr class="separator:ace5fd8561a5df27000f3471c5a881c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="adf4b038be03070d75572d31063d5d5b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FOLLY_SETTING</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_project, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;FOLLY_SETTINGS_LOCAL_FUNC__##_project##_##_name(0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Accesses a defined setting. Rationale for the macro: 1) Searchability, all settings access is done via FOLLY_SETTING(...) 2) Prevents omitting trailing () by accident, which could lead to bugs like <code>auto value = *FOLLY_SETTING_project_name;</code>, which compiles but dereferences the function pointer instead of the setting itself. </p>

<p>Definition at line <a class="el" href="Settings_8h_source.html#l00192">192</a> of file <a class="el" href="Settings_8h_source.html">Settings.h</a>.</p>

<p>Referenced by <a class="el" href="a_8cpp_source.html#l00026">a_ns::a_func()</a>, <a class="el" href="b_8cpp_source.html#l00038">b_ns::b_func()</a>, <a class="el" href="SettingsBenchmarks_8cpp_source.html#l00031">BENCHMARK()</a>, <a class="el" href="a_8cpp_source.html#l00035">a_ns::getRemote()</a>, <a class="el" href="a_8cpp_source.html#l00031">a_ns::setRemote()</a>, and <a class="el" href="SettingsTest_8cpp_source.html#l00089">TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c9d17d42fc3330400ea0796b9f8771a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FOLLY_SETTING_DECLARE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_project, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_Type&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="Settings_8h.html#a65230564d74fa4f2deb2474920d99261">FOLLY_SETTINGS_DEFINE_LOCAL_FUNC__</a>(_project, _name, _Type, int)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declares a setting that's defined elsewhere. </p>

<p>Definition at line <a class="el" href="Settings_8h_source.html#l00180">180</a> of file <a class="el" href="Settings_8h_source.html">Settings.h</a>.</p>

</div>
</div>
<a class="anchor" id="afa9cf10855a751635a3bf07224359f7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FOLLY_SETTING_DEFINE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_project, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_Type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_def, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_desc&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="comment">/* Fastpath optimization, see notes in FOLLY_SETTINGS_DEFINE_LOCAL_FUNC__.  \</span></div><div class="line"><span class="comment">     Aggregate all off these together in a single section for better TLB      \</span></div><div class="line"><span class="comment">     and cache locality. */</span>                                                   <a class="code" href="SmallLocksBenchmark_8cpp.html#a56dbdb2c92635667c843130c87139f62">\</a></div><div class="line"><a class="code" href="SmallLocksBenchmark_8cpp.html#a56dbdb2c92635667c843130c87139f62">  __attribute__</a>((__section__(<span class="stringliteral">&quot;.folly.settings.cache&quot;</span>)))                       \</div><div class="line">      std::atomic&lt;folly::settings::detail::SettingCore&lt;_Type&gt;*&gt;               \</div><div class="line">          FOLLY_SETTINGS_CACHE__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name;                         \</div><div class="line">  <span class="comment">/* Location for the small value cache (if _Type is small and trivial).      \</span></div><div class="line"><span class="comment">     Intentionally located right after the pointer cache above to take        \</span></div><div class="line"><span class="comment">     advantage of the prefetching */</span>                                          <a class="code" href="SmallLocksBenchmark_8cpp.html#a56dbdb2c92635667c843130c87139f62">\</a></div><div class="line"><a class="code" href="SmallLocksBenchmark_8cpp.html#a56dbdb2c92635667c843130c87139f62">  __attribute__</a>((__section__(<span class="stringliteral">&quot;.folly.settings.cache&quot;</span>))) <a class="code" href="namespacestd.html">std</a>::atomic&lt;<a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&gt; \</div><div class="line">      FOLLY_SETTINGS_TRIVIAL__<span class="preprocessor">##_project##_##_name;                           \</span></div><div class="line"><span class="preprocessor">  </span><span class="comment">/* Meyers singleton to avoid SIOF */</span><span class="preprocessor">                                        \</span></div><div class="line"><span class="preprocessor">  FOLLY_NOINLINE folly::settings::detail::SettingCore&lt;_Type&gt;&amp;                 \</span></div><div class="line"><span class="preprocessor">      FOLLY_SETTINGS_FUNC__##_project##_##_name() {                           \</span></div><div class="line"><span class="preprocessor">    static folly::Indestructible&lt;folly::settings::detail::SettingCore&lt;_Type&gt;&gt; \</span></div><div class="line"><span class="preprocessor">        setting(                                                              \</span></div><div class="line"><span class="preprocessor">            folly::settings::SettingMetadata{                                 \</span></div><div class="line"><span class="preprocessor">                #_project, #_name, #_Type, typeid(_Type), #_def, _desc},      \</span></div><div class="line"><span class="preprocessor">            folly::settings::detail::TypeIdentityT&lt;_Type&gt;{_def},              \</span></div><div class="line"><span class="preprocessor">            FOLLY_SETTINGS_TRIVIAL__##_project##_##_name);                    \</span></div><div class="line"><span class="preprocessor">    return *setting;                                                          \</span></div><div class="line"><span class="preprocessor">  }                                                                           \</span></div><div class="line"><span class="preprocessor">  </span><span class="comment">/* Ensure the setting is registered even if not used in program */</span><span class="preprocessor">          \</span></div><div class="line"><span class="preprocessor">  auto&amp; FOLLY_SETTINGS_INIT__##_project##_##_name =                           \</span></div><div class="line"><span class="preprocessor">      FOLLY_SETTINGS_FUNC__##_project##_##_name();                            \</span></div><div class="line"><span class="preprocessor">  FOLLY_SETTINGS_DEFINE_LOCAL_FUNC__(_project, _name, _Type, char)</span></div><div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="SmallLocksBenchmark_8cpp_html_a56dbdb2c92635667c843130c87139f62"><div class="ttname"><a href="SmallLocksBenchmark_8cpp.html#a56dbdb2c92635667c843130c87139f62">__attribute__</a></div><div class="ttdeci">__attribute__((noinline, noclone)) VirtualBase *makeVirtual()</div><div class="ttdef"><b>Definition:</b> <a href="SmallLocksBenchmark_8cpp_source.html#l00319">SmallLocksBenchmark.cpp:319</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="namespacetesting_html_a4ba77a3f5b67166ff1b59d96a32346a2"><div class="ttname"><a href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">testing::_</a></div><div class="ttdeci">const internal::AnythingMatcher _</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-matchers_8h_source.html#l03729">gmock-matchers.h:3729</a></div></div>
</div><!-- fragment --><p>Defines a setting.</p>
<p><a class="el" href="Settings_8h.html#afa9cf10855a751635a3bf07224359f7a">FOLLY_SETTING_DEFINE()</a> can only be placed in a single translation unit and will be checked against accidental collisions.</p>
<p>The setting API can be accessed via <a class="el" href="Settings_8h.html#adf4b038be03070d75572d31063d5d5b8">FOLLY_SETTING(project, name)</a>.&lt;api_func&gt;() and is documented in the Setting class.</p>
<p>All settings for a common namespace; (project, name) must be unique for the whole program. Collisions are verified at runtime on program startup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_project</td><td>Project identifier, can only contain [a-zA-Z0-9] </td></tr>
    <tr><td class="paramname">&lt;em&gt;name</td><td>setting name within the project, can only contain [_a-zA-Z0-9]. The string "&lt;project&gt;&lt;/em&gt;&lt;name&gt;" must be unique for the whole program. </td></tr>
    <tr><td class="paramname">_Type</td><td>setting value type </td></tr>
    <tr><td class="paramname">_def</td><td>default value for the setting </td></tr>
    <tr><td class="paramname">_desc</td><td>setting documentation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Settings_8h_source.html#l00149">149</a> of file <a class="el" href="Settings_8h_source.html">Settings.h</a>.</p>

</div>
</div>
<a class="anchor" id="a65230564d74fa4f2deb2474920d99261"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FOLLY_SETTINGS_DEFINE_LOCAL_FUNC__</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_project, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_Type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_overloadType&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">extern</span> std::atomic&lt;folly::settings::detail::SettingCore&lt;_Type&gt;*&gt;            \</div><div class="line">      FOLLY_SETTINGS_CACHE__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name;                             \</div><div class="line">  extern std::atomic&lt;uint64_t&gt; FOLLY_SETTINGS_TRIVIAL__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name;  \</div><div class="line">  folly::settings::detail::SettingCore&lt;_Type&gt;&amp;                                \</div><div class="line">      FOLLY_SETTINGS_FUNC__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name();                            <a class="code" href="CPortability_8h.html#a416be07eb9da776690749a070a87d72e">\</a></div><div class="line"><a class="code" href="CPortability_8h.html#a416be07eb9da776690749a070a87d72e">  FOLLY_ALWAYS_INLINE</a> <span class="keyword">auto</span> FOLLY_SETTINGS_LOCAL_FUNC__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name(   \</div><div class="line">      _overloadType) {                                                        <a class="code" href="folly_2folly_2experimental_2exception__tracer_2CMakeLists_8txt.html#af00e19beba1d2d581836e56761392d0b">\</a></div><div class="line"><a class="code" href="folly_2folly_2experimental_2exception__tracer_2CMakeLists_8txt.html#af00e19beba1d2d581836e56761392d0b">    if</a> (!FOLLY_SETTINGS_CACHE__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name.load()) {                 \</div><div class="line">      FOLLY_SETTINGS_CACHE__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name.store(                       \</div><div class="line">          &amp;FOLLY_SETTINGS_FUNC__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name());                      \</div><div class="line">    }                                                                         <a class="code" href="SmallLocksBenchmark_8cpp.html#a9717e7bbecb906637e86cef6da3d83c2">\</a></div><div class="line"><a class="code" href="SmallLocksBenchmark_8cpp.html#a9717e7bbecb906637e86cef6da3d83c2">    return</a> <a class="code" href="namespacefolly_1_1settings_1_1detail.html">folly::settings::detail</a>::                                          \</div><div class="line">        SettingWrapper&lt;_Type, &amp;FOLLY_SETTINGS_TRIVIAL__##_project##_##_name&gt;( \</div><div class="line">            *FOLLY_SETTINGS_CACHE__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name.load());              \</div><div class="line">  }                                                                           \</div><div class="line">  <span class="comment">/* This is here just to force a semicolon */</span>                                \</div><div class="line">  folly::settings::detail::SettingCore&lt;_Type&gt;&amp;                                \</div><div class="line">      FOLLY_SETTINGS_FUNC__##_project##<a class="code" href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">_</a>##_name()</div><div class="ttc" id="CPortability_8h_html_a416be07eb9da776690749a070a87d72e"><div class="ttname"><a href="CPortability_8h.html#a416be07eb9da776690749a070a87d72e">FOLLY_ALWAYS_INLINE</a></div><div class="ttdeci">#define FOLLY_ALWAYS_INLINE</div><div class="ttdef"><b>Definition:</b> <a href="CPortability_8h_source.html#l00151">CPortability.h:151</a></div></div>
<div class="ttc" id="namespacefolly_1_1settings_1_1detail_html"><div class="ttname"><a href="namespacefolly_1_1settings_1_1detail.html">folly::settings::detail</a></div><div class="ttdef"><b>Definition:</b> <a href="SettingsImpl_8h_source.html#l00032">SettingsImpl.h:32</a></div></div>
<div class="ttc" id="folly_2folly_2experimental_2exception__tracer_2CMakeLists_8txt_html_af00e19beba1d2d581836e56761392d0b"><div class="ttname"><a href="folly_2folly_2experimental_2exception__tracer_2CMakeLists_8txt.html#af00e19beba1d2d581836e56761392d0b">if</a></div><div class="ttdeci">if(FOLLY_USE_SYMBOLIZER) add_library(folly_exception_tracer_base ExceptionTracer.cpp StackTrace.cpp) apply_folly_compile_options_to_target(folly_exception_tracer_base) target_link_libraries(folly_exception_tracer_base PUBLIC folly) add_library(folly_exception_tracer ExceptionStackTraceLib.cpp ExceptionTracerLib.cpp) apply_folly_compile_options_to_target(folly_exception_tracer) target_link_libraries(folly_exception_tracer PUBLIC folly_exception_tracer_base) add_library(folly_exception_counter ExceptionCounterLib.cpp) apply_folly_compile_options_to_target(folly_exception_counter) target_link_libraries(folly_exception_counter PUBLIC folly_exception_tracer) install(FILES ExceptionAbi.h ExceptionCounterLib.h ExceptionTracer.h ExceptionTracerLib.h StackTrace.h DESTINATION $</div><div class="ttdef"><b>Definition:</b> <a href="folly_2folly_2experimental_2exception__tracer_2CMakeLists_8txt_source.html#l00001">CMakeLists.txt:1</a></div></div>
<div class="ttc" id="SmallLocksBenchmark_8cpp_html_a9717e7bbecb906637e86cef6da3d83c2"><div class="ttname"><a href="SmallLocksBenchmark_8cpp.html#a9717e7bbecb906637e86cef6da3d83c2">return</a></div><div class="ttdeci">return</div><div class="ttdef"><b>Definition:</b> <a href="SmallLocksBenchmark_8cpp_source.html#l00443">SmallLocksBenchmark.cpp:443</a></div></div>
<div class="ttc" id="namespacetesting_html_a4ba77a3f5b67166ff1b59d96a32346a2"><div class="ttname"><a href="namespacetesting.html#a4ba77a3f5b67166ff1b59d96a32346a2">testing::_</a></div><div class="ttdeci">const internal::AnythingMatcher _</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-matchers_8h_source.html#l03729">gmock-matchers.h:3729</a></div></div>
</div><!-- fragment --><p>Optimization: fast-path on top of the Meyers singleton. Each translation unit gets this code inlined, while the slow path initialization code is not. We check the global pointer which should only be initialized after the Meyers singleton. It's ok for multiple calls to attempt to update the global pointer, as they would be serialized on the Meyer's singleton initialization lock anyway.</p>
<p>Both FOLLY_SETTING_DECLARE and FOLLY_SETTING_DEFINE will provide a copy of this function and we work around ODR by using different overload types.</p>
<p>Requires a trailing semicolon. </p>

<p>Definition at line <a class="el" href="Settings_8h_source.html#l00106">106</a> of file <a class="el" href="Settings_8h_source.html">Settings.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d333e33cf903653326082c1f32e03be5.html">proxygen</a></li><li class="navelem"><a class="el" href="dir_32ce190710b1753ff87b781fbaae9b47.html">folly</a></li><li class="navelem"><a class="el" href="dir_dcf8e1233ba68571c5027662569cd1d9.html">folly</a></li><li class="navelem"><a class="el" href="dir_81eb1dbd071cdd475d3d544204dd2893.html">experimental</a></li><li class="navelem"><a class="el" href="dir_481d6ec2cefd1030d1860c58bef9d140.html">settings</a></li><li class="navelem"><a class="el" href="Settings_8h.html">Settings.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
