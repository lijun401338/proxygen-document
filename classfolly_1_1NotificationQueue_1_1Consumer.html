<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::NotificationQueue&lt; MessageT &gt;::Consumer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1NotificationQueue_1_1Consumer.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1NotificationQueue_1_1Consumer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::NotificationQueue&lt; MessageT &gt;::Consumer Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::NotificationQueue&lt; MessageT &gt;::Consumer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1NotificationQueue_1_1Consumer.png" usemap="#folly::NotificationQueue_3C_20MessageT_20_3E::Consumer_map" alt=""/>
  <map id="folly::NotificationQueue_3C_20MessageT_20_3E::Consumer_map" name="folly::NotificationQueue&lt; MessageT &gt;::Consumer_map">
<area href="classfolly_1_1DelayedDestruction.html" alt="folly::DelayedDestruction" shape="rect" coords="453,112,896,136"/>
<area href="classfolly_1_1EventHandler.html" alt="folly::EventHandler" shape="rect" coords="906,112,1349,136"/>
<area href="classfolly_1_1DelayedDestructionBase.html" alt="folly::DelayedDestructionBase" shape="rect" coords="453,56,896,80"/>
<area href="classfolly_1_1AsyncServerSocket_1_1RemoteAcceptor.html" alt="folly::AsyncServerSocket::RemoteAcceptor" shape="rect" coords="0,224,443,248"/>
<area href="structfolly_1_1detail_1_1notification__queue__consumer__wrapper.html" alt="folly::detail::notification_queue_consumer_wrapper&lt; MessageT, TCallback &gt;" shape="rect" coords="453,224,896,248"/>
<area href="classfolly_1_1EventBase_1_1FunctionRunner.html" alt="folly::EventBase::FunctionRunner" shape="rect" coords="906,224,1349,248"/>
<area href="classQueueConsumer.html" alt="QueueConsumer" shape="rect" coords="1359,224,1802,248"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2f091cc80f21207583344fe3114211b8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">: uint16_t { <a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9">kDefaultMaxReadAtOnce</a> = 10
 }</td></tr>
<tr class="separator:a2f091cc80f21207583344fe3114211b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa8cc49f185e8fb17c81f66edbea32f1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#aa8cc49f185e8fb17c81f66edbea32f1f">Consumer</a> ()</td></tr>
<tr class="separator:aa8cc49f185e8fb17c81f66edbea32f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8403f2371f048075783d022528c8dfc2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8403f2371f048075783d022528c8dfc2">messageAvailable</a> (MessageT &amp;&amp;<a class="el" href="structmessage.html">message</a>) noexcept=0</td></tr>
<tr class="separator:a8403f2371f048075783d022528c8dfc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863f5ff25d0e48eb6f95dcfdf5e99101"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a863f5ff25d0e48eb6f95dcfdf5e99101">startConsuming</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase, <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *queue)</td></tr>
<tr class="separator:a863f5ff25d0e48eb6f95dcfdf5e99101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606f53726cf7b08369b3a1ae02d4faa7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a606f53726cf7b08369b3a1ae02d4faa7">startConsumingInternal</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase, <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *queue)</td></tr>
<tr class="separator:a606f53726cf7b08369b3a1ae02d4faa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a043365077a8d957fe97d9de189f44127"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a043365077a8d957fe97d9de189f44127">stopConsuming</a> ()</td></tr>
<tr class="separator:a043365077a8d957fe97d9de189f44127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63bd1f4d224c201e8a8cea0ec6a10bbf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a63bd1f4d224c201e8a8cea0ec6a10bbf">consumeUntilDrained</a> (size_t *numConsumed=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>) noexcept</td></tr>
<tr class="separator:a63bd1f4d224c201e8a8cea0ec6a10bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6543eca1d28dbd08912b0fbe284991cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a6543eca1d28dbd08912b0fbe284991cb">getCurrentQueue</a> () const </td></tr>
<tr class="separator:a6543eca1d28dbd08912b0fbe284991cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d50d4d03ad7c4fea23922175cf1f8e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5d50d4d03ad7c4fea23922175cf1f8e6">setMaxReadAtOnce</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> maxAtOnce)</td></tr>
<tr class="separator:a5d50d4d03ad7c4fea23922175cf1f8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2072132bc281240daf0948a8f84ccbab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a2072132bc281240daf0948a8f84ccbab">getMaxReadAtOnce</a> () const </td></tr>
<tr class="separator:a2072132bc281240daf0948a8f84ccbab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0411330052b443f1d16d35160adceb5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#ae0411330052b443f1d16d35160adceb5">getEventBase</a> ()</td></tr>
<tr class="separator:ae0411330052b443f1d16d35160adceb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5304eecc250a89da1b1da79735b6002"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#aa5304eecc250a89da1b1da79735b6002">handlerReady</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> events) noexceptoverride</td></tr>
<tr class="separator:aa5304eecc250a89da1b1da79735b6002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e03d013fd1d2a1891eea0f396d0471"><td class="memTemplParams" colspan="2">template&lt;typename TCallback &gt; </td></tr>
<tr class="memitem:ae0e03d013fd1d2a1891eea0f396d0471"><td class="memTemplItemLeft" align="right" valign="top">std::unique_ptr&lt; typename <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>&lt; MessageT &gt;::<a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">DelayedDestruction::Destructor</a> &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#ae0e03d013fd1d2a1891eea0f396d0471">make</a> (TCallback &amp;&amp;callback)</td></tr>
<tr class="separator:ae0e03d013fd1d2a1891eea0f396d0471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1DelayedDestruction"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1DelayedDestruction')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestruction.html">folly::DelayedDestruction</a></td></tr>
<tr class="memitem:a2b64caadd65cdae43185e05eb4beb3fa inherit pub_methods_classfolly_1_1DelayedDestruction"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a2b64caadd65cdae43185e05eb4beb3fa">getDestroyPending</a> () const </td></tr>
<tr class="separator:a2b64caadd65cdae43185e05eb4beb3fa inherit pub_methods_classfolly_1_1DelayedDestruction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1DelayedDestructionBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1DelayedDestructionBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestructionBase.html">folly::DelayedDestructionBase</a></td></tr>
<tr class="memitem:a50c17a3675426754e89707ded8566f9f inherit pub_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#a50c17a3675426754e89707ded8566f9f">~DelayedDestructionBase</a> ()=default</td></tr>
<tr class="separator:a50c17a3675426754e89707ded8566f9f inherit pub_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a64954367cd70537e087d9ded1288664d"><td class="memTemplParams" colspan="2">template&lt;typename TCallback &gt; </td></tr>
<tr class="memitem:a64954367cd70537e087d9ded1288664d"><td class="memTemplItemLeft" align="right" valign="top">static std::unique_ptr&lt; <a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">DelayedDestruction::Destructor</a> &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a64954367cd70537e087d9ded1288664d">make</a> (TCallback &amp;&amp;callback)</td></tr>
<tr class="separator:a64954367cd70537e087d9ded1288664d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac0baa11215fd74b8f248e7764236c5fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#ac0baa11215fd74b8f248e7764236c5fb">destroy</a> () override</td></tr>
<tr class="separator:ac0baa11215fd74b8f248e7764236c5fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a353810c3ec8b350057aae7861d247895"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a353810c3ec8b350057aae7861d247895">~Consumer</a> () override</td></tr>
<tr class="separator:a353810c3ec8b350057aae7861d247895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1DelayedDestruction"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1DelayedDestruction')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestruction.html">folly::DelayedDestruction</a></td></tr>
<tr class="memitem:adc9a58eaf38e0e9afea76101942ae7df inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#adc9a58eaf38e0e9afea76101942ae7df">~DelayedDestruction</a> () override=default</td></tr>
<tr class="separator:adc9a58eaf38e0e9afea76101942ae7df inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42db04c8a694b8584822371afb67012c inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a42db04c8a694b8584822371afb67012c">DelayedDestruction</a> ()</td></tr>
<tr class="separator:a42db04c8a694b8584822371afb67012c inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1DelayedDestructionBase"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1DelayedDestructionBase')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestructionBase.html">folly::DelayedDestructionBase</a></td></tr>
<tr class="memitem:ad0257a1b700f005ee75d45ecf67abf76 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#ad0257a1b700f005ee75d45ecf67abf76">DelayedDestructionBase</a> ()</td></tr>
<tr class="separator:ad0257a1b700f005ee75d45ecf67abf76 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31591f967cbdb0b071bff2880de37cb0 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">getDestructorGuardCount</a> () const </td></tr>
<tr class="separator:a31591f967cbdb0b071bff2880de37cb0 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:add13b307eeeec1b789c3f768f954e4b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#add13b307eeeec1b789c3f768f954e4b9">consumeMessages</a> (bool isDrain, size_t *numConsumed=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>) noexcept</td></tr>
<tr class="separator:add13b307eeeec1b789c3f768f954e4b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a489f5ba7594bf9a31f53ecbb1ffbd7c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">setActive</a> (bool active, bool shouldLock=false)</td></tr>
<tr class="separator:a489f5ba7594bf9a31f53ecbb1ffbd7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39640eef1f3139a38661c160110e14a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a39640eef1f3139a38661c160110e14a2">init</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase, <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *queue)</td></tr>
<tr class="separator:a39640eef1f3139a38661c160110e14a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1EventHandler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1EventHandler')"><img src="closed.png" alt="-"/>&#160;Private Member Functions inherited from <a class="el" href="classfolly_1_1EventHandler.html">folly::EventHandler</a></td></tr>
<tr class="memitem:a2cd20fe2b2de66d1d4cd1e080d33091a inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a2cd20fe2b2de66d1d4cd1e080d33091a">EventHandler</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase, int fd)</td></tr>
<tr class="separator:a2cd20fe2b2de66d1d4cd1e080d33091a inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9684b77f38cf743c581df2f19ac73d11 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a9684b77f38cf743c581df2f19ac73d11">EventHandler</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>, <a class="el" href="structfolly_1_1NetworkSocket.html">NetworkSocket</a> fd=<a class="el" href="structfolly_1_1NetworkSocket.html">NetworkSocket</a>())</td></tr>
<tr class="separator:a9684b77f38cf743c581df2f19ac73d11 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95e2ff198495150663772d465eb76e19 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a95e2ff198495150663772d465eb76e19">~EventHandler</a> ()</td></tr>
<tr class="separator:a95e2ff198495150663772d465eb76e19 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a202afaf81f9a36978938fd39e8e2fb87 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a202afaf81f9a36978938fd39e8e2fb87">registerHandler</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> events)</td></tr>
<tr class="separator:a202afaf81f9a36978938fd39e8e2fb87 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e295058c1ffc6a8506120c061dc991 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">unregisterHandler</a> ()</td></tr>
<tr class="separator:a72e295058c1ffc6a8506120c061dc991 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98f877e37f8e1d74e562c9ce14e5853f inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a98f877e37f8e1d74e562c9ce14e5853f">isHandlerRegistered</a> () const </td></tr>
<tr class="separator:a98f877e37f8e1d74e562c9ce14e5853f inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a232288a0b6f89ab52ace581e9efe60c6 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a232288a0b6f89ab52ace581e9efe60c6">attachEventBase</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase)</td></tr>
<tr class="separator:a232288a0b6f89ab52ace581e9efe60c6 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad88a36559181920dce709d1836108eab inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#ad88a36559181920dce709d1836108eab">detachEventBase</a> ()</td></tr>
<tr class="separator:ad88a36559181920dce709d1836108eab inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef72fafbedd426fb96c4dd46b6d85395 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">changeHandlerFD</a> (int fd)</td></tr>
<tr class="separator:aef72fafbedd426fb96c4dd46b6d85395 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3368fb7865fc56b81ed500fd483a7523 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a3368fb7865fc56b81ed500fd483a7523">changeHandlerFD</a> (<a class="el" href="structfolly_1_1NetworkSocket.html">NetworkSocket</a> fd)</td></tr>
<tr class="separator:a3368fb7865fc56b81ed500fd483a7523 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f0c0d20c737730108c8427f1a5b0115 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a9f0c0d20c737730108c8427f1a5b0115">initHandler</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase, int fd)</td></tr>
<tr class="separator:a9f0c0d20c737730108c8427f1a5b0115 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7bfbd48a1dec9fe024f1e1d2e83374 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a9f7bfbd48a1dec9fe024f1e1d2e83374">initHandler</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase, <a class="el" href="structfolly_1_1NetworkSocket.html">NetworkSocket</a> fd)</td></tr>
<tr class="separator:a9f7bfbd48a1dec9fe024f1e1d2e83374 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded93c9ccbcb9fb992da83cd410cc4f1 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#aded93c9ccbcb9fb992da83cd410cc4f1">getRegisteredEvents</a> () const </td></tr>
<tr class="separator:aded93c9ccbcb9fb992da83cd410cc4f1 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a8d838790a5b3ff9f7b074378f6cae2 inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a4a8d838790a5b3ff9f7b074378f6cae2">registerInternalHandler</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> events)</td></tr>
<tr class="separator:a4a8d838790a5b3ff9f7b074378f6cae2 inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0e13ff8b995fd00e5ea260a7d49b3e inherit pub_methods_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#aef0e13ff8b995fd00e5ea260a7d49b3e">isPending</a> () const </td></tr>
<tr class="separator:aef0e13ff8b995fd00e5ea260a7d49b3e inherit pub_methods_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5665abc2c1f12d5feb5e8f9e477a2524"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a></td></tr>
<tr class="separator:a5665abc2c1f12d5feb5e8f9e477a2524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8511fac21cf518d6e808ea5fe66c50ef"><td class="memItemLeft" align="right" valign="top">bool *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">destroyedFlagPtr_</a></td></tr>
<tr class="separator:a8511fac21cf518d6e808ea5fe66c50ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e1502f0a56fa6a3b646c2d1f6f09ded"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">maxReadAtOnce_</a></td></tr>
<tr class="separator:a5e1502f0a56fa6a3b646c2d1f6f09ded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f43b109b231165e7c8a4f1ba2a2e70e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a9f43b109b231165e7c8a4f1ba2a2e70e">base_</a></td></tr>
<tr class="separator:a9f43b109b231165e7c8a4f1ba2a2e70e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adead3e4788fa27b026d8143c70c09f43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#adead3e4788fa27b026d8143c70c09f43">active_</a> {false}</td></tr>
<tr class="separator:adead3e4788fa27b026d8143c70c09f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classfolly_1_1EventHandler"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classfolly_1_1EventHandler')"><img src="closed.png" alt="-"/>&#160;Private Types inherited from <a class="el" href="classfolly_1_1EventHandler.html">folly::EventHandler</a></td></tr>
<tr class="memitem:a03ecfc8fd68fa86b693c1e56148e862c inherit pub_types_classfolly_1_1EventHandler"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862c">EventFlags</a> { <br />
&#160;&#160;<a class="el" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">NONE</a> = 0, 
<a class="el" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">READ</a> = EV_READ, 
<a class="el" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">WRITE</a> = EV_WRITE, 
<a class="el" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca4df957490633f5e01495bda435572dc6">READ_WRITE</a> = (READ | WRITE), 
<br />
&#160;&#160;<a class="el" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572">PERSIST</a> = EV_PERSIST
<br />
 }</td></tr>
<tr class="separator:a03ecfc8fd68fa86b693c1e56148e862c inherit pub_types_classfolly_1_1EventHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename MessageT&gt;<br />
class folly::NotificationQueue&lt; MessageT &gt;::Consumer</h3>

<p><a class="el" href="structA.html">A</a> callback interface for consuming messages from the queue as they arrive. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00083">83</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a2f091cc80f21207583344fe3114211b8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum : <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9"></a>kDefaultMaxReadAtOnce&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00085">85</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;: <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> { <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9">kDefaultMaxReadAtOnce</a> = 10 };</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9">folly::NotificationQueue::Consumer::kDefaultMaxReadAtOnce</a></div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00085">NotificationQueue.h:85</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa8cc49f185e8fb17c81f66edbea32f1f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::Consumer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00087">87</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        : <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>(<span class="keyword">nullptr</span>),</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;          <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">destroyedFlagPtr_</a>(<span class="keyword">nullptr</span>),</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;          <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">maxReadAtOnce_</a>(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9">kDefaultMaxReadAtOnce</a>) {}</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a8511fac21cf518d6e808ea5fe66c50ef"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">folly::NotificationQueue::Consumer::destroyedFlagPtr_</a></div><div class="ttdeci">bool * destroyedFlagPtr_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00220">NotificationQueue.h:220</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a2f091cc80f21207583344fe3114211b8abbfefae64e5781c5ca5872a26d06eca9">folly::NotificationQueue::Consumer::kDefaultMaxReadAtOnce</a></div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00085">NotificationQueue.h:85</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5e1502f0a56fa6a3b646c2d1f6f09ded"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">folly::NotificationQueue::Consumer::maxReadAtOnce_</a></div><div class="ttdeci">uint32_t maxReadAtOnce_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00221">NotificationQueue.h:221</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5665abc2c1f12d5feb5e8f9e477a2524"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">folly::NotificationQueue::Consumer::queue_</a></div><div class="ttdeci">NotificationQueue * queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00219">NotificationQueue.h:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a353810c3ec8b350057aae7861d247895"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::~Consumer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00184">184</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="add13b307eeeec1b789c3f768f954e4b9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::consumeMessages </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isDrain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>numConsumed</em> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Consume messages off the the queue until</p><ul>
<li>the queue is empty (1), or</li>
<li>until the consumer is destroyed, or</li>
<li>until the consumer is uninstalled, or</li>
<li>an exception is thrown in the course of dequeueing, or</li>
<li>unless isDrain is true, until the maxReadAtOnce_ limit is hit</li>
</ul>
<p>(1) Well, maybe. See logic/comments around "wasEmpty" in implementation. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00691">691</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="Access_8h_source.html#l00071">folly::data()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="NotificationQueue_8h_source.html#l00665">folly::NotificationQueue&lt; MessageT &gt;::queue_</a>, <a class="el" href="ScopeGuard_8h_source.html#l00274">SCOPE_EXIT</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, and <a class="el" href="Likely_8h_source.html#l00048">UNLIKELY</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                  {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> numProcessed = 0;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">setActive</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a> {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#a032c7c2b5fc8102923eaf7cf2eb51daf">syncSignalAndQueue</a>();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  };</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a> {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">setActive</a>(<span class="keyword">false</span>, <span class="comment">/* shouldLock = */</span> <span class="keyword">true</span>);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  };</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <a class="code" href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a> {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">if</span> (numConsumed != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      *numConsumed = numProcessed;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  };</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// Now pop the message off of the queue.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// We have to manually acquire and release the spinlock here, rather than</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// using SpinLockHolder since the MessageT has to be constructed while</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">// holding the spinlock and available after we release it.  SpinLockHolder</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// unfortunately doesn&#39;t provide a release() method.  (We can&#39;t construct</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// MessageT first since we have no guarantee that MessageT has a default</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// constructor.</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>.<a class="code" href="classfolly_1_1SpinLock.html#a23d73bc7761a1b05c0a44bd48421450f">lock</a>();</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordtype">bool</span> locked = <span class="keyword">true</span>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.empty())) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="comment">// If there is no message, we&#39;ve reached the end of the queue, return.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">setActive</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>.<a class="code" href="classfolly_1_1SpinLock.html#a03f509e513897f8a7782f68ab225a71e">unlock</a>();</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="comment">// Pull a message off the queue.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      std::unique_ptr&lt;Node&gt; <a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      data.reset(&amp;<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.front());</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.pop_front();</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="comment">// Check to see if the queue is empty now.</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="comment">// We use this as an optimization to see if we should bother trying to</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="comment">// loop again and read another message after invoking this callback.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordtype">bool</span> wasEmpty = <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.empty();</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">if</span> (wasEmpty) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">setActive</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="comment">// Now unlock the spinlock before we invoke the callback.</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>.<a class="code" href="classfolly_1_1SpinLock.html#a03f509e513897f8a7782f68ab225a71e">unlock</a>();</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      RequestContextScopeGuard rctx(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(data-&gt;ctx_));</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      locked = <span class="keyword">false</span>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="comment">// Call the callback</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordtype">bool</span> callbackDestroyed = <span class="keyword">false</span>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      CHECK(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">destroyedFlagPtr_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">destroyedFlagPtr_</a> = &amp;callbackDestroyed;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8403f2371f048075783d022528c8dfc2">messageAvailable</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(data-&gt;msg_));</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">destroyedFlagPtr_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="comment">// If the callback was destroyed before it returned, we are done</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">if</span> (callbackDestroyed) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="comment">// If the callback is no longer installed, we are done.</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="comment">// If we have hit maxReadAtOnce_, we are done.</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      ++numProcessed;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">if</span> (!isDrain &amp;&amp; <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">maxReadAtOnce_</a> &gt; 0 &amp;&amp; numProcessed &gt;= <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">maxReadAtOnce_</a>) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="comment">// If the queue was empty before we invoked the callback, it&#39;s probable</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="comment">// that it is still empty now.  Just go ahead and return, rather than</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="comment">// looping again and trying to re-read from the eventfd.  (If a new</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="comment">// message had in fact arrived while we were invoking the callback, we</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="comment">// will simply be woken up the next time around the event loop and will</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="comment">// process the message then.)</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">if</span> (wasEmpty) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp;) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="comment">// This catch block is really just to handle the case where the MessageT</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">// constructor throws.  The messageAvailable() callback itself is</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="comment">// declared as noexcept and should never throw.</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="comment">// If the MessageT constructor does throw we try to handle it as best as</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="comment">// we can, but we can&#39;t work miracles.  We will just ignore the error for</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="comment">// now and return.  The next time around the event loop we will end up</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="comment">// trying to read the message again.  If MessageT continues to throw we</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="comment">// will never make forward progress and will keep trying each time around</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="comment">// the event loop.</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">if</span> (locked) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="comment">// Unlock the spinlock.</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>.<a class="code" href="classfolly_1_1SpinLock.html#a03f509e513897f8a7782f68ab225a71e">unlock</a>();</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a8511fac21cf518d6e808ea5fe66c50ef"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">folly::NotificationQueue::Consumer::destroyedFlagPtr_</a></div><div class="ttdeci">bool * destroyedFlagPtr_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00220">NotificationQueue.h:220</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="ScopeGuard_8h_html_a175c354c3e38222bc00ce5df5e6d431d"><div class="ttname"><a href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a></div><div class="ttdeci">#define SCOPE_EXIT</div><div class="ttdef"><b>Definition:</b> <a href="ScopeGuard_8h_source.html#l00274">ScopeGuard.h:274</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLock_html_a03f509e513897f8a7782f68ab225a71e"><div class="ttname"><a href="classfolly_1_1SpinLock.html#a03f509e513897f8a7782f68ab225a71e">folly::SpinLock::unlock</a></div><div class="ttdeci">FOLLY_ALWAYS_INLINE void unlock() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00052">SpinLock.h:52</a></div></div>
<div class="ttc" id="namespacefolly_html_a23ca01703d6715fb172f4188faa73dc9"><div class="ttname"><a href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">folly::data</a></div><div class="ttdeci">constexpr auto data(C &amp;c) -&gt; decltype(c.data())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00071">Access.h:71</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a489f5ba7594bf9a31f53ecbb1ffbd7c9"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">folly::NotificationQueue::Consumer::setActive</a></div><div class="ttdeci">void setActive(bool active, bool shouldLock=false)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00199">NotificationQueue.h:199</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5e1502f0a56fa6a3b646c2d1f6f09ded"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">folly::NotificationQueue::Consumer::maxReadAtOnce_</a></div><div class="ttdeci">uint32_t maxReadAtOnce_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00221">NotificationQueue.h:221</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLock_html_a23d73bc7761a1b05c0a44bd48421450f"><div class="ttname"><a href="classfolly_1_1SpinLock.html#a23d73bc7761a1b05c0a44bd48421450f">folly::SpinLock::lock</a></div><div class="ttdeci">FOLLY_ALWAYS_INLINE void lock() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00049">SpinLock.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a8403f2371f048075783d022528c8dfc2"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8403f2371f048075783d022528c8dfc2">folly::NotificationQueue::Consumer::messageAvailable</a></div><div class="ttdeci">virtual void messageAvailable(MessageT &amp;&amp;message) noexcept=0</div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5665abc2c1f12d5feb5e8f9e477a2524"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">folly::NotificationQueue::Consumer::queue_</a></div><div class="ttdeci">NotificationQueue * queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00219">NotificationQueue.h:219</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
<div class="ttc" id="Likely_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00048">Likely.h:48</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a032c7c2b5fc8102923eaf7cf2eb51daf"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a032c7c2b5fc8102923eaf7cf2eb51daf">folly::NotificationQueue::syncSignalAndQueue</a></div><div class="ttdeci">void syncSignalAndQueue()</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00591">NotificationQueue.h:591</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a63bd1f4d224c201e8a8cea0ec6a10bbf"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::consumeUntilDrained </td>
          <td>(</td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>numConsumed</em> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Consume messages off the queue until it is empty. No messages may be added to the queue while it is draining, so that the process is bounded. To that end, putMessage/tryPutMessage will throw an std::runtime_error, and tryPutMessageNoThrow will return false.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the queue was drained, false otherwise. In practice, this will only fail if someone else is already draining the queue. </dd></dl>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00848">848</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00665">folly::NotificationQueue&lt; MessageT &gt;::queue_</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00408">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                                  {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">draining_</a>) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">draining_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#add13b307eeeec1b789c3f768f954e4b9">consumeMessages</a>(<span class="keyword">true</span>, numConsumed);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">draining_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_add13b307eeeec1b789c3f768f954e4b9"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#add13b307eeeec1b789c3f768f954e4b9">folly::NotificationQueue::Consumer::consumeMessages</a></div><div class="ttdeci">void consumeMessages(bool isDrain, size_t *numConsumed=nullptr) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00691">NotificationQueue.h:691</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5665abc2c1f12d5feb5e8f9e477a2524"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">folly::NotificationQueue::Consumer::queue_</a></div><div class="ttdeci">NotificationQueue * queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00219">NotificationQueue.h:219</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_affb6860839cac7a5c76e4154f103cdad"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">folly::NotificationQueue::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00668">NotificationQueue.h:668</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac0baa11215fd74b8f248e7764236c5fb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#ac0baa11215fd74b8f248e7764236c5fb">destroy()</a> requests destruction of the object.</p>
<p>This method will destroy the object after it has no more functions running higher up on the stack. (i.e., No more DestructorGuard objects exist for this object.) This method must be used instead of the destructor. </p>

<p>Reimplemented from <a class="el" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">folly::DelayedDestruction</a>.</p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00672">672</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="DelayedDestruction_8h_source.html#l00051">folly::DelayedDestruction::destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                                                  {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// If we are in the middle of a call to handlerReady(), destroyedFlagPtr_</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// will be non-nullptr.  Mark the value that it points to, so that</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// handlerReady() will know the callback is destroyed, and that it cannot</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// access any member variables anymore.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">destroyedFlagPtr_</a>) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    *<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">destroyedFlagPtr_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a043365077a8d957fe97d9de189f44127">stopConsuming</a>();</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">DelayedDestruction::destroy</a>();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a8511fac21cf518d6e808ea5fe66c50ef"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8511fac21cf518d6e808ea5fe66c50ef">folly::NotificationQueue::Consumer::destroyedFlagPtr_</a></div><div class="ttdeci">bool * destroyedFlagPtr_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00220">NotificationQueue.h:220</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a043365077a8d957fe97d9de189f44127"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a043365077a8d957fe97d9de189f44127">folly::NotificationQueue::Consumer::stopConsuming</a></div><div class="ttdeci">void stopConsuming()</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00829">NotificationQueue.h:829</a></div></div>
<div class="ttc" id="classfolly_1_1DelayedDestruction_html_a6dd27b219d5af8b2a93d6c324c65e95a"><div class="ttname"><a href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">folly::DelayedDestruction::destroy</a></div><div class="ttdeci">virtual void destroy()</div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestruction_8h_source.html#l00051">DelayedDestruction.h:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6543eca1d28dbd08912b0fbe284991cb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>* <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::getCurrentQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> that this consumer is currently consuming messages from. Returns nullptr if the consumer is not currently consuming events from any queue. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00154">154</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="NotificationQueue_8h_source.html#l00665">folly::NotificationQueue&lt; MessageT &gt;::queue_</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                               {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5665abc2c1f12d5feb5e8f9e477a2524"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">folly::NotificationQueue::Consumer::queue_</a></div><div class="ttdeci">NotificationQueue * queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00219">NotificationQueue.h:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae0411330052b443f1d16d35160adceb5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a>* <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::getEventBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00175">175</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="ThreadWheelTimekeeper_8cpp_source.html#l00059">base_</a>, <a class="el" href="ThreadPoolExecutorTest_8cpp_source.html#l00140">destroy()</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>.</p>

<p>Referenced by <a class="el" href="EventBase_8cpp_source.html#l00045">folly::EventBase::FunctionRunner::messageAvailable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                              {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a9f43b109b231165e7c8a4f1ba2a2e70e">base_</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a9f43b109b231165e7c8a4f1ba2a2e70e"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a9f43b109b231165e7c8a4f1ba2a2e70e">folly::NotificationQueue::Consumer::base_</a></div><div class="ttdeci">EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00222">NotificationQueue.h:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2072132bc281240daf0948a8f84ccbab"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::getMaxReadAtOnce </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00171">171</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                      {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">maxReadAtOnce_</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5e1502f0a56fa6a3b646c2d1f6f09ded"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">folly::NotificationQueue::Consumer::maxReadAtOnce_</a></div><div class="ttdeci">uint32_t maxReadAtOnce_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00221">NotificationQueue.h:221</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa5304eecc250a89da1b1da79735b6002"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::handlerReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>events</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#aa5304eecc250a89da1b1da79735b6002">handlerReady()</a> is invoked when the handler is ready.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">events</td><td><a class="el" href="structA.html">A</a> bitset indicating the events that are ready. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfolly_1_1EventHandler.html#a63d05aa25d4c6df8062dc54f86c0a501">folly::EventHandler</a>.</p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00685">685</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                         {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#add13b307eeeec1b789c3f768f954e4b9">consumeMessages</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;}</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_add13b307eeeec1b789c3f768f954e4b9"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#add13b307eeeec1b789c3f768f954e4b9">folly::NotificationQueue::Consumer::consumeMessages</a></div><div class="ttdeci">void consumeMessages(bool isDrain, size_t *numConsumed=nullptr) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00691">NotificationQueue.h:691</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a39640eef1f3139a38661c160110e14a2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>eventBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00803">803</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="ThreadWheelTimekeeper_8cpp_source.html#l00059">base_</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00665">folly::NotificationQueue&lt; MessageT &gt;::queue_</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                              {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  eventBase-&gt;dcheckIsInEventBaseThread();</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  assert(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  assert(!<a class="code" href="classfolly_1_1EventHandler.html#a98f877e37f8e1d74e562c9ce14e5853f">isHandlerRegistered</a>());</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  queue-&gt;checkPid();</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a9f43b109b231165e7c8a4f1ba2a2e70e">base_</a> = eventBase;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a> = queue;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">numConsumers_</a>++;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#abef5c3c5604ed129e23d2a455332f32f">ensureSignal</a>();</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a> &gt;= 0) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="classfolly_1_1EventHandler.html#a9f0c0d20c737730108c8427f1a5b0115">initHandler</a>(eventBase, <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a>);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="classfolly_1_1EventHandler.html#a9f0c0d20c737730108c8427f1a5b0115">initHandler</a>(eventBase, <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[0]);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_abef5c3c5604ed129e23d2a455332f32f"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#abef5c3c5604ed129e23d2a455332f32f">folly::NotificationQueue::ensureSignal</a></div><div class="ttdeci">void ensureSignal() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00586">NotificationQueue.h:586</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a9f43b109b231165e7c8a4f1ba2a2e70e"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a9f43b109b231165e7c8a4f1ba2a2e70e">folly::NotificationQueue::Consumer::base_</a></div><div class="ttdeci">EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00222">NotificationQueue.h:222</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a9f0c0d20c737730108c8427f1a5b0115"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a9f0c0d20c737730108c8427f1a5b0115">folly::EventHandler::initHandler</a></div><div class="ttdeci">void initHandler(EventBase *eventBase, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00156">EventHandler.h:156</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7dd56679c8471f139c105ac92b444a87"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">folly::NotificationQueue::numConsumers_</a></div><div class="ttdeci">int numConsumers_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00666">NotificationQueue.h:666</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ab73ad3ac9cc8ac604d233ba90160f415"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">folly::NotificationQueue::pipeFds_</a></div><div class="ttdeci">int pipeFds_[2]</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00662">NotificationQueue.h:662</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5665abc2c1f12d5feb5e8f9e477a2524"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">folly::NotificationQueue::Consumer::queue_</a></div><div class="ttdeci">NotificationQueue * queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00219">NotificationQueue.h:219</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a98f877e37f8e1d74e562c9ce14e5853f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a98f877e37f8e1d74e562c9ce14e5853f">folly::EventHandler::isHandlerRegistered</a></div><div class="ttdeci">bool isHandlerRegistered() const </div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00112">EventHandler.h:112</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_afb16501dd3447be406a08420c656e289"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">folly::NotificationQueue::eventfd_</a></div><div class="ttdeci">int eventfd_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00661">NotificationQueue.h:661</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64954367cd70537e087d9ded1288664d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename TCallback &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::unique_ptr&lt;<a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">DelayedDestruction::Destructor</a>&gt; <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::make </td>
          <td>(</td>
          <td class="paramtype">TCallback &amp;&amp;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae0e03d013fd1d2a1891eea0f396d0471"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename TCallback &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; typename <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>&lt;MessageT&gt;::<a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">DelayedDestruction::Destructor</a>&gt; <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::make </td>
          <td>(</td>
          <td class="paramtype">TCallback &amp;&amp;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00931">931</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="ClientProtocol_8cpp_source.html#l00777">type</a>.</p>
<div class="fragment"><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                                                              {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">return</span> std::unique_ptr&lt;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      NotificationQueue&lt;MessageT&gt;::Consumer,</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      DelayedDestruction::Destructor&gt;(</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="keyword">new</span> detail::notification_queue_consumer_wrapper&lt;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;          MessageT,</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;          <span class="keyword">typename</span> <a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">std::decay&lt;TCallback&gt;::type</a>&gt;(</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;          std::forward&lt;TCallback&gt;(callback)));</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div><div class="ttc" id="ClientProtocol_8cpp_html_afb6f25e8ca4d7adb175ad413430bbb90"><div class="ttname"><a href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a></div><div class="ttdeci">PskType type</div><div class="ttdef"><b>Definition:</b> <a href="ClientProtocol_8cpp_source.html#l00777">ClientProtocol.cpp:777</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8403f2371f048075783d022528c8dfc2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::messageAvailable </td>
          <td>(</td>
          <td class="paramtype">MessageT &amp;&amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8403f2371f048075783d022528c8dfc2">messageAvailable()</a> will be invoked whenever a new message is available from the pipe. </p>

<p>Implemented in <a class="el" href="structfolly_1_1detail_1_1notification__queue__consumer__wrapper.html#abd6af7abc4345ffe037a65dddd4569bb">folly::detail::notification_queue_consumer_wrapper&lt; MessageT, TCallback &gt;</a>.</p>

</div>
</div>
<a class="anchor" id="a489f5ba7594bf9a31f53ecbb1ffbd7c9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::setActive </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shouldLock</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00199">199</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="init_2Init_8cpp_source.html#l00034">folly::init()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00665">folly::NotificationQueue&lt; MessageT &gt;::queue_</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                                         {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#adead3e4788fa27b026d8143c70c09f43">active_</a> = active;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">if</span> (shouldLock) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>.<a class="code" href="classfolly_1_1SpinLock.html#a23d73bc7761a1b05c0a44bd48421450f">lock</a>();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#adead3e4788fa27b026d8143c70c09f43">active_</a> &amp;&amp; active) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        ++<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">numActiveConsumers_</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#adead3e4788fa27b026d8143c70c09f43">active_</a> &amp;&amp; !active) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        --<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">numActiveConsumers_</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#adead3e4788fa27b026d8143c70c09f43">active_</a> = active;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">if</span> (shouldLock) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>.<a class="code" href="classfolly_1_1SpinLock.html#a03f509e513897f8a7782f68ab225a71e">unlock</a>();</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLock_html_a03f509e513897f8a7782f68ab225a71e"><div class="ttname"><a href="classfolly_1_1SpinLock.html#a03f509e513897f8a7782f68ab225a71e">folly::SpinLock::unlock</a></div><div class="ttdeci">FOLLY_ALWAYS_INLINE void unlock() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00052">SpinLock.h:52</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_aa561db2730a6902ceb950966ca5f2463"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">folly::NotificationQueue::numActiveConsumers_</a></div><div class="ttdeci">std::atomic&lt; int &gt; numActiveConsumers_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00667">NotificationQueue.h:667</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLock_html_a23d73bc7761a1b05c0a44bd48421450f"><div class="ttname"><a href="classfolly_1_1SpinLock.html#a23d73bc7761a1b05c0a44bd48421450f">folly::SpinLock::lock</a></div><div class="ttdeci">FOLLY_ALWAYS_INLINE void lock() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00049">SpinLock.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5665abc2c1f12d5feb5e8f9e477a2524"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">folly::NotificationQueue::Consumer::queue_</a></div><div class="ttdeci">NotificationQueue * queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00219">NotificationQueue.h:219</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_adead3e4788fa27b026d8143c70c09f43"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#adead3e4788fa27b026d8143c70c09f43">folly::NotificationQueue::Consumer::active_</a></div><div class="ttdeci">bool active_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00223">NotificationQueue.h:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5d50d4d03ad7c4fea23922175cf1f8e6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::setMaxReadAtOnce </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>maxAtOnce</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set a limit on how many messages this consumer will read each iteration around the event loop.</p>
<p>This helps rate-limit how much work the <a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a> will do each event loop iteration, to prevent it from starving other event handlers.</p>
<p><a class="el" href="structA.html">A</a> limit of 0 means no limit will be enforced. If unset, the limit defaults to kDefaultMaxReadAtOnce (defined to 10 above). </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00168">168</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00275">QueueTest::maxReadAtOnce()</a>, <a class="el" href="AsyncServerSocket_8cpp_source.html#l00082">folly::AsyncServerSocket::RemoteAcceptor::start()</a>, and <a class="el" href="NotificationQueueTest_8cpp_source.html#l00408">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                              {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">maxReadAtOnce_</a> = maxAtOnce;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div><div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5e1502f0a56fa6a3b646c2d1f6f09ded"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5e1502f0a56fa6a3b646c2d1f6f09ded">folly::NotificationQueue::Consumer::maxReadAtOnce_</a></div><div class="ttdeci">uint32_t maxReadAtOnce_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00221">NotificationQueue.h:221</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a863f5ff25d0e48eb6f95dcfdf5e99101"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::startConsuming </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>eventBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Begin consuming messages from the specified queue.</p>
<p><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a8403f2371f048075783d022528c8dfc2">messageAvailable()</a> will be called whenever a message is available. This consumer will continue to consume messages until <a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a043365077a8d957fe97d9de189f44127">stopConsuming()</a> is called.</p>
<p><a class="el" href="structA.html">A</a> <a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a> may only consume messages from a single <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> at a time. <a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a863f5ff25d0e48eb6f95dcfdf5e99101">startConsuming()</a> should not be called if this consumer is already consuming. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00114">114</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="init_2Init_8cpp_source.html#l00034">folly::init()</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00275">QueueTest::maxReadAtOnce()</a>, <a class="el" href="NotificationQueueTest_8cpp_source.html#l00138">QueueTest::multiConsumer()</a>, <a class="el" href="NotificationQueueTest_8cpp_source.html#l00093">QueueTest::putMessages()</a>, <a class="el" href="NotificationQueueTest_8cpp_source.html#l00070">QueueTest::sendOne()</a>, and <a class="el" href="NotificationQueueTest_8cpp_source.html#l00408">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                                        {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a39640eef1f3139a38661c160110e14a2">init</a>(eventBase, queue);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="classfolly_1_1EventHandler.html#a202afaf81f9a36978938fd39e8e2fb87">registerHandler</a>(<a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">READ</a> | <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572">PERSIST</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572">folly::EventHandler::PERSIST</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00046">EventHandler.h:46</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a39640eef1f3139a38661c160110e14a2"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a39640eef1f3139a38661c160110e14a2">folly::NotificationQueue::Consumer::init</a></div><div class="ttdeci">void init(EventBase *eventBase, NotificationQueue *queue)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00803">NotificationQueue.h:803</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a202afaf81f9a36978938fd39e8e2fb87"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a202afaf81f9a36978938fd39e8e2fb87">folly::EventHandler::registerHandler</a></div><div class="ttdeci">bool registerHandler(uint16_t events)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00100">EventHandler.h:100</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">folly::EventHandler::READ</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00043">EventHandler.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a606f53726cf7b08369b3a1ae02d4faa7"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::startConsumingInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>eventBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> *&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Same as above but registers this event handler as internal so that it doesn't count towards the pending reader count for the IOLoop. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00123">123</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="init_2Init_8cpp_source.html#l00034">folly::init()</a>, and <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                  {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a39640eef1f3139a38661c160110e14a2">init</a>(eventBase, queue);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="classfolly_1_1EventHandler.html#a4a8d838790a5b3ff9f7b074378f6cae2">registerInternalHandler</a>(<a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">READ</a> | <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572">PERSIST</a>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div><div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572">folly::EventHandler::PERSIST</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00046">EventHandler.h:46</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a4a8d838790a5b3ff9f7b074378f6cae2"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a4a8d838790a5b3ff9f7b074378f6cae2">folly::EventHandler::registerInternalHandler</a></div><div class="ttdeci">bool registerInternalHandler(uint16_t events)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00183">EventHandler.h:183</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a39640eef1f3139a38661c160110e14a2"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a39640eef1f3139a38661c160110e14a2">folly::NotificationQueue::Consumer::init</a></div><div class="ttdeci">void init(EventBase *eventBase, NotificationQueue *queue)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00803">NotificationQueue.h:803</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">folly::EventHandler::READ</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00043">EventHandler.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a043365077a8d957fe97d9de189f44127"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::stopConsuming </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop consuming messages.</p>
<p><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a863f5ff25d0e48eb6f95dcfdf5e99101">startConsuming()</a> may be called again to resume consumption of messages at a later point in time. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00829">829</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>References <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00665">folly::NotificationQueue&lt; MessageT &gt;::queue_</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00138">QueueTest::multiConsumer()</a>, <a class="el" href="NotificationQueueTest_8cpp_source.html#l00093">QueueTest::putMessages()</a>, and <a class="el" href="NotificationQueueTest_8cpp_source.html#l00070">QueueTest::sendOne()</a>.</p>
<div class="fragment"><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                                                        {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    assert(!<a class="code" href="classfolly_1_1EventHandler.html#a98f877e37f8e1d74e562c9ce14e5853f">isHandlerRegistered</a>());</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a>-&gt;<a class="code" href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">numConsumers_</a>--;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">setActive</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  assert(<a class="code" href="classfolly_1_1EventHandler.html#a98f877e37f8e1d74e562c9ce14e5853f">isHandlerRegistered</a>());</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <a class="code" href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">unregisterHandler</a>();</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <a class="code" href="classfolly_1_1EventHandler.html#ad88a36559181920dce709d1836108eab">detachEventBase</a>();</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <a class="code" href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">queue_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7dd56679c8471f139c105ac92b444a87"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">folly::NotificationQueue::numConsumers_</a></div><div class="ttdeci">int numConsumers_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00666">NotificationQueue.h:666</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a72e295058c1ffc6a8506120c061dc991"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">folly::EventHandler::unregisterHandler</a></div><div class="ttdeci">void unregisterHandler()</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00103">EventHandler.cpp:103</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_ad88a36559181920dce709d1836108eab"><div class="ttname"><a href="classfolly_1_1EventHandler.html#ad88a36559181920dce709d1836108eab">folly::EventHandler::detachEventBase</a></div><div class="ttdeci">void detachEventBase()</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00119">EventHandler.cpp:119</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a489f5ba7594bf9a31f53ecbb1ffbd7c9"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a489f5ba7594bf9a31f53ecbb1ffbd7c9">folly::NotificationQueue::Consumer::setActive</a></div><div class="ttdeci">void setActive(bool active, bool shouldLock=false)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00199">NotificationQueue.h:199</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_1_1Consumer_html_a5665abc2c1f12d5feb5e8f9e477a2524"><div class="ttname"><a href="classfolly_1_1NotificationQueue_1_1Consumer.html#a5665abc2c1f12d5feb5e8f9e477a2524">folly::NotificationQueue::Consumer::queue_</a></div><div class="ttdeci">NotificationQueue * queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00219">NotificationQueue.h:219</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a98f877e37f8e1d74e562c9ce14e5853f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a98f877e37f8e1d74e562c9ce14e5853f">folly::EventHandler::isHandlerRegistered</a></div><div class="ttdeci">bool isHandlerRegistered() const </div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00112">EventHandler.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="adead3e4788fa27b026d8143c70c09f43"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::active_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00223">223</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9f43b109b231165e7c8a4f1ba2a2e70e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a>* <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::base_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00222">222</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8511fac21cf518d6e808ea5fe66c50ef"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool* <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::destroyedFlagPtr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00220">220</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5e1502f0a56fa6a3b646c2d1f6f09ded"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::maxReadAtOnce_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00221">221</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5665abc2c1f12d5feb5e8f9e477a2524"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>* <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::Consumer::queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00219">219</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>proxygen/folly/folly/io/async/<a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a></li><li class="navelem"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
