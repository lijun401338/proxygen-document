<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::NotificationQueue&lt; MessageT &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1NotificationQueue.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1NotificationQueue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::NotificationQueue&lt; MessageT &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="EventBase_8h_source.html">EventBase.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html">Consumer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1NotificationQueue_1_1Node.html">Node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue_1_1SimpleConsumer.html">SimpleConsumer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:abe52eeab87904e0fc0f70445c3fc97de"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97de">FdType</a> { <a class="el" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd">FdType::PIPE</a>
 }</td></tr>
<tr class="separator:abe52eeab87904e0fc0f70445c3fc97de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1142f4f94c0b782ec1f36db0e140dcbe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a1142f4f94c0b782ec1f36db0e140dcbe">NotificationQueue</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> maxSize=0, <a class="el" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97de">FdType</a> fdType=<a class="el" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd">FdType::PIPE</a>)</td></tr>
<tr class="separator:a1142f4f94c0b782ec1f36db0e140dcbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c2c5c3db581dd4de81f9455f24bdac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a90c2c5c3db581dd4de81f9455f24bdac">~NotificationQueue</a> ()</td></tr>
<tr class="separator:a90c2c5c3db581dd4de81f9455f24bdac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e34278f25d21f793a4ac9170c14270b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a0e34278f25d21f793a4ac9170c14270b">setMaxQueueSize</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>)</td></tr>
<tr class="separator:a0e34278f25d21f793a4ac9170c14270b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cafd6b565ea4c768926f5144fe71132"><td class="memTemplParams" colspan="2">template&lt;typename MessageTT &gt; </td></tr>
<tr class="memitem:a0cafd6b565ea4c768926f5144fe71132"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a0cafd6b565ea4c768926f5144fe71132">tryPutMessage</a> (MessageTT &amp;&amp;<a class="el" href="structmessage.html">message</a>)</td></tr>
<tr class="separator:a0cafd6b565ea4c768926f5144fe71132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237dd8599a83b3e52206306731ad0c33"><td class="memTemplParams" colspan="2">template&lt;typename MessageTT &gt; </td></tr>
<tr class="memitem:a237dd8599a83b3e52206306731ad0c33"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a237dd8599a83b3e52206306731ad0c33">tryPutMessageNoThrow</a> (MessageTT &amp;&amp;<a class="el" href="structmessage.html">message</a>)</td></tr>
<tr class="separator:a237dd8599a83b3e52206306731ad0c33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add1de011f690908b0582ae97a9dd981e"><td class="memTemplParams" colspan="2">template&lt;typename MessageTT &gt; </td></tr>
<tr class="memitem:add1de011f690908b0582ae97a9dd981e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#add1de011f690908b0582ae97a9dd981e">putMessage</a> (MessageTT &amp;&amp;<a class="el" href="structmessage.html">message</a>)</td></tr>
<tr class="separator:add1de011f690908b0582ae97a9dd981e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed65dca418bd23f142b791938ac00527"><td class="memTemplParams" colspan="2">template&lt;typename InputIteratorT &gt; </td></tr>
<tr class="memitem:aed65dca418bd23f142b791938ac00527"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#aed65dca418bd23f142b791938ac00527">putMessages</a> (InputIteratorT first, InputIteratorT last)</td></tr>
<tr class="separator:aed65dca418bd23f142b791938ac00527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66adf52b91f64f6db0d2e5c9abe5883e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a66adf52b91f64f6db0d2e5c9abe5883e">tryConsume</a> (MessageT &amp;result)</td></tr>
<tr class="separator:a66adf52b91f64f6db0d2e5c9abe5883e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba28e01a44eb0ce7cc8bd1ac516b617"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a6ba28e01a44eb0ce7cc8bd1ac516b617">size</a> () const </td></tr>
<tr class="separator:a6ba28e01a44eb0ce7cc8bd1ac516b617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c03efd14bd0c6021a45ea4345d709f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a7c03efd14bd0c6021a45ea4345d709f6">checkPid</a> () const </td></tr>
<tr class="separator:a7c03efd14bd0c6021a45ea4345d709f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a1a380c9116237c097a93acaa51b07756"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a1a380c9116237c097a93acaa51b07756">NotificationQueue</a> (<a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> const &amp;)=delete</td></tr>
<tr class="separator:a1a380c9116237c097a93acaa51b07756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d1b104d9e4636cb76d9f9c1c4115a8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a2d1b104d9e4636cb76d9f9c1c4115a8a">operator=</a> (<a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> const &amp;)=delete</td></tr>
<tr class="separator:a2d1b104d9e4636cb76d9f9c1c4115a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a217322ec2b3fc9465dc9d0500dbdeff9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a217322ec2b3fc9465dc9d0500dbdeff9">checkQueueSize</a> (size_t maxSize, bool throws=true) const </td></tr>
<tr class="separator:a217322ec2b3fc9465dc9d0500dbdeff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65938d0bed8266e9c436efe24f46ec81"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a65938d0bed8266e9c436efe24f46ec81">checkDraining</a> (bool throws=true)</td></tr>
<tr class="separator:a65938d0bed8266e9c436efe24f46ec81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca5c5e8e37adb42770ab02e8ca4bf010"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">ensureSignalLocked</a> () const </td></tr>
<tr class="separator:aca5c5e8e37adb42770ab02e8ca4bf010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8acae516ac8381ac5a44dd5dcd8db7c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a8acae516ac8381ac5a44dd5dcd8db7c2">drainSignalsLocked</a> ()</td></tr>
<tr class="separator:a8acae516ac8381ac5a44dd5dcd8db7c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef5c3c5604ed129e23d2a455332f32f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#abef5c3c5604ed129e23d2a455332f32f">ensureSignal</a> () const </td></tr>
<tr class="separator:abef5c3c5604ed129e23d2a455332f32f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032c7c2b5fc8102923eaf7cf2eb51daf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a032c7c2b5fc8102923eaf7cf2eb51daf">syncSignalAndQueue</a> ()</td></tr>
<tr class="separator:a032c7c2b5fc8102923eaf7cf2eb51daf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66830fe62f7b8ffdac6d4e494cc4b026"><td class="memTemplParams" colspan="2">template&lt;typename MessageTT &gt; </td></tr>
<tr class="memitem:a66830fe62f7b8ffdac6d4e494cc4b026"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a66830fe62f7b8ffdac6d4e494cc4b026">putMessageImpl</a> (MessageTT &amp;&amp;<a class="el" href="structmessage.html">message</a>, size_t maxSize, bool throws=true)</td></tr>
<tr class="separator:a66830fe62f7b8ffdac6d4e494cc4b026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d30faf798b9f96feae2592bdc182149"><td class="memTemplParams" colspan="2">template&lt;typename InputIteratorT &gt; </td></tr>
<tr class="memitem:a2d30faf798b9f96feae2592bdc182149"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a2d30faf798b9f96feae2592bdc182149">putMessagesImpl</a> (InputIteratorT first, InputIteratorT last, std::input_iterator_tag)</td></tr>
<tr class="separator:a2d30faf798b9f96feae2592bdc182149"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af385e5046ed3ef56d98133cf965a50ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1SpinLock.html">folly::SpinLock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a></td></tr>
<tr class="separator:af385e5046ed3ef56d98133cf965a50ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6307c8bcb02e2cc8795653c149aac6a6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">signal_</a> {false}</td></tr>
<tr class="separator:a6307c8bcb02e2cc8795653c149aac6a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb16501dd3447be406a08420c656e289"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a></td></tr>
<tr class="separator:afb16501dd3447be406a08420c656e289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab73ad3ac9cc8ac604d233ba90160f415"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a> [2]</td></tr>
<tr class="separator:ab73ad3ac9cc8ac604d233ba90160f415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad07d94db4c7e706fbfce197e74ffd690"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">advisoryMaxQueueSize_</a></td></tr>
<tr class="separator:ad07d94db4c7e706fbfce197e74ffd690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a768dad7ae87156958ac3b5c14acf3"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a03a768dad7ae87156958ac3b5c14acf3">pid_</a></td></tr>
<tr class="separator:a03a768dad7ae87156958ac3b5c14acf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7658b7003e34da8d5815550e722910b6"><td class="memItemLeft" align="right" valign="top">boost::intrusive::slist&lt; <a class="el" href="structfolly_1_1NotificationQueue_1_1Node.html">Node</a>, boost::intrusive::cache_last&lt; true &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a></td></tr>
<tr class="separator:a7658b7003e34da8d5815550e722910b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd56679c8471f139c105ac92b444a87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">numConsumers_</a> {0}</td></tr>
<tr class="separator:a7dd56679c8471f139c105ac92b444a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa561db2730a6902ceb950966ca5f2463"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">numActiveConsumers_</a> {0}</td></tr>
<tr class="separator:aa561db2730a6902ceb950966ca5f2463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb6860839cac7a5c76e4154f103cdad"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">draining_</a> {false}</td></tr>
<tr class="separator:affb6860839cac7a5c76e4154f103cdad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename MessageT&gt;<br />
class folly::NotificationQueue&lt; MessageT &gt;</h3>

<p><a class="el" href="structA.html">A</a> producer-consumer queue for passing messages between <a class="el" href="classfolly_1_1EventBase.html">EventBase</a> threads.</p>
<p>Messages can be added to the queue from any thread. Multiple consumers may listen to the queue from multiple <a class="el" href="classfolly_1_1EventBase.html">EventBase</a> threads.</p>
<p><a class="el" href="structA.html">A</a> <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> may not be destroyed while there are still consumers registered to receive events from the queue. It is the user's responsibility to ensure that all consumers are unregistered before the queue is destroyed.</p>
<p>MessageT should be MoveConstructible (i.e., must support either a move constructor or a copy constructor, or both). Ideally it's move constructor (or copy constructor if no move constructor is provided) should never throw exceptions. If the constructor may throw, the consumers could end up spinning trying to move a message off the queue and failing, and then retrying. </p>

<p>Definition at line <a class="el" href="EventBase_8h_source.html#l00056">56</a> of file <a class="el" href="EventBase_8h_source.html">EventBase.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="abe52eeab87904e0fc0f70445c3fc97de"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97de">folly::NotificationQueue::FdType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd"></a>PIPE&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00247">247</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    PIPE,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">#ifdef FOLLY_HAVE_EVENTFD</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    EVENTFD,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  };</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1142f4f94c0b782ec1f36db0e140dcbe"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::<a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>maxSize</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97de">FdType</a>&#160;</td>
          <td class="paramname"><em>fdType</em> = <code><a class="el" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd">FdType::PIPE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>.</p>
<p>If the maxSize parameter is specified, this sets the maximum queue size that will be enforced by <a class="el" href="classfolly_1_1NotificationQueue.html#a0cafd6b565ea4c768926f5144fe71132">tryPutMessage()</a>. (This size is advisory, and may be exceeded if producers explicitly use <a class="el" href="classfolly_1_1NotificationQueue.html#add1de011f690908b0582ae97a9dd981e">putMessage()</a> instead of <a class="el" href="classfolly_1_1NotificationQueue.html#a0cafd6b565ea4c768926f5144fe71132">tryPutMessage()</a>.)</p>
<p>The fdType parameter determines the type of file descriptor used internally to signal message availability. The default (eventfd) is preferable for performance and because it won't fail when the queue gets too long. It is not available on on older and non-linux kernels, however. In this case the code will fall back to using a pipe, the parameter is mostly for testing purposes. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00269">269</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00474">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::checkPid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      : <a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a>(-1),</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>{-1, -1},</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">advisoryMaxQueueSize_</a>(maxSize),</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue.html#a03a768dad7ae87156958ac3b5c14acf3">pid_</a>(pid_t(getpid())) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#ifdef FOLLY_HAVE_EVENTFD</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (fdType == FdType::EVENTFD) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a> = <a class="code" href="EventFDWrapper_8h.html#a3d97a6048e1ab7d407c1936ecf3cadc8">eventfd</a>(0, <a class="code" href="EventFDWrapper_8h.html#a9e93d8eae633734dfeb29e24a1f3a7c0a68782b351155b57b796a5628a18a03e8">EFD_CLOEXEC</a> | <a class="code" href="EventFDWrapper_8h.html#a9e93d8eae633734dfeb29e24a1f3a7c0a06cd6c7f9a990f31d639e77d116deae6">EFD_NONBLOCK</a>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a> == -1) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (errno == ENOSYS || errno == EINVAL) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          <span class="comment">// eventfd not availalble</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;failed to create eventfd for NotificationQueue: &quot;</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                     &lt;&lt; errno &lt;&lt; <span class="stringliteral">&quot;, falling back to pipe mode (is your kernel &quot;</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;&gt; 2.6.30?)&quot;</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;          fdType = <a class="code" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd">FdType::PIPE</a>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          <span class="comment">// some other error</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;          <a class="code" href="namespacefolly.html#a59da19f447b3f5da47b9e278016758c0">folly::throwSystemError</a>(</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;              <span class="stringliteral">&quot;Failed to create eventfd for &quot;</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;              <span class="stringliteral">&quot;NotificationQueue&quot;</span>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;              errno);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (fdType == <a class="code" href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd">FdType::PIPE</a>) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="composition__2_8cpp.html#a352f0fb3a18b03b24f090615f02c8b40">pipe</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>)) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="namespacefolly.html#a59da19f447b3f5da47b9e278016758c0">folly::throwSystemError</a>(</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="stringliteral">&quot;Failed to create pipe for NotificationQueue&quot;</span>, errno);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">try</span> {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// put both ends of the pipe into non-blocking mode</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">if</span> (fcntl(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[0], F_SETFL, O_RDONLY | O_NONBLOCK) != 0) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          <a class="code" href="namespacefolly.html#a59da19f447b3f5da47b9e278016758c0">folly::throwSystemError</a>(</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;              <span class="stringliteral">&quot;failed to put NotificationQueue pipe read &quot;</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;              <span class="stringliteral">&quot;endpoint into non-blocking mode&quot;</span>,</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;              errno);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">if</span> (fcntl(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[1], F_SETFL, O_WRONLY | O_NONBLOCK) != 0) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          <a class="code" href="namespacefolly.html#a59da19f447b3f5da47b9e278016758c0">folly::throwSystemError</a>(</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;              <span class="stringliteral">&quot;failed to put NotificationQueue pipe write &quot;</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;              <span class="stringliteral">&quot;endpoint into non-blocking mode&quot;</span>,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;              errno);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <a class="code" href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">::close</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[0]);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">::close</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[1]);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div><div class="ttc" id="EventFDWrapper_8h_html_a3d97a6048e1ab7d407c1936ecf3cadc8"><div class="ttname"><a href="EventFDWrapper_8h.html#a3d97a6048e1ab7d407c1936ecf3cadc8">eventfd</a></div><div class="ttdeci">#define eventfd(initval, flags)</div><div class="ttdef"><b>Definition:</b> <a href="EventFDWrapper_8h_source.html#l00074">EventFDWrapper.h:74</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ad07d94db4c7e706fbfce197e74ffd690"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">folly::NotificationQueue::advisoryMaxQueueSize_</a></div><div class="ttdeci">uint32_t advisoryMaxQueueSize_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00663">NotificationQueue.h:663</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ab73ad3ac9cc8ac604d233ba90160f415"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">folly::NotificationQueue::pipeFds_</a></div><div class="ttdeci">int pipeFds_[2]</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00662">NotificationQueue.h:662</a></div></div>
<div class="ttc" id="EventFDWrapper_8h_html_a9e93d8eae633734dfeb29e24a1f3a7c0a68782b351155b57b796a5628a18a03e8"><div class="ttname"><a href="EventFDWrapper_8h.html#a9e93d8eae633734dfeb29e24a1f3a7c0a68782b351155b57b796a5628a18a03e8">EFD_CLOEXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="EventFDWrapper_8h_source.html#l00065">EventFDWrapper.h:65</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a03a768dad7ae87156958ac3b5c14acf3"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a03a768dad7ae87156958ac3b5c14acf3">folly::NotificationQueue::pid_</a></div><div class="ttdeci">pid_t pid_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00664">NotificationQueue.h:664</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#abe52eeab87904e0fc0f70445c3fc97dea6e2dc574a6f6213a0bdee18a31b714fd">folly::NotificationQueue::FdType::PIPE</a></div></div>
<div class="ttc" id="namespacefolly_html_a59da19f447b3f5da47b9e278016758c0"><div class="ttname"><a href="namespacefolly.html#a59da19f447b3f5da47b9e278016758c0">folly::throwSystemError</a></div><div class="ttdeci">void throwSystemError(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="folly_2folly_2Exception_8h_source.html#l00076">Exception.h:76</a></div></div>
<div class="ttc" id="EventFDWrapper_8h_html_a9e93d8eae633734dfeb29e24a1f3a7c0a06cd6c7f9a990f31d639e77d116deae6"><div class="ttname"><a href="EventFDWrapper_8h.html#a9e93d8eae633734dfeb29e24a1f3a7c0a06cd6c7f9a990f31d639e77d116deae6">EFD_NONBLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="EventFDWrapper_8h_source.html#l00067">EventFDWrapper.h:67</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a27d9201e6386937ffded3bfd86f995aa"><div class="ttname"><a href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">folly::netops::close</a></div><div class="ttdeci">int close(NetworkSocket s)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00090">NetOps.cpp:90</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_a352f0fb3a18b03b24f090615f02c8b40"><div class="ttname"><a href="composition__2_8cpp.html#a352f0fb3a18b03b24f090615f02c8b40">pipe</a></div><div class="ttdeci">void pipe(CPUExecutor cpu, IOExecutor io)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00074">composition_2.cpp:74</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_afb16501dd3447be406a08420c656e289"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">folly::NotificationQueue::eventfd_</a></div><div class="ttdeci">int eventfd_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00661">NotificationQueue.h:661</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a90c2c5c3db581dd4de81f9455f24bdac"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::~<a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00328">328</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                       {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    std::unique_ptr&lt;Node&gt; <a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.empty()) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      data.reset(&amp;<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.front());</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.pop_front();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a> &gt;= 0) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">::close</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a> = -1;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[0] &gt;= 0) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">::close</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[0]);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[0] = -1;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[1] &gt;= 0) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">::close</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[1]);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[1] = -1;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_ab73ad3ac9cc8ac604d233ba90160f415"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">folly::NotificationQueue::pipeFds_</a></div><div class="ttdeci">int pipeFds_[2]</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00662">NotificationQueue.h:662</a></div></div>
<div class="ttc" id="namespacefolly_html_a23ca01703d6715fb172f4188faa73dc9"><div class="ttname"><a href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">folly::data</a></div><div class="ttdeci">constexpr auto data(C &amp;c) -&gt; decltype(c.data())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00071">Access.h:71</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a27d9201e6386937ffded3bfd86f995aa"><div class="ttname"><a href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">folly::netops::close</a></div><div class="ttdeci">int close(NetworkSocket s)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00090">NetOps.cpp:90</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_afb16501dd3447be406a08420c656e289"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">folly::NotificationQueue::eventfd_</a></div><div class="ttdeci">int eventfd_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00661">NotificationQueue.h:661</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1a380c9116237c097a93acaa51b07756"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::<a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>&lt; MessageT &gt; const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a65938d0bed8266e9c436efe24f46ec81"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::checkDraining </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>throws</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00496">496</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00626">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessagesImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                                {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">draining_</a> &amp;&amp; <span class="keywordflow">throws</span>)) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;queue is draining, cannot add message&quot;</span>);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">draining_</a>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_affb6860839cac7a5c76e4154f103cdad"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#affb6860839cac7a5c76e4154f103cdad">folly::NotificationQueue::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00668">NotificationQueue.h:668</a></div></div>
<div class="ttc" id="Likely_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00048">Likely.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c03efd14bd0c6021a45ea4345d709f6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::checkPid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check that the <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> is being used from the correct process.</p>
<p>If you create a <a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a> in one process, then fork, and try to send messages to the queue from the child process, you're going to have a bad time. Unfortunately users have (accidentally) run into this.</p>
<p>Because we use an eventfd/pipe, the child process can actually signal the parent process that an event is ready. However, it can't put anything on the parent's queue, so the parent wakes up and finds an empty queue. This check ensures that we catch the problem in the misbehaving child process code, and crash before signalling the parent process. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00474">474</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00626">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessagesImpl()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00431">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryConsume()</a>.</p>
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                        {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    CHECK_EQ(<a class="code" href="classfolly_1_1NotificationQueue.html#a03a768dad7ae87156958ac3b5c14acf3">pid_</a>, pid_t(getpid()));</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_a03a768dad7ae87156958ac3b5c14acf3"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a03a768dad7ae87156958ac3b5c14acf3">folly::NotificationQueue::pid_</a></div><div class="ttdeci">pid_t pid_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00664">NotificationQueue.h:664</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a217322ec2b3fc9465dc9d0500dbdeff9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::checkQueueSize </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>throws</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00483">483</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                                                       {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    DCHECK(0 == <a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>.<a class="code" href="classfolly_1_1SpinLock.html#aa6ea4a5be8064491009247806c8cf153">try_lock</a>());</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (maxSize &gt; 0 &amp;&amp; <a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.size() &gt;= maxSize) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordflow">throws</span>) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">throw</span> std::overflow_error(</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="stringliteral">&quot;unable to add message to NotificationQueue: &quot;</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="stringliteral">&quot;queue is full&quot;</span>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLock_html_aa6ea4a5be8064491009247806c8cf153"><div class="ttname"><a href="classfolly_1_1SpinLock.html#aa6ea4a5be8064491009247806c8cf153">folly::SpinLock::try_lock</a></div><div class="ttdeci">FOLLY_ALWAYS_INLINE bool try_lock() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00055">SpinLock.h:55</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8acae516ac8381ac5a44dd5dcd8db7c2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::drainSignalsLocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00553">553</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00591">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::syncSignalAndQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                            {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    ssize_t bytes_read = 0;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a> &gt; 0) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="SPDYCodec_8cpp.html#a36bd74109f547f7f8198faf5a12d2879">message</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      bytes_read = <a class="code" href="namespacefolly.html#a77ddd583d220e05a3d7218109b6409e1">readNoInt</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a>, &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      CHECK(bytes_read != -1 || errno == EAGAIN);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="comment">// There should only be one byte in the pipe. To avoid potential leaks we</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="comment">// still drain.</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> message[32];</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      ssize_t result;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">while</span> ((result = <a class="code" href="namespacefolly.html#a77ddd583d220e05a3d7218109b6409e1">readNoInt</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[0], &amp;message, <span class="keyword">sizeof</span>(message))) !=</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;             -1) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        bytes_read += result;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      CHECK(result == -1 &amp;&amp; errno == EAGAIN);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      LOG_IF(ERROR, bytes_read &gt; 1)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;[NotificationQueue] Unexpected state while draining pipe: bytes_read=&quot;</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          &lt;&lt; bytes_read &lt;&lt; <span class="stringliteral">&quot; bytes, expected &lt;= 1&quot;</span>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    LOG_IF(ERROR, (<a class="code" href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">signal_</a> &amp;&amp; bytes_read == 0) || (!<a class="code" href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">signal_</a> &amp;&amp; bytes_read &gt; 0))</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;[NotificationQueue] Unexpected state while draining signals: signal_=&quot;</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        &lt;&lt; <a class="code" href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">signal_</a> &lt;&lt; <span class="stringliteral">&quot; bytes_read=&quot;</span> &lt;&lt; bytes_read;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">signal_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor">#ifdef __ANDROID__</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (bytes_read &gt; 0) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      eventBytes_ -= bytes_read;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_a6307c8bcb02e2cc8795653c149aac6a6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">folly::NotificationQueue::signal_</a></div><div class="ttdeci">bool signal_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00660">NotificationQueue.h:660</a></div></div>
<div class="ttc" id="namespacefolly_html_a77ddd583d220e05a3d7218109b6409e1"><div class="ttname"><a href="namespacefolly.html#a77ddd583d220e05a3d7218109b6409e1">folly::readNoInt</a></div><div class="ttdeci">ssize_t readNoInt(int fd, void *buf, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="FileUtil_8cpp_source.html#l00102">FileUtil.cpp:102</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ab73ad3ac9cc8ac604d233ba90160f415"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">folly::NotificationQueue::pipeFds_</a></div><div class="ttdeci">int pipeFds_[2]</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00662">NotificationQueue.h:662</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_a36bd74109f547f7f8198faf5a12d2879"><div class="ttname"><a href="SPDYCodec_8cpp.html#a36bd74109f547f7f8198faf5a12d2879">message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00133">SPDYCodec.cpp:133</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_afb16501dd3447be406a08420c656e289"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">folly::NotificationQueue::eventfd_</a></div><div class="ttdeci">int eventfd_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00661">NotificationQueue.h:661</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abef5c3c5604ed129e23d2a455332f32f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::ensureSignal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00586">586</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                            {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">ensureSignalLocked</a>();</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_aca5c5e8e37adb42770ab02e8ca4bf010"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">folly::NotificationQueue::ensureSignalLocked</a></div><div class="ttdeci">void ensureSignalLocked() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00509">NotificationQueue.h:509</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aca5c5e8e37adb42770ab02e8ca4bf010"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::ensureSignalLocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00509">509</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00586">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::ensureSignal()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00626">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessagesImpl()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00591">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::syncSignalAndQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                  {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// semantics: empty fd == empty queue &lt;=&gt; !signal_</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">signal_</a>) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    ssize_t bytes_written = 0;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">size_t</span> bytes_expected = 0;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a> &gt;= 0) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// eventfd(2) dictates that we must write a 64-bit integer</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> signal = 1;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        bytes_expected = <span class="keyword">sizeof</span>(signal);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        bytes_written = <a class="code" href="namespacefizz_1_1detail.html#a40ead2543c07ad500214ec9dd760b706">::write</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">eventfd_</a>, &amp;signal, bytes_expected);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> signal = 1;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        bytes_expected = <span class="keyword">sizeof</span>(signal);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        bytes_written = <a class="code" href="namespacefizz_1_1detail.html#a40ead2543c07ad500214ec9dd760b706">::write</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">pipeFds_</a>[1], &amp;signal, bytes_expected);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    } <span class="keywordflow">while</span> (bytes_written == -1 &amp;&amp; errno == EINTR);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="preprocessor">#ifdef __ANDROID__</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (bytes_written &gt; 0) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      eventBytes_ += bytes_written;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      maxEventBytes_ = <a class="code" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">std::max</a>((<span class="keywordtype">int</span>)maxEventBytes_, (<span class="keywordtype">int</span>)eventBytes_);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (bytes_written == ssize_t(bytes_expected)) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">signal_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="preprocessor">#ifdef __ANDROID__</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;NotificationQueue Write Error=&quot;</span> &lt;&lt; errno</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; bytesInPipe=&quot;</span> &lt;&lt; eventBytes_</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; maxInPipe=&quot;</span> &lt;&lt; maxEventBytes_ &lt;&lt; <span class="stringliteral">&quot; queue=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1NotificationQueue.html#a6ba28e01a44eb0ce7cc8bd1ac516b617">size</a>();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="namespacefolly.html#a59da19f447b3f5da47b9e278016758c0">folly::throwSystemError</a>(</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;          <span class="stringliteral">&quot;failed to signal NotificationQueue after &quot;</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          <span class="stringliteral">&quot;write&quot;</span>,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;          errno);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div><div class="ttc" id="namespacefizz_1_1detail_html_a40ead2543c07ad500214ec9dd760b706"><div class="ttname"><a href="namespacefizz_1_1detail.html#a40ead2543c07ad500214ec9dd760b706">fizz::detail::write</a></div><div class="ttdeci">void write(const T &amp;in, folly::io::Appender &amp;appender)</div><div class="ttdef"><b>Definition:</b> <a href="Types-inl_8h_source.html#l00112">Types-inl.h:112</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a15c8b90f03cae068a6979f32590642e2"><div class="ttname"><a href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a></div><div class="ttdeci">LogLevel max</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00031">LogLevel.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a6307c8bcb02e2cc8795653c149aac6a6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a6307c8bcb02e2cc8795653c149aac6a6">folly::NotificationQueue::signal_</a></div><div class="ttdeci">bool signal_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00660">NotificationQueue.h:660</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ab73ad3ac9cc8ac604d233ba90160f415"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ab73ad3ac9cc8ac604d233ba90160f415">folly::NotificationQueue::pipeFds_</a></div><div class="ttdeci">int pipeFds_[2]</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00662">NotificationQueue.h:662</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a6ba28e01a44eb0ce7cc8bd1ac516b617"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a6ba28e01a44eb0ce7cc8bd1ac516b617">folly::NotificationQueue::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00456">NotificationQueue.h:456</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="namespacefolly_html_a59da19f447b3f5da47b9e278016758c0"><div class="ttname"><a href="namespacefolly.html#a59da19f447b3f5da47b9e278016758c0">folly::throwSystemError</a></div><div class="ttdeci">void throwSystemError(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="folly_2folly_2Exception_8h_source.html#l00076">Exception.h:76</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_afb16501dd3447be406a08420c656e289"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#afb16501dd3447be406a08420c656e289">folly::NotificationQueue::eventfd_</a></div><div class="ttdeci">int eventfd_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00661">NotificationQueue.h:661</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2d1b104d9e4636cb76d9f9c1c4115a8a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>&amp; <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a>&lt; MessageT &gt; const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00474">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::checkPid()</a>.</p>

</div>
</div>
<a class="anchor" id="add1de011f690908b0582ae97a9dd981e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename MessageTT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::putMessage </td>
          <td>(</td>
          <td class="paramtype">MessageTT &amp;&amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unconditionally put a message on the queue.</p>
<p>This method is like <a class="el" href="classfolly_1_1NotificationQueue.html#a0cafd6b565ea4c768926f5144fe71132">tryPutMessage()</a>, but ignores the maximum queue size and always puts the message on the queue, even if the maximum queue size would be exceeded.</p>
<p><a class="el" href="classfolly_1_1NotificationQueue.html#add1de011f690908b0582ae97a9dd981e">putMessage()</a> may throw</p><ul>
<li>std::bad_alloc if memory allocation fails, and may</li>
<li>std::runtime_error if the queue is currently draining</li>
<li>any other exception thrown by the MessageT move/copy constructor. </li>
</ul>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00408">408</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00408">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                       {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#a66830fe62f7b8ffdac6d4e494cc4b026">putMessageImpl</a>(std::forward&lt;MessageTT&gt;(<a class="code" href="structmessage.html">message</a>), 0);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l00042">test.c:42</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a66830fe62f7b8ffdac6d4e494cc4b026"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a66830fe62f7b8ffdac6d4e494cc4b026">folly::NotificationQueue::putMessageImpl</a></div><div class="ttdeci">bool putMessageImpl(MessageTT &amp;&amp;message, size_t maxSize, bool throws=true)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00602">NotificationQueue.h:602</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a66830fe62f7b8ffdac6d4e494cc4b026"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename MessageTT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::putMessageImpl </td>
          <td>(</td>
          <td class="paramtype">MessageTT &amp;&amp;&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>throws</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00602">602</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00408">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessage()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00377">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryPutMessage()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00390">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryPutMessageNoThrow()</a>.</p>
<div class="fragment"><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                                                               {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#a7c03efd14bd0c6021a45ea4345d709f6">checkPid</a>();</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordtype">bool</span> signal = <span class="keyword">false</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a> = std::make_unique&lt;Node&gt;(</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          std::forward&lt;MessageTT&gt;(<a class="code" href="SPDYCodec_8cpp.html#a36bd74109f547f7f8198faf5a12d2879">message</a>), <a class="code" href="classfolly_1_1RequestContext.html#a400dbde2d305cda780eaf9fbcfe3087c">RequestContext::saveContext</a>());</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#a65938d0bed8266e9c436efe24f46ec81">checkDraining</a>(<span class="keywordflow">throws</span>) || !<a class="code" href="classfolly_1_1NotificationQueue.html#a217322ec2b3fc9465dc9d0500dbdeff9">checkQueueSize</a>(maxSize, <span class="keywordflow">throws</span>)) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="comment">// We only need to signal an event if not all consumers are</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="comment">// awake.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">numActiveConsumers_</a> &lt; <a class="code" href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">numConsumers_</a>) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        signal = <span class="keyword">true</span>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.push_back(*<a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>.release());</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">if</span> (signal) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">ensureSignalLocked</a>();</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_aca5c5e8e37adb42770ab02e8ca4bf010"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">folly::NotificationQueue::ensureSignalLocked</a></div><div class="ttdeci">void ensureSignalLocked() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00509">NotificationQueue.h:509</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7c03efd14bd0c6021a45ea4345d709f6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7c03efd14bd0c6021a45ea4345d709f6">folly::NotificationQueue::checkPid</a></div><div class="ttdeci">void checkPid() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00474">NotificationQueue.h:474</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7dd56679c8471f139c105ac92b444a87"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">folly::NotificationQueue::numConsumers_</a></div><div class="ttdeci">int numConsumers_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00666">NotificationQueue.h:666</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_aa561db2730a6902ceb950966ca5f2463"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">folly::NotificationQueue::numActiveConsumers_</a></div><div class="ttdeci">std::atomic&lt; int &gt; numActiveConsumers_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00667">NotificationQueue.h:667</a></div></div>
<div class="ttc" id="classfolly_1_1RequestContext_html_a400dbde2d305cda780eaf9fbcfe3087c"><div class="ttname"><a href="classfolly_1_1RequestContext.html#a400dbde2d305cda780eaf9fbcfe3087c">folly::RequestContext::saveContext</a></div><div class="ttdeci">static std::shared_ptr&lt; RequestContext &gt; saveContext()</div><div class="ttdef"><b>Definition:</b> <a href="Request_8h_source.html#l00196">Request.h:196</a></div></div>
<div class="ttc" id="namespacefolly_html_a23ca01703d6715fb172f4188faa73dc9"><div class="ttname"><a href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">folly::data</a></div><div class="ttdeci">constexpr auto data(C &amp;c) -&gt; decltype(c.data())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00071">Access.h:71</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_a36bd74109f547f7f8198faf5a12d2879"><div class="ttname"><a href="SPDYCodec_8cpp.html#a36bd74109f547f7f8198faf5a12d2879">message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00133">SPDYCodec.cpp:133</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a217322ec2b3fc9465dc9d0500dbdeff9"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a217322ec2b3fc9465dc9d0500dbdeff9">folly::NotificationQueue::checkQueueSize</a></div><div class="ttdeci">bool checkQueueSize(size_t maxSize, bool throws=true) const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00483">NotificationQueue.h:483</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a65938d0bed8266e9c436efe24f46ec81"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a65938d0bed8266e9c436efe24f46ec81">folly::NotificationQueue::checkDraining</a></div><div class="ttdeci">bool checkDraining(bool throws=true)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00496">NotificationQueue.h:496</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aed65dca418bd23f142b791938ac00527"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename InputIteratorT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::putMessages </td>
          <td>(</td>
          <td class="paramtype">InputIteratorT&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputIteratorT&#160;</td>
          <td class="paramname"><em>last</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Put several messages on the queue. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00416">416</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00408">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                              {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> std::iterator_traits&lt;InputIteratorT&gt;::iterator_category</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        IterCategory;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#a2d30faf798b9f96feae2592bdc182149">putMessagesImpl</a>(<a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a>, last, IterCategory());</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_a2d30faf798b9f96feae2592bdc182149"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a2d30faf798b9f96feae2592bdc182149">folly::NotificationQueue::putMessagesImpl</a></div><div class="ttdeci">void putMessagesImpl(InputIteratorT first, InputIteratorT last, std::input_iterator_tag)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00626">NotificationQueue.h:626</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_af220ef9930b641e74fa9588a0bcffb8c"><div class="ttname"><a href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">folly::gen::first</a></div><div class="ttdeci">constexpr detail::First first</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02553">Base-inl.h:2553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2d30faf798b9f96feae2592bdc182149"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename InputIteratorT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::putMessagesImpl </td>
          <td>(</td>
          <td class="paramtype">InputIteratorT&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputIteratorT&#160;</td>
          <td class="paramname"><em>last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::input_iterator_tag&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00626">626</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00416">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessages()</a>.</p>
<div class="fragment"><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                             {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#a7c03efd14bd0c6021a45ea4345d709f6">checkPid</a>();</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordtype">bool</span> signal = <span class="keyword">false</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    boost::intrusive::slist&lt;Node, boost::intrusive::cache_last&lt;true&gt;&gt; q;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a> != last) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a> = std::make_unique&lt;Node&gt;(</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(*<a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a>), <a class="code" href="classfolly_1_1RequestContext.html#a400dbde2d305cda780eaf9fbcfe3087c">RequestContext::saveContext</a>());</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        q.push_back(*<a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>.release());</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        ++<a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a65938d0bed8266e9c436efe24f46ec81">checkDraining</a>();</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.splice(<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.end(), q);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">numActiveConsumers_</a> &lt; <a class="code" href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">numConsumers_</a>) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        signal = <span class="keyword">true</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">if</span> (signal) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <a class="code" href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">ensureSignalLocked</a>();</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      std::unique_ptr&lt;Node&gt; <a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">while</span> (!q.empty()) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        data.reset(&amp;q.front());</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        q.pop_front();</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_aca5c5e8e37adb42770ab02e8ca4bf010"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">folly::NotificationQueue::ensureSignalLocked</a></div><div class="ttdeci">void ensureSignalLocked() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00509">NotificationQueue.h:509</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7c03efd14bd0c6021a45ea4345d709f6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7c03efd14bd0c6021a45ea4345d709f6">folly::NotificationQueue::checkPid</a></div><div class="ttdeci">void checkPid() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00474">NotificationQueue.h:474</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7dd56679c8471f139c105ac92b444a87"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7dd56679c8471f139c105ac92b444a87">folly::NotificationQueue::numConsumers_</a></div><div class="ttdeci">int numConsumers_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00666">NotificationQueue.h:666</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_aa561db2730a6902ceb950966ca5f2463"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#aa561db2730a6902ceb950966ca5f2463">folly::NotificationQueue::numActiveConsumers_</a></div><div class="ttdeci">std::atomic&lt; int &gt; numActiveConsumers_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00667">NotificationQueue.h:667</a></div></div>
<div class="ttc" id="classfolly_1_1RequestContext_html_a400dbde2d305cda780eaf9fbcfe3087c"><div class="ttname"><a href="classfolly_1_1RequestContext.html#a400dbde2d305cda780eaf9fbcfe3087c">folly::RequestContext::saveContext</a></div><div class="ttdeci">static std::shared_ptr&lt; RequestContext &gt; saveContext()</div><div class="ttdef"><b>Definition:</b> <a href="Request_8h_source.html#l00196">Request.h:196</a></div></div>
<div class="ttc" id="namespacefolly_html_a23ca01703d6715fb172f4188faa73dc9"><div class="ttname"><a href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">folly::data</a></div><div class="ttdeci">constexpr auto data(C &amp;c) -&gt; decltype(c.data())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00071">Access.h:71</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a65938d0bed8266e9c436efe24f46ec81"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a65938d0bed8266e9c436efe24f46ec81">folly::NotificationQueue::checkDraining</a></div><div class="ttdeci">bool checkDraining(bool throws=true)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00496">NotificationQueue.h:496</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_af220ef9930b641e74fa9588a0bcffb8c"><div class="ttname"><a href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">folly::gen::first</a></div><div class="ttdeci">constexpr detail::First first</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02553">Base-inl.h:2553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e34278f25d21f793a4ac9170c14270b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::setMaxQueueSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>max</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the advisory maximum queue size.</p>
<p>This maximum queue size affects calls to <a class="el" href="classfolly_1_1NotificationQueue.html#a0cafd6b565ea4c768926f5144fe71132">tryPutMessage()</a>. Message producers can still use the <a class="el" href="classfolly_1_1NotificationQueue.html#add1de011f690908b0582ae97a9dd981e">putMessage()</a> call to unconditionally put a message on the queue, ignoring the configured maximum queue size. This can cause the queue size to exceed the configured maximum. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00356">356</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                     {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">advisoryMaxQueueSize_</a> = <a class="code" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div><div class="ttc" id="LogLevel_8cpp_html_a15c8b90f03cae068a6979f32590642e2"><div class="ttname"><a href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a></div><div class="ttdeci">LogLevel max</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00031">LogLevel.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ad07d94db4c7e706fbfce197e74ffd690"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">folly::NotificationQueue::advisoryMaxQueueSize_</a></div><div class="ttdeci">uint32_t advisoryMaxQueueSize_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00663">NotificationQueue.h:663</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ba28e01a44eb0ce7cc8bd1ac516b617"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00456">456</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00509">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::ensureSignalLocked()</a>.</p>
<div class="fragment"><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                      {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.size();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a032c7c2b5fc8102923eaf7cf2eb51daf"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::syncSignalAndQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00591">591</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00431">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryConsume()</a>.</p>
<div class="fragment"><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                            {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.empty()) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a8acae516ac8381ac5a44dd5dcd8db7c2">drainSignalsLocked</a>();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">ensureSignalLocked</a>();</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  }</div><div class="ttc" id="classfolly_1_1NotificationQueue_html_aca5c5e8e37adb42770ab02e8ca4bf010"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#aca5c5e8e37adb42770ab02e8ca4bf010">folly::NotificationQueue::ensureSignalLocked</a></div><div class="ttdeci">void ensureSignalLocked() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00509">NotificationQueue.h:509</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a8acae516ac8381ac5a44dd5dcd8db7c2"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a8acae516ac8381ac5a44dd5dcd8db7c2">folly::NotificationQueue::drainSignalsLocked</a></div><div class="ttdeci">void drainSignalsLocked()</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00553">NotificationQueue.h:553</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a66adf52b91f64f6db0d2e5c9abe5883e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::tryConsume </td>
          <td>(</td>
          <td class="paramtype">MessageT &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1Try.html">Try</a> to immediately pull a message off of the queue, without blocking.</p>
<p>If a message is immediately available, the result parameter will be updated to contain the message contents and true will be returned.</p>
<p>If no message is available, false will be returned and result will be left unmodified. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00431">431</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                    {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a> {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a032c7c2b5fc8102923eaf7cf2eb51daf">syncSignalAndQueue</a>();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    };</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#a7c03efd14bd0c6021a45ea4345d709f6">checkPid</a>();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    std::unique_ptr&lt;Node&gt; <a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <a class="code" href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuard</a> <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">spinlock_</a>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.empty())) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      data.reset(&amp;<a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.front());</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <a class="code" href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">queue_</a>.pop_front();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    result = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(data-&gt;<a class="code" href="structfolly_1_1NotificationQueue_1_1Node.html#acb9d9845f47161a6312c8dd013c646a7">msg_</a>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="classfolly_1_1RequestContext.html#a55236af0154a1ab4d6fca74f55a6307d">RequestContext::setContext</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(data-&gt;<a class="code" href="structfolly_1_1NotificationQueue_1_1Node.html#afd3594e863a8ae58253a58fb1500171b">ctx_</a>));</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="ttc" id="structfolly_1_1NotificationQueue_1_1Node_html_afd3594e863a8ae58253a58fb1500171b"><div class="ttname"><a href="structfolly_1_1NotificationQueue_1_1Node.html#afd3594e863a8ae58253a58fb1500171b">folly::NotificationQueue::Node::ctx_</a></div><div class="ttdeci">std::shared_ptr&lt; RequestContext &gt; ctx_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00076">NotificationQueue.h:76</a></div></div>
<div class="ttc" id="classfolly_1_1RequestContext_html_a55236af0154a1ab4d6fca74f55a6307d"><div class="ttname"><a href="classfolly_1_1RequestContext.html#a55236af0154a1ab4d6fca74f55a6307d">folly::RequestContext::setContext</a></div><div class="ttdeci">static std::shared_ptr&lt; RequestContext &gt; setContext(std::shared_ptr&lt; RequestContext &gt; ctx)</div><div class="ttdef"><b>Definition:</b> <a href="Request_8cpp_source.html#l00227">Request.cpp:227</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7c03efd14bd0c6021a45ea4345d709f6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7c03efd14bd0c6021a45ea4345d709f6">folly::NotificationQueue::checkPid</a></div><div class="ttdeci">void checkPid() const </div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00474">NotificationQueue.h:474</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_af385e5046ed3ef56d98133cf965a50ca"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#af385e5046ed3ef56d98133cf965a50ca">folly::NotificationQueue::spinlock_</a></div><div class="ttdeci">folly::SpinLock spinlock_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00659">NotificationQueue.h:659</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1SpinLockGuardImpl_html"><div class="ttname"><a href="classfolly_1_1SpinLockGuardImpl.html">folly::SpinLockGuardImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="SpinLock_8h_source.html#l00064">SpinLock.h:64</a></div></div>
<div class="ttc" id="ScopeGuard_8h_html_a175c354c3e38222bc00ce5df5e6d431d"><div class="ttname"><a href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a></div><div class="ttdeci">#define SCOPE_EXIT</div><div class="ttdef"><b>Definition:</b> <a href="ScopeGuard_8h_source.html#l00274">ScopeGuard.h:274</a></div></div>
<div class="ttc" id="namespacefolly_html_a23ca01703d6715fb172f4188faa73dc9"><div class="ttname"><a href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">folly::data</a></div><div class="ttdeci">constexpr auto data(C &amp;c) -&gt; decltype(c.data())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00071">Access.h:71</a></div></div>
<div class="ttc" id="structfolly_1_1NotificationQueue_1_1Node_html_acb9d9845f47161a6312c8dd013c646a7"><div class="ttname"><a href="structfolly_1_1NotificationQueue_1_1Node.html#acb9d9845f47161a6312c8dd013c646a7">folly::NotificationQueue::Node::msg_</a></div><div class="ttdeci">MessageT msg_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00075">NotificationQueue.h:75</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a7658b7003e34da8d5815550e722910b6"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a7658b7003e34da8d5815550e722910b6">folly::NotificationQueue::queue_</a></div><div class="ttdeci">boost::intrusive::slist&lt; Node, boost::intrusive::cache_last&lt; true &gt; &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00665">NotificationQueue.h:665</a></div></div>
<div class="ttc" id="Likely_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00048">Likely.h:48</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a032c7c2b5fc8102923eaf7cf2eb51daf"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a032c7c2b5fc8102923eaf7cf2eb51daf">folly::NotificationQueue::syncSignalAndQueue</a></div><div class="ttdeci">void syncSignalAndQueue()</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00591">NotificationQueue.h:591</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0cafd6b565ea4c768926f5144fe71132"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename MessageTT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::tryPutMessage </td>
          <td>(</td>
          <td class="paramtype">MessageTT &amp;&amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempt to put a message on the queue if the queue is not already full.</p>
<p>If the queue is full, a std::overflow_error will be thrown. The <a class="el" href="classfolly_1_1NotificationQueue.html#a0e34278f25d21f793a4ac9170c14270b">setMaxQueueSize()</a> function controls the maximum queue size.</p>
<p>If the queue is currently draining, an std::runtime_error will be thrown.</p>
<p>This method may contend briefly on a spinlock if many threads are concurrently accessing the queue, but for all intents and purposes it will immediately place the message on the queue and return.</p>
<p><a class="el" href="classfolly_1_1NotificationQueue.html#a0cafd6b565ea4c768926f5144fe71132">tryPutMessage()</a> may throw std::bad_alloc if memory allocation fails, and may throw any other exception thrown by the MessageT move/copy constructor. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00377">377</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00408">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                          {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="classfolly_1_1NotificationQueue.html#a66830fe62f7b8ffdac6d4e494cc4b026">putMessageImpl</a>(std::forward&lt;MessageTT&gt;(<a class="code" href="structmessage.html">message</a>), <a class="code" href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">advisoryMaxQueueSize_</a>);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l00042">test.c:42</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ad07d94db4c7e706fbfce197e74ffd690"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">folly::NotificationQueue::advisoryMaxQueueSize_</a></div><div class="ttdeci">uint32_t advisoryMaxQueueSize_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00663">NotificationQueue.h:663</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a66830fe62f7b8ffdac6d4e494cc4b026"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a66830fe62f7b8ffdac6d4e494cc4b026">folly::NotificationQueue::putMessageImpl</a></div><div class="ttdeci">bool putMessageImpl(MessageTT &amp;&amp;message, size_t maxSize, bool throws=true)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00602">NotificationQueue.h:602</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a237dd8599a83b3e52206306731ad0c33"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<div class="memtemplate">
template&lt;typename MessageTT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::tryPutMessageNoThrow </td>
          <td>(</td>
          <td class="paramtype">MessageTT &amp;&amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>No-throw versions of the above. Instead returns true on success, false on failure.</p>
<p>Only std::overflow_error (the common exception case) and std::runtime_error (which indicates that the queue is being drained) are prevented from being thrown. User code must still catch std::bad_alloc errors. </p>

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00390">390</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueueTest_8cpp_source.html#l00408">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                                 {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1NotificationQueue.html#a66830fe62f7b8ffdac6d4e494cc4b026">putMessageImpl</a>(</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        std::forward&lt;MessageTT&gt;(<a class="code" href="structmessage.html">message</a>), <a class="code" href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">advisoryMaxQueueSize_</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l00042">test.c:42</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_ad07d94db4c7e706fbfce197e74ffd690"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#ad07d94db4c7e706fbfce197e74ffd690">folly::NotificationQueue::advisoryMaxQueueSize_</a></div><div class="ttdeci">uint32_t advisoryMaxQueueSize_</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00663">NotificationQueue.h:663</a></div></div>
<div class="ttc" id="classfolly_1_1NotificationQueue_html_a66830fe62f7b8ffdac6d4e494cc4b026"><div class="ttname"><a href="classfolly_1_1NotificationQueue.html#a66830fe62f7b8ffdac6d4e494cc4b026">folly::NotificationQueue::putMessageImpl</a></div><div class="ttdeci">bool putMessageImpl(MessageTT &amp;&amp;message, size_t maxSize, bool throws=true)</div><div class="ttdef"><b>Definition:</b> <a href="NotificationQueue_8h_source.html#l00602">NotificationQueue.h:602</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ad07d94db4c7e706fbfce197e74ffd690"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::advisoryMaxQueueSize_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00663">663</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00269">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::NotificationQueue()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00356">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::setMaxQueueSize()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00377">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryPutMessage()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00390">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryPutMessageNoThrow()</a>.</p>

</div>
</div>
<a class="anchor" id="affb6860839cac7a5c76e4154f103cdad"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::draining_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00668">668</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00496">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::checkDraining()</a>.</p>

</div>
</div>
<a class="anchor" id="afb16501dd3447be406a08420c656e289"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::eventfd_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00661">661</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00553">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::drainSignalsLocked()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00509">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::ensureSignalLocked()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00269">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::NotificationQueue()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00328">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::~NotificationQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="aa561db2730a6902ceb950966ca5f2463"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;int&gt; <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::numActiveConsumers_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00667">667</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00626">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessagesImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a7dd56679c8471f139c105ac92b444a87"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::numConsumers_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00666">666</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00626">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessagesImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a03a768dad7ae87156958ac3b5c14acf3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pid_t <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::pid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00664">664</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00474">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::checkPid()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00269">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::NotificationQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ab73ad3ac9cc8ac604d233ba90160f415"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::pipeFds_[2]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00662">662</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00553">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::drainSignalsLocked()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00509">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::ensureSignalLocked()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00269">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::NotificationQueue()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00328">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::~NotificationQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a7658b7003e34da8d5815550e722910b6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::intrusive::slist&lt;<a class="el" href="structfolly_1_1NotificationQueue_1_1Node.html">Node</a>, boost::intrusive::cache_last&lt;true&gt; &gt; <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00665">665</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00483">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::checkQueueSize()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00691">folly::NotificationQueue&lt; MessageT &gt;::Consumer::consumeMessages()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00848">folly::NotificationQueue&lt; MessageT &gt;::Consumer::consumeUntilDrained()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00868">folly::NotificationQueue&lt; MessageT &gt;::SimpleConsumer::consumeUntilDrained()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00154">folly::NotificationQueue&lt; MessageT &gt;::Consumer::getCurrentQueue()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00236">folly::NotificationQueue&lt; MessageT &gt;::SimpleConsumer::getFd()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00803">folly::NotificationQueue&lt; MessageT &gt;::Consumer::init()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00626">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessagesImpl()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00199">folly::NotificationQueue&lt; MessageT &gt;::Consumer::setActive()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00228">folly::NotificationQueue&lt; MessageT &gt;::SimpleConsumer::SimpleConsumer()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00456">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::size()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00829">folly::NotificationQueue&lt; MessageT &gt;::Consumer::stopConsuming()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00591">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::syncSignalAndQueue()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00431">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryConsume()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00328">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::~NotificationQueue()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00232">folly::NotificationQueue&lt; MessageT &gt;::SimpleConsumer::~SimpleConsumer()</a>.</p>

</div>
</div>
<a class="anchor" id="a6307c8bcb02e2cc8795653c149aac6a6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::signal_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00660">660</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00553">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::drainSignalsLocked()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00509">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::ensureSignalLocked()</a>.</p>

</div>
</div>
<a class="anchor" id="af385e5046ed3ef56d98133cf965a50ca"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1SpinLock.html">folly::SpinLock</a> <a class="el" href="classfolly_1_1NotificationQueue.html">folly::NotificationQueue</a>&lt; MessageT &gt;::spinlock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="NotificationQueue_8h_source.html#l00659">659</a> of file <a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a>.</p>

<p>Referenced by <a class="el" href="NotificationQueue_8h_source.html#l00483">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::checkQueueSize()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00586">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::ensureSignal()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00602">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessageImpl()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00626">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::putMessagesImpl()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00456">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::size()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00591">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::syncSignalAndQueue()</a>, and <a class="el" href="NotificationQueue_8h_source.html#l00431">folly::NotificationQueue&lt; folly::AsyncServerSocket::QueueMessage &gt;::tryConsume()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/io/async/<a class="el" href="EventBase_8h_source.html">EventBase.h</a></li>
<li>proxygen/folly/folly/io/async/<a class="el" href="NotificationQueue_8h_source.html">NotificationQueue.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1NotificationQueue.html">NotificationQueue</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
