<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::AsyncSocket Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1AsyncSocket.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfolly_1_1AsyncSocket-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::AsyncSocket Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::AsyncSocket:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1AsyncSocket.png" usemap="#folly::AsyncSocket_map" alt=""/>
  <map id="folly::AsyncSocket_map" name="folly::AsyncSocket_map">
<area href="classfolly_1_1AsyncTransportWrapper.html" alt="folly::AsyncTransportWrapper" shape="rect" coords="307,224,502,248"/>
<area href="classfolly_1_1AsyncTransport.html" alt="folly::AsyncTransport" shape="rect" coords="102,168,297,192"/>
<area href="classfolly_1_1AsyncReader.html" alt="folly::AsyncReader" shape="rect" coords="307,168,502,192"/>
<area href="classfolly_1_1AsyncWriter.html" alt="folly::AsyncWriter" shape="rect" coords="512,168,707,192"/>
<area href="classfolly_1_1DelayedDestruction.html" alt="folly::DelayedDestruction" shape="rect" coords="0,112,195,136"/>
<area href="classfolly_1_1AsyncSocketBase.html" alt="folly::AsyncSocketBase" shape="rect" coords="205,112,400,136"/>
<area href="classfolly_1_1DelayedDestructionBase.html" alt="folly::DelayedDestructionBase" shape="rect" coords="0,56,195,80"/>
<area href="classAsyncSocketImmediateRead.html" alt="AsyncSocketImmediateRead" shape="rect" coords="102,336,297,360"/>
<area href="classfolly_1_1AsyncSSLSocket.html" alt="folly::AsyncSSLSocket" shape="rect" coords="307,336,502,360"/>
<area href="classfolly_1_1test_1_1MockAsyncSocket.html" alt="folly::test::MockAsyncSocket" shape="rect" coords="512,336,707,360"/>
<area href="classfolly_1_1MockAsyncSSLSocket.html" alt="folly::MockAsyncSSLSocket" shape="rect" coords="205,392,400,416"/>
<area href="classfolly_1_1test_1_1MockAsyncSSLSocket.html" alt="folly::test::MockAsyncSSLSocket" shape="rect" coords="410,392,605,416"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1BytesWriteRequest.html">BytesWriteRequest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1EvbChangeCallback.html">EvbChangeCallback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1ImmediateReadCB.html">ImmediateReadCB</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AsyncSocket_1_1IOBufInfo.html">IOBufInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1IoHandler.html">IoHandler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1OptionKey.html">OptionKey</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AsyncSocket_1_1ReadResult.html">ReadResult</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AsyncSocket_1_1WriteResult.html">WriteResult</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteTimeout.html">WriteTimeout</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a583098b445359f76611ffa98b2455a68"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68">StateEnum</a> : uint8_t { <br />
&#160;&#160;<a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">StateEnum::UNINIT</a>, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>, 
<br />
&#160;&#160;<a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>
<br />
 }</td></tr>
<tr class="separator:a583098b445359f76611ffa98b2455a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59188939b6c898468addc2f6d56c6376"><td class="memItemLeft" align="right" valign="top">typedef std::unique_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">Destructor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">UniquePtr</a></td></tr>
<tr class="separator:a59188939b6c898468addc2f6d56c6376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7a1a4b816cc80381f9577af92c74bfd"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="PackedSyncPtrTest_8cpp.html#a2a761d9ec8bcdc907b3e45a3ba097c32">std::map</a>&lt; <a class="el" href="classfolly_1_1AsyncSocket_1_1OptionKey.html">OptionKey</a>, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">OptionMap</a></td></tr>
<tr class="separator:ae7a1a4b816cc80381f9577af92c74bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classfolly_1_1AsyncTransportWrapper"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classfolly_1_1AsyncTransportWrapper')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classfolly_1_1AsyncTransportWrapper.html">folly::AsyncTransportWrapper</a></td></tr>
<tr class="memitem:abdf65dfe2d287245a84c197b36036a93 inherit pub_types_classfolly_1_1AsyncTransportWrapper"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">UniquePtr</a> = std::unique_ptr&lt; <a class="el" href="classfolly_1_1AsyncTransportWrapper.html">AsyncTransportWrapper</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">Destructor</a> &gt;</td></tr>
<tr class="separator:abdf65dfe2d287245a84c197b36036a93 inherit pub_types_classfolly_1_1AsyncTransportWrapper"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2245452bbe2d83579c30d5351e232590 inherit pub_types_classfolly_1_1AsyncTransportWrapper"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a> = <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html">AsyncReader::ReadCallback</a></td></tr>
<tr class="separator:a2245452bbe2d83579c30d5351e232590 inherit pub_types_classfolly_1_1AsyncTransportWrapper"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847bd8d65ee57ded38abb8c9b4c4be06 inherit pub_types_classfolly_1_1AsyncTransportWrapper"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> = <a class="el" href="classfolly_1_1AsyncWriter_1_1WriteCallback.html">AsyncWriter::WriteCallback</a></td></tr>
<tr class="separator:a847bd8d65ee57ded38abb8c9b4c4be06 inherit pub_types_classfolly_1_1AsyncTransportWrapper"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classfolly_1_1AsyncTransport"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classfolly_1_1AsyncTransport')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classfolly_1_1AsyncTransport.html">folly::AsyncTransport</a></td></tr>
<tr class="memitem:acfda1d510af8e174e5afee791c338ec8 inherit pub_types_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">typedef std::unique_ptr&lt; <a class="el" href="classfolly_1_1AsyncTransport.html">AsyncTransport</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">Destructor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#acfda1d510af8e174e5afee791c338ec8">UniquePtr</a></td></tr>
<tr class="separator:acfda1d510af8e174e5afee791c338ec8 inherit pub_types_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a45779d1664a08156b88d8476da84586b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a> ()</td></tr>
<tr class="separator:a45779d1664a08156b88d8476da84586b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fed3c9fd178da6aab86f95e1828e7af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a7fed3c9fd178da6aab86f95e1828e7af">AsyncSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb)</td></tr>
<tr class="separator:a7fed3c9fd178da6aab86f95e1828e7af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20126fac41aae0edaae099927b736ceb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a20126fac41aae0edaae099927b736ceb">setShutdownSocketSet</a> (const std::weak_ptr&lt; <a class="el" href="classfolly_1_1ShutdownSocketSet.html">ShutdownSocketSet</a> &gt; &amp;wSS)</td></tr>
<tr class="separator:a20126fac41aae0edaae099927b736ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e62ae64c2e38fd44591f08087721a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a25e62ae64c2e38fd44591f08087721a4">AsyncSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;address, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> connectTimeout=0)</td></tr>
<tr class="separator:a25e62ae64c2e38fd44591f08087721a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683c8830507d9432aa81efe01e5d3dda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a683c8830507d9432aa81efe01e5d3dda">AsyncSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;ip, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> port, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> connectTimeout=0)</td></tr>
<tr class="separator:a683c8830507d9432aa81efe01e5d3dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a605dacd14a58c082bd8178202119a1a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a605dacd14a58c082bd8178202119a1a0">AsyncSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb, int fd, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> zeroCopyBufId=0)</td></tr>
<tr class="separator:a605dacd14a58c082bd8178202119a1a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f2a51962c49bcbc249210d050f03445"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3f2a51962c49bcbc249210d050f03445">AsyncSocket</a> (<a class="el" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">AsyncSocket::UniquePtr</a>)</td></tr>
<tr class="separator:a3f2a51962c49bcbc249210d050f03445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f8c59aa413c7d7a130820d8c212a10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ae0f8c59aa413c7d7a130820d8c212a10">destroy</a> () override</td></tr>
<tr class="separator:ae0f8c59aa413c7d7a130820d8c212a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942b628cfadcda0f63271f54143ea924"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a942b628cfadcda0f63271f54143ea924">getEventBase</a> () const override</td></tr>
<tr class="separator:a942b628cfadcda0f63271f54143ea924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3746aa7c3ac4a0e4406daf1f9be51955"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3746aa7c3ac4a0e4406daf1f9be51955">getFd</a> () const </td></tr>
<tr class="separator:a3746aa7c3ac4a0e4406daf1f9be51955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad61cbb0cc7c83a9aba9b1287461d5660"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad61cbb0cc7c83a9aba9b1287461d5660">detachFd</a> ()</td></tr>
<tr class="separator:ad61cbb0cc7c83a9aba9b1287461d5660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab341d93c255e793e78288e0523cabd37"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">connect</a> (<a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a> *callback, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;address, int timeout=0, const <a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">OptionMap</a> &amp;options=<a class="el" href="classfolly_1_1AsyncSocket.html#a5bc92a7d9a26f853da734a4d1793c95a">emptyOptionMap</a>, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;bindAddr=<a class="el" href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">anyAddress</a>()) noexcept</td></tr>
<tr class="separator:ab341d93c255e793e78288e0523cabd37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fff25f18cbd5529030906e1600dc01f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a9fff25f18cbd5529030906e1600dc01f">connect</a> (<a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a> *callback, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;ip, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> port, int timeout=0, const <a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">OptionMap</a> &amp;options=<a class="el" href="classfolly_1_1AsyncSocket.html#a5bc92a7d9a26f853da734a4d1793c95a">emptyOptionMap</a>) noexcept</td></tr>
<tr class="separator:a9fff25f18cbd5529030906e1600dc01f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad743eebaa42bf8ee850b678fad3215c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad743eebaa42bf8ee850b678fad3215c5">cancelConnect</a> ()</td></tr>
<tr class="separator:ad743eebaa42bf8ee850b678fad3215c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f628cc27eb4e41a49a27e2eb7243b88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8f628cc27eb4e41a49a27e2eb7243b88">setSendTimeout</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> milliseconds) override</td></tr>
<tr class="separator:a8f628cc27eb4e41a49a27e2eb7243b88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c649480f26f3bdef13f4ed9772e526"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac9c649480f26f3bdef13f4ed9772e526">getSendTimeout</a> () const override</td></tr>
<tr class="separator:ac9c649480f26f3bdef13f4ed9772e526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a754f77101cf9eb0e2cd8c3413c5eeeeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a754f77101cf9eb0e2cd8c3413c5eeeeb">setMaxReadsPerEvent</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> maxReads)</td></tr>
<tr class="separator:a754f77101cf9eb0e2cd8c3413c5eeeeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1552a42248ba362f9f495e8afa2750cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1552a42248ba362f9f495e8afa2750cc">getMaxReadsPerEvent</a> () const </td></tr>
<tr class="separator:a1552a42248ba362f9f495e8afa2750cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57abf5683cd77e0e039da17f428e581f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a57abf5683cd77e0e039da17f428e581f">setErrMessageCB</a> (<a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> *callback)</td></tr>
<tr class="separator:a57abf5683cd77e0e039da17f428e581f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c9d6042ae2cba37a1a3b07c19af4af4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3c9d6042ae2cba37a1a3b07c19af4af4">getErrMessageCallback</a> () const </td></tr>
<tr class="separator:a3c9d6042ae2cba37a1a3b07c19af4af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbca197b35d100494859c5536fa10e5f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abbca197b35d100494859c5536fa10e5f">setSendMsgParamCB</a> (<a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a> *callback)</td></tr>
<tr class="separator:abbca197b35d100494859c5536fa10e5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd426e19884d4849ab4cab30b6eae99b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abd426e19884d4849ab4cab30b6eae99b">getSendMsgParamsCB</a> () const </td></tr>
<tr class="separator:abd426e19884d4849ab4cab30b6eae99b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1073cae399d39afd963bd75eeacea579"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1073cae399d39afd963bd75eeacea579">setReadCB</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a> *callback) override</td></tr>
<tr class="separator:a1073cae399d39afd963bd75eeacea579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57283dc5ff392692ae2ec0fc8042f47e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a57283dc5ff392692ae2ec0fc8042f47e">getReadCallback</a> () const override</td></tr>
<tr class="separator:a57283dc5ff392692ae2ec0fc8042f47e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5afbe9dfa62d935143e2d9c88816b19e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a5afbe9dfa62d935143e2d9c88816b19e">setZeroCopy</a> (bool enable)</td></tr>
<tr class="separator:a5afbe9dfa62d935143e2d9c88816b19e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d0920cb062bf34d965f42f55d8ffe58"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a4d0920cb062bf34d965f42f55d8ffe58">getZeroCopy</a> () const </td></tr>
<tr class="separator:a4d0920cb062bf34d965f42f55d8ffe58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03cf323d524e5f736cef7bfa8138e48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#af03cf323d524e5f736cef7bfa8138e48">getZeroCopyBufId</a> () const </td></tr>
<tr class="separator:af03cf323d524e5f736cef7bfa8138e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac33c3676fe5408af03db585a7dd3eb4e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac33c3676fe5408af03db585a7dd3eb4e">getZeroCopyReenableThreshold</a> () const </td></tr>
<tr class="separator:ac33c3676fe5408af03db585a7dd3eb4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b713c4cd70a7c1dadf4e9cfa97b16a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aa4b713c4cd70a7c1dadf4e9cfa97b16a">setZeroCopyReenableThreshold</a> (size_t threshold)</td></tr>
<tr class="separator:aa4b713c4cd70a7c1dadf4e9cfa97b16a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8843e77dfee583e3da4f4e5649acd3e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8843e77dfee583e3da4f4e5649acd3e4">write</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *callback, const void *buf, size_t bytes, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a> <a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>=<a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a>) override</td></tr>
<tr class="separator:a8843e77dfee583e3da4f4e5649acd3e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e6b5f6ace50cddbea0a5bfb645511c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a37e6b5f6ace50cddbea0a5bfb645511c">writev</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *callback, const iovec *<a class="el" href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a>, size_t <a class="el" href="wangle_2__build_2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a> <a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>=<a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a>) override</td></tr>
<tr class="separator:a37e6b5f6ace50cddbea0a5bfb645511c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add12994d4630f4ff5abb0027039473d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#add12994d4630f4ff5abb0027039473d0">writeChain</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *callback, std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;buf, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a> <a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>=<a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a>) override</td></tr>
<tr class="separator:add12994d4630f4ff5abb0027039473d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfde63b2a0e3be3fc2c4439a770d9480"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abfde63b2a0e3be3fc2c4439a770d9480">writeRequest</a> (<a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a> *req)</td></tr>
<tr class="separator:abfde63b2a0e3be3fc2c4439a770d9480"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a784b390370ae40c9dd9f556d22f68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a16a784b390370ae40c9dd9f556d22f68">writeRequestReady</a> ()</td></tr>
<tr class="separator:a16a784b390370ae40c9dd9f556d22f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab4aa67f1dd2ee26c2aafeac75828ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#acab4aa67f1dd2ee26c2aafeac75828ad">close</a> () override</td></tr>
<tr class="separator:acab4aa67f1dd2ee26c2aafeac75828ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c88d174fd0d7a87040d8db72e54862"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow</a> () override</td></tr>
<tr class="separator:a09c88d174fd0d7a87040d8db72e54862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa204e9062e66c5fb97f45a6783a8fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#adfa204e9062e66c5fb97f45a6783a8fa">closeWithReset</a> () override</td></tr>
<tr class="separator:adfa204e9062e66c5fb97f45a6783a8fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe360d7c9c1381385b115ddcdd8c764f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#afe360d7c9c1381385b115ddcdd8c764f">shutdownWrite</a> () override</td></tr>
<tr class="separator:afe360d7c9c1381385b115ddcdd8c764f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4fe34feba854c83cbb8665c0efd1053"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">shutdownWriteNow</a> () override</td></tr>
<tr class="separator:ae4fe34feba854c83cbb8665c0efd1053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8b1194b502e2ceef816bc6ba79e490"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1d8b1194b502e2ceef816bc6ba79e490">readable</a> () const override</td></tr>
<tr class="separator:a1d8b1194b502e2ceef816bc6ba79e490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ca4a657c8f86f2e7949a4e39f743c7f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1ca4a657c8f86f2e7949a4e39f743c7f">writable</a> () const override</td></tr>
<tr class="separator:a1ca4a657c8f86f2e7949a4e39f743c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84f7f45e057924c9fb588c853186e92e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a84f7f45e057924c9fb588c853186e92e">isPending</a> () const override</td></tr>
<tr class="separator:a84f7f45e057924c9fb588c853186e92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefea6811b86eb5dbf2083de661ef6749"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aefea6811b86eb5dbf2083de661ef6749">hangup</a> () const </td></tr>
<tr class="separator:aefea6811b86eb5dbf2083de661ef6749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f64411d21717a984cf6dbdc7d1e391"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a65f64411d21717a984cf6dbdc7d1e391">good</a> () const override</td></tr>
<tr class="separator:a65f64411d21717a984cf6dbdc7d1e391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f950291e2346b40e8f6cb368bdf70db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a4f950291e2346b40e8f6cb368bdf70db">error</a> () const override</td></tr>
<tr class="separator:a4f950291e2346b40e8f6cb368bdf70db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17900d79fb3e5222f15b3007dba1a81c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a17900d79fb3e5222f15b3007dba1a81c">attachEventBase</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *eventBase) override</td></tr>
<tr class="separator:a17900d79fb3e5222f15b3007dba1a81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac69a7c0a75e59f793e4648bb8524bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8ac69a7c0a75e59f793e4648bb8524bb">detachEventBase</a> () override</td></tr>
<tr class="separator:a8ac69a7c0a75e59f793e4648bb8524bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c6d064abaa16abb5d26fdcf4973624"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a40c6d064abaa16abb5d26fdcf4973624">isDetachable</a> () const override</td></tr>
<tr class="separator:a40c6d064abaa16abb5d26fdcf4973624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9179612293943d41d71fd890adae87a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a9179612293943d41d71fd890adae87a8">getLocalAddress</a> (<a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> *address) const override</td></tr>
<tr class="separator:a9179612293943d41d71fd890adae87a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319ac9590b20589ca37bd231d45bc8bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a319ac9590b20589ca37bd231d45bc8bb">getPeerAddress</a> (<a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> *address) const override</td></tr>
<tr class="separator:a319ac9590b20589ca37bd231d45bc8bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6fc6f621fce886e83c4606d0305b5f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8b6fc6f621fce886e83c4606d0305b5f">isEorTrackingEnabled</a> () const override</td></tr>
<tr class="separator:a8b6fc6f621fce886e83c4606d0305b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea42e53c7f830758dd475a4fbc61eaa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3ea42e53c7f830758dd475a4fbc61eaa">setEorTracking</a> (bool track) override</td></tr>
<tr class="separator:a3ea42e53c7f830758dd475a4fbc61eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e67c068481e6f6786e3c5b24e737c9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a93e67c068481e6f6786e3c5b24e737c9">connecting</a> () const override</td></tr>
<tr class="separator:a93e67c068481e6f6786e3c5b24e737c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a728138e1589b68e35783e02ba8121992"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a728138e1589b68e35783e02ba8121992">isClosedByPeer</a> () const </td></tr>
<tr class="separator:a728138e1589b68e35783e02ba8121992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae90f325b605665293dd65b8869aa9963"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ae90f325b605665293dd65b8869aa9963">isClosedBySelf</a> () const </td></tr>
<tr class="separator:ae90f325b605665293dd65b8869aa9963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f5ebeade6ce0e5c51716ce001bf1af0"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a2f5ebeade6ce0e5c51716ce001bf1af0">getAppBytesWritten</a> () const override</td></tr>
<tr class="separator:a2f5ebeade6ce0e5c51716ce001bf1af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60d62b928993377baa16c6d95bb1affa"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a60d62b928993377baa16c6d95bb1affa">getRawBytesWritten</a> () const override</td></tr>
<tr class="separator:a60d62b928993377baa16c6d95bb1affa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a010156b1240c362268398df3e3db4372"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a010156b1240c362268398df3e3db4372">getAppBytesReceived</a> () const override</td></tr>
<tr class="separator:a010156b1240c362268398df3e3db4372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a510b2b3473838d4e997d75a29c081380"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a510b2b3473838d4e997d75a29c081380">getRawBytesReceived</a> () const override</td></tr>
<tr class="separator:a510b2b3473838d4e997d75a29c081380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab07cf9eabbcf71d8198bf4b2016763"><td class="memItemLeft" align="right" valign="top">std::chrono::nanoseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aaab07cf9eabbcf71d8198bf4b2016763">getConnectTime</a> () const </td></tr>
<tr class="separator:aaab07cf9eabbcf71d8198bf4b2016763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a767c8c5587634b6dc2f95f53ed24724b"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a767c8c5587634b6dc2f95f53ed24724b">getConnectTimeout</a> () const </td></tr>
<tr class="separator:a767c8c5587634b6dc2f95f53ed24724b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b516b863f32aee965b70b5124fbdda"><td class="memItemLeft" align="right" valign="top">std::chrono::steady_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a26b516b863f32aee965b70b5124fbdda">getConnectStartTime</a> () const </td></tr>
<tr class="separator:a26b516b863f32aee965b70b5124fbdda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f376730cf9200ab9982915a75854b9"><td class="memItemLeft" align="right" valign="top">std::chrono::steady_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a42f376730cf9200ab9982915a75854b9">getConnectEndTime</a> () const </td></tr>
<tr class="separator:a42f376730cf9200ab9982915a75854b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7396f26f26d8de44a7fe48a7f900dd02"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a7396f26f26d8de44a7fe48a7f900dd02">getTFOAttempted</a> () const </td></tr>
<tr class="separator:a7396f26f26d8de44a7fe48a7f900dd02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5034807be819658f074ef1fcc6dbc6f7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a5034807be819658f074ef1fcc6dbc6f7">getTFOFinished</a> () const </td></tr>
<tr class="separator:a5034807be819658f074ef1fcc6dbc6f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac74354c1153f9d965c85a8296260c251"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac74354c1153f9d965c85a8296260c251">getTFOSucceded</a> () const </td></tr>
<tr class="separator:ac74354c1153f9d965c85a8296260c251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f4196e93e89bf6e7bcff383a40f315e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a4f4196e93e89bf6e7bcff383a40f315e">setNoDelay</a> (bool noDelay)</td></tr>
<tr class="separator:a4f4196e93e89bf6e7bcff383a40f315e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d9f7f1f3860742279ace525e342b2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac8d9f7f1f3860742279ace525e342b2d">setCloseOnExec</a> ()</td></tr>
<tr class="separator:ac8d9f7f1f3860742279ace525e342b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75dc1609a14cb481978b1ffd84abe264"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a75dc1609a14cb481978b1ffd84abe264">setCongestionFlavor</a> (const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;cname)</td></tr>
<tr class="separator:a75dc1609a14cb481978b1ffd84abe264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7afca6080b9c403467dde9df3e12067"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac7afca6080b9c403467dde9df3e12067">setQuickAck</a> (bool quickack)</td></tr>
<tr class="separator:ac7afca6080b9c403467dde9df3e12067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ae0767c13c1067445c6b52c7b42ebf6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a9ae0767c13c1067445c6b52c7b42ebf6">setSendBufSize</a> (size_t bufsize)</td></tr>
<tr class="separator:a9ae0767c13c1067445c6b52c7b42ebf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33c3d26e3754af1d3bd6f5712bd2a50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ab33c3d26e3754af1d3bd6f5712bd2a50">setRecvBufSize</a> (size_t bufsize)</td></tr>
<tr class="separator:ab33c3d26e3754af1d3bd6f5712bd2a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80575e520b5ae0ce1173d9ebb117dca4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a80575e520b5ae0ce1173d9ebb117dca4">setTCPProfile</a> (int profd)</td></tr>
<tr class="separator:a80575e520b5ae0ce1173d9ebb117dca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a482ad20dc8e6a87eb9202d2f1676ea0c"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a482ad20dc8e6a87eb9202d2f1676ea0c"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a482ad20dc8e6a87eb9202d2f1676ea0c">getSockOpt</a> (int level, int optname, <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> *optval, socklen_t *optlen)</td></tr>
<tr class="separator:a482ad20dc8e6a87eb9202d2f1676ea0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a415ccca275e051318710c1b677dfd64e"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a415ccca275e051318710c1b677dfd64e"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a415ccca275e051318710c1b677dfd64e">setSockOpt</a> (int level, int optname, const <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> *optval)</td></tr>
<tr class="separator:a415ccca275e051318710c1b677dfd64e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68acdec30849c2a99dfb4048f40aef29"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a68acdec30849c2a99dfb4048f40aef29">getSockOptVirtual</a> (int level, int optname, void *optval, socklen_t *optlen)</td></tr>
<tr class="separator:a68acdec30849c2a99dfb4048f40aef29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ebf21d62d550100bcfa3556cf4dbd8"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac3ebf21d62d550100bcfa3556cf4dbd8">setSockOptVirtual</a> (int level, int optname, void const *optval, socklen_t optlen)</td></tr>
<tr class="separator:ac3ebf21d62d550100bcfa3556cf4dbd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858f988a6df8db2e7e6f13404a21ade1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a858f988a6df8db2e7e6f13404a21ade1">setPreReceivedData</a> (std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> &gt; <a class="el" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>)</td></tr>
<tr class="separator:a858f988a6df8db2e7e6f13404a21ade1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66836c4af2b15fdb6ee504a365c35095"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a66836c4af2b15fdb6ee504a365c35095">enableTFO</a> ()</td></tr>
<tr class="separator:a66836c4af2b15fdb6ee504a365c35095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5bafc05df5594e30343c4239cb0837e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac5bafc05df5594e30343c4239cb0837e">disableTransparentTls</a> ()</td></tr>
<tr class="separator:ac5bafc05df5594e30343c4239cb0837e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e918cbd892344b7e36648909a5965b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1e918cbd892344b7e36648909a5965b5">disableTSocks</a> ()</td></tr>
<tr class="separator:a1e918cbd892344b7e36648909a5965b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62461e998cb7ce43e77ec44ed7e6bb69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a62461e998cb7ce43e77ec44ed7e6bb69">setBufferCallback</a> (<a class="el" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html">BufferCallback</a> *cb)</td></tr>
<tr class="separator:a62461e998cb7ce43e77ec44ed7e6bb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af626583c1f7763bc4310a47ea196e11c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#af626583c1f7763bc4310a47ea196e11c">setEvbChangedCallback</a> (std::unique_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket_1_1EvbChangeCallback.html">EvbChangeCallback</a> &gt; cb)</td></tr>
<tr class="separator:af626583c1f7763bc4310a47ea196e11c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b6fd3646648ecf2b246595cd9d8b11a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a6b6fd3646648ecf2b246595cd9d8b11a">cacheAddresses</a> ()</td></tr>
<tr class="separator:a6b6fd3646648ecf2b246595cd9d8b11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc655888de8ac0279882fe1f233cfd6d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#acc655888de8ac0279882fe1f233cfd6d">isZeroCopyWriteInProgress</a> () const noexcept</td></tr>
<tr class="separator:acc655888de8ac0279882fe1f233cfd6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57dc7d97876bd46c8ea6812765827d68"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a57dc7d97876bd46c8ea6812765827d68">processZeroCopyWriteInProgress</a> () noexcept</td></tr>
<tr class="separator:a57dc7d97876bd46c8ea6812765827d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06bfd71fb07c138ef3f7f5280f2e27b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a06bfd71fb07c138ef3f7f5280f2e27b1">setPeerCertificate</a> (std::unique_ptr&lt; const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> &gt; cert)</td></tr>
<tr class="separator:a06bfd71fb07c138ef3f7f5280f2e27b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac445a9b54eaee6846f00257238e44eff"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac445a9b54eaee6846f00257238e44eff">getPeerCertificate</a> () const override</td></tr>
<tr class="separator:ac445a9b54eaee6846f00257238e44eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070558985ea7c8ffcf3eb325c6297b5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a070558985ea7c8ffcf3eb325c6297b5b">setSelfCertificate</a> (std::unique_ptr&lt; const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> &gt; cert)</td></tr>
<tr class="separator:a070558985ea7c8ffcf3eb325c6297b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a447b392e0854a59fb45c57c856d3ff66"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a447b392e0854a59fb45c57c856d3ff66">getSelfCertificate</a> () const override</td></tr>
<tr class="separator:a447b392e0854a59fb45c57c856d3ff66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1AsyncTransportWrapper"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1AsyncTransportWrapper')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1AsyncTransportWrapper.html">folly::AsyncTransportWrapper</a></td></tr>
<tr class="memitem:a59aae9d322ad9ec3ddc9d8a308a89746 inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memItemLeft" align="right" valign="top">virtual const <a class="el" href="classfolly_1_1AsyncTransportWrapper.html">AsyncTransportWrapper</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a59aae9d322ad9ec3ddc9d8a308a89746">getWrappedTransport</a> () const </td></tr>
<tr class="separator:a59aae9d322ad9ec3ddc9d8a308a89746 inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1b6fc35898c06e0921b40e694cfe15 inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a8d1b6fc35898c06e0921b40e694cfe15 inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memTemplItemLeft" align="right" valign="top">const <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a8d1b6fc35898c06e0921b40e694cfe15">getUnderlyingTransport</a> () const </td></tr>
<tr class="separator:a8d1b6fc35898c06e0921b40e694cfe15 inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84263444327b2baa0b4bbbf5334dad7a inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a84263444327b2baa0b4bbbf5334dad7a inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a84263444327b2baa0b4bbbf5334dad7a">getUnderlyingTransport</a> ()</td></tr>
<tr class="separator:a84263444327b2baa0b4bbbf5334dad7a inherit pub_methods_classfolly_1_1AsyncTransportWrapper"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1AsyncTransport"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1AsyncTransport')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1AsyncTransport.html">folly::AsyncTransport</a></td></tr>
<tr class="memitem:af1a389b6efc9421d1956ce228c5fd699 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1SocketAddress.html">SocketAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#af1a389b6efc9421d1956ce228c5fd699">getLocalAddress</a> () const </td></tr>
<tr class="separator:af1a389b6efc9421d1956ce228c5fd699 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e116d297f139e62d7e4de31e59da6e4 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#a4e116d297f139e62d7e4de31e59da6e4">getAddress</a> (<a class="el" href="classfolly_1_1SocketAddress.html">SocketAddress</a> *address) const override</td></tr>
<tr class="separator:a4e116d297f139e62d7e4de31e59da6e4 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5ab2f16893cce42f777ec8ea16f15c inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1SocketAddress.html">SocketAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#a6e5ab2f16893cce42f777ec8ea16f15c">getPeerAddress</a> () const </td></tr>
<tr class="separator:a6e5ab2f16893cce42f777ec8ea16f15c inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0401d581f3a960c0f27641c6c0c0d29b inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacefolly_1_1ssl.html#a21ca74e0028a7b87da9d031bc002cbbd">ssl::X509UniquePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#a0401d581f3a960c0f27641c6c0c0d29b">getPeerCert</a> () const </td></tr>
<tr class="separator:a0401d581f3a960c0f27641c6c0c0d29b inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad77b39ca08d8d4735da7183fbd917e92 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">virtual const X509 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#ad77b39ca08d8d4735da7183fbd917e92">getSelfCert</a> () const </td></tr>
<tr class="separator:ad77b39ca08d8d4735da7183fbd917e92 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935e4bc8c0c859e72522e3ceefe1b85b inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#a935e4bc8c0c859e72522e3ceefe1b85b">getApplicationProtocol</a> () const noexcept</td></tr>
<tr class="separator:a935e4bc8c0c859e72522e3ceefe1b85b inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858886d0e8179f54ce4e4e8019ec84b4 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#a858886d0e8179f54ce4e4e8019ec84b4">getSecurityProtocol</a> () const </td></tr>
<tr class="separator:a858886d0e8179f54ce4e4e8019ec84b4 inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38888a7b1b88f91c1a6184906b6908d inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#aa38888a7b1b88f91c1a6184906b6908d">isReplaySafe</a> () const </td></tr>
<tr class="separator:aa38888a7b1b88f91c1a6184906b6908d inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a682ad49abe4106957919d1fbbc5aadff inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#a682ad49abe4106957919d1fbbc5aadff">setReplaySafetyCallback</a> (<a class="el" href="classfolly_1_1AsyncTransport_1_1ReplaySafetyCallback.html">ReplaySafetyCallback</a> *callback)</td></tr>
<tr class="separator:a682ad49abe4106957919d1fbbc5aadff inherit pub_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1DelayedDestruction"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1DelayedDestruction')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestruction.html">folly::DelayedDestruction</a></td></tr>
<tr class="memitem:a2b64caadd65cdae43185e05eb4beb3fa inherit pub_methods_classfolly_1_1DelayedDestruction"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a2b64caadd65cdae43185e05eb4beb3fa">getDestroyPending</a> () const </td></tr>
<tr class="separator:a2b64caadd65cdae43185e05eb4beb3fa inherit pub_methods_classfolly_1_1DelayedDestruction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1DelayedDestructionBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1DelayedDestructionBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestructionBase.html">folly::DelayedDestructionBase</a></td></tr>
<tr class="memitem:a50c17a3675426754e89707ded8566f9f inherit pub_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#a50c17a3675426754e89707ded8566f9f">~DelayedDestructionBase</a> ()=default</td></tr>
<tr class="separator:a50c17a3675426754e89707ded8566f9f inherit pub_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1AsyncSocketBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1AsyncSocketBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1AsyncSocketBase.html">folly::AsyncSocketBase</a></td></tr>
<tr class="memitem:adf9568117cc2889a7da37deb48de2171 inherit pub_methods_classfolly_1_1AsyncSocketBase"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocketBase.html#adf9568117cc2889a7da37deb48de2171">~AsyncSocketBase</a> ()=default</td></tr>
<tr class="separator:adf9568117cc2889a7da37deb48de2171 inherit pub_methods_classfolly_1_1AsyncSocketBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7f0360f170c85ce343f3ae1373cabdca"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a7f0360f170c85ce343f3ae1373cabdca">newSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb)</td></tr>
<tr class="separator:a7f0360f170c85ce343f3ae1373cabdca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc8acd684a58816d42dddf216b3a0ba"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a2bc8acd684a58816d42dddf216b3a0ba">newSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;address, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> connectTimeout=0)</td></tr>
<tr class="separator:a2bc8acd684a58816d42dddf216b3a0ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3611dac6eae607fab849d0731b07f2c7"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3611dac6eae607fab849d0731b07f2c7">newSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;ip, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> port, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> connectTimeout=0)</td></tr>
<tr class="separator:a3611dac6eae607fab849d0731b07f2c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47606a814bf840e0933b855820a16a7c"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a47606a814bf840e0933b855820a16a7c">newSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *evb, int fd)</td></tr>
<tr class="separator:a47606a814bf840e0933b855820a16a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ba4829117ffbf38bd67786fad8aba44"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">anyAddress</a> ()</td></tr>
<tr class="separator:a2ba4829117ffbf38bd67786fad8aba44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a5bc92a7d9a26f853da734a4d1793c95a"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">OptionMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a5bc92a7d9a26f853da734a4d1793c95a">emptyOptionMap</a></td></tr>
<tr class="separator:a5bc92a7d9a26f853da734a4d1793c95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a877dd6091ffe3c2d56fab4a550aba3bb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bb">ReadResultEnum</a> { <a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">READ_EOF</a> = 0, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">READ_ERROR</a> = -1, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef">READ_BLOCKING</a> = -2, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba14a73b401bf2064b1381b9109c295c39">READ_NO_ERROR</a> = -3
 }</td></tr>
<tr class="separator:a877dd6091ffe3c2d56fab4a550aba3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75264044454c0e503366399eb234f501"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501">WriteResultEnum</a> { <a class="el" href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab">WRITE_ERROR</a> = -1
 }</td></tr>
<tr class="separator:a75264044454c0e503366399eb234f501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9cabdff57a7baf4b652e7219ce5338"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338">ShutdownFlags</a> { <a class="el" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a> = 0x01, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a> = 0x02, 
<a class="el" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a> = 0x04
 }</td></tr>
<tr class="separator:a8d9cabdff57a7baf4b652e7219ce5338"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aac80316378cc7d26c3921b82612d5e09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aac80316378cc7d26c3921b82612d5e09">~AsyncSocket</a> () override</td></tr>
<tr class="separator:aac80316378cc7d26c3921b82612d5e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45d9bd6e0dedf44794fc2447a0179e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aa45d9bd6e0dedf44794fc2447a0179e9">init</a> ()</td></tr>
<tr class="separator:aa45d9bd6e0dedf44794fc2447a0179e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a924fd12e56e790708f85ae1c639eb5f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a924fd12e56e790708f85ae1c639eb5f4">scheduleImmediateRead</a> () noexcept</td></tr>
<tr class="separator:a924fd12e56e790708f85ae1c639eb5f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ff183b8fbd66a6096ef89ba4b31885"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad3ff183b8fbd66a6096ef89ba4b31885">scheduleInitialReadWrite</a> () noexcept</td></tr>
<tr class="separator:ad3ff183b8fbd66a6096ef89ba4b31885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad990c726026595c0bac99a820e5bdff2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad990c726026595c0bac99a820e5bdff2">ioReady</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> events) noexcept</td></tr>
<tr class="separator:ad990c726026595c0bac99a820e5bdff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b3900bbfbc3b3df56139455812b1e20"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a5b3900bbfbc3b3df56139455812b1e20">checkForImmediateRead</a> () noexcept</td></tr>
<tr class="separator:a5b3900bbfbc3b3df56139455812b1e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b16428961251692bfac25ceab9b83bc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3b16428961251692bfac25ceab9b83bc">handleInitialReadWrite</a> () noexcept</td></tr>
<tr class="separator:a3b16428961251692bfac25ceab9b83bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7475e0e3f554b5b93eb35bfefb04f870"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a7475e0e3f554b5b93eb35bfefb04f870">prepareReadBuffer</a> (void **buf, size_t *buflen)</td></tr>
<tr class="separator:a7475e0e3f554b5b93eb35bfefb04f870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a085ae8fe5c02376a95228a2543534b0a"><td class="memItemLeft" align="right" valign="top">virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a085ae8fe5c02376a95228a2543534b0a">handleErrMessages</a> () noexcept</td></tr>
<tr class="separator:a085ae8fe5c02376a95228a2543534b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a704ce81032be80dd5f36d23f0dfbedac"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a704ce81032be80dd5f36d23f0dfbedac">handleRead</a> () noexcept</td></tr>
<tr class="separator:a704ce81032be80dd5f36d23f0dfbedac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607fe5f9fbd872861a9506fef684b12a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">handleWrite</a> () noexcept</td></tr>
<tr class="separator:a607fe5f9fbd872861a9506fef684b12a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac08e631a8c0c3690045cfa8965bda85f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac08e631a8c0c3690045cfa8965bda85f">handleConnect</a> () noexcept</td></tr>
<tr class="separator:ac08e631a8c0c3690045cfa8965bda85f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9852513aa1702cb5cdab956f391121a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ab9852513aa1702cb5cdab956f391121a">timeoutExpired</a> () noexcept</td></tr>
<tr class="separator:ab9852513aa1702cb5cdab956f391121a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca0d3439a7e8b4d25bbb09d0c87c9f23"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structfolly_1_1AsyncSocket_1_1ReadResult.html">ReadResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aca0d3439a7e8b4d25bbb09d0c87c9f23">performRead</a> (void **buf, size_t *buflen, size_t *offset)</td></tr>
<tr class="separator:aca0d3439a7e8b4d25bbb09d0c87c9f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a384bd7218a485ed9839611bf48d3a9cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a384bd7218a485ed9839611bf48d3a9cd">writeChainImpl</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *callback, iovec *<a class="el" href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a>, size_t <a class="el" href="wangle_2__build_2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>, std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;buf, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a> <a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>)</td></tr>
<tr class="separator:a384bd7218a485ed9839611bf48d3a9cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d98d29d9453d246fb19b525200eb29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad8d98d29d9453d246fb19b525200eb29">writeImpl</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *callback, const iovec *<a class="el" href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a>, size_t <a class="el" href="wangle_2__build_2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>, std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;buf, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a> <a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>=<a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a>)</td></tr>
<tr class="separator:ad8d98d29d9453d246fb19b525200eb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c95aae8d6578c1cf1ad443e2a420b4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structfolly_1_1AsyncSocket_1_1WriteResult.html">WriteResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a35c95aae8d6578c1cf1ad443e2a420b4">performWrite</a> (const iovec *<a class="el" href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a>, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="wangle_2__build_2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a> <a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> *countWritten, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> *partialWritten)</td></tr>
<tr class="separator:a35c95aae8d6578c1cf1ad443e2a420b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1504d851c6bbff263684e03e8af092c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1AsyncSocket_1_1WriteResult.html">AsyncSocket::WriteResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1504d851c6bbff263684e03e8af092c9">sendSocketMessage</a> (int fd, struct msghdr *msg, int msg_flags)</td></tr>
<tr class="separator:a1504d851c6bbff263684e03e8af092c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8470776d92fd540977c20093c2ebb425"><td class="memItemLeft" align="right" valign="top">virtual ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8470776d92fd540977c20093c2ebb425">tfoSendMsg</a> (int fd, struct msghdr *msg, int msg_flags)</td></tr>
<tr class="separator:a8470776d92fd540977c20093c2ebb425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b97da40cc72b3468e5dcc95aeab723"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a55b97da40cc72b3468e5dcc95aeab723">socketConnect</a> (const struct sockaddr *<a class="el" href="GlobalThreadPoolList_8cpp.html#ab94a49ce2d97d58d5e22352a39c2345c">addr</a>, socklen_t len)</td></tr>
<tr class="separator:a55b97da40cc72b3468e5dcc95aeab723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8306e8803b9f0b30a8b06306857641e1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8306e8803b9f0b30a8b06306857641e1">scheduleConnectTimeout</a> ()</td></tr>
<tr class="separator:a8306e8803b9f0b30a8b06306857641e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6393490c14c3d5510d1cc9bd1b6d985"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad6393490c14c3d5510d1cc9bd1b6d985">registerForConnectEvents</a> ()</td></tr>
<tr class="separator:ad6393490c14c3d5510d1cc9bd1b6d985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eb85478207f92cc1b64512422ebc51a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a> ()</td></tr>
<tr class="separator:a0eb85478207f92cc1b64512422ebc51a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b05e999018c733b79d986d6913421d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a39b05e999018c733b79d986d6913421d">updateEventRegistration</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> enable, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> disable)</td></tr>
<tr class="separator:a39b05e999018c733b79d986d6913421d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e58fa61e790fa3677134f27830c272"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">doClose</a> ()</td></tr>
<tr class="separator:a73e58fa61e790fa3677134f27830c272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e15b31f2e7087c75d9d916a7bd7db7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a> ()</td></tr>
<tr class="separator:a33e15b31f2e7087c75d9d916a7bd7db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16ce6547bcd2004dd8b5fb2467f4791"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a> ()</td></tr>
<tr class="separator:aa16ce6547bcd2004dd8b5fb2467f4791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdfb120ff46b93e4ad7ff6977d006fbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abdfb120ff46b93e4ad7ff6977d006fbb">finishFail</a> (const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:abdfb120ff46b93e4ad7ff6977d006fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44ec1c4666f6c1b2ba6167ad5769030f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a44ec1c4666f6c1b2ba6167ad5769030f">invokeAllErrors</a> (const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:a44ec1c4666f6c1b2ba6167ad5769030f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bf01814cfb39f9bf71b4bfcd1842a75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a6bf01814cfb39f9bf71b4bfcd1842a75">fail</a> (const char *fn, const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:a6bf01814cfb39f9bf71b4bfcd1842a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ea20cc1d2d9bef07579d829afeaca9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">failConnect</a> (const char *fn, const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:a87ea20cc1d2d9bef07579d829afeaca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc2de07e06e9afffc77c91fbcfa183e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">failRead</a> (const char *fn, const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:adc2de07e06e9afffc77c91fbcfa183e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417c5ee887446af4b620d5e7a4790a93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a417c5ee887446af4b620d5e7a4790a93">failErrMessageRead</a> (const char *fn, const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:a417c5ee887446af4b620d5e7a4790a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb6d052c065fe2d254e4b073d956f0fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a> (const char *fn, <a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *callback, size_t bytesWritten, const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:abb6d052c065fe2d254e4b073d956f0fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc9e0b1ee6c9604469dcba43e635372"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#acbc9e0b1ee6c9604469dcba43e635372">failWrite</a> (const char *fn, const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:acbc9e0b1ee6c9604469dcba43e635372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0882ee58c818367f82b6b6a4db50dd1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">failAllWrites</a> (const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:a0882ee58c818367f82b6b6a4db50dd1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b199293a4651f5b6e52baa27fe3a94"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a43b199293a4651f5b6e52baa27fe3a94">invokeConnectErr</a> (const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;ex)</td></tr>
<tr class="separator:a43b199293a4651f5b6e52baa27fe3a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd8439868d842f50758e17f1fd2092e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a2cd8439868d842f50758e17f1fd2092e">invokeConnectSuccess</a> ()</td></tr>
<tr class="separator:a2cd8439868d842f50758e17f1fd2092e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5838613ef655ef0ad26ac6a27cfef4f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a> (<a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a> *callback)</td></tr>
<tr class="separator:a5838613ef655ef0ad26ac6a27cfef4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1c0cd857b15bea7d87266ebb1bdb45d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ae1c0cd857b15bea7d87266ebb1bdb45d">invalidState</a> (<a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> *callback)</td></tr>
<tr class="separator:ae1c0cd857b15bea7d87266ebb1bdb45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc436d9885a9a0abbf94b4cb384eae00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#adc436d9885a9a0abbf94b4cb384eae00">invalidState</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a> *callback)</td></tr>
<tr class="separator:adc436d9885a9a0abbf94b4cb384eae00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92cdcbb5ed1efcc36ebbb4224783a94d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a92cdcbb5ed1efcc36ebbb4224783a94d">invalidState</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *callback)</td></tr>
<tr class="separator:a92cdcbb5ed1efcc36ebbb4224783a94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82ad311206f8bda954e7b8f6363b6f08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a> (const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;<a class="el" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a>)</td></tr>
<tr class="separator:a82ad311206f8bda954e7b8f6363b6f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0df7dc3ac8600329165a8fc81b7ba0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a7d0df7dc3ac8600329165a8fc81b7ba0">cacheLocalAddress</a> () const </td></tr>
<tr class="separator:a7d0df7dc3ac8600329165a8fc81b7ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d096903ae1704e7784656ff0df1a20d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a0d096903ae1704e7784656ff0df1a20d">cachePeerAddress</a> () const </td></tr>
<tr class="separator:a0d096903ae1704e7784656ff0df1a20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2df177b0b6319bdda09875af3f240330"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a2df177b0b6319bdda09875af3f240330">isZeroCopyRequest</a> (<a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a> <a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>)</td></tr>
<tr class="separator:a2df177b0b6319bdda09875af3f240330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f2caffee8c9b814ea6c2138e127724"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a62f2caffee8c9b814ea6c2138e127724">isZeroCopyMsg</a> (const cmsghdr &amp;cmsg) const </td></tr>
<tr class="separator:a62f2caffee8c9b814ea6c2138e127724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09bb5f87e58789177a2a07e06a9b9a36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a09bb5f87e58789177a2a07e06a9b9a36">processZeroCopyMsg</a> (const cmsghdr &amp;cmsg)</td></tr>
<tr class="separator:a09bb5f87e58789177a2a07e06a9b9a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a492a7676accebf96bf8047ecd0f95361"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a492a7676accebf96bf8047ecd0f95361">getNextZeroCopyBufId</a> ()</td></tr>
<tr class="separator:a492a7676accebf96bf8047ecd0f95361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeab8a5e33a423f02325c8d7c0d4365a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abeab8a5e33a423f02325c8d7c0d4365a">adjustZeroCopyFlags</a> (<a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">folly::WriteFlags</a> &amp;<a class="el" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>)</td></tr>
<tr class="separator:abeab8a5e33a423f02325c8d7c0d4365a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82c507b8ef666e4cfc3c0a58babd701c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a82c507b8ef666e4cfc3c0a58babd701c">addZeroCopyBuf</a> (std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;buf)</td></tr>
<tr class="separator:a82c507b8ef666e4cfc3c0a58babd701c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa42b0146796192240b7187998664bc33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aa42b0146796192240b7187998664bc33">addZeroCopyBuf</a> (<a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> *<a class="el" href="Hazptr_8h.html#a7e740ea149128af625c59cc9461ae0d3">ptr</a>)</td></tr>
<tr class="separator:aa42b0146796192240b7187998664bc33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4aec3bc7306879ad18bc04cb6f8b8fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aa4aec3bc7306879ad18bc04cb6f8b8fb">setZeroCopyBuf</a> (std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;buf)</td></tr>
<tr class="separator:aa4aec3bc7306879ad18bc04cb6f8b8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5bbb3715cf9cb9a3868a36bff6fc20b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac5bbb3715cf9cb9a3868a36bff6fc20b">containsZeroCopyBuf</a> (<a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> *<a class="el" href="Hazptr_8h.html#a7e740ea149128af625c59cc9461ae0d3">ptr</a>)</td></tr>
<tr class="separator:ac5bbb3715cf9cb9a3868a36bff6fc20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee5aa25fd7e7c37f7f1e2e0041d5dfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abee5aa25fd7e7c37f7f1e2e0041d5dfb">releaseZeroCopyBuf</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> id)</td></tr>
<tr class="separator:abee5aa25fd7e7c37f7f1e2e0041d5dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1AsyncTransport"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1AsyncTransport')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1AsyncTransport.html">folly::AsyncTransport</a></td></tr>
<tr class="memitem:ac039ad0ca1b2f656427c4cb816da62b6 inherit pro_methods_classfolly_1_1AsyncTransport"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncTransport.html#ac039ad0ca1b2f656427c4cb816da62b6">~AsyncTransport</a> () override=default</td></tr>
<tr class="separator:ac039ad0ca1b2f656427c4cb816da62b6 inherit pro_methods_classfolly_1_1AsyncTransport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1DelayedDestruction"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1DelayedDestruction')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestruction.html">folly::DelayedDestruction</a></td></tr>
<tr class="memitem:adc9a58eaf38e0e9afea76101942ae7df inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#adc9a58eaf38e0e9afea76101942ae7df">~DelayedDestruction</a> () override=default</td></tr>
<tr class="separator:adc9a58eaf38e0e9afea76101942ae7df inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42db04c8a694b8584822371afb67012c inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a42db04c8a694b8584822371afb67012c">DelayedDestruction</a> ()</td></tr>
<tr class="separator:a42db04c8a694b8584822371afb67012c inherit pro_methods_classfolly_1_1DelayedDestruction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1DelayedDestructionBase"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1DelayedDestructionBase')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestructionBase.html">folly::DelayedDestructionBase</a></td></tr>
<tr class="memitem:ad0257a1b700f005ee75d45ecf67abf76 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#ad0257a1b700f005ee75d45ecf67abf76">DelayedDestructionBase</a> ()</td></tr>
<tr class="separator:ad0257a1b700f005ee75d45ecf67abf76 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31591f967cbdb0b071bff2880de37cb0 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">getDestructorGuardCount</a> () const </td></tr>
<tr class="separator:a31591f967cbdb0b071bff2880de37cb0 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1AsyncReader"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1AsyncReader')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1AsyncReader.html">folly::AsyncReader</a></td></tr>
<tr class="memitem:a60b0536e2c70352df91bf320bb0d7947 inherit pro_methods_classfolly_1_1AsyncReader"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncReader.html#a60b0536e2c70352df91bf320bb0d7947">~AsyncReader</a> ()=default</td></tr>
<tr class="separator:a60b0536e2c70352df91bf320bb0d7947 inherit pro_methods_classfolly_1_1AsyncReader"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1AsyncWriter"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1AsyncWriter')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1AsyncWriter.html">folly::AsyncWriter</a></td></tr>
<tr class="memitem:a1a0777c10266ecfaf05164f7b789a82f inherit pro_methods_classfolly_1_1AsyncWriter"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncWriter.html#a1a0777c10266ecfaf05164f7b789a82f">~AsyncWriter</a> ()=default</td></tr>
<tr class="separator:a1a0777c10266ecfaf05164f7b789a82f inherit pro_methods_classfolly_1_1AsyncWriter"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a185c4e793feab0b51a786611cc3173af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a185c4e793feab0b51a786611cc3173af">zeroCopyBufId_</a> {0}</td></tr>
<tr class="separator:a185c4e793feab0b51a786611cc3173af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c8deddc31b2526738304413c014f9a"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>, <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a></td></tr>
<tr class="separator:ae7c8deddc31b2526738304413c014f9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad93a27de08b4923ac10d47852b8b91a"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> *, <a class="el" href="structfolly_1_1AsyncSocket_1_1IOBufInfo.html">IOBufInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a></td></tr>
<tr class="separator:aad93a27de08b4923ac10d47852b8b91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb17e4de6bf77ab3213561220dfd32b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68">StateEnum</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></td></tr>
<tr class="memdesc:a1eb17e4de6bf77ab3213561220dfd32b"><td class="mdescLeft">&#160;</td><td class="mdescRight">StateEnum describing current state.  <a href="#a1eb17e4de6bf77ab3213561220dfd32b">More...</a><br /></td></tr>
<tr class="separator:a1eb17e4de6bf77ab3213561220dfd32b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cf589f5b244f5919b524e25d9c6573c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a></td></tr>
<tr class="memdesc:a5cf589f5b244f5919b524e25d9c6573c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown state (ShutdownFlags)  <a href="#a5cf589f5b244f5919b524e25d9c6573c">More...</a><br /></td></tr>
<tr class="separator:a5cf589f5b244f5919b524e25d9c6573c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fb9807a3d991d80fe51070bb5a54e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a></td></tr>
<tr class="memdesc:a11fb9807a3d991d80fe51070bb5a54e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">EventBase::HandlerFlags settings.  <a href="#a11fb9807a3d991d80fe51070bb5a54e2">More...</a><br /></td></tr>
<tr class="separator:a11fb9807a3d991d80fe51070bb5a54e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac82bc5846ec324f7f7a44493ec5c0f48"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></td></tr>
<tr class="memdesc:ac82bc5846ec324f7f7a44493ec5c0f48"><td class="mdescLeft">&#160;</td><td class="mdescRight">The socket file descriptor.  <a href="#ac82bc5846ec324f7f7a44493ec5c0f48">More...</a><br /></td></tr>
<tr class="separator:ac82bc5846ec324f7f7a44493ec5c0f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1b028124db5daf901e095f21a3f053"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a></td></tr>
<tr class="memdesc:a3e1b028124db5daf901e095f21a3f053"><td class="mdescLeft">&#160;</td><td class="mdescRight">The address we tried to connect to.  <a href="#a3e1b028124db5daf901e095f21a3f053">More...</a><br /></td></tr>
<tr class="separator:a3e1b028124db5daf901e095f21a3f053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9a3ba327f65d68c592f0a27cc87997b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">localAddr_</a></td></tr>
<tr class="memdesc:ab9a3ba327f65d68c592f0a27cc87997b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The address we are connecting from.  <a href="#ab9a3ba327f65d68c592f0a27cc87997b">More...</a><br /></td></tr>
<tr class="separator:ab9a3ba327f65d68c592f0a27cc87997b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e5779653171e26bbac4121442767a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a></td></tr>
<tr class="memdesc:ad0e5779653171e26bbac4121442767a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The send timeout, in milliseconds.  <a href="#ad0e5779653171e26bbac4121442767a5">More...</a><br /></td></tr>
<tr class="separator:ad0e5779653171e26bbac4121442767a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13e6267a58606637f16040dc92a906d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">maxReadsPerEvent_</a></td></tr>
<tr class="memdesc:a13e6267a58606637f16040dc92a906d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max reads per event loop iteration.  <a href="#a13e6267a58606637f16040dc92a906d3">More...</a><br /></td></tr>
<tr class="separator:a13e6267a58606637f16040dc92a906d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af9d40372da8d8ef78e3dc541ce3c95"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a6af9d40372da8d8ef78e3dc541ce3c95">isBufferMovable_</a> {false}</td></tr>
<tr class="separator:a6af9d40372da8d8ef78e3dc541ce3c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656f40d4509ba634aea8934e06767ace"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a20c38cc5aac7cc6b0a3c6ab05428436d">int8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">readErr_</a> {<a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba14a73b401bf2064b1381b9109c295c39">READ_NO_ERROR</a>}</td></tr>
<tr class="memdesc:a656f40d4509ba634aea8934e06767ace"><td class="mdescLeft">&#160;</td><td class="mdescRight">The read error encountered, if any.  <a href="#a656f40d4509ba634aea8934e06767ace">More...</a><br /></td></tr>
<tr class="separator:a656f40d4509ba634aea8934e06767ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac67b3fa56a6bb51e0cdfcd79c9e6587c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a></td></tr>
<tr class="memdesc:ac67b3fa56a6bb51e0cdfcd79c9e6587c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="classfolly_1_1EventBase.html">EventBase</a>.  <a href="#ac67b3fa56a6bb51e0cdfcd79c9e6587c">More...</a><br /></td></tr>
<tr class="separator:ac67b3fa56a6bb51e0cdfcd79c9e6587c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac33cc28156e4b2efe2fcd8d08545d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteTimeout.html">WriteTimeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a></td></tr>
<tr class="memdesc:a3ac33cc28156e4b2efe2fcd8d08545d7"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structA.html">A</a> timeout for connect and write.  <a href="#a3ac33cc28156e4b2efe2fcd8d08545d7">More...</a><br /></td></tr>
<tr class="separator:a3ac33cc28156e4b2efe2fcd8d08545d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44cd7e00ca56a32008c4a9f7df9a7b3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1IoHandler.html">IoHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a></td></tr>
<tr class="memdesc:a44cd7e00ca56a32008c4a9f7df9a7b3e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structA.html">A</a> <a class="el" href="classfolly_1_1EventHandler.html">EventHandler</a> to monitor the fd.  <a href="#a44cd7e00ca56a32008c4a9f7df9a7b3e">More...</a><br /></td></tr>
<tr class="separator:a44cd7e00ca56a32008c4a9f7df9a7b3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afc3c01f58b7d7b06af81267da854fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1ImmediateReadCB.html">ImmediateReadCB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a></td></tr>
<tr class="memdesc:a6afc3c01f58b7d7b06af81267da854fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">LoopCallback for checking read.  <a href="#a6afc3c01f58b7d7b06af81267da854fb">More...</a><br /></td></tr>
<tr class="separator:a6afc3c01f58b7d7b06af81267da854fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7b2e4603cfb8308254b06df795bd87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a></td></tr>
<tr class="memdesc:a2c7b2e4603cfb8308254b06df795bd87"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a>.  <a href="#a2c7b2e4603cfb8308254b06df795bd87">More...</a><br /></td></tr>
<tr class="separator:a2c7b2e4603cfb8308254b06df795bd87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd2284b5c3231a222d1e437bf653a92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a></td></tr>
<tr class="memdesc:a8cd2284b5c3231a222d1e437bf653a92"><td class="mdescLeft">&#160;</td><td class="mdescRight">TimestampCallback.  <a href="#a8cd2284b5c3231a222d1e437bf653a92">More...</a><br /></td></tr>
<tr class="separator:a8cd2284b5c3231a222d1e437bf653a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7dadc0ca3105ab63508cbc033e85f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a></td></tr>
<tr class="memdesc:abe7dadc0ca3105ab63508cbc033e85f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt; Callback for retrieving  <a href="#abe7dadc0ca3105ab63508cbc033e85f9">More...</a><br /></td></tr>
<tr class="separator:abe7dadc0ca3105ab63508cbc033e85f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a906f90d8df2c070c588c5a9d82bb4044"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a></td></tr>
<tr class="memdesc:a906f90d8df2c070c588c5a9d82bb4044"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classfolly_1_1ReadCallback.html">ReadCallback</a>.  <a href="#a906f90d8df2c070c588c5a9d82bb4044">More...</a><br /></td></tr>
<tr class="separator:a906f90d8df2c070c588c5a9d82bb4044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd7789a2ae214e4841366cd78ade9b69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a></td></tr>
<tr class="memdesc:acd7789a2ae214e4841366cd78ade9b69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chain of WriteRequests.  <a href="#acd7789a2ae214e4841366cd78ade9b69">More...</a><br /></td></tr>
<tr class="separator:acd7789a2ae214e4841366cd78ade9b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34f907ef4780c65f65f487fbb101ddb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a></td></tr>
<tr class="memdesc:ad34f907ef4780c65f65f487fbb101ddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">End of <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a> chain.  <a href="#ad34f907ef4780c65f65f487fbb101ddb">More...</a><br /></td></tr>
<tr class="separator:ad34f907ef4780c65f65f487fbb101ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6378c8d2f69abec78df8c2d5256710cf"><td class="memItemLeft" align="right" valign="top">std::weak_ptr&lt; <a class="el" href="classfolly_1_1ShutdownSocketSet.html">ShutdownSocketSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">wShutdownSocketSet_</a></td></tr>
<tr class="separator:a6378c8d2f69abec78df8c2d5256710cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603a263c372b9611b611f6525f5415e6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">appBytesReceived_</a></td></tr>
<tr class="memdesc:a603a263c372b9611b611f6525f5415e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Num of bytes received from socket.  <a href="#a603a263c372b9611b611f6525f5415e6">More...</a><br /></td></tr>
<tr class="separator:a603a263c372b9611b611f6525f5415e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0d2fa902cb3aac97142a58580bbd27"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a1b0d2fa902cb3aac97142a58580bbd27">appBytesWritten_</a></td></tr>
<tr class="memdesc:a1b0d2fa902cb3aac97142a58580bbd27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Num of bytes written to socket.  <a href="#a1b0d2fa902cb3aac97142a58580bbd27">More...</a><br /></td></tr>
<tr class="separator:a1b0d2fa902cb3aac97142a58580bbd27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6344043cf39ccd7cbb4f200d5f983fcd"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a></td></tr>
<tr class="separator:a6344043cf39ccd7cbb4f200d5f983fcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee9c5b4e48ce86e5d0459243a04f106"><td class="memItemLeft" align="right" valign="top">std::chrono::steady_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">connectStartTime_</a></td></tr>
<tr class="separator:a0ee9c5b4e48ce86e5d0459243a04f106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a978a6b1e49cab71a0282771d71b58330"><td class="memItemLeft" align="right" valign="top">std::chrono::steady_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">connectEndTime_</a></td></tr>
<tr class="separator:a978a6b1e49cab71a0282771d71b58330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a480eeb96732defcff38a160fcd75bd5a"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">connectTimeout_</a> {0}</td></tr>
<tr class="separator:a480eeb96732defcff38a160fcd75bd5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7a199fbc05606dc14ec10938cc917e"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket_1_1EvbChangeCallback.html">EvbChangeCallback</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">evbChangeCb_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a4a7a199fbc05606dc14ec10938cc917e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a021fe473fcb0935ed3e52926f601d6c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html">BufferCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a021fe473fcb0935ed3e52926f601d6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0a936550b62f3ead97f33b0b5fdd40"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aef0a936550b62f3ead97f33b0b5fdd40">tfoEnabled_</a> {false}</td></tr>
<tr class="separator:aef0a936550b62f3ead97f33b0b5fdd40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabfb1f8f218b83c041ff22df6ba9584b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#aabfb1f8f218b83c041ff22df6ba9584b">tfoAttempted_</a> {false}</td></tr>
<tr class="separator:aabfb1f8f218b83c041ff22df6ba9584b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf23078ee5e1b8f6f27820d418d2b8e0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#acf23078ee5e1b8f6f27820d418d2b8e0">tfoFinished_</a> {false}</td></tr>
<tr class="separator:acf23078ee5e1b8f6f27820d418d2b8e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11e1c5946f6867e200b742a7a9ec81d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#af11e1c5946f6867e200b742a7a9ec81d">noTransparentTls_</a> {false}</td></tr>
<tr class="separator:af11e1c5946f6867e200b742a7a9ec81d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0822f5996b63b8dff24b72462051f21"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ae0822f5996b63b8dff24b72462051f21">noTSocks_</a> {false}</td></tr>
<tr class="separator:ae0822f5996b63b8dff24b72462051f21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ff0294ace9883cce16a3cc414c79eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a26ff0294ace9883cce16a3cc414c79eb">trackEor_</a> {false}</td></tr>
<tr class="separator:a26ff0294ace9883cce16a3cc414c79eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99736e9c89e1cf75d27defb5476c0bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> {false}</td></tr>
<tr class="separator:ad99736e9c89e1cf75d27defb5476c0bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad86ca763673ec724504693c6445a9c16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad86ca763673ec724504693c6445a9c16">zeroCopyVal_</a> {false}</td></tr>
<tr class="separator:ad86ca763673ec724504693c6445a9c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a078418769fa327ad592f58e115f65fca"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a078418769fa327ad592f58e115f65fca">zeroCopyReenableThreshold_</a> {0}</td></tr>
<tr class="separator:a078418769fa327ad592f58e115f65fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d60076e9e2951c3406b01eaf65e0646"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a2d60076e9e2951c3406b01eaf65e0646">zeroCopyReenableCounter_</a> {0}</td></tr>
<tr class="separator:a2d60076e9e2951c3406b01eaf65e0646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3907234f141981d565e4b4b0fec76827"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3907234f141981d565e4b4b0fec76827">peerCertData_</a></td></tr>
<tr class="separator:a3907234f141981d565e4b4b0fec76827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d64cd70c3ace2aaed6c7bac1569801"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#ad9d64cd70c3ace2aaed6c7bac1569801">selfCertData_</a></td></tr>
<tr class="separator:ad9d64cd70c3ace2aaed6c7bac1569801"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a3f1f5f6ed57460ff419047d771081702"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncSocket.html#a3f1f5f6ed57460ff419047d771081702">operator&lt;&lt;</a> (std::ostream &amp;os, const <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68">StateEnum</a> &amp;<a class="el" href="http__parser_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>)</td></tr>
<tr class="separator:a3f1f5f6ed57460ff419047d771081702"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="structA.html">A</a> class for performing asynchronous I/O on a socket.</p>
<p><a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> allows users to asynchronously wait for data on a socket, and to asynchronously send data.</p>
<p>The APIs for reading and writing are intentionally asymmetric. Waiting for data to read is a persistent API: a callback is installed, and is notified whenever new data is available. It continues to be notified of new events until it is uninstalled.</p>
<p><a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> does not provide read timeout functionality, because it typically cannot determine when the timeout should be active. Generally, a timeout should only be enabled when processing is blocked waiting on data from the remote endpoint. For server sockets, the timeout should not be active if the server is currently processing one or more outstanding requests for this socket. For client sockets, the timeout should not be active if there are no requests pending on the socket. Additionally, if a client has multiple pending requests, it will ususally want a separate timeout for each request, rather than a single read timeout.</p>
<p>The write API is fairly intuitive: a user can request to send a block of data, and a callback will be informed once the entire block has been transferred to the kernel, or on error. <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> does provide a send timeout, since most callers want to give up if the remote end stops responding and no further progress can be made sending the data. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00081">81</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ae7a1a4b816cc80381f9577af92c74bfd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="PackedSyncPtrTest_8cpp.html#a2a761d9ec8bcdc907b3e45a3ba097c32">std::map</a>&lt;<a class="el" href="classfolly_1_1AsyncSocket_1_1OptionKey.html">OptionKey</a>, int&gt; <a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">folly::AsyncSocket::OptionMap</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00376">376</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

</div>
</div>
<a class="anchor" id="a59188939b6c898468addc2f6d56c6376"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unique_ptr&lt;<a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>, <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">Destructor</a>&gt; <a class="el" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">folly::AsyncSocket::UniquePtr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00083">83</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a877dd6091ffe3c2d56fab4a550aba3bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bb">folly::AsyncSocket::ReadResultEnum</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0"></a>READ_EOF&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d"></a>READ_ERROR&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef"></a>READ_BLOCKING&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a877dd6091ffe3c2d56fab4a550aba3bba14a73b401bf2064b1381b9109c295c39"></a>READ_NO_ERROR&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00940">940</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                      {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">READ_EOF</a> = 0,</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">READ_ERROR</a> = -1,</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef">READ_BLOCKING</a> = -2,</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba14a73b401bf2064b1381b9109c295c39">READ_NO_ERROR</a> = -3,</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  };</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba14a73b401bf2064b1381b9109c295c39"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba14a73b401bf2064b1381b9109c295c39">folly::AsyncSocket::READ_NO_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00944">AsyncSocket.h:944</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">folly::AsyncSocket::READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00942">AsyncSocket.h:942</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef">folly::AsyncSocket::READ_BLOCKING</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00943">AsyncSocket.h:943</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">folly::AsyncSocket::READ_EOF</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00941">AsyncSocket.h:941</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d9cabdff57a7baf4b652e7219ce5338"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338">folly::AsyncSocket::ShutdownFlags</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"></a>SHUT_WRITE_PENDING&#160;</td><td class="fielddoc">
<p><a class="el" href="classfolly_1_1AsyncSocket.html#afe360d7c9c1381385b115ddcdd8c764f">shutdownWrite()</a> called, but we are still waiting on writes to drain </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"></a>SHUT_WRITE&#160;</td><td class="fielddoc">
<p>writes have been completely shut down </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"></a>SHUT_READ&#160;</td><td class="fielddoc">
<p>Reads have been shutdown.</p>
<p>At the moment we don't distinguish between remote read shutdown (received EOF from the remote end) and local read shutdown. We can only receive EOF when a read callback is set, and we immediately inform it of the EOF. Therefore there doesn't seem to be any reason to have a separate state of "received EOF but the local side may still want to
read".</p>
<p>We also don't currently provide any API for only shutting down the read side of a socket. (This is a no-op as far as TCP is concerned, anyway.) </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00962">962</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                     {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a> = 0x01,</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a> = 0x02,</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a> = 0x04,</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  };</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">folly::AsyncSocket::SHUT_WRITE_PENDING</a></div><div class="ttdoc">shutdownWrite() called, but we are still waiting on writes to drain </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00964">AsyncSocket.h:964</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a583098b445359f76611ffa98b2455a68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68">folly::AsyncSocket::StateEnum</a> : <a class="el" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df"></a>UNINIT&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"></a>CONNECTING&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"></a>ESTABLISHED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"></a>CLOSED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"></a>ERROR&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"></a>FAST_OPEN&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00797">797</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                       : <a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    UNINIT,</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    CONNECTING,</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    ESTABLISHED,</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    CLOSED,</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>,</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    FAST_OPEN,</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  };</div><div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">proxygen::ZstdStatusType::ERROR</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a75264044454c0e503366399eb234f501"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501">folly::AsyncSocket::WriteResultEnum</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab"></a>WRITE_ERROR&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00947">947</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                       {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab">WRITE_ERROR</a> = -1,</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  };</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab">folly::AsyncSocket::WRITE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00948">AsyncSocket.h:948</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a45779d1664a08156b88d8476da84586b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncSocket::AsyncSocket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00277">277</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00201">folly::AsyncSocket::SendMsgParamsCallback::getFlagsImpl()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00281">newSocket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    : <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>(<span class="keyword">nullptr</span>),</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>(<span class="keyword">this</span>, <span class="keyword">nullptr</span>),</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>(<span class="keyword">this</span>, <span class="keyword">nullptr</span>),</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>(<span class="keyword">this</span>) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;new AsyncSocket()&quot;</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa45d9bd6e0dedf44794fc2447a0179e9">init</a>();</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6afc3c01f58b7d7b06af81267da854fb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">folly::AsyncSocket::immediateReadHandler_</a></div><div class="ttdeci">ImmediateReadCB immediateReadHandler_</div><div class="ttdoc">LoopCallback for checking read. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01243">AsyncSocket.h:1243</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aa45d9bd6e0dedf44794fc2447a0179e9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa45d9bd6e0dedf44794fc2447a0179e9">folly::AsyncSocket::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00337">AsyncSocket.cpp:337</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7fed3c9fd178da6aab86f95e1828e7af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncSocket::AsyncSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new unconnected <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>.</p>
<p><a class="el" href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">connect()</a> must later be called on this socket to establish a connection. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00286">286</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    : <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>(evb),</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>(<span class="keyword">this</span>, evb),</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>(<span class="keyword">this</span>, evb),</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>(<span class="keyword">this</span>) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;new AsyncSocket(&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, evb=&quot;</span> &lt;&lt; evb &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa45d9bd6e0dedf44794fc2447a0179e9">init</a>();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6afc3c01f58b7d7b06af81267da854fb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">folly::AsyncSocket::immediateReadHandler_</a></div><div class="ttdeci">ImmediateReadCB immediateReadHandler_</div><div class="ttdoc">LoopCallback for checking read. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01243">AsyncSocket.h:1243</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aa45d9bd6e0dedf44794fc2447a0179e9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa45d9bd6e0dedf44794fc2447a0179e9">folly::AsyncSocket::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00337">AsyncSocket.cpp:337</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25e62ae64c2e38fd44591f08087721a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncSocket::AsyncSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>connectTimeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> and begin the connection process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evb</td><td><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> that will manage this socket. </td></tr>
    <tr><td class="paramname">address</td><td>The address to connect to. </td></tr>
    <tr><td class="paramname">connectTimeout</td><td><a class="el" href="classfolly_1_1Optional.html">Optional</a> timeout in milliseconds for the connection attempt. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00295">295</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    : <a class="code" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a>(evb) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">connect</a>(<span class="keyword">nullptr</span>, address, connectTimeout);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ab341d93c255e793e78288e0523cabd37"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">folly::AsyncSocket::connect</a></div><div class="ttdeci">virtual void connect(ConnectCallback *callback, const folly::SocketAddress &amp;address, int timeout=0, const OptionMap &amp;options=emptyOptionMap, const folly::SocketAddress &amp;bindAddr=anyAddress()) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00431">AsyncSocket.cpp:431</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a45779d1664a08156b88d8476da84586b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">folly::AsyncSocket::AsyncSocket</a></div><div class="ttdeci">AsyncSocket()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket.cpp:277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a683c8830507d9432aa81efe01e5d3dda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncSocket::AsyncSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>connectTimeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> and begin the connection process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evb</td><td><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> that will manage this socket. </td></tr>
    <tr><td class="paramname">ip</td><td>IP address to connect to (dotted-quad). </td></tr>
    <tr><td class="paramname">port</td><td>Destination port in host byte order. </td></tr>
    <tr><td class="paramname">connectTimeout</td><td><a class="el" href="classfolly_1_1Optional.html">Optional</a> timeout in milliseconds for the connection attempt. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00303">303</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    : <a class="code" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a>(evb) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">connect</a>(<span class="keyword">nullptr</span>, ip, port, connectTimeout);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ab341d93c255e793e78288e0523cabd37"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">folly::AsyncSocket::connect</a></div><div class="ttdeci">virtual void connect(ConnectCallback *callback, const folly::SocketAddress &amp;address, int timeout=0, const OptionMap &amp;options=emptyOptionMap, const folly::SocketAddress &amp;bindAddr=anyAddress()) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00431">AsyncSocket.cpp:431</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a45779d1664a08156b88d8476da84586b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">folly::AsyncSocket::AsyncSocket</a></div><div class="ttdeci">AsyncSocket()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket.cpp:277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a605dacd14a58c082bd8178202119a1a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncSocket::AsyncSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>zeroCopyBufId</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> from an already connected socket file descriptor.</p>
<p>Note that while <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> enables TCP_NODELAY for sockets it creates when connecting, it does not change the socket options when given an existing file descriptor. If callers want TCP_NODELAY enabled when using this version of the constructor, they need to explicitly call setNoDelay(true) after the constructor returns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evb</td><td><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> that will manage this socket. </td></tr>
    <tr><td class="paramname">fd</td><td><a class="el" href="classfolly_1_1File.html">File</a> descriptor to take over (should be a connected socket). </td></tr>
    <tr><td class="paramname">zeroCopyBufId</td><td>Zerocopy buf id to start with. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00312">312</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01271">noTransparentTls_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01272">noTSocks_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00420">setCloseOnExec()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    : <a class="code" href="classfolly_1_1AsyncSocket.html#a185c4e793feab0b51a786611cc3173af">zeroCopyBufId_</a>(zeroCopyBufId),</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>(evb),</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>(<span class="keyword">this</span>, evb),</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>(<span class="keyword">this</span>, evb, fd),</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>(<span class="keyword">this</span>) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;new AsyncSocket(&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, evb=&quot;</span> &lt;&lt; evb &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; fd</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, zeroCopyBufId=&quot;</span> &lt;&lt; zeroCopyBufId &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa45d9bd6e0dedf44794fc2447a0179e9">init</a>();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> = fd;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  disableTransparentFunctions(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, <a class="code" href="classfolly_1_1AsyncSocket.html#af11e1c5946f6867e200b742a7a9ec81d">noTransparentTls_</a>, <a class="code" href="classfolly_1_1AsyncSocket.html#ae0822f5996b63b8dff24b72462051f21">noTSocks_</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac8d9f7f1f3860742279ace525e342b2d">setCloseOnExec</a>();</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_af11e1c5946f6867e200b742a7a9ec81d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#af11e1c5946f6867e200b742a7a9ec81d">folly::AsyncSocket::noTransparentTls_</a></div><div class="ttdeci">bool noTransparentTls_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01271">AsyncSocket.h:1271</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6afc3c01f58b7d7b06af81267da854fb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">folly::AsyncSocket::immediateReadHandler_</a></div><div class="ttdeci">ImmediateReadCB immediateReadHandler_</div><div class="ttdoc">LoopCallback for checking read. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01243">AsyncSocket.h:1243</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac8d9f7f1f3860742279ace525e342b2d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac8d9f7f1f3860742279ace525e342b2d">folly::AsyncSocket::setCloseOnExec</a></div><div class="ttdeci">void setCloseOnExec()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00420">AsyncSocket.cpp:420</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a185c4e793feab0b51a786611cc3173af"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a185c4e793feab0b51a786611cc3173af">folly::AsyncSocket::zeroCopyBufId_</a></div><div class="ttdeci">uint32_t zeroCopyBufId_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01216">AsyncSocket.h:1216</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ae0822f5996b63b8dff24b72462051f21"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae0822f5996b63b8dff24b72462051f21">folly::AsyncSocket::noTSocks_</a></div><div class="ttdeci">bool noTSocks_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01272">AsyncSocket.h:1272</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aa45d9bd6e0dedf44794fc2447a0179e9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa45d9bd6e0dedf44794fc2447a0179e9">folly::AsyncSocket::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00337">AsyncSocket.cpp:337</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f2a51962c49bcbc249210d050f03445"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncSocket::AsyncSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">AsyncSocket::UniquePtr</a>&#160;</td>
          <td class="paramname"><em>oldAsyncSocket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create an <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> from a different, already connected <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>.</p>
<p>Similar to AsyncSocket(evb, fd) when fd was previously owned by an <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00327">327</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01258">preReceivedData_</a>.</p>
<div class="fragment"><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    : <a class="code" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a>(</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          oldAsyncSocket-&gt;getEventBase(),</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          oldAsyncSocket-&gt;detachFd(),</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          oldAsyncSocket-&gt;getZeroCopyBufId()) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(oldAsyncSocket-&gt;preReceivedData_);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a45779d1664a08156b88d8476da84586b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">folly::AsyncSocket::AsyncSocket</a></div><div class="ttdeci">AsyncSocket()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket.cpp:277</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6344043cf39ccd7cbb4f200d5f983fcd"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">folly::AsyncSocket::preReceivedData_</a></div><div class="ttdeci">std::unique_ptr&lt; IOBuf &gt; preReceivedData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01258">AsyncSocket.h:1258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac80316378cc7d26c3921b82612d5e09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncSocket::~AsyncSocket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Protected destructor.</p>
<p>Users of <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> must never delete it directly. Instead, invoke <a class="el" href="classfolly_1_1AsyncSocket.html#ae0f8c59aa413c7d7a130820d8c212a10">destroy()</a> instead. (See the documentation in DelayedDestruction.h for more details.) </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00358">358</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                          {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  VLOG(7) &lt;&lt; <span class="stringliteral">&quot;actual destruction of AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, evb=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a82c507b8ef666e4cfc3c0a58babd701c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::addZeroCopyBuf </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00924">924</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01224">idZeroCopyBufInfoMap_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01223">idZeroCopyBufPtrMap_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00038">ptr</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00117">folly::AsyncSocket::BytesWriteRequest::performWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                                                                {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <span class="keywordtype">id</span> = <a class="code" href="classfolly_1_1AsyncSocket.html#a492a7676accebf96bf8047ecd0f95361">getNextZeroCopyBufId</a>();</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <a class="code" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>* <a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a> = buf.get();</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>[id] = <a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keyword">auto</span>&amp; p = <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>[<a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a>];</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  p.count_++;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  CHECK(p.buf_.get() == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  p.buf_ = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(buf);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBuf_html"><div class="ttname"><a href="classfolly_1_1IOBuf.html">folly::IOBuf</a></div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8h_source.html#l00221">IOBuf.h:221</a></div></div>
<div class="ttc" id="StaticSingletonManager_8cpp_html_a53a30bc00154d79fa155f60e2dfabf5f"><div class="ttname"><a href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="StaticSingletonManager_8cpp_source.html#l00038">StaticSingletonManager.cpp:38</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ae7c8deddc31b2526738304413c014f9a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">folly::AsyncSocket::idZeroCopyBufPtrMap_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, folly::IOBuf * &gt; idZeroCopyBufPtrMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01223">AsyncSocket.h:1223</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a492a7676accebf96bf8047ecd0f95361"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a492a7676accebf96bf8047ecd0f95361">folly::AsyncSocket::getNextZeroCopyBufId</a></div><div class="ttdeci">uint32_t getNextZeroCopyBufId()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01202">AsyncSocket.h:1202</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aad93a27de08b4923ac10d47852b8b91a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">folly::AsyncSocket::idZeroCopyBufInfoMap_</a></div><div class="ttdeci">std::unordered_map&lt; folly::IOBuf *, IOBufInfo &gt; idZeroCopyBufInfoMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01224">AsyncSocket.h:1224</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa42b0146796192240b7187998664bc33"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::addZeroCopyBuf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00935">935</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01224">idZeroCopyBufInfoMap_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01223">idZeroCopyBufPtrMap_</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00038">ptr</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>.</p>
<div class="fragment"><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                                {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <span class="keywordtype">id</span> = <a class="code" href="classfolly_1_1AsyncSocket.html#a492a7676accebf96bf8047ecd0f95361">getNextZeroCopyBufId</a>();</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>[id] = <a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>[<a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a>].count_++;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;}</div><div class="ttc" id="StaticSingletonManager_8cpp_html_a53a30bc00154d79fa155f60e2dfabf5f"><div class="ttname"><a href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="StaticSingletonManager_8cpp_source.html#l00038">StaticSingletonManager.cpp:38</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ae7c8deddc31b2526738304413c014f9a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">folly::AsyncSocket::idZeroCopyBufPtrMap_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, folly::IOBuf * &gt; idZeroCopyBufPtrMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01223">AsyncSocket.h:1223</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a492a7676accebf96bf8047ecd0f95361"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a492a7676accebf96bf8047ecd0f95361">folly::AsyncSocket::getNextZeroCopyBufId</a></div><div class="ttdeci">uint32_t getNextZeroCopyBufId()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01202">AsyncSocket.h:1202</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aad93a27de08b4923ac10d47852b8b91a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">folly::AsyncSocket::idZeroCopyBufInfoMap_</a></div><div class="ttdeci">std::unordered_map&lt; folly::IOBuf *, IOBufInfo &gt; idZeroCopyBufInfoMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01224">AsyncSocket.h:1224</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abeab8a5e33a423f02325c8d7c0d4365a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::adjustZeroCopyFlags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">folly::WriteFlags</a> &amp;&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00909">909</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncTransport_8h_source.html#l00112">folly::unSet()</a>, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94">folly::WRITE_MSG_ZEROCOPY</a>, <a class="el" href="AsyncSocket_8h_source.html#l01275">zeroCopyEnabled_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01279">zeroCopyReenableCounter_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00117">folly::AsyncSocket::BytesWriteRequest::performWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01022">writeChain()</a>.</p>
<div class="fragment"><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                                            {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a>) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="comment">// if the zeroCopyReenableCounter_ is &gt; 0</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="comment">// we try to dec and if we reach 0</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// we set zeroCopyEnabled_ to true</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a2d60076e9e2951c3406b01eaf65e0646">zeroCopyReenableCounter_</a>) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">if</span> (0 == --<a class="code" href="classfolly_1_1AsyncSocket.html#a2d60076e9e2951c3406b01eaf65e0646">zeroCopyReenableCounter_</a>) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> = <a class="code" href="namespacefolly.html#adb9c97ae289d7b991b32f85f1bb1c7ab">unSet</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>, <a class="code" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94">folly::WriteFlags::WRITE_MSG_ZEROCOPY</a>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div><div class="ttc" id="namespacefolly_html_a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94"><div class="ttname"><a href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94">folly::WriteFlags::WRITE_MSG_ZEROCOPY</a></div></div>
<div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2d60076e9e2951c3406b01eaf65e0646"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2d60076e9e2951c3406b01eaf65e0646">folly::AsyncSocket::zeroCopyReenableCounter_</a></div><div class="ttdeci">size_t zeroCopyReenableCounter_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01279">AsyncSocket.h:1279</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad99736e9c89e1cf75d27defb5476c0bf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">folly::AsyncSocket::zeroCopyEnabled_</a></div><div class="ttdeci">bool zeroCopyEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01275">AsyncSocket.h:1275</a></div></div>
<div class="ttc" id="namespacefolly_html_adb9c97ae289d7b991b32f85f1bb1c7ab"><div class="ttname"><a href="namespacefolly.html#adb9c97ae289d7b991b32f85f1bb1c7ab">folly::unSet</a></div><div class="ttdeci">WriteFlags unSet(WriteFlags a, WriteFlags b)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00112">AsyncTransport.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ba4829117ffbf38bd67786fad8aba44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp; folly::AsyncSocket::anyAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00394">394</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSSLSocket_8h_source.html#l00330">folly::AsyncSSLSocket::getSecurityProtocol()</a>, <a class="el" href="CurlClientMain_8cpp_source.html#l00050">main()</a>, and <a class="el" href="HTTPConnector_8h_source.html#l00040">proxygen::HTTPConnector::Callback::~Callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                                  {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> <a class="code" href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">anyAddress</a> =</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <a class="code" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>, 0);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">anyAddress</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div><div class="ttc" id="classfolly_1_1SocketAddress_html"><div class="ttname"><a href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00032">SocketAddress.h:32</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2ba4829117ffbf38bd67786fad8aba44"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">folly::AsyncSocket::anyAddress</a></div><div class="ttdeci">static const folly::SocketAddress &amp; anyAddress()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00394">AsyncSocket.cpp:394</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a17900d79fb3e5222f15b3007dba1a81c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::attachEventBase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>eventBase</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attach the transport to a <a class="el" href="classfolly_1_1EventBase.html">EventBase</a>.</p>
<p>This may only be called if the transport is not currently attached to a <a class="el" href="classfolly_1_1EventBase.html">EventBase</a> (by an earlier call to <a class="el" href="classfolly_1_1AsyncSocket.html#a8ac69a7c0a75e59f793e4648bb8524bb">detachEventBase()</a>).</p>
<p>This method must be invoked in the <a class="el" href="classfolly_1_1EventBase.html">EventBase</a>'s thread. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a8082f3b1ae3a31560ee9ebf84fa4295d">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#ae0005f2f20d17dacca2dd293dd4ee26c">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01500">1500</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventHandler_8cpp_source.html#l00109">folly::EventHandler::attachEventBase()</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00106">folly::AsyncTimeout::attachEventBase()</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01265">evbChangeCb_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8h_source.html#l00569">folly::AsyncSSLSocket::attachEventBase()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                                                      {</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::attachEventBase(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, old evb=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> &lt;&lt; <span class="stringliteral">&quot;, new evb=&quot;</span> &lt;&lt; eventBase</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;, events=&quot;</span> &lt;&lt; std::hex &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  eventBase-&gt;dcheckIsInEventBaseThread();</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> = eventBase;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#a232288a0b6f89ab52ace581e9efe60c6">attachEventBase</a>(eventBase);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>();</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#aa227584151bac9659957db81423aaf88">attachEventBase</a>(eventBase);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">evbChangeCb_</a>) {</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">evbChangeCb_</a>-&gt;evbAttached(<span class="keyword">this</span>);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  }</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a4a7a199fbc05606dc14ec10938cc917e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">folly::AsyncSocket::evbChangeCb_</a></div><div class="ttdeci">std::unique_ptr&lt; EvbChangeCallback &gt; evbChangeCb_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01265">AsyncSocket.h:1265</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a232288a0b6f89ab52ace581e9efe60c6"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a232288a0b6f89ab52ace581e9efe60c6">folly::EventHandler::attachEventBase</a></div><div class="ttdeci">void attachEventBase(EventBase *eventBase)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00109">EventHandler.cpp:109</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_aa227584151bac9659957db81423aaf88"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#aa227584151bac9659957db81423aaf88">folly::AsyncTimeout::attachEventBase</a></div><div class="ttdeci">void attachEventBase(EventBase *eventBase, InternalEnum internal=InternalEnum::NORMAL)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00106">AsyncTimeout.cpp:106</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b6fd3646648ecf2b246595cd9d8b11a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::cacheAddresses </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempt to cache the current local and peer addresses (if not already cached) so that they are available from <a class="el" href="classfolly_1_1AsyncSocket.html#a319ac9590b20589ca37bd231d45bc8bb">getPeerAddress()</a> and <a class="el" href="classfolly_1_1AsyncSocket.html#a9179612293943d41d71fd890adae87a8">getLocalAddress()</a> even after the socket is closed. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01544">1544</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01558">cacheLocalAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01564">cachePeerAddress()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00810">setEvbChangedCallback()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00461">folly::AsyncSSLSocket::sslAccept()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00753">folly::AsyncSSLSocket::sslConn()</a>.</p>
<div class="fragment"><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                                 {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &gt;= 0) {</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a7d0df7dc3ac8600329165a8fc81b7ba0">cacheLocalAddress</a>();</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a0d096903ae1704e7784656ff0df1a20d">cachePeerAddress</a>();</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::system_error&amp; e) {</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      <span class="keywordflow">if</span> (e.code() != std::error_code(ENOTCONN, std::system_category())) {</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        VLOG(2) &lt;&lt; <span class="stringliteral">&quot;Error caching addresses: &quot;</span> &lt;&lt; e.code().value() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                &lt;&lt; e.code().message();</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      }</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  }</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a7d0df7dc3ac8600329165a8fc81b7ba0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a7d0df7dc3ac8600329165a8fc81b7ba0">folly::AsyncSocket::cacheLocalAddress</a></div><div class="ttdeci">void cacheLocalAddress() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01558">AsyncSocket.cpp:1558</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0d096903ae1704e7784656ff0df1a20d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0d096903ae1704e7784656ff0df1a20d">folly::AsyncSocket::cachePeerAddress</a></div><div class="ttdeci">void cachePeerAddress() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01564">AsyncSocket.cpp:1564</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d0df7dc3ac8600329165a8fc81b7ba0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::cacheLocalAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01558">1558</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="SocketAddress_8h_source.html#l00131">folly::SocketAddress::isInitialized()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01231">localAddr_</a>, and <a class="el" href="SocketAddress_8cpp_source.html#l00253">folly::SocketAddress::setFromLocalAddress()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01544">cacheAddresses()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01575">getLocalAddress()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>.</p>
<div class="fragment"><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                                          {</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">localAddr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a4de4a36c108b788e4d44e416c930919d">isInitialized</a>()) {</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">localAddr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a0ccefbaaf2d996b1d638223dff433491">setFromLocalAddress</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  }</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ab9a3ba327f65d68c592f0a27cc87997b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">folly::AsyncSocket::localAddr_</a></div><div class="ttdeci">folly::SocketAddress localAddr_</div><div class="ttdoc">The address we are connecting from. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01231">AsyncSocket.h:1231</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a4de4a36c108b788e4d44e416c930919d"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a4de4a36c108b788e4d44e416c930919d">folly::SocketAddress::isInitialized</a></div><div class="ttdeci">bool isInitialized() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00131">SocketAddress.h:131</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a0ccefbaaf2d996b1d638223dff433491"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a0ccefbaaf2d996b1d638223dff433491">folly::SocketAddress::setFromLocalAddress</a></div><div class="ttdeci">void setFromLocalAddress(int socket)</div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00253">SocketAddress.cpp:253</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0d096903ae1704e7784656ff0df1a20d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::cachePeerAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01564">1564</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="SocketAddress_8h_source.html#l00131">folly::SocketAddress::isInitialized()</a>, and <a class="el" href="SocketAddress_8cpp_source.html#l00245">folly::SocketAddress::setFromPeerAddress()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01544">cacheAddresses()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01580">getPeerAddress()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                                         {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a4de4a36c108b788e4d44e416c930919d">isInitialized</a>()) {</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a5f3eaf698f77a363908cb175d2fecce5">setFromPeerAddress</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;}</div><div class="ttc" id="classfolly_1_1SocketAddress_html_a5f3eaf698f77a363908cb175d2fecce5"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a5f3eaf698f77a363908cb175d2fecce5">folly::SocketAddress::setFromPeerAddress</a></div><div class="ttdeci">void setFromPeerAddress(int socket)</div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00245">SocketAddress.cpp:245</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a4de4a36c108b788e4d44e416c930919d"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a4de4a36c108b788e4d44e416c930919d">folly::SocketAddress::isInitialized</a></div><div class="ttdeci">bool isInitialized() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00131">SocketAddress.h:131</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad743eebaa42bf8ee850b678fad3215c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::cancelConnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If a connect request is in-flight, cancels it and closes the socket immediately. Otherwise, this is a no-op.</p>
<p>This does not invoke any connection related callbacks. Call this to prevent any connect callback while cleaning up, etc. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00659">659</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                                {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a> || <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow</a>();</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a09c88d174fd0d7a87040d8db72e54862"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">folly::AsyncSocket::closeNow</a></div><div class="ttdeci">void closeNow() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01252">AsyncSocket.cpp:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5b3900bbfbc3b3df56139455812b1e20"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::checkForImmediateRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classAsyncSocketImmediateRead.html#ab04612515dfd4ddf2b5c4fb7c09d755f">AsyncSocketImmediateRead</a>, and <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a09359d734f3b5744d249aab730769dfc">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02147">2147</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01258">preReceivedData_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01073">folly::AsyncSSLSocket::checkForImmediateRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>.</p>
<div class="fragment"><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                                                 {</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="comment">// We currently don&#39;t attempt to perform optimistic reads in AsyncSocket.</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="comment">// (However, note that some subclasses do override this method.)</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// Simply calling handleRead() here would be bad, as this would call</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="comment">// readCallback_-&gt;getReadBuffer(), forcing the callback to allocate a read</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="comment">// buffer even though no data may be available.  This would waste lots of</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">// memory, since the buffer will sit around unused until the socket actually</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="comment">// becomes readable.</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="comment">// Checking if the socket is readable now also seems like it would probably</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="comment">// be a pessimism.  In most cases it probably wouldn&#39;t be readable, and we</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="comment">// would just waste an extra system call.  Even if it is readable, waiting to</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="comment">// find out from libevent on the next event loop doesn&#39;t seem that bad.</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="comment">// The exception to this is if we have pre-received data. In that case there</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <span class="comment">// is definitely data available immediately.</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a> &amp;&amp; !<a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a>-&gt;empty()) {</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a704ce81032be80dd5f36d23f0dfbedac">handleRead</a>();</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  }</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a704ce81032be80dd5f36d23f0dfbedac"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a704ce81032be80dd5f36d23f0dfbedac">folly::AsyncSocket::handleRead</a></div><div class="ttdeci">virtual void handleRead() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01881">AsyncSocket.cpp:1881</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6344043cf39ccd7cbb4f200d5f983fcd"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">folly::AsyncSocket::preReceivedData_</a></div><div class="ttdeci">std::unique_ptr&lt; IOBuf &gt; preReceivedData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01258">AsyncSocket.h:1258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acab4aa67f1dd2ee26c2aafeac75828ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Close the transport.</p>
<p>This gracefully closes the transport, waiting for all pending write requests to complete before actually closing the underlying transport.</p>
<p>If a read callback is set, readEOF() will be called immediately. If there are outstanding write requests, the close will be delayed until all remaining writes have completed. No new writes may be started after <a class="el" href="classfolly_1_1AsyncSocket.html#acab4aa67f1dd2ee26c2aafeac75828ad">close()</a> has been called. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#ae3d09675d9bf0a1df89904a664b59e3c">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01198">1198</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="EventHandler_8h_source.html#l00043">folly::EventHandler::READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">folly::AsyncReader::ReadCallback::readEOF()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l00964">SHUT_WRITE_PENDING</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00359">folly::AsyncSSLSocket::shutdownWrite()</a>, <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01471">TEST()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                        {</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::close(): this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd_=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;, shutdownFlags=&quot;</span> &lt;&lt; std::hex</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;          &lt;&lt; (int)<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a>;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">// close() is only different from closeNow() when there are pending writes</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// that need to drain before we can close.  In all other cases, just call</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// closeNow().</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// Note that writeReqHead_ can be non-nullptr even in STATE_CLOSED or</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// STATE_ERROR if close() is invoked while a previous closeNow() or failure</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="comment">// is still running.  (e.g., If there are multiple pending writes, and we</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// call writeError() on the first one, it may call close().  In this case we</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// will already be in STATE_CLOSED or STATE_ERROR, but the remaining pending</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// writes will still be in the queue.)</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="comment">// We only need to drain pending writes if we are still in STATE_CONNECTING</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// or STATE_ESTABLISHED</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>) ||</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      !(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a> || <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>)) {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow</a>();</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  }</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="comment">// Declare a DestructorGuard to ensure that the AsyncSocket cannot be</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// destroyed until close() returns.</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// Since there are write requests pending, we have to set the</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">// SHUT_WRITE_PENDING flag, and wait to perform the real close until the</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// connect finishes and we finish writing these requests.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// Set SHUT_READ to indicate that reads are shut down, and set the</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// SHUT_WRITE_PENDING flag to mark that we want to shutdown once the</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">// pending writes complete.</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= (<a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a> | <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">// If a read callback is set, invoke readEOF() immediately to inform it that</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// the socket has been closed and no more data can be read.</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>) {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">// Disable reads if they are enabled</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(0, <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">EventHandler::READ</a>)) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="comment">// We&#39;re now in the error state; callbacks have been cleaned up</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a>* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      callback-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">readEOF</a>();</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">folly::AsyncSocket::SHUT_WRITE_PENDING</a></div><div class="ttdoc">shutdownWrite() called, but we are still waiting on writes to drain </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00964">AsyncSocket.h:964</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a09c88d174fd0d7a87040d8db72e54862"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">folly::AsyncSocket::closeNow</a></div><div class="ttdeci">void closeNow() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01252">AsyncSocket.cpp:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransportWrapper_html_a2245452bbe2d83579c30d5351e232590"><div class="ttname"><a href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">folly::AsyncTransportWrapper::ReadCallback</a></div><div class="ttdeci">AsyncReader::ReadCallback ReadCallback</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00705">AsyncTransport.h:705</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a0cd391e44f632552f9d2acb816365246"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">folly::AsyncReader::ReadCallback::readEOF</a></div><div class="ttdeci">virtual void readEOF() noexcept=0</div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">folly::EventHandler::READ</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00043">EventHandler.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a09c88d174fd0d7a87040d8db72e54862"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::closeNow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Close the transport immediately.</p>
<p>This closes the transport immediately, dropping any outstanding data waiting to be written.</p>
<p>If a read callback is set, readEOF() will be called immediately. If there are outstanding write requests, these requests will be aborted and writeError() will be invoked immediately on all outstanding write callbacks. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#afcc407575bd83dbf5fe7ab0b90318364">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#ac0e6e8b456d442b7b945c2890350e73d">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01252">1252</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00155">folly::EventBase::LoopCallback::cancelLoopCallback()</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00084">folly::AsyncTimeout::cancelTimeout()</a>, <a class="el" href="EventHandler_8h_source.html#l00143">folly::EventHandler::changeHandlerFD()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453">folly::DFATAL</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02661">failAllWrites()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01243">immediateReadHandler_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02730">invokeConnectErr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="EventBase_8h_source.html#l00160">folly::EventBase::LoopCallback::isLoopCallbackScheduled()</a>, <a class="el" href="EventHandler_8h_source.html#l00042">folly::EventHandler::NONE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">folly::AsyncReader::ReadCallback::readEOF()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l00966">SHUT_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="namespacefolly.html#a53ac8fa3fd5816946de6dfb5c8c81e2d">folly::socketClosedLocallyEx</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">UNINIT</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00659">cancelConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00327">folly::AsyncSSLSocket::closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01324">closeWithReset()</a>, <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00364">destroy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                           {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::closeNow(): this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd_=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;, shutdownFlags=&quot;</span> &lt;&lt; std::hex</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;          &lt;&lt; (int)<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>:</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>:</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>: {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= (<a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a> | <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <span class="comment">// If the write timeout was set, cancel it.</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">cancelTimeout</a>();</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="comment">// If we are registered for I/O events, unregister.</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> != <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> = <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>()) {</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;          <span class="comment">// We will have been moved into the error state.</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;          assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;          <span class="keywordflow">return</span>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>.<a class="code" href="classfolly_1_1EventBase_1_1LoopCallback.html#aed098dba0a92a874bb35e40170b47a97">isLoopCallbackScheduled</a>()) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>.<a class="code" href="classfolly_1_1EventBase_1_1LoopCallback.html#a2acd9352956b309677572284f5666d31">cancelLoopCallback</a>();</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &gt;= 0) {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">changeHandlerFD</a>(-1);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">doClose</a>();</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a43b199293a4651f5b6e52baa27fe3a94">invokeConnectErr</a>(<a class="code" href="namespacefolly.html#a53ac8fa3fd5816946de6dfb5c8c81e2d">socketClosedLocallyEx</a>);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">failAllWrites</a>(<a class="code" href="namespacefolly.html#a53ac8fa3fd5816946de6dfb5c8c81e2d">socketClosedLocallyEx</a>);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>) {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <a class="code" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a>* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        callback-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">readEOF</a>();</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>:</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="comment">// Do nothing.  It&#39;s possible that we are being called recursively</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="comment">// from inside a callback that we invoked inside another call to close()</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <span class="comment">// that is still running.</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>:</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="comment">// Do nothing.  The error handling code has performed (or is performing)</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="comment">// cleanup.</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">StateEnum::UNINIT</a>:</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> == <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= (<a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a> | <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453">DFATAL</a>) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::closeNow() (this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;) called in unknown state &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a2080a127e6087755e7d603883bebfd55"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">folly::AsyncTimeout::cancelTimeout</a></div><div class="ttdeci">void cancelTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00084">AsyncTimeout.cpp:84</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="namespacefolly_html_a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453"><div class="ttname"><a href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453">folly::LogLevel::DFATAL</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">folly::EventHandler::NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00042">EventHandler.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0882ee58c818367f82b6b6a4db50dd1c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">folly::AsyncSocket::failAllWrites</a></div><div class="ttdeci">void failAllWrites(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02661">AsyncSocket.cpp:2661</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_1_1LoopCallback_html_aed098dba0a92a874bb35e40170b47a97"><div class="ttname"><a href="classfolly_1_1EventBase_1_1LoopCallback.html#aed098dba0a92a874bb35e40170b47a97">folly::EventBase::LoopCallback::isLoopCallbackScheduled</a></div><div class="ttdeci">bool isLoopCallbackScheduled() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00160">EventBase.h:160</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6afc3c01f58b7d7b06af81267da854fb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">folly::AsyncSocket::immediateReadHandler_</a></div><div class="ttdeci">ImmediateReadCB immediateReadHandler_</div><div class="ttdoc">LoopCallback for checking read. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01243">AsyncSocket.h:1243</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_1_1LoopCallback_html_a2acd9352956b309677572284f5666d31"><div class="ttname"><a href="classfolly_1_1EventBase_1_1LoopCallback.html#a2acd9352956b309677572284f5666d31">folly::EventBase::LoopCallback::cancelLoopCallback</a></div><div class="ttdeci">void cancelLoopCallback()</div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00155">EventBase.h:155</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">folly::AsyncSocket::StateEnum::UNINIT</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_aef72fafbedd426fb96c4dd46b6d85395"><div class="ttname"><a href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">folly::EventHandler::changeHandlerFD</a></div><div class="ttdeci">void changeHandlerFD(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00143">EventHandler.h:143</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransportWrapper_html_a2245452bbe2d83579c30d5351e232590"><div class="ttname"><a href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">folly::AsyncTransportWrapper::ReadCallback</a></div><div class="ttdeci">AsyncReader::ReadCallback ReadCallback</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00705">AsyncTransport.h:705</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a73e58fa61e790fa3677134f27830c272"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">folly::AsyncSocket::doClose</a></div><div class="ttdeci">void doClose()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02790">AsyncSocket.cpp:2790</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
<div class="ttc" id="namespacefolly_html_a53ac8fa3fd5816946de6dfb5c8c81e2d"><div class="ttname"><a href="namespacefolly.html#a53ac8fa3fd5816946de6dfb5c8c81e2d">folly::socketClosedLocallyEx</a></div><div class="ttdeci">const AsyncSocketException socketClosedLocallyEx(AsyncSocketException::END_OF_FILE,&quot;socket closed locally&quot;)</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a0cd391e44f632552f9d2acb816365246"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">folly::AsyncReader::ReadCallback::readEOF</a></div><div class="ttdeci">virtual void readEOF() noexcept=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a43b199293a4651f5b6e52baa27fe3a94"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a43b199293a4651f5b6e52baa27fe3a94">folly::AsyncSocket::invokeConnectErr</a></div><div class="ttdeci">virtual void invokeConnectErr(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02730">AsyncSocket.cpp:2730</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adfa204e9062e66c5fb97f45a6783a8fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::closeWithReset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reset the transport immediately.</p>
<p>This closes the transport immediately, sending a reset to the remote peer if possible to indicate abnormal shutdown.</p>
<p>Note that not all subclasses implement this reset functionality: some subclasses may treat reset() the same as <a class="el" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow()</a>. Subclasses that use TCP transports should terminate the connection with a TCP reset. </p>

<p>Reimplemented from <a class="el" href="classfolly_1_1AsyncTransport.html#a5079a43e880315bbd64cbd4f1387f178">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01324">1324</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00727">setSockOpt()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                                 {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="comment">// Enable SO_LINGER, with the linger timeout set to 0.</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">// This will trigger a TCP reset when we close the socket.</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &gt;= 0) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keyword">struct </span>linger optLinger = {1, 0};</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a415ccca275e051318710c1b677dfd64e">setSockOpt</a>(SOL_SOCKET, SO_LINGER, &amp;optLinger) != 0) {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      VLOG(2) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::closeWithReset(): error setting SO_LINGER &quot;</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;on &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;: errno=&quot;</span> &lt;&lt; errno;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// Then let closeNow() take care of the rest</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow</a>();</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a415ccca275e051318710c1b677dfd64e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a415ccca275e051318710c1b677dfd64e">folly::AsyncSocket::setSockOpt</a></div><div class="ttdeci">int setSockOpt(int level, int optname, const T *optval)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00727">AsyncSocket.h:727</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a09c88d174fd0d7a87040d8db72e54862"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">folly::AsyncSocket::closeNow</a></div><div class="ttdeci">void closeNow() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01252">AsyncSocket.cpp:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab341d93c255e793e78288e0523cabd37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">OptionMap</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="classfolly_1_1AsyncSocket.html#a5bc92a7d9a26f853da734a4d1793c95a">emptyOptionMap</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>bindAddr</em> = <code><a class="el" href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">anyAddress</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initiate a connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>The callback to inform when the connection attempt completes. </td></tr>
    <tr><td class="paramname">address</td><td>The address to connect to. </td></tr>
    <tr><td class="paramname">timeout</td><td><a class="el" href="structA.html">A</a> timeout value, in milliseconds. If the connection does not succeed within this period, callback-&gt;connectError() will be invoked. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#ab7feab677bce92f6606e30fd29587835">folly::AsyncSSLSocket</a>, <a class="el" href="classfolly_1_1test_1_1MockAsyncSSLSocket.html#a6d7f104a8db98f654cd91dad5531815b">folly::test::MockAsyncSSLSocket</a>, and <a class="el" href="classfolly_1_1test_1_1MockAsyncSocket.html#af9ade1d2af15d321aa438b2b375db8ea">folly::test::MockAsyncSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00431">431</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="ShutdownSocketSet_8cpp_source.html#l00035">folly::ShutdownSocketSet::add()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00394">anyAddress()</a>, <a class="el" href="NetOps_8cpp_source.html#l00076">folly::netops::bind()</a>, <a class="el" href="EventHandler_8h_source.html#l00143">folly::EventHandler::changeHandlerFD()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01261">connectEndTime_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="AsyncSocket_8h_source.html#l01260">connectStartTime_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01263">connectTimeout_</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01246">errMessageCallback_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00362">folly::SocketAddress::getActualSize()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02739">invokeConnectSuccess()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="http__parser_8c_source.html#l00437">name</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00030">folly::AsyncSocketException::NOT_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01271">noTransparentTls_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01272">noTSocks_</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00420">setCloseOnExec()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01589">setNoDelay()</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00860">setZeroCopy()</a>, <a class="el" href="ShutdownSocketSetTest_8cpp_source.html#l00034">folly::test::shutdownSocketSet</a>, <a class="el" href="NetOps_8cpp_source.html#l00412">folly::netops::socket()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00600">socketConnect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01269">tfoAttempted_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01268">tfoEnabled_</a>, <a class="el" href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc">folly::detail::timeout</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">UNINIT</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01252">wShutdownSocketSet_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01276">zeroCopyVal_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00295">AsyncSocket()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00692">folly::AsyncSSLSocket::connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00643">connect()</a>, <a class="el" href="AsyncSSLSocket_8h_source.html#l00330">folly::AsyncSSLSocket::getSecurityProtocol()</a>, <a class="el" href="SSLCacheTest_8cpp_source.html#l00199">SSLCacheClient::start()</a>, and <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01542">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                                 {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a> = address;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// Make sure we&#39;re in the uninitialized state</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> != <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">StateEnum::UNINIT</a>) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">connectTimeout_</a> = std::chrono::milliseconds(timeout);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">connectStartTime_</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">std::chrono::steady_clock::now</a>();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// Make connect end time at least &gt;= connectStartTime.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">connectEndTime_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">connectStartTime_</a>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> == -1);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> = callback;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  sockaddr_storage addrStorage;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  sockaddr* saddr = <span class="keyword">reinterpret_cast&lt;</span>sockaddr*<span class="keyword">&gt;</span>(&amp;addrStorage);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// Create the socket</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// Technically the first parameter should actually be a protocol family</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// constant (PF_xxx) rather than an address family (AF_xxx), but the</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// distinction is mainly just historical.  In pretty much all</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// implementations the PF_foo and AF_foo constants are identical.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> = <a class="code" href="namespacefolly_1_1netops.html#a5b95b96a5a185bb8cae1a4d28e0a6249">fsp::socket</a>(address.<a class="code" href="classfolly_1_1SocketAddress.html#a7f3d2de895c6537c3c06c61089a4ce78">getFamily</a>(), SOCK_STREAM, 0);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to create socket&quot;</span>),</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          errnoCopy);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    disableTransparentFunctions(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, <a class="code" href="classfolly_1_1AsyncSocket.html#af11e1c5946f6867e200b742a7a9ec81d">noTransparentTls_</a>, <a class="code" href="classfolly_1_1AsyncSocket.html#ae0822f5996b63b8dff24b72462051f21">noTSocks_</a>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">wShutdownSocketSet_</a>.lock()) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a>-&gt;<a class="code" href="classfolly_1_1ShutdownSocketSet.html#a415b7df74172675e9331810c91048049">add</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">changeHandlerFD</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ac8d9f7f1f3860742279ace525e342b2d">setCloseOnExec</a>();</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// Put the socket in non-blocking mode</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> = fcntl(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, F_GETFL, 0);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (flags == -1) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to get socket flags&quot;</span>),</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;          errnoCopy);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">int</span> rv = fcntl(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, F_SETFL, flags | O_NONBLOCK);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (rv == -1) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to put socket in non-blocking mode&quot;</span>),</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          errnoCopy);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">#if !defined(MSG_NOSIGNAL) &amp;&amp; defined(F_SETNOSIGPIPE)</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// iOS and OS X don&#39;t support MSG_NOSIGNAL; set F_SETNOSIGPIPE instead</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    rv = fcntl(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, F_SETNOSIGPIPE, 1);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (rv == -1) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          <span class="stringliteral">&quot;failed to enable F_SETNOSIGPIPE on socket&quot;</span>,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          errnoCopy);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">// By default, turn on TCP_NODELAY</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// If setNoDelay() fails, we continue anyway; this isn&#39;t a fatal error.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// setNoDelay() will log an error message if it fails.</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// Also set the cached zeroCopyVal_ since it cannot be set earlier if the fd</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// is not created</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (address.<a class="code" href="classfolly_1_1SocketAddress.html#a7f3d2de895c6537c3c06c61089a4ce78">getFamily</a>() != AF_UNIX) {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      (void)<a class="code" href="classfolly_1_1AsyncSocket.html#a4f4196e93e89bf6e7bcff383a40f315e">setNoDelay</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5afbe9dfa62d935143e2d9c88816b19e">setZeroCopy</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ad86ca763673ec724504693c6445a9c16">zeroCopyVal_</a>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::connect(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, evb=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, host=&quot;</span> &lt;&lt; address.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>().c_str();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">// bind the socket</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (bindAddr != <a class="code" href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">anyAddress</a>()) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordtype">int</span> one = 1;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SOL_SOCKET, SO_REUSEADDR, &amp;one, <span class="keyword">sizeof</span>(one))) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">doClose</a>();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">AsyncSocketException::NOT_OPEN</a>,</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="stringliteral">&quot;failed to setsockopt prior to bind on &quot;</span> + bindAddr.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>(),</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            errnoCopy);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      bindAddr.<a class="code" href="classfolly_1_1SocketAddress.html#a18e296d1cb96598fcbe7ad71af0ccd43">getAddress</a>(&amp;addrStorage);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a169c47f12a823de180fb9e9de51e951f">bind</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, saddr, bindAddr.<a class="code" href="classfolly_1_1SocketAddress.html#a9d36e77731a632f37552db234db02300">getActualSize</a>()) != 0) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">doClose</a>();</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">AsyncSocketException::NOT_OPEN</a>,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="stringliteral">&quot;failed to bind to async socket: &quot;</span> + bindAddr.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>(),</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            errnoCopy);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// Apply the additional options if any.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; opt : options) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      rv = opt.first.apply(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, opt.second);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">if</span> (rv != 0) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to set socket option&quot;</span>),</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            errnoCopy);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// Perform the connect()</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    address.<a class="code" href="classfolly_1_1SocketAddress.html#a18e296d1cb96598fcbe7ad71af0ccd43">getAddress</a>(&amp;addrStorage);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#aef0a936550b62f3ead97f33b0b5fdd40">tfoEnabled_</a>) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#aabfb1f8f218b83c041ff22df6ba9584b">tfoAttempted_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a55b97da40cc72b3468e5dcc95aeab723">socketConnect</a>(saddr, <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a9d36e77731a632f37552db234db02300">getActualSize</a>()) &lt; 0) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// If we&#39;re still here the connect() succeeded immediately.</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// Fall through to call the callback outside of this try...catch block</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> AsyncSocketException&amp; ex) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">failConnect</a>(__func__, ex);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; ex) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// shouldn&#39;t happen, but handle it just in case</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::connect(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;): unexpected &quot;</span> &lt;&lt; <span class="keyword">typeid</span>(ex).<a class="code" href="http__parser_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>()</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; exception: &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    AsyncSocketException tex(</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;unexpected exception: &quot;</span>) + ex.what()));</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">failConnect</a>(__func__, tex);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// The connection succeeded immediately</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// The read callback may not have been set yet, and no writes may be pending</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// yet, so we don&#39;t have to register for any events at the moment.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  VLOG(8) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::connect succeeded immediately; this=&quot;</span> &lt;&lt; <span class="keyword">this</span>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> != <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a2cd8439868d842f50758e17f1fd2092e">invokeConnectSuccess</a>();</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div><div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a9d36e77731a632f37552db234db02300"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a9d36e77731a632f37552db234db02300">folly::SocketAddress::getActualSize</a></div><div class="ttdeci">socklen_t getActualSize() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00362">SocketAddress.cpp:362</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">folly::AsyncSocketException::NOT_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00030">AsyncSocketException.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0ee9c5b4e48ce86e5d0459243a04f106"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">folly::AsyncSocket::connectStartTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectStartTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01260">AsyncSocket.h:1260</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_af11e1c5946f6867e200b742a7a9ec81d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#af11e1c5946f6867e200b742a7a9ec81d">folly::AsyncSocket::noTransparentTls_</a></div><div class="ttdeci">bool noTransparentTls_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01271">AsyncSocket.h:1271</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a480eeb96732defcff38a160fcd75bd5a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">folly::AsyncSocket::connectTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds connectTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01263">AsyncSocket.h:1263</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6378c8d2f69abec78df8c2d5256710cf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">folly::AsyncSocket::wShutdownSocketSet_</a></div><div class="ttdeci">std::weak_ptr&lt; ShutdownSocketSet &gt; wShutdownSocketSet_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01252">AsyncSocket.h:1252</a></div></div>
<div class="ttc" id="http__parser_8c_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="http__parser_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8c_source.html#l00437">http_parser.c:437</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad86ca763673ec724504693c6445a9c16"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad86ca763673ec724504693c6445a9c16">folly::AsyncSocket::zeroCopyVal_</a></div><div class="ttdeci">bool zeroCopyVal_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01276">AsyncSocket.h:1276</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5afbe9dfa62d935143e2d9c88816b19e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5afbe9dfa62d935143e2d9c88816b19e">folly::AsyncSocket::setZeroCopy</a></div><div class="ttdeci">bool setZeroCopy(bool enable)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00860">AsyncSocket.cpp:860</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5838613ef655ef0ad26ac6a27cfef4f3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">folly::AsyncSocket::invalidState</a></div><div class="ttdeci">void invalidState(ConnectCallback *callback)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02676">AsyncSocket.cpp:2676</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a7f3d2de895c6537c3c06c61089a4ce78"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a7f3d2de895c6537c3c06c61089a4ce78">folly::SocketAddress::getFamily</a></div><div class="ttdeci">sa_family_t getFamily() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00407">SocketAddress.h:407</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2ba4829117ffbf38bd67786fad8aba44"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2ba4829117ffbf38bd67786fad8aba44">folly::AsyncSocket::anyAddress</a></div><div class="ttdeci">static const folly::SocketAddress &amp; anyAddress()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00394">AsyncSocket.cpp:394</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8cd2284b5c3231a222d1e437bf653a92"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">folly::AsyncSocket::errMessageCallback_</a></div><div class="ttdeci">ErrMessageCallback * errMessageCallback_</div><div class="ttdoc">TimestampCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01246">AsyncSocket.h:1246</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">folly::AsyncSocket::StateEnum::UNINIT</a></div></div>
<div class="ttc" id="namespacefolly_1_1test_html_afd367401765c92ca52e1f5a35623614e"><div class="ttname"><a href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">folly::test::shutdownSocketSet</a></div><div class="ttdeci">ShutdownSocketSet shutdownSocketSet</div><div class="ttdef"><b>Definition:</b> <a href="ShutdownSocketSetTest_8cpp_source.html#l00034">ShutdownSocketSetTest.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac8d9f7f1f3860742279ace525e342b2d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac8d9f7f1f3860742279ace525e342b2d">folly::AsyncSocket::setCloseOnExec</a></div><div class="ttdeci">void setCloseOnExec()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00420">AsyncSocket.cpp:420</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a87ea20cc1d2d9bef07579d829afeaca9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">folly::AsyncSocket::failConnect</a></div><div class="ttdeci">void failConnect(const char *fn, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02577">AsyncSocket.cpp:2577</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a5b95b96a5a185bb8cae1a4d28e0a6249"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5b95b96a5a185bb8cae1a4d28e0a6249">folly::netops::socket</a></div><div class="ttdeci">NetworkSocket socket(int af, int type, int protocol)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00412">NetOps.cpp:412</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a18e296d1cb96598fcbe7ad71af0ccd43"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a18e296d1cb96598fcbe7ad71af0ccd43">folly::SocketAddress::getAddress</a></div><div class="ttdeci">socklen_t getAddress(sockaddr_storage *addr) const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00393">SocketAddress.h:393</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a978a6b1e49cab71a0282771d71b58330"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">folly::AsyncSocket::connectEndTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectEndTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01261">AsyncSocket.h:1261</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_aef72fafbedd426fb96c4dd46b6d85395"><div class="ttname"><a href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">folly::EventHandler::changeHandlerFD</a></div><div class="ttdeci">void changeHandlerFD(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00143">EventHandler.h:143</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ae0822f5996b63b8dff24b72462051f21"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae0822f5996b63b8dff24b72462051f21">folly::AsyncSocket::noTSocks_</a></div><div class="ttdeci">bool noTSocks_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01272">AsyncSocket.h:1272</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aabfb1f8f218b83c041ff22df6ba9584b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aabfb1f8f218b83c041ff22df6ba9584b">folly::AsyncSocket::tfoAttempted_</a></div><div class="ttdeci">bool tfoAttempted_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01269">AsyncSocket.h:1269</a></div></div>
<div class="ttc" id="classfolly_1_1ShutdownSocketSet_html_a415b7df74172675e9331810c91048049"><div class="ttname"><a href="classfolly_1_1ShutdownSocketSet.html#a415b7df74172675e9331810c91048049">folly::ShutdownSocketSet::add</a></div><div class="ttdeci">void add(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="ShutdownSocketSet_8cpp_source.html#l00035">ShutdownSocketSet.cpp:35</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a169c47f12a823de180fb9e9de51e951f"><div class="ttname"><a href="namespacefolly_1_1netops.html#a169c47f12a823de180fb9e9de51e951f">folly::netops::bind</a></div><div class="ttdeci">int bind(NetworkSocket s, const sockaddr *name, socklen_t namelen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00076">NetOps.cpp:76</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2cd8439868d842f50758e17f1fd2092e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2cd8439868d842f50758e17f1fd2092e">folly::AsyncSocket::invokeConnectSuccess</a></div><div class="ttdeci">virtual void invokeConnectSuccess()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02739">AsyncSocket.cpp:2739</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a73e58fa61e790fa3677134f27830c272"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">folly::AsyncSocket::doClose</a></div><div class="ttdeci">void doClose()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02790">AsyncSocket.cpp:2790</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a55b97da40cc72b3468e5dcc95aeab723"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a55b97da40cc72b3468e5dcc95aeab723">folly::AsyncSocket::socketConnect</a></div><div class="ttdeci">int socketConnect(const struct sockaddr *addr, socklen_t len)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00600">AsyncSocket.cpp:600</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a4f4196e93e89bf6e7bcff383a40f315e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a4f4196e93e89bf6e7bcff383a40f315e">folly::AsyncSocket::setNoDelay</a></div><div class="ttdeci">int setNoDelay(bool noDelay)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01589">AsyncSocket.cpp:1589</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aef0a936550b62f3ead97f33b0b5fdd40"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aef0a936550b62f3ead97f33b0b5fdd40">folly::AsyncSocket::tfoEnabled_</a></div><div class="ttdeci">bool tfoEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01268">AsyncSocket.h:1268</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9fff25f18cbd5529030906e1600dc01f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">OptionMap</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="classfolly_1_1AsyncSocket.html#a5bc92a7d9a26f853da734a4d1793c95a">emptyOptionMap</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00643">643</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, and <a class="el" href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc">folly::detail::timeout</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                       {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> = callback;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">connect</a>(callback, <a class="code" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a>(ip, port), timeout, options);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; ex) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    AsyncSocketException tex(<a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>, ex.what());</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">failConnect</a>(__func__, tex);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html"><div class="ttname"><a href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00032">SocketAddress.h:32</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ab341d93c255e793e78288e0523cabd37"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ab341d93c255e793e78288e0523cabd37">folly::AsyncSocket::connect</a></div><div class="ttdeci">virtual void connect(ConnectCallback *callback, const folly::SocketAddress &amp;address, int timeout=0, const OptionMap &amp;options=emptyOptionMap, const folly::SocketAddress &amp;bindAddr=anyAddress()) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00431">AsyncSocket.cpp:431</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a87ea20cc1d2d9bef07579d829afeaca9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">folly::AsyncSocket::failConnect</a></div><div class="ttdeci">void failConnect(const char *fn, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02577">AsyncSocket.cpp:2577</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a93e67c068481e6f6786e3c5b24e737c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::connecting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine if transport is connected to the endpoint</p>
<dl class="section return"><dt>Returns</dt><dd>false iff the transport is connected, otherwise true </dd></dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a5bbd3672cd5fb6d3f0df32ec140ffc51">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a23d21dbfdddea7987203b97eee7504a0">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00567">567</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00386">folly::AsyncSSLSocket::connecting()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                   {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac5bbb3715cf9cb9a3868a36bff6fc20b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::containsZeroCopyBuf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00963">963</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01224">idZeroCopyBufInfoMap_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00117">folly::AsyncSocket::BytesWriteRequest::performWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                                                     {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>.find(ptr) != <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>.end());</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aad93a27de08b4923ac10d47852b8b91a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">folly::AsyncSocket::idZeroCopyBufInfoMap_</a></div><div class="ttdeci">std::unordered_map&lt; folly::IOBuf *, IOBufInfo &gt; idZeroCopyBufInfoMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01224">AsyncSocket.h:1224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae0f8c59aa413c7d7a130820d8c212a10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destroy the socket.</p>
<p><a class="el" href="classfolly_1_1AsyncSocket.html#ae0f8c59aa413c7d7a130820d8c212a10">AsyncSocket::destroy()</a> must be called to destroy the socket. The normal destructor is private, and should not be invoked directly. This prevents callers from deleting a <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> while it is invoking a callback. </p>

<p>Reimplemented from <a class="el" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">folly::DelayedDestruction</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00364">364</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="DelayedDestruction_8h_source.html#l00051">folly::DelayedDestruction::destroy()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00311">newSocket()</a>, <a class="el" href="SSLCacheTest_8cpp_source.html#l00199">SSLCacheClient::start()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00893">folly::AsyncSocket::WriteRequest::start()</a>, and <a class="el" href="SSLCacheTest_8cpp_source.html#l00068">SSLCacheClient::~SSLCacheClient()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                          {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::destroy(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, evb=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// When destroy is called, close the socket immediately</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow</a>();</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// Then call DelayedDestruction::destroy() to take care of</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// whether or not we need immediate or delayed destruction</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">DelayedDestruction::destroy</a>();</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a09c88d174fd0d7a87040d8db72e54862"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">folly::AsyncSocket::closeNow</a></div><div class="ttdeci">void closeNow() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01252">AsyncSocket.cpp:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1DelayedDestruction_html_a6dd27b219d5af8b2a93d6c324c65e95a"><div class="ttname"><a href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">folly::DelayedDestruction::destroy</a></div><div class="ttdeci">virtual void destroy()</div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestruction_8h_source.html#l00051">DelayedDestruction.h:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8ac69a7c0a75e59f793e4648bb8524bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::detachEventBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Detach the transport from its <a class="el" href="classfolly_1_1EventBase.html">EventBase</a>.</p>
<p>This may only be called when the transport is idle and has no reads or writes pending. Once detached, the transport may not be used again until it is re-attached to a <a class="el" href="classfolly_1_1EventBase.html">EventBase</a> by calling <a class="el" href="classfolly_1_1AsyncSocket.html#a17900d79fb3e5222f15b3007dba1a81c">attachEventBase()</a>.</p>
<p>This method must be called from the current <a class="el" href="classfolly_1_1EventBase.html">EventBase</a>'s thread. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a838296b6f5d1a222fa0f9fb044765c58">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#ad2b8cd4890cc3f0a5645c8ab700e5413">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01519">1519</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="EventHandler_8cpp_source.html#l00119">folly::EventHandler::detachEventBase()</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00126">folly::AsyncTimeout::detachEventBase()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01265">evbChangeCb_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="EventHandler_8cpp_source.html#l00103">folly::EventHandler::unregisterHandler()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8h_source.html#l00575">folly::AsyncSSLSocket::detachEventBase()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                                  {</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::detachEventBase(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, old evb=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, events=&quot;</span> &lt;&lt; std::hex &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">unregisterHandler</a>();</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#ad88a36559181920dce709d1836108eab">detachEventBase</a>();</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a0bac258c7aea6d852f5651025268c28b">detachEventBase</a>();</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">evbChangeCb_</a>) {</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">evbChangeCb_</a>-&gt;evbDetached(<span class="keyword">this</span>);</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a4a7a199fbc05606dc14ec10938cc917e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">folly::AsyncSocket::evbChangeCb_</a></div><div class="ttdeci">std::unique_ptr&lt; EvbChangeCallback &gt; evbChangeCb_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01265">AsyncSocket.h:1265</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a0bac258c7aea6d852f5651025268c28b"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a0bac258c7aea6d852f5651025268c28b">folly::AsyncTimeout::detachEventBase</a></div><div class="ttdeci">void detachEventBase()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00126">AsyncTimeout.cpp:126</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a72e295058c1ffc6a8506120c061dc991"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">folly::EventHandler::unregisterHandler</a></div><div class="ttdeci">void unregisterHandler()</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00103">EventHandler.cpp:103</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_ad88a36559181920dce709d1836108eab"><div class="ttname"><a href="classfolly_1_1EventHandler.html#ad88a36559181920dce709d1836108eab">folly::EventHandler::detachEventBase</a></div><div class="ttdeci">void detachEventBase()</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00119">EventHandler.cpp:119</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad61cbb0cc7c83a9aba9b1287461d5660"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::detachFd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Extract the file descriptor from the <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>.</p>
<p>This will immediately cause any installed callbacks to be invoked with an error. The <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> may no longer be used after the file descriptor has been extracted.</p>
<p>This method should be used with care as the resulting fd is not guaranteed to perfectly reflect the state of the <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> (security state, pre-received data, etc.).</p>
<p>Returns the file descriptor. The caller assumes ownership of the descriptor, and it will not be closed when the <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> is destroyed. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00375">375</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventHandler_8h_source.html#l00143">folly::EventHandler::changeHandlerFD()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01252">wShutdownSocketSet_</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, <a class="el" href="SSLCacheTest_8cpp_source.html#l00222">SSLCacheClient::connectSuccess()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00335">getFd()</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                          {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  VLOG(6) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::detachFd(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, evb=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, events=&quot;</span> &lt;&lt; std::hex &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// Extract the fd, and set fd_ to -1 first, so closeNow() won&#39;t</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// actually close the descriptor.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> socketSet = <a class="code" href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">wShutdownSocketSet_</a>.lock()) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    socketSet-&gt;remove(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordtype">int</span> fd = <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> = -1;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// Call closeNow() to invoke all pending callbacks with an error.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow</a>();</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// Update the EventHandler to stop using this fd.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// This can only be done after closeNow() unregisters the handler.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">changeHandlerFD</a>(-1);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">return</span> fd;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a09c88d174fd0d7a87040d8db72e54862"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">folly::AsyncSocket::closeNow</a></div><div class="ttdeci">void closeNow() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01252">AsyncSocket.cpp:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6378c8d2f69abec78df8c2d5256710cf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">folly::AsyncSocket::wShutdownSocketSet_</a></div><div class="ttdeci">std::weak_ptr&lt; ShutdownSocketSet &gt; wShutdownSocketSet_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01252">AsyncSocket.h:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_aef72fafbedd426fb96c4dd46b6d85395"><div class="ttname"><a href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">folly::EventHandler::changeHandlerFD</a></div><div class="ttdeci">void changeHandlerFD(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00143">EventHandler.h:143</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac5bafc05df5594e30343c4239cb0837e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::disableTransparentTls </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00789">789</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01271">noTransparentTls_</a>.</p>

<p>Referenced by <a class="el" href="AsyncFizzClient-inl_8h_source.html#l00092">fizz::client::AsyncFizzClientT&lt; SM &gt;::connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                               {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#af11e1c5946f6867e200b742a7a9ec81d">noTransparentTls_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_af11e1c5946f6867e200b742a7a9ec81d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#af11e1c5946f6867e200b742a7a9ec81d">folly::AsyncSocket::noTransparentTls_</a></div><div class="ttdeci">bool noTransparentTls_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01271">AsyncSocket.h:1271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e918cbd892344b7e36648909a5965b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::disableTSocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00793">793</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01272">noTSocks_</a>.</p>
<div class="fragment"><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                       {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ae0822f5996b63b8dff24b72462051f21">noTSocks_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ae0822f5996b63b8dff24b72462051f21"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae0822f5996b63b8dff24b72462051f21">folly::AsyncSocket::noTSocks_</a></div><div class="ttdeci">bool noTSocks_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01272">AsyncSocket.h:1272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a73e58fa61e790fa3677134f27830c272"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::doClose </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02790">2790</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="ShutdownSocketSet_8cpp_source.html#l00073">folly::ShutdownSocketSet::close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01224">idZeroCopyBufInfoMap_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01223">idZeroCopyBufPtrMap_</a>, <a class="el" href="ShutdownSocketSetTest_8cpp_source.html#l00034">folly::test::shutdownSocketSet</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01252">wShutdownSocketSet_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>.</p>
<div class="fragment"><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                          {</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> == -1) {</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  }</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">wShutdownSocketSet_</a>.lock()) {</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a>-&gt;<a class="code" href="classfolly_1_1ShutdownSocketSet.html#a4fdbae020a649b1e3e6819dd13a1913c">close</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#acab4aa67f1dd2ee26c2aafeac75828ad">::close</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  }</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> = -1;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <span class="comment">// we also want to clear the zerocopy maps</span></div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="comment">// if the fd has been closed</span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.clear();</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>.clear();</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ae7c8deddc31b2526738304413c014f9a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">folly::AsyncSocket::idZeroCopyBufPtrMap_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, folly::IOBuf * &gt; idZeroCopyBufPtrMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01223">AsyncSocket.h:1223</a></div></div>
<div class="ttc" id="classfolly_1_1ShutdownSocketSet_html_a4fdbae020a649b1e3e6819dd13a1913c"><div class="ttname"><a href="classfolly_1_1ShutdownSocketSet.html#a4fdbae020a649b1e3e6819dd13a1913c">folly::ShutdownSocketSet::close</a></div><div class="ttdeci">int close(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="ShutdownSocketSet_8cpp_source.html#l00073">ShutdownSocketSet.cpp:73</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6378c8d2f69abec78df8c2d5256710cf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">folly::AsyncSocket::wShutdownSocketSet_</a></div><div class="ttdeci">std::weak_ptr&lt; ShutdownSocketSet &gt; wShutdownSocketSet_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01252">AsyncSocket.h:1252</a></div></div>
<div class="ttc" id="namespacefolly_1_1test_html_afd367401765c92ca52e1f5a35623614e"><div class="ttname"><a href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">folly::test::shutdownSocketSet</a></div><div class="ttdeci">ShutdownSocketSet shutdownSocketSet</div><div class="ttdef"><b>Definition:</b> <a href="ShutdownSocketSetTest_8cpp_source.html#l00034">ShutdownSocketSetTest.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aad93a27de08b4923ac10d47852b8b91a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">folly::AsyncSocket::idZeroCopyBufInfoMap_</a></div><div class="ttdeci">std::unordered_map&lt; folly::IOBuf *, IOBufInfo &gt; idZeroCopyBufInfoMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01224">AsyncSocket.h:1224</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acab4aa67f1dd2ee26c2aafeac75828ad"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acab4aa67f1dd2ee26c2aafeac75828ad">folly::AsyncSocket::close</a></div><div class="ttdeci">void close() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01198">AsyncSocket.cpp:1198</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a66836c4af2b15fdb6ee504a365c35095"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::enableTFO </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Enables TFO behavior on the <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> if FOLLY_ALLOW_TFO is set. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00782">782</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01268">tfoEnabled_</a>.</p>
<div class="fragment"><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                   {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="comment">// No-op if folly does not allow tfo</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="preprocessor">#if FOLLY_ALLOW_TFO</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#aef0a936550b62f3ead97f33b0b5fdd40">tfoEnabled_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aef0a936550b62f3ead97f33b0b5fdd40"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aef0a936550b62f3ead97f33b0b5fdd40">folly::AsyncSocket::tfoEnabled_</a></div><div class="ttdeci">bool tfoEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01268">AsyncSocket.h:1268</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4f950291e2346b40e8f6cb368bdf70db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine if an error has occurred with this transport.</p>
<dl class="section return"><dt>Returns</dt><dd>true iff an error has occurred (not EOF). </dd></dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#ae1ae27a183eace80fcbb4e1501ee178a">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01496">1496</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSSLSocket_8h_source.html#l00836">folly::AsyncSSLSocket::handleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                              {</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6bf01814cfb39f9bf71b4bfcd1842a75"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::fail </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02569">2569</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__xml__test__utils_8py_source.html#l00117">gtest_xml_test_utils.GTestXMLTestCase::_GetChildren()</a>, <a class="el" href="fatal__test_8py_source.html#l00063">fatal_test.FatalTests::is_debug_build()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>.</p>
<div class="fragment"><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                                                                     {</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>()</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): failed in &quot;</span> &lt;&lt; fn &lt;&lt; <span class="stringliteral">&quot;(): &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0882ee58c818367f82b6b6a4db50dd1c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::failAllWrites </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02661">2661</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#aaeb53adc29689c0af3d23bf409b2af9e">folly::AsyncSocket::WriteRequest::destroy()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00907">folly::AsyncSocket::WriteRequest::getCallback()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00903">folly::AsyncSocket::WriteRequest::getNext()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00911">folly::AsyncSocket::WriteRequest::getTotalBytesWritten()</a>, <a class="el" href="classfolly_1_1AsyncWriter_1_1WriteCallback.html#ae3f28acad97f837ba5c274d9daf1a6ac">folly::AsyncWriter::WriteCallback::writeErr()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02542">invokeAllErrors()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>.</p>
<div class="fragment"><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                                                              {</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="comment">// Invoke writeError() on all write callbacks.</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="comment">// This is used when writes are forcibly shutdown with write requests</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// pending, or when an error occurs with writes pending.</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    WriteRequest* req = <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a>;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> = req-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#af5173cc67bdf54e47ac3d36dc4dbccd8">getNext</a>();</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <a class="code" href="classWriteCallback.html">WriteCallback</a>* callback = req-&gt;getCallback();</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      callback-&gt;<a class="code" href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">writeErr</a>(req-&gt;getTotalBytesWritten(), ex);</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    }</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    req-&gt;destroy();</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  }</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_af5173cc67bdf54e47ac3d36dc4dbccd8"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#af5173cc67bdf54e47ac3d36dc4dbccd8">folly::AsyncSocket::WriteRequest::getNext</a></div><div class="ttdeci">WriteRequest * getNext() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00903">AsyncSocket.h:903</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classWriteCallback_html"><div class="ttname"><a href="classWriteCallback.html">WriteCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00055">AsyncSocketTest.h:55</a></div></div>
<div class="ttc" id="classWriteCallback_html_ad6d54dcefaf048916f742774b660b0f7"><div class="ttname"><a href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">WriteCallback::writeErr</a></div><div class="ttdeci">void writeErr(size_t nBytesWritten, const folly::AsyncSocketException &amp;ex) noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00069">AsyncSocketTest.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a87ea20cc1d2d9bef07579d829afeaca9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::failConnect </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02577">2577</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02730">invokeConnectErr()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                                                                            {</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>()</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): failed while connecting in &quot;</span> &lt;&lt; fn &lt;&lt; <span class="stringliteral">&quot;(): &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a43b199293a4651f5b6e52baa27fe3a94">invokeConnectErr</a>(ex);</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>(ex);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a43b199293a4651f5b6e52baa27fe3a94"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a43b199293a4651f5b6e52baa27fe3a94">folly::AsyncSocket::invokeConnectErr</a></div><div class="ttdeci">virtual void invokeConnectErr(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02730">AsyncSocket.cpp:2730</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a417c5ee887446af4b620d5e7a4790a93"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::failErrMessageRead </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02602">2602</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01246">errMessageCallback_</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html#a909a0dbe3a56db29ac6778adee178f1a">folly::AsyncSocket::ErrMessageCallback::errMessageError()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                                    {</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>()</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): failed while reading message in &quot;</span> &lt;&lt; fn &lt;&lt; <span class="stringliteral">&quot;(): &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    ErrMessageCallback* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a>;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    callback-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html#a909a0dbe3a56db29ac6778adee178f1a">errMessageError</a>(ex);</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  }</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1ErrMessageCallback_html_a909a0dbe3a56db29ac6778adee178f1a"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html#a909a0dbe3a56db29ac6778adee178f1a">folly::AsyncSocket::ErrMessageCallback::errMessageError</a></div><div class="ttdeci">virtual void errMessageError(const AsyncSocketException &amp;ex) noexcept=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8cd2284b5c3231a222d1e437bf653a92"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">folly::AsyncSocket::errMessageCallback_</a></div><div class="ttdeci">ErrMessageCallback * errMessageCallback_</div><div class="ttdoc">TimestampCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01246">AsyncSocket.h:1246</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc2de07e06e9afffc77c91fbcfa183e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::failRead </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02587">2587</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a4d0d791c9bf0400f4ea951528cfbbca4">folly::AsyncReader::ReadCallback::readErr()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                                                                         {</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>()</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): failed while reading in &quot;</span> &lt;&lt; fn &lt;&lt; <span class="stringliteral">&quot;(): &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <a class="code" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a>* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    callback-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a4d0d791c9bf0400f4ea951528cfbbca4">readErr</a>(ex);</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  }</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransportWrapper_html_a2245452bbe2d83579c30d5351e232590"><div class="ttname"><a href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">folly::AsyncTransportWrapper::ReadCallback</a></div><div class="ttdeci">AsyncReader::ReadCallback ReadCallback</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00705">AsyncTransport.h:705</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a4d0d791c9bf0400f4ea951528cfbbca4"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a4d0d791c9bf0400f4ea951528cfbbca4">folly::AsyncReader::ReadCallback::readErr</a></div><div class="ttdeci">virtual void readErr(const AsyncSocketException &amp;ex) noexcept=0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abb6d052c065fe2d254e4b073d956f0fc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::failWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytesWritten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02642">2642</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="classfolly_1_1AsyncWriter_1_1WriteCallback.html#ae3f28acad97f837ba5c274d9daf1a6ac">folly::AsyncWriter::WriteCallback::writeErr()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;                                    {</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  <span class="comment">// This version of failWrite() is used when the failure occurs before</span></div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  <span class="comment">// we&#39;ve added the callback to writeReqHead_.</span></div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>()</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): failed while writing in &quot;</span> &lt;&lt; fn &lt;&lt; <span class="stringliteral">&quot;(): &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  <span class="keywordflow">if</span> (callback != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    callback-&gt;<a class="code" href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">writeErr</a>(bytesWritten, ex);</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  }</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classWriteCallback_html_ad6d54dcefaf048916f742774b660b0f7"><div class="ttname"><a href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">WriteCallback::writeErr</a></div><div class="ttdeci">void writeErr(size_t nBytesWritten, const folly::AsyncSocketException &amp;ex) noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00069">AsyncSocketTest.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acbc9e0b1ee6c9604469dcba43e635372"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::failWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02619">2619</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#aaeb53adc29689c0af3d23bf409b2af9e">folly::AsyncSocket::WriteRequest::destroy()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00907">folly::AsyncSocket::WriteRequest::getCallback()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00903">folly::AsyncSocket::WriteRequest::getNext()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00911">folly::AsyncSocket::WriteRequest::getTotalBytesWritten()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, <a class="el" href="classfolly_1_1AsyncWriter_1_1WriteCallback.html#ae3f28acad97f837ba5c274d9daf1a6ac">folly::AsyncWriter::WriteCallback::writeErr()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>.</p>
<div class="fragment"><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                                                                          {</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>()</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): failed while writing in &quot;</span> &lt;&lt; fn &lt;&lt; <span class="stringliteral">&quot;(): &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="comment">// Only invoke the first write callback, since the error occurred while</span></div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  <span class="comment">// writing this request.  Let any other pending write callbacks be invoked in</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="comment">// finishFail().</span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    WriteRequest* req = <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a>;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> = req-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#af5173cc67bdf54e47ac3d36dc4dbccd8">getNext</a>();</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <a class="code" href="classWriteCallback.html">WriteCallback</a>* callback = req-&gt;getCallback();</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> bytesWritten = req-&gt;getTotalBytesWritten();</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    req-&gt;destroy();</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;      callback-&gt;<a class="code" href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">writeErr</a>(bytesWritten, ex);</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    }</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  }</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_af5173cc67bdf54e47ac3d36dc4dbccd8"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#af5173cc67bdf54e47ac3d36dc4dbccd8">folly::AsyncSocket::WriteRequest::getNext</a></div><div class="ttdeci">WriteRequest * getNext() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00903">AsyncSocket.h:903</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classWriteCallback_html"><div class="ttname"><a href="classWriteCallback.html">WriteCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00055">AsyncSocketTest.h:55</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classWriteCallback_html_ad6d54dcefaf048916f742774b660b0f7"><div class="ttname"><a href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">WriteCallback::writeErr</a></div><div class="ttdeci">void writeErr(size_t nBytesWritten, const folly::AsyncSocketException &amp;ex) noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00069">AsyncSocketTest.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa16ce6547bcd2004dd8b5fb2467f4791"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::finishFail </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02553">2553</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="DelayedDestructionBase_8h_source.html#l00202">folly::DelayedDestructionBase::getDestructorGuardCount()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02542">invokeAllErrors()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02569">fail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00650">folly::AsyncSSLSocket::failHandshake()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02619">failWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                             {</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  assert(<a class="code" href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">getDestructorGuardCount</a>() &gt; 0);</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  AsyncSocketException ex(</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;socket closing after error&quot;</span>));</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a44ec1c4666f6c1b2ba6167ad5769030f">invokeAllErrors</a>(ex);</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44ec1c4666f6c1b2ba6167ad5769030f"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44ec1c4666f6c1b2ba6167ad5769030f">folly::AsyncSocket::invokeAllErrors</a></div><div class="ttdeci">void invokeAllErrors(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02542">AsyncSocket.cpp:2542</a></div></div>
<div class="ttc" id="classfolly_1_1DelayedDestructionBase_html_a31591f967cbdb0b071bff2880de37cb0"><div class="ttname"><a href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">folly::DelayedDestructionBase::getDestructorGuardCount</a></div><div class="ttdeci">uint32_t getDestructorGuardCount() const </div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestructionBase_8h_source.html#l00202">DelayedDestructionBase.h:202</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abdfb120ff46b93e4ad7ff6977d006fbb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::finishFail </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02563">2563</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="DelayedDestructionBase_8h_source.html#l00202">folly::DelayedDestructionBase::getDestructorGuardCount()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02542">invokeAllErrors()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>
<div class="fragment"><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                                                           {</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  assert(<a class="code" href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">getDestructorGuardCount</a>() &gt; 0);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a44ec1c4666f6c1b2ba6167ad5769030f">invokeAllErrors</a>(ex);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a44ec1c4666f6c1b2ba6167ad5769030f"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44ec1c4666f6c1b2ba6167ad5769030f">folly::AsyncSocket::invokeAllErrors</a></div><div class="ttdeci">void invokeAllErrors(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02542">AsyncSocket.cpp:2542</a></div></div>
<div class="ttc" id="classfolly_1_1DelayedDestructionBase_html_a31591f967cbdb0b071bff2880de37cb0"><div class="ttname"><a href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">folly::DelayedDestructionBase::getDestructorGuardCount</a></div><div class="ttdeci">uint32_t getDestructorGuardCount() const </div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestructionBase_8h_source.html#l00202">DelayedDestructionBase.h:202</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a010156b1240c362268398df3e3db4372"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::getAppBytesReceived </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a9db968c531eee69be8e0e353d3992ed8">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00591">591</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01253">appBytesReceived_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00595">getRawBytesReceived()</a>.</p>
<div class="fragment"><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                              {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">appBytesReceived_</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a603a263c372b9611b611f6525f5415e6"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">folly::AsyncSocket::appBytesReceived_</a></div><div class="ttdeci">size_t appBytesReceived_</div><div class="ttdoc">Num of bytes received from socket. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01253">AsyncSocket.h:1253</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f5ebeade6ce0e5c51716ce001bf1af0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::getAppBytesWritten </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a29e684ffe5e1013192ec439f64334fae">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00583">583</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01254">appBytesWritten_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00587">getRawBytesWritten()</a>.</p>
<div class="fragment"><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                             {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a1b0d2fa902cb3aac97142a58580bbd27">appBytesWritten_</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a1b0d2fa902cb3aac97142a58580bbd27"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1b0d2fa902cb3aac97142a58580bbd27">folly::AsyncSocket::appBytesWritten_</a></div><div class="ttdeci">size_t appBytesWritten_</div><div class="ttdoc">Num of bytes written to socket. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01254">AsyncSocket.h:1254</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42f376730cf9200ab9982915a75854b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::steady_clock::time_point folly::AsyncSocket::getConnectEndTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00611">611</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01261">connectEndTime_</a>.</p>
<div class="fragment"><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                                            {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">connectEndTime_</a>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a978a6b1e49cab71a0282771d71b58330"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">folly::AsyncSocket::connectEndTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectEndTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01261">AsyncSocket.h:1261</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a26b516b863f32aee965b70b5124fbdda"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::steady_clock::time_point folly::AsyncSocket::getConnectStartTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00607">607</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01260">connectStartTime_</a>.</p>
<div class="fragment"><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                                              {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">connectStartTime_</a>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a0ee9c5b4e48ce86e5d0459243a04f106"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">folly::AsyncSocket::connectStartTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectStartTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01260">AsyncSocket.h:1260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaab07cf9eabbcf71d8198bf4b2016763"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::nanoseconds folly::AsyncSocket::getConnectTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00599">599</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01261">connectEndTime_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01260">connectStartTime_</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                              {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">connectEndTime_</a> - <a class="code" href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">connectStartTime_</a>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a0ee9c5b4e48ce86e5d0459243a04f106"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0ee9c5b4e48ce86e5d0459243a04f106">folly::AsyncSocket::connectStartTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectStartTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01260">AsyncSocket.h:1260</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a978a6b1e49cab71a0282771d71b58330"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">folly::AsyncSocket::connectEndTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectEndTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01261">AsyncSocket.h:1261</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a767c8c5587634b6dc2f95f53ed24724b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds folly::AsyncSocket::getConnectTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00603">603</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01263">connectTimeout_</a>.</p>
<div class="fragment"><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                                                  {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">connectTimeout_</a>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a480eeb96732defcff38a160fcd75bd5a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">folly::AsyncSocket::connectTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds connectTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01263">AsyncSocket.h:1263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c9d6042ae2cba37a1a3b07c19af4af4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">AsyncSocket::ErrMessageCallback</a> * folly::AsyncSocket::getErrMessageCallback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get a pointer to <a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> implementation currently registered with this socket. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00756">756</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01246">errMessageCallback_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                                                        {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a8cd2284b5c3231a222d1e437bf653a92"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">folly::AsyncSocket::errMessageCallback_</a></div><div class="ttdeci">ErrMessageCallback * errMessageCallback_</div><div class="ttdoc">TimestampCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01246">AsyncSocket.h:1246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a942b628cfadcda0f63271f54143ea924"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a>* folly::AsyncSocket::getEventBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the <a class="el" href="classfolly_1_1EventBase.html">EventBase</a> used by this socket. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncSocketBase.html#a9262f7d81113a56d025572bd8a081fbe">folly::AsyncSocketBase</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00328">328</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocketTest_8h_source.html#l00672">folly::HandshakeTimeoutCallback::connAccepted()</a>, <a class="el" href="AsyncSSLSocketTest_8h_source.html#l00744">folly::TestSSLAsyncCacheServer::getSessionCallback()</a>, and <a class="el" href="AsyncSocketTest2_8cpp_source.html#l00844">tmpDisableReads()</a>.</p>
<div class="fragment"><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                           {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3746aa7c3ac4a0e4406daf1f9be51955"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int folly::AsyncSocket::getFd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the file descriptor used by the <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00335">335</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocketTest_8h_source.html#l00580">folly::SSLServerAcceptCallbackDelay::connAccepted()</a>, <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, <a class="el" href="SSLSessionCacheManager_8cpp_source.html#l00272">wangle::SSLSessionCacheManager::getSession()</a>, <a class="el" href="TransportInfo_8cpp_source.html#l00074">wangle::TransportInfo::readRTT()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00461">folly::AsyncSSLSocket::sslAccept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                            {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9179612293943d41d71fd890adae87a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::getLocalAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> *&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the address of the local endpoint of this transport.</p>
<p>This function may throw <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> on error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The local address will be stored in the specified <a class="el" href="classfolly_1_1SocketAddress.html">SocketAddress</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#ad5df322a8143cfa0673be55957c4427a">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01575">1575</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01558">cacheLocalAddress()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01231">localAddr_</a>.</p>
<div class="fragment"><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                                                                   {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a7d0df7dc3ac8600329165a8fc81b7ba0">cacheLocalAddress</a>();</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  *address = <a class="code" href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">localAddr_</a>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a7d0df7dc3ac8600329165a8fc81b7ba0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a7d0df7dc3ac8600329165a8fc81b7ba0">folly::AsyncSocket::cacheLocalAddress</a></div><div class="ttdeci">void cacheLocalAddress() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01558">AsyncSocket.cpp:1558</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ab9a3ba327f65d68c592f0a27cc87997b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">folly::AsyncSocket::localAddr_</a></div><div class="ttdeci">folly::SocketAddress localAddr_</div><div class="ttdoc">The address we are connecting from. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01231">AsyncSocket.h:1231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1552a42248ba362f9f495e8afa2750cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> folly::AsyncSocket::getMaxReadsPerEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the maximum number of reads this object will execute from the underlying socket each time the <a class="el" href="classfolly_1_1EventBase.html">EventBase</a> detects that new ingress data is available.</p>
<dl class="section return"><dt>Returns</dt><dd>Maximum number of reads per data-available event; a value of zero means unlimited. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00463">463</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00756">getErrMessageCallback()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00856">getReadCallback()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00764">getSendMsgParamsCB()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01234">maxReadsPerEvent_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00760">setSendMsgParamCB()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00860">setZeroCopy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                                       {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">maxReadsPerEvent_</a>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a13e6267a58606637f16040dc92a906d3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">folly::AsyncSocket::maxReadsPerEvent_</a></div><div class="ttdeci">uint16_t maxReadsPerEvent_</div><div class="ttdoc">Max reads per event loop iteration. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01234">AsyncSocket.h:1234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a492a7676accebf96bf8047ecd0f95361"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> folly::AsyncSocket::getNextZeroCopyBufId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01202">1202</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00924">addZeroCopyBuf()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00909">adjustZeroCopyFlags()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00963">containsZeroCopyBuf()</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00038">ptr</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00942">releaseZeroCopyBuf()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00955">setZeroCopyBuf()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01216">zeroCopyBufId_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00924">addZeroCopyBuf()</a>.</p>
<div class="fragment"><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                                  {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a185c4e793feab0b51a786611cc3173af">zeroCopyBufId_</a>++;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a185c4e793feab0b51a786611cc3173af"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a185c4e793feab0b51a786611cc3173af">folly::AsyncSocket::zeroCopyBufId_</a></div><div class="ttdeci">uint32_t zeroCopyBufId_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01216">AsyncSocket.h:1216</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a319ac9590b20589ca37bd231d45bc8bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::getPeerAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> *&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the address of the remote endpoint to which this transport is connected.</p>
<p>This function may throw <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> on error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The remote endpoint's address will be stored in the specified <a class="el" href="classfolly_1_1SocketAddress.html">SocketAddress</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a7c0620b88b0cc8633fc4c1c16680d71c">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01580">1580</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01564">cachePeerAddress()</a>.</p>
<div class="fragment"><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                                                                  {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a0d096903ae1704e7784656ff0df1a20d">cachePeerAddress</a>();</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  *address = <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a0d096903ae1704e7784656ff0df1a20d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0d096903ae1704e7784656ff0df1a20d">folly::AsyncSocket::cachePeerAddress</a></div><div class="ttdeci">void cachePeerAddress() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01564">AsyncSocket.cpp:1564</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac445a9b54eaee6846f00257238e44eff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a>* folly::AsyncSocket::getPeerCertificate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the peer certificate information if any </p>

<p>Reimplemented from <a class="el" href="classfolly_1_1AsyncTransport.html#af5b19c2210224fe12722eebfd44f2061">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a2cddf812f9657b0379c858f8b8ca4417">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00837">837</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01282">peerCertData_</a>.</p>
<div class="fragment"><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                                                                       {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a3907234f141981d565e4b4b0fec76827">peerCertData_</a>.get();</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a3907234f141981d565e4b4b0fec76827"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3907234f141981d565e4b4b0fec76827">folly::AsyncSocket::peerCertData_</a></div><div class="ttdeci">std::unique_ptr&lt; const AsyncTransportCertificate &gt; peerCertData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01282">AsyncSocket.h:1282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a510b2b3473838d4e997d75a29c081380"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::getRawBytesReceived </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#ad5c16b5cc91e805467b6ee2f67d1a822">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a4b3567a1daa73a3d92069a378dffcbad">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00595">595</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l00591">getAppBytesReceived()</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                              {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a010156b1240c362268398df3e3db4372">getAppBytesReceived</a>();</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a010156b1240c362268398df3e3db4372"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a010156b1240c362268398df3e3db4372">folly::AsyncSocket::getAppBytesReceived</a></div><div class="ttdeci">size_t getAppBytesReceived() const override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00591">AsyncSocket.h:591</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a60d62b928993377baa16c6d95bb1affa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::getRawBytesWritten </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a4718f7ab12c3ed66e3af44ccf46996bd">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#aa3ab96bf18078b1771874e3d336de716">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00587">587</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l00583">getAppBytesWritten()</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                             {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a2f5ebeade6ce0e5c51716ce001bf1af0">getAppBytesWritten</a>();</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a2f5ebeade6ce0e5c51716ce001bf1af0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2f5ebeade6ce0e5c51716ce001bf1af0">folly::AsyncSocket::getAppBytesWritten</a></div><div class="ttdeci">size_t getAppBytesWritten() const override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00583">AsyncSocket.h:583</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57283dc5ff392692ae2ec0fc8042f47e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html">AsyncSocket::ReadCallback</a> * folly::AsyncSocket::getReadCallback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a14185ecff97d32052bbe2fb438cb194d">folly::AsyncTransportWrapper</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00856">856</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>, and <a class="el" href="SocketPeeker_8h_source.html#l00040">wangle::SocketPeeker::~SocketPeeker()</a>.</p>
<div class="fragment"><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                                            {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a447b392e0854a59fb45c57c856d3ff66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a>* folly::AsyncSocket::getSelfCertificate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the certificate information of this transport, if any </p>

<p>Reimplemented from <a class="el" href="classfolly_1_1AsyncTransport.html#ae7afcb4908ddf9a6348e53acd93bef7b">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a27f7a0d147329ec11fb6ac9f6269f07c">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00846">846</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01284">selfCertData_</a>.</p>
<div class="fragment"><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                                                                       {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#ad9d64cd70c3ace2aaed6c7bac1569801">selfCertData_</a>.get();</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ad9d64cd70c3ace2aaed6c7bac1569801"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad9d64cd70c3ace2aaed6c7bac1569801">folly::AsyncSocket::selfCertData_</a></div><div class="ttdeci">std::unique_ptr&lt; const AsyncTransportCertificate &gt; selfCertData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01284">AsyncSocket.h:1284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abd426e19884d4849ab4cab30b6eae99b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">AsyncSocket::SendMsgParamsCallback</a> * folly::AsyncSocket::getSendMsgParamsCB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get a pointer to <a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a> implementation currently registered with this socket. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00764">764</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01248">sendMsgParamCallback_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                                                                        {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_abe7dadc0ca3105ab63508cbc033e85f9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">folly::AsyncSocket::sendMsgParamCallback_</a></div><div class="ttdeci">SendMsgParamsCallback * sendMsgParamCallback_</div><div class="ttdoc">&lt; Callback for retrieving </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01248">AsyncSocket.h:1248</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9c649480f26f3bdef13f4ed9772e526"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> folly::AsyncSocket::getSendTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the send timeout.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns the current send timeout, in milliseconds. <a class="el" href="structA.html">A</a> return value of 0 indicates that no timeout is set. </dd></dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a17fc23ae7c21f825098c6a9bbc9c7592">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00437">437</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01233">sendTimeout_</a>.</p>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                           {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ad0e5779653171e26bbac4121442767a5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">folly::AsyncSocket::sendTimeout_</a></div><div class="ttdeci">uint32_t sendTimeout_</div><div class="ttdoc">The send timeout, in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01233">AsyncSocket.h:1233</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a482ad20dc8e6a87eb9202d2f1676ea0c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::getSockOpt </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> *&#160;</td>
          <td class="paramname"><em>optval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t *&#160;</td>
          <td class="paramname"><em>optlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generic API for reading a socket option.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>same as the "level" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
    <tr><td class="paramname">optname</td><td>same as the "optname" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
    <tr><td class="paramname">optval</td><td>pointer to the variable in which the option value should be returned. </td></tr>
    <tr><td class="paramname">optlen</td><td>value-result argument, initially containing the size of the buffer pointed to by optval, and modified on return to indicate the actual size of the value returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>same as the return value of <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00714">714</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="NetOps_8cpp_source.html#l00112">folly::netops::getsockopt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                                                                       {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, level, optname, (<span class="keywordtype">void</span>*)optval, optlen);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1netops_html_aa5fcb96753f19c95a1051c3840b50331"><div class="ttname"><a href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">folly::netops::getsockopt</a></div><div class="ttdeci">int getsockopt(NetworkSocket s, int level, int optname, void *optval, socklen_t *optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00112">NetOps.cpp:112</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a68acdec30849c2a99dfb4048f40aef29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int folly::AsyncSocket::getSockOptVirtual </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>optval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t *&#160;</td>
          <td class="paramname"><em>optlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Virtual method for reading a socket option returning integer value, which is the most typical case. Convenient for overriding and mocking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>same as the "level" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
    <tr><td class="paramname">optname</td><td>same as the "optname" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
    <tr><td class="paramname">optval</td><td>same as "optval" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
    <tr><td class="paramname">optlen</td><td>same as "optlen" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>same as the return value of <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00743">743</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="NetOps_8cpp_source.html#l00112">folly::netops::getsockopt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                                                                             {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, level, optname, optval, optlen);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1netops_html_aa5fcb96753f19c95a1051c3840b50331"><div class="ttname"><a href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">folly::netops::getsockopt</a></div><div class="ttdeci">int getsockopt(NetworkSocket s, int level, int optname, void *optval, socklen_t *optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00112">NetOps.cpp:112</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7396f26f26d8de44a7fe48a7f900dd02"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::getTFOAttempted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00615">615</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01269">tfoAttempted_</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                               {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#aabfb1f8f218b83c041ff22df6ba9584b">tfoAttempted_</a>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_aabfb1f8f218b83c041ff22df6ba9584b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aabfb1f8f218b83c041ff22df6ba9584b">folly::AsyncSocket::tfoAttempted_</a></div><div class="ttdeci">bool tfoAttempted_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01269">AsyncSocket.h:1269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5034807be819658f074ef1fcc6dbc6f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::getTFOFinished </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns whether or not the attempt to use TFO finished successfully. This does not necessarily mean TFO worked, just that trying to use TFO succeeded. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00625">625</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01585">getTFOSucceded()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00420">setCloseOnExec()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01608">setCongestionFlavor()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01589">setNoDelay()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01635">setQuickAck()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01677">setRecvBufSize()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01659">setSendBufSize()</a>, <a class="el" href="Conv_8cpp_source.html#l00212">string</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01270">tfoFinished_</a>.</p>
<div class="fragment"><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                              {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#acf23078ee5e1b8f6f27820d418d2b8e0">tfoFinished_</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_acf23078ee5e1b8f6f27820d418d2b8e0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acf23078ee5e1b8f6f27820d418d2b8e0">folly::AsyncSocket::tfoFinished_</a></div><div class="ttdeci">bool tfoFinished_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01270">AsyncSocket.h:1270</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac74354c1153f9d965c85a8296260c251"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::getTFOSucceded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns whether or not TFO attempt succeded on this connection. For servers this is pretty straightforward API and can be invoked right after the connection is accepted. This API will perform one syscall. This API is a bit tricky to use for clients, since clients only know this for sure after the SYN-ACK is returned. So it's appropriate to call this only after the first application data is read from the socket when the caller knows that the SYN has been ACKed by the server. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01585">1585</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="SocketFastOpen_8cpp_source.html#l00118">folly::detail::tfo_succeeded()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                                       {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1detail.html#a573498d8ca83822b070ac76d3f6b468a">detail::tfo_succeeded</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_a573498d8ca83822b070ac76d3f6b468a"><div class="ttname"><a href="namespacefolly_1_1detail.html#a573498d8ca83822b070ac76d3f6b468a">folly::detail::tfo_succeeded</a></div><div class="ttdeci">bool tfo_succeeded(int)</div><div class="ttdef"><b>Definition:</b> <a href="SocketFastOpen_8cpp_source.html#l00118">SocketFastOpen.cpp:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d0920cb062bf34d965f42f55d8ffe58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::getZeroCopy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00504">504</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01275">zeroCopyEnabled_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00117">folly::AsyncSocket::BytesWriteRequest::performWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                           {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ad99736e9c89e1cf75d27defb5476c0bf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">folly::AsyncSocket::zeroCopyEnabled_</a></div><div class="ttdeci">bool zeroCopyEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01275">AsyncSocket.h:1275</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af03cf323d524e5f736cef7bfa8138e48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> folly::AsyncSocket::getZeroCopyBufId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00508">508</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01216">zeroCopyBufId_</a>.</p>
<div class="fragment"><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                    {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a185c4e793feab0b51a786611cc3173af">zeroCopyBufId_</a>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a185c4e793feab0b51a786611cc3173af"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a185c4e793feab0b51a786611cc3173af">folly::AsyncSocket::zeroCopyBufId_</a></div><div class="ttdeci">uint32_t zeroCopyBufId_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01216">AsyncSocket.h:1216</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac33c3676fe5408af03db585a7dd3eb4e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::getZeroCopyReenableThreshold </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00512">512</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">folly::NONE</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00901">setZeroCopyReenableThreshold()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01003">write()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01022">writeChain()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01187">writeRequest()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01014">writev()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01278">zeroCopyReenableThreshold_</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                                              {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a078418769fa327ad592f58e115f65fca">zeroCopyReenableThreshold_</a>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a078418769fa327ad592f58e115f65fca"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a078418769fa327ad592f58e115f65fca">folly::AsyncSocket::zeroCopyReenableThreshold_</a></div><div class="ttdeci">size_t zeroCopyReenableThreshold_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01278">AsyncSocket.h:1278</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a65f64411d21717a984cf6dbdc7d1e391"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::good </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine if transport is open and ready to read or write.</p>
<p>Note that this function returns false on EOF; you must also call <a class="el" href="classfolly_1_1AsyncSocket.html#a4f950291e2346b40e8f6cb368bdf70db">error()</a> to distinguish between an EOF and an error.</p>
<dl class="section return"><dt>Returns</dt><dd>true iff the transport is open and ready, false otherwise. </dd></dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a0c59c3ab1b4c12df0c35663dc989697b">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a89067f88555216d2c3721d20226e0187">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01489">1489</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00386">folly::AsyncSSLSocket::connecting()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00374">folly::AsyncSSLSocket::good()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01031">scheduleImmediateRead()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                             {</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="keywordflow">return</span> (</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a> || <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a> ||</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;       <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>) &amp;&amp;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      (<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> == 0) &amp;&amp; (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> != <span class="keyword">nullptr</span>));</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac08e631a8c0c3690045cfa8965bda85f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::handleConnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a722f5b8775f000ab29c2a9c9b60274f5">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02206">2206</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00084">folly::AsyncTimeout::cancelTimeout()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01496">error()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00112">folly::netops::getsockopt()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02739">invokeConnectSuccess()</a>, <a class="el" href="EventHandler_8h_source.html#l00042">folly::EventHandler::NONE</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00030">folly::AsyncSocketException::NOT_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l00966">SHUT_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l00964">SHUT_WRITE_PENDING</a>, <a class="el" href="RefCountBenchmark_8cpp_source.html#l00024">folly::shutdown()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01209">folly::AsyncSSLSocket::handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                                         {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleConnect() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="comment">// SHUT_WRITE can never be set while we are still connecting;</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="comment">// SHUT_WRITE_PENDING may be set, be we only set SHUT_WRITE once the connect</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="comment">// finishes</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>) == 0);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="comment">// In case we had a connect timeout, cancel the timeout</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">cancelTimeout</a>();</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="comment">// We don&#39;t use a persistent registration when waiting on a connect event,</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="comment">// so we have been automatically unregistered now.  Update eventFlags_ to</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="comment">// reflect reality.</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> == <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>);</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> = <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="comment">// Call getsockopt() to check if the connect succeeded</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a4f950291e2346b40e8f6cb368bdf70db">error</a>;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  socklen_t len = <span class="keyword">sizeof</span>(<a class="code" href="classfolly_1_1AsyncSocket.html#a4f950291e2346b40e8f6cb368bdf70db">error</a>);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <span class="keywordtype">int</span> rv = <a class="code" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SOL_SOCKET, SO_ERROR, &amp;error, &amp;len);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  <span class="keywordflow">if</span> (rv != 0) {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    AsyncSocketException ex(</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;error calling getsockopt() after connect&quot;</span>),</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;        errnoCopy);</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleConnect(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>() &lt;&lt; <span class="stringliteral">&quot;) exception:&quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">failConnect</a>(__func__, ex);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  }</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="keywordflow">if</span> (error != 0) {</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    AsyncSocketException ex(</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">AsyncSocketException::NOT_OPEN</a>, <span class="stringliteral">&quot;connect failed&quot;</span>, error);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleConnect(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; host=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>() &lt;&lt; <span class="stringliteral">&quot;) exception: &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">failConnect</a>(__func__, ex);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  }</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;  <span class="comment">// Move into STATE_ESTABLISHED</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  state_ = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  <span class="comment">// If SHUT_WRITE_PENDING is set and we don&#39;t have any write requests to</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="comment">// perform, immediately shutdown the write half of the socket.</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a>) &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="comment">// SHUT_READ shouldn&#39;t be set.  If close() is called on the socket while we</span></div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="comment">// are still connecting we just abort the connect rather than waiting for</span></div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="comment">// it to complete.</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a>) == 0);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="namespacefolly.html#a89e6d5d07a92c88cf24c7a3f9a02f94e">shutdown</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SHUT_WR);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  }</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  VLOG(7) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: fd &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;successfully connected; state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="comment">// Remember the EventBase we are attached to, before we start invoking any</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">// callbacks (since the callbacks may call detachEventBase()).</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  EventBase* originalEventBase = <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a2cd8439868d842f50758e17f1fd2092e">invokeConnectSuccess</a>();</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="comment">// Note that the connect callback may have changed our state.</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="comment">// (set or unset the read callback, called write(), closed the socket, etc.)</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="comment">// The following code needs to handle these situations correctly.</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <span class="comment">// If the socket has been closed, readCallback_ and writeReqHead_ will</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <span class="comment">// always be nullptr, so that will prevent us from trying to read or write.</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="comment">// The main thing to check for is if eventBase_ is still originalEventBase.</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="comment">// If not, we have been detached from this event base, so we shouldn&#39;t</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="comment">// perform any more operations.</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> != originalEventBase) {</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  }</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a3b16428961251692bfac25ceab9b83bc">handleInitialReadWrite</a>();</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a2080a127e6087755e7d603883bebfd55"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">folly::AsyncTimeout::cancelTimeout</a></div><div class="ttdeci">void cancelTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00084">AsyncTimeout.cpp:84</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">folly::AsyncSocket::SHUT_WRITE_PENDING</a></div><div class="ttdoc">shutdownWrite() called, but we are still waiting on writes to drain </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00964">AsyncSocket.h:964</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">folly::AsyncSocketException::NOT_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00030">AsyncSocketException.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">folly::EventHandler::NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00042">EventHandler.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a4f950291e2346b40e8f6cb368bdf70db"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a4f950291e2346b40e8f6cb368bdf70db">folly::AsyncSocket::error</a></div><div class="ttdeci">bool error() const override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01496">AsyncSocket.cpp:1496</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_aa5fcb96753f19c95a1051c3840b50331"><div class="ttname"><a href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">folly::netops::getsockopt</a></div><div class="ttdeci">int getsockopt(NetworkSocket s, int level, int optname, void *optval, socklen_t *optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00112">NetOps.cpp:112</a></div></div>
<div class="ttc" id="namespacefolly_html_a89e6d5d07a92c88cf24c7a3f9a02f94e"><div class="ttname"><a href="namespacefolly.html#a89e6d5d07a92c88cf24c7a3f9a02f94e">folly::shutdown</a></div><div class="ttdeci">void shutdown(Counter &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="RefCountBenchmark_8cpp_source.html#l00024">RefCountBenchmark.cpp:24</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a87ea20cc1d2d9bef07579d829afeaca9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">folly::AsyncSocket::failConnect</a></div><div class="ttdeci">void failConnect(const char *fn, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02577">AsyncSocket.cpp:2577</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2cd8439868d842f50758e17f1fd2092e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2cd8439868d842f50758e17f1fd2092e">folly::AsyncSocket::invokeConnectSuccess</a></div><div class="ttdeci">virtual void invokeConnectSuccess()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02739">AsyncSocket.cpp:2739</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3b16428961251692bfac25ceab9b83bc"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3b16428961251692bfac25ceab9b83bc">folly::AsyncSocket::handleInitialReadWrite</a></div><div class="ttdeci">virtual void handleInitialReadWrite() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02169">AsyncSocket.cpp:2169</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a085ae8fe5c02376a95228a2543534b0a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::handleErrMessages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01804">1804</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="Access_8h_source.html#l00071">folly::data()</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html#a0f309a6e5fda23dc1ecfce80a6eac8f9">folly::AsyncSocket::ErrMessageCallback::errMessage()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01246">errMessageCallback_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01223">idZeroCopyBufPtrMap_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00967">isZeroCopyMsg()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00981">processZeroCopyMsg()</a>, <a class="el" href="NetOps_8cpp_source.html#l00268">folly::netops::recvmsg()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00178">uint8_t</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01870">processZeroCopyWriteInProgress()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                                               {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="comment">// This method has non-empty implementation only for platforms</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// supporting per-socket error queues.</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleErrMessages() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a> == <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.empty()) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    VLOG(7) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleErrMessages(): &quot;</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;no callback installed - exiting.&quot;</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="preprocessor">#ifdef FOLLY_HAVE_MSG_ERRQUEUE</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> ctrl[1024];</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keyword">struct </span>msghdr msg;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  iovec entry;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  entry.iov_base = &amp;<a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  entry.iov_len = <span class="keyword">sizeof</span>(<a class="code" href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">data</a>);</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  msg.msg_iov = &amp;entry;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  msg.msg_iovlen = 1;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  msg.msg_name = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  msg.msg_namelen = 0;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  msg.msg_control = ctrl;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  msg.msg_controllen = <span class="keyword">sizeof</span>(ctrl);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  msg.msg_flags = 0;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordtype">size_t</span> num = 0;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    ret = <a class="code" href="namespacefolly_1_1netops.html#acab8f8655eda889b3c8175393102d2ca">recvmsg</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, &amp;msg, MSG_ERRQUEUE);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleErrMessages(): recvmsg returned &quot;</span> &lt;&lt; ret;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <span class="keywordflow">if</span> (errno != EAGAIN) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;::recvmsg exited with code &quot;</span> &lt;&lt; ret</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, errno: &quot;</span> &lt;&lt; errnoCopy;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        AsyncSocketException ex(</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;recvmsg() failed&quot;</span>),</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            errnoCopy);</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a417c5ee887446af4b620d5e7a4790a93">failErrMessageRead</a>(__func__, ex);</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="keywordflow">return</span> num;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">struct</span> cmsghdr* cmsg = CMSG_FIRSTHDR(&amp;msg);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;         cmsg != <span class="keyword">nullptr</span> &amp;&amp; cmsg-&gt;cmsg_len != 0;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;         cmsg = CMSG_NXTHDR(&amp;msg, cmsg)) {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      ++num;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a62f2caffee8c9b814ea6c2138e127724">isZeroCopyMsg</a>(*cmsg)) {</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a09bb5f87e58789177a2a07e06a9b9a36">processZeroCopyMsg</a>(*cmsg);</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a>) {</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html#a0f309a6e5fda23dc1ecfce80a6eac8f9">errMessage</a>(*cmsg);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        }</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      }</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    }</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="preprocessor">#endif // FOLLY_HAVE_MSG_ERRQUEUE</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ae7c8deddc31b2526738304413c014f9a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">folly::AsyncSocket::idZeroCopyBufPtrMap_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, folly::IOBuf * &gt; idZeroCopyBufPtrMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01223">AsyncSocket.h:1223</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a62f2caffee8c9b814ea6c2138e127724"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a62f2caffee8c9b814ea6c2138e127724">folly::AsyncSocket::isZeroCopyMsg</a></div><div class="ttdeci">bool isZeroCopyMsg(const cmsghdr &amp;cmsg) const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00967">AsyncSocket.cpp:967</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a417c5ee887446af4b620d5e7a4790a93"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a417c5ee887446af4b620d5e7a4790a93">folly::AsyncSocket::failErrMessageRead</a></div><div class="ttdeci">void failErrMessageRead(const char *fn, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02602">AsyncSocket.cpp:2602</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a09bb5f87e58789177a2a07e06a9b9a36"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a09bb5f87e58789177a2a07e06a9b9a36">folly::AsyncSocket::processZeroCopyMsg</a></div><div class="ttdeci">void processZeroCopyMsg(const cmsghdr &amp;cmsg)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00981">AsyncSocket.cpp:981</a></div></div>
<div class="ttc" id="namespacefolly_html_a23ca01703d6715fb172f4188faa73dc9"><div class="ttname"><a href="namespacefolly.html#a23ca01703d6715fb172f4188faa73dc9">folly::data</a></div><div class="ttdeci">constexpr auto data(C &amp;c) -&gt; decltype(c.data())</div><div class="ttdef"><b>Definition:</b> <a href="Access_8h_source.html#l00071">Access.h:71</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8cd2284b5c3231a222d1e437bf653a92"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">folly::AsyncSocket::errMessageCallback_</a></div><div class="ttdeci">ErrMessageCallback * errMessageCallback_</div><div class="ttdoc">TimestampCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01246">AsyncSocket.h:1246</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_acab8f8655eda889b3c8175393102d2ca"><div class="ttname"><a href="namespacefolly_1_1netops.html#acab8f8655eda889b3c8175393102d2ca">folly::netops::recvmsg</a></div><div class="ttdeci">ssize_t recvmsg(NetworkSocket s, msghdr *message, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00268">NetOps.cpp:268</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1ErrMessageCallback_html_a0f309a6e5fda23dc1ecfce80a6eac8f9"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html#a0f309a6e5fda23dc1ecfce80a6eac8f9">folly::AsyncSocket::ErrMessageCallback::errMessage</a></div><div class="ttdeci">virtual void errMessage(const cmsghdr &amp;cmsg) noexcept=0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b16428961251692bfac25ceab9b83bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::handleInitialReadWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a795aca6b6b9c5464b081f197fc35e8cd">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02169">2169</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l02147">checkForImmediateRead()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="EventHandler_8h_source.html#l00043">folly::EventHandler::READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01209">folly::AsyncSSLSocket::handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01155">folly::AsyncSSLSocket::handleReturnFromSSLAccept()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                                                  {</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <span class="comment">// Our callers should already be holding a DestructorGuard, but grab</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="comment">// one here just to make sure, in case one of our calling code paths ever</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="comment">// changes.</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <span class="comment">// If we have a readCallback_, make sure we enable read events.  We</span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="comment">// may already be registered for reads if connectSuccess() set</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="comment">// the read calback.</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> &amp;&amp; !(<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">EventHandler::READ</a>)) {</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a>) == 0);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(EventHandler::READ, 0)) {</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    }</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a5b3900bbfbc3b3df56139455812b1e20">checkForImmediateRead</a>();</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="comment">// Unregister for read events.</span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(0, EventHandler::READ);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// If we have write requests pending, try to send them immediately.</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="comment">// Since we just finished accepting, there is a very good chance that we can</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="comment">// write without blocking.</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="comment">// However, we only process them if EventHandler::WRITE is not already set,</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <span class="comment">// which means that we&#39;re already blocked on a write attempt.  (This can</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="comment">// happen if connectSuccess() called write() before returning.)</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> &amp;&amp; !(<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>)) {</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="comment">// Call handleWrite() to perform write processing.</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">handleWrite</a>();</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="comment">// Unregister for write event.</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(0, EventHandler::WRITE);</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a607fe5f9fbd872861a9506fef684b12a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">folly::AsyncSocket::handleWrite</a></div><div class="ttdeci">virtual void handleWrite() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02019">AsyncSocket.cpp:2019</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5b3900bbfbc3b3df56139455812b1e20"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5b3900bbfbc3b3df56139455812b1e20">folly::AsyncSocket::checkForImmediateRead</a></div><div class="ttdeci">virtual void checkForImmediateRead() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02147">AsyncSocket.cpp:2147</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">folly::EventHandler::READ</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00043">EventHandler.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a704ce81032be80dd5f36d23f0dfbedac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::handleRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a5da2b36af189bc594221a6a296d871f6">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01881">1881</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocketException_8h_source.html#l00035">folly::AsyncSocketException::BAD_ARGS</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01236">isBufferMovable_</a>, <a class="el" href="AsyncTransport_8h_source.html#l00030">kOpenSslModeMoveBufferOwnership</a>, <a class="el" href="AsyncSocket_8h_source.html#l01234">maxReadsPerEvent_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01764">performRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01798">prepareReadBuffer()</a>, <a class="el" href="EventHandler_8h_source.html#l00043">folly::EventHandler::READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l00943">READ_BLOCKING</a>, <a class="el" href="AsyncSocket_8h_source.html#l00941">READ_EOF</a>, <a class="el" href="AsyncSocket_8h_source.html#l00942">READ_ERROR</a>, <a class="el" href="Types-inl_8h_source.html#l00220">fizz::detail::readBuf()</a>, <a class="el" href="AsyncTransport_8h_source.html#l00586">folly::AsyncReader::ReadCallback::readBufferAvailable()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0d5e2d2009be3fb983aa59d9f4d54029">folly::AsyncReader::ReadCallback::readDataAvailable()</a>, <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">folly::AsyncReader::ReadCallback::readEOF()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01238">readErr_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01031">scheduleImmediateRead()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="IOBuf_8h_source.html#l00304">folly::IOBuf::takeOwnership()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01073">folly::AsyncSSLSocket::checkForImmediateRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02147">checkForImmediateRead()</a>, <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01536">AsyncSocketImmediateRead::checkForImmediateRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01357">folly::AsyncSSLSocket::handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                                      {</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleRead() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a>) == 0);</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">EventHandler::READ</a>);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="comment">// Loop until:</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <span class="comment">// - a read attempt would block</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="comment">// - readCallback_ is uninstalled</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="comment">// - the number of loop iterations exceeds the optional maximum</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="comment">// - this AsyncSocket is moved to another EventBase</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="comment">// When we invoke readDataAvailable() it may uninstall the readCallback_,</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="comment">// which is why need to check for it here.</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <span class="comment">// The last bullet point is slightly subtle.  readDataAvailable() may also</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <span class="comment">// detach this socket from this EventBase.  However, before</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="comment">// readDataAvailable() returns another thread may pick it up, attach it to</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="comment">// a different EventBase, and install another readCallback_.  We need to</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="comment">// exit immediately after readDataAvailable() returns if the eventBase_ has</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="comment">// changed.  (The caller must perform some sort of locking to transfer the</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// AsyncSocket between threads properly.  This will be sufficient to ensure</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <span class="comment">// that this thread sees the updated eventBase_ variable after</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="comment">// readDataAvailable() returns.)</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> numReads = 0;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  EventBase* originalEventBase = <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> == originalEventBase) {</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="comment">// Get the buffer to read into.</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordtype">void</span>* buf = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordtype">size_t</span> buflen = 0, offset = 0;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a7475e0e3f554b5b93eb35bfefb04f870">prepareReadBuffer</a>(&amp;buf, &amp;buflen);</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      VLOG(5) &lt;&lt; <span class="stringliteral">&quot;prepareReadBuffer() buf=&quot;</span> &lt;&lt; buf &lt;&lt; <span class="stringliteral">&quot;, buflen=&quot;</span> &lt;&lt; buflen;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> AsyncSocketException&amp; ex) {</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">failRead</a>(__func__, ex);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; ex) {</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      AsyncSocketException tex(</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bae2febeb8cfa566f2e2952ac7e3a1b062">AsyncSocketException::BAD_ARGS</a>,</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;          <span class="keywordtype">string</span>(<span class="stringliteral">&quot;ReadCallback::getReadBuffer() &quot;</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                 <span class="stringliteral">&quot;threw exception: &quot;</span>) +</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;              ex.what());</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">failRead</a>(__func__, tex);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      AsyncSocketException ex(</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bae2febeb8cfa566f2e2952ac7e3a1b062">AsyncSocketException::BAD_ARGS</a>,</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;          <span class="stringliteral">&quot;ReadCallback::getReadBuffer() threw &quot;</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;          <span class="stringliteral">&quot;non-exception type&quot;</span>);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">failRead</a>(__func__, ex);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    }</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a6af9d40372da8d8ef78e3dc541ce3c95">isBufferMovable_</a> &amp;&amp; (buf == <span class="keyword">nullptr</span> || buflen == 0)) {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      AsyncSocketException ex(</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bae2febeb8cfa566f2e2952ac7e3a1b062">AsyncSocketException::BAD_ARGS</a>,</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;          <span class="stringliteral">&quot;ReadCallback::getReadBuffer() returned &quot;</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;          <span class="stringliteral">&quot;empty buffer&quot;</span>);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">failRead</a>(__func__, ex);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    }</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="comment">// Perform the read</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keyword">auto</span> readResult = <a class="code" href="classfolly_1_1AsyncSocket.html#aca0d3439a7e8b4d25bbb09d0c87c9f23">performRead</a>(&amp;buf, &amp;buflen, &amp;offset);</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keyword">auto</span> bytesRead = readResult.readReturn;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, AsyncSocket::handleRead() got &quot;</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            &lt;&lt; bytesRead &lt;&lt; <span class="stringliteral">&quot; bytes&quot;</span>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">if</span> (bytesRead &gt; 0) {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a6af9d40372da8d8ef78e3dc541ce3c95">isBufferMovable_</a>) {</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0d5e2d2009be3fb983aa59d9f4d54029">readDataAvailable</a>(<span class="keywordtype">size_t</span>(bytesRead));</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        CHECK(<a class="code" href="AsyncTransport_8h.html#a2189f5f5fd0e6ef6e4ade08eb1c17e61">kOpenSslModeMoveBufferOwnership</a>);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        VLOG(5) &lt;&lt; <span class="stringliteral">&quot;this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, AsyncSocket::handleRead() got &quot;</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;buf=&quot;</span> &lt;&lt; buf &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; bytesRead &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; buflen</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;, offset=&quot;</span> &lt;&lt; offset;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespacefizz_1_1detail.html#a6c37768a1b78fc626a5e6e11497c9bbd">readBuf</a> = <a class="code" href="classfolly_1_1IOBuf.html#a996c07119be03b5eb25497e8d6dbb91a">folly::IOBuf::takeOwnership</a>(buf, buflen);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        <a class="code" href="namespacefizz_1_1detail.html#a6c37768a1b78fc626a5e6e11497c9bbd">readBuf</a>-&gt;trimStart(offset);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        <a class="code" href="namespacefizz_1_1detail.html#a6c37768a1b78fc626a5e6e11497c9bbd">readBuf</a>-&gt;trimEnd(buflen - offset - bytesRead);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a966337ef655a7d9603268cc15032daa1">readBufferAvailable</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="namespacefizz_1_1detail.html#a6c37768a1b78fc626a5e6e11497c9bbd">readBuf</a>));</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      }</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <span class="comment">// Fall through and continue around the loop if the read</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      <span class="comment">// completely filled the available buffer.</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <span class="comment">// Note that readCallback_ may have been uninstalled or changed inside</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      <span class="comment">// readDataAvailable().</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">size_t</span>(bytesRead) &lt; buflen) {</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bytesRead == <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef">READ_BLOCKING</a>) {</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="comment">// No more data to read right now.</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bytesRead == <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">READ_ERROR</a>) {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">readErr_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">READ_ERROR</a>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <span class="keywordflow">if</span> (readResult.exception) {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">failRead</a>(__func__, *readResult.exception);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      }</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      AsyncSocketException ex(</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;recv() failed&quot;</span>),</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;          errnoCopy);</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">failRead</a>(__func__, ex);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      assert(bytesRead == <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">READ_EOF</a>);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">readErr_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">READ_EOF</a>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="comment">// EOF</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a>;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(0, <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">EventHandler::READ</a>)) {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <span class="comment">// we&#39;ve already been moved into STATE_ERROR</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      }</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <a class="code" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a>* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      callback-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">readEOF</a>();</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    }</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">maxReadsPerEvent_</a> &amp;&amp; (++numReads &gt;= <a class="code" href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">maxReadsPerEvent_</a>)) {</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        <span class="comment">// We might still have data in the socket.</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        <span class="comment">// (e.g. see comment in AsyncSSLSocket::checkForImmediateRead)</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a924fd12e56e790708f85ae1c639eb5f4">scheduleImmediateRead</a>();</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      }</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    }</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  }</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a966337ef655a7d9603268cc15032daa1"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a966337ef655a7d9603268cc15032daa1">folly::AsyncReader::ReadCallback::readBufferAvailable</a></div><div class="ttdeci">virtual void readBufferAvailable(std::unique_ptr&lt; IOBuf &gt;) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00586">AsyncTransport.h:586</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a924fd12e56e790708f85ae1c639eb5f4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a924fd12e56e790708f85ae1c639eb5f4">folly::AsyncSocket::scheduleImmediateRead</a></div><div class="ttdeci">void scheduleImmediateRead() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01031">AsyncSocket.h:1031</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a0d5e2d2009be3fb983aa59d9f4d54029"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0d5e2d2009be3fb983aa59d9f4d54029">folly::AsyncReader::ReadCallback::readDataAvailable</a></div><div class="ttdeci">virtual void readDataAvailable(size_t len) noexcept=0</div></div>
<div class="ttc" id="namespacefizz_1_1detail_html_a6c37768a1b78fc626a5e6e11497c9bbd"><div class="ttname"><a href="namespacefizz_1_1detail.html#a6c37768a1b78fc626a5e6e11497c9bbd">fizz::detail::readBuf</a></div><div class="ttdeci">size_t readBuf(Buf &amp;buf, folly::io::Cursor &amp;cursor)</div><div class="ttdef"><b>Definition:</b> <a href="Types-inl_8h_source.html#l00220">Types-inl.h:220</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6af9d40372da8d8ef78e3dc541ce3c95"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6af9d40372da8d8ef78e3dc541ce3c95">folly::AsyncSocket::isBufferMovable_</a></div><div class="ttdeci">bool isBufferMovable_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01236">AsyncSocket.h:1236</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="AsyncTransport_8h_html_a2189f5f5fd0e6ef6e4ade08eb1c17e61"><div class="ttname"><a href="AsyncTransport_8h.html#a2189f5f5fd0e6ef6e4ade08eb1c17e61">kOpenSslModeMoveBufferOwnership</a></div><div class="ttdeci">constexpr bool kOpenSslModeMoveBufferOwnership</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00030">AsyncTransport.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a656f40d4509ba634aea8934e06767ace"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">folly::AsyncSocket::readErr_</a></div><div class="ttdeci">int8_t readErr_</div><div class="ttdoc">The read error encountered, if any. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01238">AsyncSocket.h:1238</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a7475e0e3f554b5b93eb35bfefb04f870"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a7475e0e3f554b5b93eb35bfefb04f870">folly::AsyncSocket::prepareReadBuffer</a></div><div class="ttdeci">virtual void prepareReadBuffer(void **buf, size_t *buflen)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01798">AsyncSocket.cpp:1798</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_adc2de07e06e9afffc77c91fbcfa183e0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#adc2de07e06e9afffc77c91fbcfa183e0">folly::AsyncSocket::failRead</a></div><div class="ttdeci">void failRead(const char *fn, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02587">AsyncSocket.cpp:2587</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aca0d3439a7e8b4d25bbb09d0c87c9f23"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aca0d3439a7e8b4d25bbb09d0c87c9f23">folly::AsyncSocket::performRead</a></div><div class="ttdeci">virtual ReadResult performRead(void **buf, size_t *buflen, size_t *offset)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01764">AsyncSocket.cpp:1764</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a13e6267a58606637f16040dc92a906d3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">folly::AsyncSocket::maxReadsPerEvent_</a></div><div class="ttdeci">uint16_t maxReadsPerEvent_</div><div class="ttdoc">Max reads per event loop iteration. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01234">AsyncSocket.h:1234</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">folly::AsyncSocket::READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00942">AsyncSocket.h:942</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef">folly::AsyncSocket::READ_BLOCKING</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00943">AsyncSocket.h:943</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bae2febeb8cfa566f2e2952ac7e3a1b062"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bae2febeb8cfa566f2e2952ac7e3a1b062">folly::AsyncSocketException::BAD_ARGS</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00035">AsyncSocketException.h:35</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransportWrapper_html_a2245452bbe2d83579c30d5351e232590"><div class="ttname"><a href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">folly::AsyncTransportWrapper::ReadCallback</a></div><div class="ttdeci">AsyncReader::ReadCallback ReadCallback</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00705">AsyncTransport.h:705</a></div></div>
<div class="ttc" id="classfolly_1_1IOBuf_html_a996c07119be03b5eb25497e8d6dbb91a"><div class="ttname"><a href="classfolly_1_1IOBuf.html#a996c07119be03b5eb25497e8d6dbb91a">folly::IOBuf::takeOwnership</a></div><div class="ttdeci">static std::unique_ptr&lt; IOBuf &gt; takeOwnership(void *buf, std::size_t capacity, FreeFunction freeFn=nullptr, void *userData=nullptr, bool freeOnError=true)</div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8h_source.html#l00304">IOBuf.h:304</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">folly::AsyncSocket::READ_EOF</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00941">AsyncSocket.h:941</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a0cd391e44f632552f9d2acb816365246"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a0cd391e44f632552f9d2acb816365246">folly::AsyncReader::ReadCallback::readEOF</a></div><div class="ttdeci">virtual void readEOF() noexcept=0</div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">folly::EventHandler::READ</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00043">EventHandler.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a607fe5f9fbd872861a9506fef684b12a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::handleWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function attempts to write as much data as possible, until no more data can be written.</p>
<ul>
<li>If it sends all available data, it unregisters for write events, and stops the writeTimeout_.</li>
<li>If not all of the data can be sent immediately, it reschedules writeTimeout_ (if a non-zero timeout is set), and ensures the handler is registered for write events. </li>
</ul>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#ad8026aa0d757e4c302b2acea3e70d17d">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02019">2019</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01267">bufferCallback_</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00084">folly::AsyncTimeout::cancelTimeout()</a>, <a class="el" href="EventHandler_8h_source.html#l00143">folly::EventHandler::changeHandlerFD()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a2df0082e7c38e408faf3875d0551883f">folly::AsyncSocket::WriteRequest::consume()</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#aaeb53adc29689c0af3d23bf409b2af9e">folly::AsyncSocket::WriteRequest::destroy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02642">failWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00907">folly::AsyncSocket::WriteRequest::getCallback()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00903">folly::AsyncSocket::WriteRequest::getNext()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a3608ff56694440f8257b35cf723d7d01">folly::AsyncSocket::WriteRequest::isComplete()</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00091">folly::AsyncTimeout::isScheduled()</a>, <a class="el" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#ac1a918ded0466cb323c7313db54c69db">folly::AsyncTransport::BufferCallback::onEgressBufferCleared()</a>, <a class="el" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#a8963ea807cfe24e9c8a94b2b494bb076">folly::AsyncTransport::BufferCallback::onEgressBuffered()</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a548151de198918d7b42c92151c68213b">folly::AsyncSocket::WriteRequest::performWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00080">folly::AsyncTimeout::scheduleTimeout()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01233">sendTimeout_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l00966">SHUT_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l00964">SHUT_WRITE_PENDING</a>, <a class="el" href="RefCountBenchmark_8cpp_source.html#l00024">folly::shutdown()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01251">writeReqTail_</a>, <a class="el" href="classfolly_1_1AsyncWriter_1_1WriteCallback.html#ad468270db1897c6b828640511bec12da">folly::AsyncWriter::WriteCallback::writeSuccess()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01449">folly::AsyncSSLSocket::handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                                       {</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::handleWrite() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="keywordflow">if</span> (state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ac08e631a8c0c3690045cfa8965bda85f">handleConnect</a>();</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="comment">// Normal write</span></div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>) == 0);</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="comment">// Loop until we run out of write requests,</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">// or until this socket is moved to another EventBase.</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="comment">// (See the comment in handleRead() explaining how this can happen.)</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  EventBase* originalEventBase = <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> == originalEventBase) {</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keyword">auto</span> writeResult = <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a548151de198918d7b42c92151c68213b">performWrite</a>();</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordflow">if</span> (writeResult.writeReturn &lt; 0) {</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <span class="keywordflow">if</span> (writeResult.exception) {</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, *writeResult.exception);</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      }</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      AsyncSocketException ex(</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;writev() failed&quot;</span>),</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;          errnoCopy);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, ex);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a3608ff56694440f8257b35cf723d7d01">isComplete</a>()) {</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <span class="comment">// We finished this request</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      WriteRequest* req = <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a>;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> = req-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#af5173cc67bdf54e47ac3d36dc4dbccd8">getNext</a>();</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <span class="comment">// This is the last write request.</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        <span class="comment">// Unregister for write events and cancel the send timer</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        <span class="comment">// before we invoke the callback.  We have to update the state properly</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        <span class="comment">// before calling the callback, since it may want to detach us from</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        <span class="comment">// the EventBase.</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>) {</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(0, EventHandler::WRITE)) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;          }</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;          <span class="comment">// Stop the send timeout</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">cancelTimeout</a>();</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        }</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        assert(!<a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a47ceef409a75b2aa128fdc3dedcd9071">isScheduled</a>());</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <span class="comment">// If SHUT_WRITE_PENDING is set, we should shutdown the socket after</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        <span class="comment">// we finish sending the last write request.</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <span class="comment">// We have to do this before invoking writeSuccess(), since</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="comment">// writeSuccess() may detach us from our EventBase.</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a>) {</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;          assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a>) {</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            <span class="comment">// Reads have already been shutdown.  Fully close the socket and</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            <span class="comment">// move to STATE_CLOSED.</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            <span class="comment">// Note: This code currently moves us to STATE_CLOSED even if</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            <span class="comment">// close() hasn&#39;t ever been called.  This can occur if we have</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            <span class="comment">// received EOF from the peer and shutdownWrite() has been called</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            <span class="comment">// locally.  Should we bother staying in STATE_ESTABLISHED in this</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            <span class="comment">// case, until close() is actually called?  I can&#39;t think of a</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            <span class="comment">// reason why we would need to do so.  No other operations besides</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="comment">// calling close() or destroying the socket can be performed at</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            <span class="comment">// this point.</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;            assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;            state_ = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &gt;= 0) {</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;              <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">changeHandlerFD</a>(-1);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;              <a class="code" href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">doClose</a>();</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;            }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            <span class="comment">// Reads are still enabled, so we are only doing a half-shutdown</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            <a class="code" href="namespacefolly.html#a89e6d5d07a92c88cf24c7a3f9a02f94e">shutdown</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SHUT_WR);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;          }</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        }</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="comment">// Invoke the callback</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <a class="code" href="classWriteCallback.html">WriteCallback</a>* callback = req-&gt;getCallback();</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      req-&gt;destroy();</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        callback-&gt;<a class="code" href="classWriteCallback.html#ad31fe1caa024d6ac14511cd2842d448d">writeSuccess</a>();</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      }</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="comment">// We&#39;ll continue around the loop, trying to write another request</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <span class="comment">// Partial write.</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a>) {</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#a8963ea807cfe24e9c8a94b2b494bb076">onEgressBuffered</a>();</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      }</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a2df0082e7c38e408faf3875d0551883f">consume</a>();</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <span class="comment">// Stop after a partial write; it&#39;s highly likely that a subsequent write</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      <span class="comment">// attempt will just return EAGAIN.</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      <span class="comment">// Ensure that we are registered for write events.</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; EventHandler::WRITE) == 0) {</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(EventHandler::WRITE, 0)) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;          assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;          <span class="keywordflow">return</span>;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        }</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="comment">// Reschedule the send timeout, since we have made some write progress.</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a> &gt; 0) {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">scheduleTimeout</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a>)) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;          AsyncSocketException ex(</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;              <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;              <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to reschedule write timeout&quot;</span>));</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, ex);</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        }</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  }</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a>) {</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#ac1a918ded0466cb323c7313db54c69db">onEgressBufferCleared</a>();</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  }</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;}</div><div class="ttc" id="classWriteCallback_html_ad31fe1caa024d6ac14511cd2842d448d"><div class="ttname"><a href="classWriteCallback.html#ad31fe1caa024d6ac14511cd2842d448d">WriteCallback::writeSuccess</a></div><div class="ttdeci">void writeSuccess() noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00062">AsyncSocketTest.h:62</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a2080a127e6087755e7d603883bebfd55"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">folly::AsyncTimeout::cancelTimeout</a></div><div class="ttdeci">void cancelTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00084">AsyncTimeout.cpp:84</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_a2df0082e7c38e408faf3875d0551883f"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a2df0082e7c38e408faf3875d0551883f">folly::AsyncSocket::WriteRequest::consume</a></div><div class="ttdeci">virtual void consume()=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_a3608ff56694440f8257b35cf723d7d01"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a3608ff56694440f8257b35cf723d7d01">folly::AsyncSocket::WriteRequest::isComplete</a></div><div class="ttdeci">virtual bool isComplete()=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad0e5779653171e26bbac4121442767a5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">folly::AsyncSocket::sendTimeout_</a></div><div class="ttdeci">uint32_t sendTimeout_</div><div class="ttdoc">The send timeout, in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01233">AsyncSocket.h:1233</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac08e631a8c0c3690045cfa8965bda85f"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac08e631a8c0c3690045cfa8965bda85f">folly::AsyncSocket::handleConnect</a></div><div class="ttdeci">virtual void handleConnect() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02206">AsyncSocket.cpp:2206</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">folly::AsyncSocket::SHUT_WRITE_PENDING</a></div><div class="ttdoc">shutdownWrite() called, but we are still waiting on writes to drain </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00964">AsyncSocket.h:964</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_af5173cc67bdf54e47ac3d36dc4dbccd8"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#af5173cc67bdf54e47ac3d36dc4dbccd8">folly::AsyncSocket::WriteRequest::getNext</a></div><div class="ttdeci">WriteRequest * getNext() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00903">AsyncSocket.h:903</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad34f907ef4780c65f65f487fbb101ddb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">folly::AsyncSocket::writeReqTail_</a></div><div class="ttdeci">WriteRequest * writeReqTail_</div><div class="ttdoc">End of WriteRequest chain. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01251">AsyncSocket.h:1251</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classWriteCallback_html"><div class="ttname"><a href="classWriteCallback.html">WriteCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00055">AsyncSocketTest.h:55</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransport_1_1BufferCallback_html_ac1a918ded0466cb323c7313db54c69db"><div class="ttname"><a href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#ac1a918ded0466cb323c7313db54c69db">folly::AsyncTransport::BufferCallback::onEgressBufferCleared</a></div><div class="ttdeci">virtual void onEgressBufferCleared()=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncTransport_1_1BufferCallback_html_a8963ea807cfe24e9c8a94b2b494bb076"><div class="ttname"><a href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#a8963ea807cfe24e9c8a94b2b494bb076">folly::AsyncTransport::BufferCallback::onEgressBuffered</a></div><div class="ttdeci">virtual void onEgressBuffered()=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="namespacefolly_html_a89e6d5d07a92c88cf24c7a3f9a02f94e"><div class="ttname"><a href="namespacefolly.html#a89e6d5d07a92c88cf24c7a3f9a02f94e">folly::shutdown</a></div><div class="ttdeci">void shutdown(Counter &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="RefCountBenchmark_8cpp_source.html#l00024">RefCountBenchmark.cpp:24</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_a548151de198918d7b42c92151c68213b"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a548151de198918d7b42c92151c68213b">folly::AsyncSocket::WriteRequest::performWrite</a></div><div class="ttdeci">virtual WriteResult performWrite()=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_aef72fafbedd426fb96c4dd46b6d85395"><div class="ttname"><a href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">folly::EventHandler::changeHandlerFD</a></div><div class="ttdeci">void changeHandlerFD(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00143">EventHandler.h:143</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a021fe473fcb0935ed3e52926f601d6c7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">folly::AsyncSocket::bufferCallback_</a></div><div class="ttdeci">BufferCallback * bufferCallback_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01267">AsyncSocket.h:1267</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a73e58fa61e790fa3677134f27830c272"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">folly::AsyncSocket::doClose</a></div><div class="ttdeci">void doClose()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02790">AsyncSocket.cpp:2790</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_acb0b7716adfa30f6b0fd5261094d2228"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">folly::AsyncTimeout::scheduleTimeout</a></div><div class="ttdeci">bool scheduleTimeout(uint32_t milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00080">AsyncTimeout.cpp:80</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a47ceef409a75b2aa128fdc3dedcd9071"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a47ceef409a75b2aa128fdc3dedcd9071">folly::AsyncTimeout::isScheduled</a></div><div class="ttdeci">bool isScheduled() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00091">AsyncTimeout.cpp:91</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abb6d052c065fe2d254e4b073d956f0fc"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">folly::AsyncSocket::failWrite</a></div><div class="ttdeci">void failWrite(const char *fn, WriteCallback *callback, size_t bytesWritten, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02642">AsyncSocket.cpp:2642</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aefea6811b86eb5dbf2083de661ef6749"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::hangup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01471">1471</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="NetOps_8cpp_source.html#l00141">folly::netops::poll()</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, <a class="el" href="MockAsyncSSLSocket_8h_source.html#l00041">folly::test::MockAsyncSSLSocket::connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                               {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> == -1) {</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="comment">// sanity check, no one should ask for hangup if we are not connected.</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    assert(<span class="keyword">false</span>);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="preprocessor">#ifdef POLLRDHUP // Linux-only</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keyword">struct </span>pollfd fds[1];</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  fds[0].fd = <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  fds[0].events = POLLRDHUP | POLLHUP;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  fds[0].revents = 0;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <a class="code" href="namespacefolly_1_1netops.html#a96864641e16a4614f4b5390c94c8f330">poll</a>(fds, 1, 0);</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">return</span> (fds[0].revents &amp; (POLLRDHUP | POLLHUP)) != 0;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a96864641e16a4614f4b5390c94c8f330"><div class="ttname"><a href="namespacefolly_1_1netops.html#a96864641e16a4614f4b5390c94c8f330">folly::netops::poll</a></div><div class="ttdeci">int poll(PollDescriptor fds[], nfds_t nfds, int timeout)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00141">NetOps.cpp:141</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa45d9bd6e0dedf44794fc2447a0179e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00337">337</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01253">appBytesReceived_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01254">appBytesWritten_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01246">errMessageCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01234">maxReadsPerEvent_</a>, <a class="el" href="EventHandler_8h_source.html#l00042">folly::EventHandler::NONE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01248">sendMsgParamCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01233">sendTimeout_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">UNINIT</a>, <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01251">writeReqTail_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01252">wShutdownSocketSet_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                       {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> = 0;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">StateEnum::UNINIT</a>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> = <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> = -1;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a> = 0;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">maxReadsPerEvent_</a> = 16;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">wShutdownSocketSet_</a>.reset();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a1b0d2fa902cb3aac97142a58580bbd27">appBytesWritten_</a> = 0;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">appBytesReceived_</a> = 0;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a> = &amp;defaultSendMsgParamsCallback;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ad0e5779653171e26bbac4121442767a5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">folly::AsyncSocket::sendTimeout_</a></div><div class="ttdeci">uint32_t sendTimeout_</div><div class="ttdoc">The send timeout, in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01233">AsyncSocket.h:1233</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">folly::EventHandler::NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00042">EventHandler.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad34f907ef4780c65f65f487fbb101ddb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">folly::AsyncSocket::writeReqTail_</a></div><div class="ttdeci">WriteRequest * writeReqTail_</div><div class="ttdoc">End of WriteRequest chain. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01251">AsyncSocket.h:1251</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abe7dadc0ca3105ab63508cbc033e85f9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">folly::AsyncSocket::sendMsgParamCallback_</a></div><div class="ttdeci">SendMsgParamsCallback * sendMsgParamCallback_</div><div class="ttdoc">&lt; Callback for retrieving </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01248">AsyncSocket.h:1248</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6378c8d2f69abec78df8c2d5256710cf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">folly::AsyncSocket::wShutdownSocketSet_</a></div><div class="ttdeci">std::weak_ptr&lt; ShutdownSocketSet &gt; wShutdownSocketSet_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01252">AsyncSocket.h:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a603a263c372b9611b611f6525f5415e6"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">folly::AsyncSocket::appBytesReceived_</a></div><div class="ttdeci">size_t appBytesReceived_</div><div class="ttdoc">Num of bytes received from socket. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01253">AsyncSocket.h:1253</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8cd2284b5c3231a222d1e437bf653a92"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">folly::AsyncSocket::errMessageCallback_</a></div><div class="ttdeci">ErrMessageCallback * errMessageCallback_</div><div class="ttdoc">TimestampCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01246">AsyncSocket.h:1246</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">folly::AsyncSocket::StateEnum::UNINIT</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a13e6267a58606637f16040dc92a906d3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">folly::AsyncSocket::maxReadsPerEvent_</a></div><div class="ttdeci">uint16_t maxReadsPerEvent_</div><div class="ttdoc">Max reads per event loop iteration. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01234">AsyncSocket.h:1234</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1b0d2fa902cb3aac97142a58580bbd27"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1b0d2fa902cb3aac97142a58580bbd27">folly::AsyncSocket::appBytesWritten_</a></div><div class="ttdeci">size_t appBytesWritten_</div><div class="ttdoc">Num of bytes written to socket. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01254">AsyncSocket.h:1254</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5838613ef655ef0ad26ac6a27cfef4f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::invalidState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02676">2676</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocketException_8h_source.html#l00031">folly::AsyncSocketException::ALREADY_OPEN</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01261">connectEndTime_</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html#ab6197ee8b2ef9a20dc8db813423b2ac6">folly::AsyncSocket::ConnectCallback::connectErr()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                                                        {</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): connect() called in invalid state &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="comment">   * The invalidState() methods don&#39;t use the normal failure mechanisms,</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="comment">   * since we don&#39;t know what state we are in.  We don&#39;t want to call</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment">   * startFail()/finishFail() recursively if we are already in the middle of</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment">   * cleaning up.</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;  AsyncSocketException ex(</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bae6092aaec3c3781749fe1694017fedcc">AsyncSocketException::ALREADY_OPEN</a>,</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="stringliteral">&quot;connect() called with socket in invalid state&quot;</span>);</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">connectEndTime_</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">std::chrono::steady_clock::now</a>();</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <span class="keywordflow">if</span> (state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a> || state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>) {</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      callback-&gt;connectErr(ex);</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    }</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="comment">// We can&#39;t use failConnect() here since connectCallback_</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="comment">// may already be set to another callback.  Invoke this ConnectCallback</span></div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="comment">// here; any other connectCallback_ will be invoked in finishFail()</span></div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      callback-&gt;connectErr(ex);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    }</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  }</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bae6092aaec3c3781749fe1694017fedcc"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bae6092aaec3c3781749fe1694017fedcc">folly::AsyncSocketException::ALREADY_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00031">AsyncSocketException.h:31</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a978a6b1e49cab71a0282771d71b58330"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">folly::AsyncSocket::connectEndTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectEndTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01261">AsyncSocket.h:1261</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae1c0cd857b15bea7d87266ebb1bdb45d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::invalidState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02707">2707</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html#a909a0dbe3a56db29ac6778adee178f1a">folly::AsyncSocket::ErrMessageCallback::errMessageError()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00030">folly::AsyncSocketException::NOT_OPEN</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>
<div class="fragment"><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                                                           {</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): setErrMessageCB(&quot;</span> &lt;&lt; callback &lt;&lt; <span class="stringliteral">&quot;) called in invalid state &quot;</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;          &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  AsyncSocketException ex(</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">AsyncSocketException::NOT_OPEN</a>,</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;      <a class="code" href="namespacefolly.html#a236df91ae3d0d023dd67c6923d3cd47b">msgErrQueueSupported</a></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;          ? <span class="stringliteral">&quot;setErrMessageCB() called with socket in invalid state&quot;</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;          : <span class="stringliteral">&quot;This platform does not support socket error message notifications&quot;</span>);</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="keywordflow">if</span> (state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a> || state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>) {</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;      callback-&gt;errMessageError(ex);</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    }</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;      callback-&gt;errMessageError(ex);</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    }</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  }</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">folly::AsyncSocketException::NOT_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00030">AsyncSocketException.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="namespacefolly_html_a236df91ae3d0d023dd67c6923d3cd47b"><div class="ttname"><a href="namespacefolly.html#a236df91ae3d0d023dd67c6923d3cd47b">folly::msgErrQueueSupported</a></div><div class="ttdeci">static constexpr bool msgErrQueueSupported</div><div class="ttdef"><b>Definition:</b> <a href="AsyncServerSocket_8cpp_source.html#l00050">AsyncServerSocket.cpp:50</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc436d9885a9a0abbf94b4cb384eae00"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::invalidState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02748">2748</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00030">folly::AsyncSocketException::NOT_OPEN</a>, <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a4d0d791c9bf0400f4ea951528cfbbca4">folly::AsyncReader::ReadCallback::readErr()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>
<div class="fragment"><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                                                     {</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): setReadCallback(&quot;</span> &lt;&lt; callback &lt;&lt; <span class="stringliteral">&quot;) called in invalid state &quot;</span></div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;          &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  AsyncSocketException ex(</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">AsyncSocketException::NOT_OPEN</a>,</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      <span class="stringliteral">&quot;setReadCallback() called with socket in &quot;</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;      <span class="stringliteral">&quot;invalid state&quot;</span>);</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="keywordflow">if</span> (state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a> || state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>) {</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;      callback-&gt;readErr(ex);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    }</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;      callback-&gt;readErr(ex);</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    }</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">folly::AsyncSocketException::NOT_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00030">AsyncSocketException.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a92cdcbb5ed1efcc36ebbb4224783a94d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::invalidState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02770">2770</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00030">folly::AsyncSocketException::NOT_OPEN</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, and <a class="el" href="classfolly_1_1AsyncWriter_1_1WriteCallback.html#ae3f28acad97f837ba5c274d9daf1a6ac">folly::AsyncWriter::WriteCallback::writeErr()</a>.</p>
<div class="fragment"><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                                                      {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;): write() called in invalid state &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  AsyncSocketException ex(</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">AsyncSocketException::NOT_OPEN</a>,</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;write() called with socket in invalid state&quot;</span>));</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="keywordflow">if</span> (state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a> || state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>) {</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      callback-&gt;<a class="code" href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">writeErr</a>(0, ex);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    }</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">startFail</a>();</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      callback-&gt;<a class="code" href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">writeErr</a>(0, ex);</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    }</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">finishFail</a>();</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  }</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aa16ce6547bcd2004dd8b5fb2467f4791"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aa16ce6547bcd2004dd8b5fb2467f4791">folly::AsyncSocket::finishFail</a></div><div class="ttdeci">void finishFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02553">AsyncSocket.cpp:2553</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">folly::AsyncSocketException::NOT_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00030">AsyncSocketException.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a33e15b31f2e7087c75d9d916a7bd7db7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a33e15b31f2e7087c75d9d916a7bd7db7">folly::AsyncSocket::startFail</a></div><div class="ttdeci">void startFail()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02516">AsyncSocket.cpp:2516</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classWriteCallback_html_ad6d54dcefaf048916f742774b660b0f7"><div class="ttname"><a href="classWriteCallback.html#ad6d54dcefaf048916f742774b660b0f7">WriteCallback::writeErr</a></div><div class="ttdeci">void writeErr(size_t nBytesWritten, const folly::AsyncSocketException &amp;ex) noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00069">AsyncSocketTest.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44ec1c4666f6c1b2ba6167ad5769030f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::invokeAllErrors </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02542">2542</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l02661">failAllWrites()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02730">invokeConnectErr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, and <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a4d0d791c9bf0400f4ea951528cfbbca4">folly::AsyncReader::ReadCallback::readErr()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                                                                {</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a43b199293a4651f5b6e52baa27fe3a94">invokeConnectErr</a>(ex);</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">failAllWrites</a>(ex);</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>) {</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <a class="code" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a>* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    callback-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a4d0d791c9bf0400f4ea951528cfbbca4">readErr</a>(ex);</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  }</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a0882ee58c818367f82b6b6a4db50dd1c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">folly::AsyncSocket::failAllWrites</a></div><div class="ttdeci">void failAllWrites(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02661">AsyncSocket.cpp:2661</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransportWrapper_html_a2245452bbe2d83579c30d5351e232590"><div class="ttname"><a href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">folly::AsyncTransportWrapper::ReadCallback</a></div><div class="ttdeci">AsyncReader::ReadCallback ReadCallback</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00705">AsyncTransport.h:705</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a43b199293a4651f5b6e52baa27fe3a94"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a43b199293a4651f5b6e52baa27fe3a94">folly::AsyncSocket::invokeConnectErr</a></div><div class="ttdeci">virtual void invokeConnectErr(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02730">AsyncSocket.cpp:2730</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a4d0d791c9bf0400f4ea951528cfbbca4"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a4d0d791c9bf0400f4ea951528cfbbca4">folly::AsyncReader::ReadCallback::readErr</a></div><div class="ttdeci">virtual void readErr(const AsyncSocketException &amp;ex) noexcept=0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a43b199293a4651f5b6e52baa27fe3a94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::invokeConnectErr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocketException.html">AsyncSocketException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a93c7911041e00c0f596e9bbbddecd145">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02730">2730</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01261">connectEndTime_</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html#ab6197ee8b2ef9a20dc8db813423b2ac6">folly::AsyncSocket::ConnectCallback::connectErr()</a>, and <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02542">invokeAllErrors()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01281">folly::AsyncSSLSocket::invokeConnectErr()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;                                                                 {</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">connectEndTime_</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">std::chrono::steady_clock::now</a>();</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a>) {</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    ConnectCallback* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a>;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    callback-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html#ab6197ee8b2ef9a20dc8db813423b2ac6">connectErr</a>(ex);</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  }</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;}</div><div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1ConnectCallback_html_ab6197ee8b2ef9a20dc8db813423b2ac6"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html#ab6197ee8b2ef9a20dc8db813423b2ac6">folly::AsyncSocket::ConnectCallback::connectErr</a></div><div class="ttdeci">virtual void connectErr(const AsyncSocketException &amp;ex) noexcept=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a978a6b1e49cab71a0282771d71b58330"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">folly::AsyncSocket::connectEndTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectEndTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01261">AsyncSocket.h:1261</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2cd8439868d842f50758e17f1fd2092e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::invokeConnectSuccess </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a85d6beaca24b4ccd0d1f9c07c0042211">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02739">2739</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01261">connectEndTime_</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html#a71bc965349474196548e693389ba665a">folly::AsyncSocket::ConnectCallback::connectSuccess()</a>, and <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01294">folly::AsyncSSLSocket::invokeConnectSuccess()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                                       {</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">connectEndTime_</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">std::chrono::steady_clock::now</a>();</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a>) {</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    ConnectCallback* callback = <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a>;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    callback-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html#a71bc965349474196548e693389ba665a">connectSuccess</a>();</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  }</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_1_1ConnectCallback_html_a71bc965349474196548e693389ba665a"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html#a71bc965349474196548e693389ba665a">folly::AsyncSocket::ConnectCallback::connectSuccess</a></div><div class="ttdeci">virtual void connectSuccess() noexcept=0</div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a978a6b1e49cab71a0282771d71b58330"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a978a6b1e49cab71a0282771d71b58330">folly::AsyncSocket::connectEndTime_</a></div><div class="ttdeci">std::chrono::steady_clock::time_point connectEndTime_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01261">AsyncSocket.h:1261</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad990c726026595c0bac99a820e5bdff2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::ioReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>events</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01713">1713</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="EventHandler_8h_source.html#l00043">folly::EventHandler::READ</a>, <a class="el" href="EventHandler_8h_source.html#l00045">folly::EventHandler::READ_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, and <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                                                  {</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  VLOG(7) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::ioRead() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, events=&quot;</span> &lt;&lt; std::hex &lt;&lt; events &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  assert(events &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca4df957490633f5e01495bda435572dc6">EventHandler::READ_WRITE</a>);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> relevantEvents = <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>(events &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca4df957490633f5e01495bda435572dc6">EventHandler::READ_WRITE</a>);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  EventBase* originalEventBase = <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="comment">// If we got there it means that either EventHandler::READ or</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// EventHandler::WRITE is set. Any of these flags can</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// indicate that there are messages available in the socket</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// error message queue.</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="comment">// Return if we handle any error messages - this is to avoid</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="comment">// unnecessary read/write calls</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a085ae8fe5c02376a95228a2543534b0a">handleErrMessages</a>()) {</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  }</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="comment">// Return now if handleErrMessages() detached us from our EventBase</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> != originalEventBase) {</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  }</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordflow">if</span> (relevantEvents == <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">EventHandler::READ</a>) {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a704ce81032be80dd5f36d23f0dfbedac">handleRead</a>();</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (relevantEvents == <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>) {</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">handleWrite</a>();</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (relevantEvents == <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca4df957490633f5e01495bda435572dc6">EventHandler::READ_WRITE</a>) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="comment">// If both read and write events are ready, process writes first.</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">handleWrite</a>();</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// Return now if handleWrite() detached us from our EventBase</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> != originalEventBase) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    }</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="comment">// Only call handleRead() if a read callback is still installed.</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="comment">// (It&#39;s possible that the read callback was uninstalled during</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="comment">// handleWrite().)</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>) {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a704ce81032be80dd5f36d23f0dfbedac">handleRead</a>();</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    }</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::ioRead() called with unexpected events &quot;</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            &lt;&lt; std::hex &lt;&lt; events &lt;&lt; <span class="stringliteral">&quot;(this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    abort();</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  }</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;}</div><div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca4df957490633f5e01495bda435572dc6"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca4df957490633f5e01495bda435572dc6">folly::EventHandler::READ_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00045">EventHandler.h:45</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a704ce81032be80dd5f36d23f0dfbedac"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a704ce81032be80dd5f36d23f0dfbedac">folly::AsyncSocket::handleRead</a></div><div class="ttdeci">virtual void handleRead() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01881">AsyncSocket.cpp:1881</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a607fe5f9fbd872861a9506fef684b12a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">folly::AsyncSocket::handleWrite</a></div><div class="ttdeci">virtual void handleWrite() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02019">AsyncSocket.cpp:2019</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a085ae8fe5c02376a95228a2543534b0a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a085ae8fe5c02376a95228a2543534b0a">folly::AsyncSocket::handleErrMessages</a></div><div class="ttdeci">virtual size_t handleErrMessages() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01804">AsyncSocket.cpp:1804</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">folly::EventHandler::READ</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00043">EventHandler.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a728138e1589b68e35783e02ba8121992"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool folly::AsyncSocket::isClosedByPeer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00571">571</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="AsyncSocket_8h_source.html#l00941">READ_EOF</a>, <a class="el" href="AsyncSocket_8h_source.html#l00942">READ_ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01238">readErr_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">proxygen::HTTPSession::connCloseByRemote()</a>, and <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01542">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                      {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> (</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a> &amp;&amp;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        (<a class="code" href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">readErr_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">READ_EOF</a> || <a class="code" href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">readErr_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">READ_ERROR</a>));</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a656f40d4509ba634aea8934e06767ace"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">folly::AsyncSocket::readErr_</a></div><div class="ttdeci">int8_t readErr_</div><div class="ttdoc">The read error encountered, if any. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01238">AsyncSocket.h:1238</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">folly::AsyncSocket::READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00942">AsyncSocket.h:942</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">folly::AsyncSocket::READ_EOF</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00941">AsyncSocket.h:941</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae90f325b605665293dd65b8869aa9963"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool folly::AsyncSocket::isClosedBySelf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00577">577</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="AsyncSocket_8h_source.html#l00941">READ_EOF</a>, <a class="el" href="AsyncSocket_8h_source.html#l00942">READ_ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01238">readErr_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01542">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                      {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">return</span> (</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a> &amp;&amp;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        (<a class="code" href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">readErr_</a> != <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">READ_EOF</a> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">readErr_</a> != <a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">READ_ERROR</a>));</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a656f40d4509ba634aea8934e06767ace"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a656f40d4509ba634aea8934e06767ace">folly::AsyncSocket::readErr_</a></div><div class="ttdeci">int8_t readErr_</div><div class="ttdoc">The read error encountered, if any. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01238">AsyncSocket.h:1238</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">folly::AsyncSocket::READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00942">AsyncSocket.h:942</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba488c3b782de0488eb58dd8cd99647fd0">folly::AsyncSocket::READ_EOF</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00941">AsyncSocket.h:941</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a40c6d064abaa16abb5d26fdcf4973624"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::isDetachable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine if the transport can be detached.</p>
<p>This method must be called from the current <a class="el" href="classfolly_1_1EventBase.html">EventBase</a>'s thread. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a8f568d0787da9121baa12ae5ee4f2708">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#acc0db66dd8b1d8d342877747233972d6">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01537">1537</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00091">folly::AsyncTimeout::isScheduled()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8h_source.html#l00581">folly::AsyncSSLSocket::isDetachable()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                                     {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  DCHECK(<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a47ceef409a75b2aa128fdc3dedcd9071">isScheduled</a>();</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a47ceef409a75b2aa128fdc3dedcd9071"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a47ceef409a75b2aa128fdc3dedcd9071">folly::AsyncTimeout::isScheduled</a></div><div class="ttdeci">bool isScheduled() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00091">AsyncTimeout.cpp:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b6fc6f621fce886e83c4606d0305b5f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::isEorTrackingEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>True iff end of record tracking is enabled </dd></dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a5a5f6528a516f66a4a066f98a6ac939e">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00559">559</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01274">trackEor_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01651">folly::AsyncSSLSocket::eorAwareSSLWrite()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00403">folly::AsyncSSLSocket::setEorTracking()</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                             {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a26ff0294ace9883cce16a3cc414c79eb">trackEor_</a>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a26ff0294ace9883cce16a3cc414c79eb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a26ff0294ace9883cce16a3cc414c79eb">folly::AsyncSocket::trackEor_</a></div><div class="ttdeci">bool trackEor_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01274">AsyncSocket.h:1274</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a84f7f45e057924c9fb588c853186e92e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::isPending </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine if the there is pending data on the transport.</p>
<dl class="section return"><dt>Returns</dt><dd>true iff the if the there is pending data, false otherwise. </dd></dl>

<p>Reimplemented from <a class="el" href="classfolly_1_1AsyncTransport.html#a72c04e4dcf4cbdf90ce4704142de440c">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01467">1467</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, and <a class="el" href="EventHandler_8cpp_source.html#l00173">folly::EventHandler::isPending()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                                  {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#aef0e13ff8b995fd00e5ea260a7d49b3e">isPending</a>();</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;}</div><div class="ttc" id="classfolly_1_1EventHandler_html_aef0e13ff8b995fd00e5ea260a7d49b3e"><div class="ttname"><a href="classfolly_1_1EventHandler.html#aef0e13ff8b995fd00e5ea260a7d49b3e">folly::EventHandler::isPending</a></div><div class="ttdeci">bool isPending() const </div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00173">EventHandler.cpp:173</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62f2caffee8c9b814ea6c2138e127724"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::isZeroCopyMsg </td>
          <td>(</td>
          <td class="paramtype">const cmsghdr &amp;&#160;</td>
          <td class="paramname"><em>cmsg</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00967">967</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="NetOps_8h_source.html#l00043">SO_EE_ORIGIN_ZEROCOPY</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                                                         {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="preprocessor">#ifdef FOLLY_HAVE_MSG_ERRQUEUE</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">if</span> ((cmsg.cmsg_level == SOL_IP &amp;&amp; cmsg.cmsg_type == IP_RECVERR) ||</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      (cmsg.cmsg_level == SOL_IPV6 &amp;&amp; cmsg.cmsg_type == IPV6_RECVERR)) {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span>sock_extended_err* serr =</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>struct sock_extended_err*<span class="keyword">&gt;</span>(CMSG_DATA(&amp;cmsg));</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">return</span> (</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        (serr-&gt;ee_errno == 0) &amp;&amp; (serr-&gt;ee_origin == <a class="code" href="NetOps_8h.html#aa546dee4b0d886f0dd9026abfd91e174">SO_EE_ORIGIN_ZEROCOPY</a>));</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  (void)cmsg;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;}</div><div class="ttc" id="NetOps_8h_html_aa546dee4b0d886f0dd9026abfd91e174"><div class="ttname"><a href="NetOps_8h.html#aa546dee4b0d886f0dd9026abfd91e174">SO_EE_ORIGIN_ZEROCOPY</a></div><div class="ttdeci">#define SO_EE_ORIGIN_ZEROCOPY</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8h_source.html#l00043">NetOps.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2df177b0b6319bdda09875af3f240330"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::isZeroCopyRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00905">905</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncTransport_8h_source.html#l00119">folly::isSet()</a>, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94">folly::WRITE_MSG_ZEROCOPY</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01275">zeroCopyEnabled_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00151">folly::AsyncSocket::BytesWriteRequest::consume()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00117">folly::AsyncSocket::BytesWriteRequest::performWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                                                    {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> &amp;&amp; <a class="code" href="namespacefolly.html#a0814196b36bd2dfa4a83f9ba5200a96b">isSet</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>, <a class="code" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94">WriteFlags::WRITE_MSG_ZEROCOPY</a>));</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div><div class="ttc" id="namespacefolly_html_a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94"><div class="ttname"><a href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7a64faa958c7518d14281417259de6aa94">folly::WriteFlags::WRITE_MSG_ZEROCOPY</a></div></div>
<div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="namespacefolly_html_a0814196b36bd2dfa4a83f9ba5200a96b"><div class="ttname"><a href="namespacefolly.html#a0814196b36bd2dfa4a83f9ba5200a96b">folly::isSet</a></div><div class="ttdeci">bool isSet(WriteFlags a, WriteFlags b)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00119">AsyncTransport.h:119</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad99736e9c89e1cf75d27defb5476c0bf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">folly::AsyncSocket::zeroCopyEnabled_</a></div><div class="ttdeci">bool zeroCopyEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01275">AsyncSocket.h:1275</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acc655888de8ac0279882fe1f233cfd6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::isZeroCopyWriteInProgress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if there is any zero copy write in progress Needs to be called from within the socket's EVB thread </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01570">1570</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01223">idZeroCopyBufPtrMap_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00810">setEvbChangedCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                                                           {</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keywordflow">return</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.empty());</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ae7c8deddc31b2526738304413c014f9a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">folly::AsyncSocket::idZeroCopyBufPtrMap_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, folly::IOBuf * &gt; idZeroCopyBufPtrMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01223">AsyncSocket.h:1223</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7f0360f170c85ce343f3ae1373cabdca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::shared_ptr&lt;<a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>&gt; folly::AsyncSocket::newSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Helper function to create a shared_ptr&lt;AsyncSocket&gt;.</p>
<p>This passes in the correct destructor object, since <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>'s destructor is protected and cannot be invoked directly. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00281">281</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocketTest_8h_source.html#l00380">TestServer::acceptAsync()</a>, <a class="el" href="ClientBootstrap_8h_source.html#l00099">wangle::ClientBootstrap&lt; DefaultPipeline &gt;::connect()</a>, <a class="el" href="ProxyHandler_8cpp_source.html#l00049">ProxyService::ProxyHandler::onRequest()</a>, <a class="el" href="AsyncSocketTest_8cpp_source.html#l00029">folly::TEST()</a>, <a class="el" href="AsyncSocketTest2_8cpp_source.html#l00096">TEST()</a>, <a class="el" href="AsyncSocketTest2_8cpp_source.html#l00209">TEST_P()</a>, and <a class="el" href="AsyncSocketTest2_8cpp_source.html#l00858">testConnectOptWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                                              {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">return</span> std::shared_ptr&lt;AsyncSocket&gt;(<span class="keyword">new</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a>(evb), Destructor());</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a45779d1664a08156b88d8476da84586b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">folly::AsyncSocket::AsyncSocket</a></div><div class="ttdeci">AsyncSocket()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket.cpp:277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2bc8acd684a58816d42dddf216b3a0ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::shared_ptr&lt;<a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>&gt; folly::AsyncSocket::newSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>connectTimeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Helper function to create a shared_ptr&lt;AsyncSocket&gt;. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00288">288</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                   {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">return</span> std::shared_ptr&lt;AsyncSocket&gt;(</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keyword">new</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a>(evb, address, connectTimeout), Destructor());</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a45779d1664a08156b88d8476da84586b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">folly::AsyncSocket::AsyncSocket</a></div><div class="ttdeci">AsyncSocket()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket.cpp:277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3611dac6eae607fab849d0731b07f2c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::shared_ptr&lt;<a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>&gt; folly::AsyncSocket::newSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>connectTimeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Helper function to create a shared_ptr&lt;AsyncSocket&gt;. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00299">299</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                   {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> std::shared_ptr&lt;AsyncSocket&gt;(</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keyword">new</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a>(evb, ip, port, connectTimeout), Destructor());</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a45779d1664a08156b88d8476da84586b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">folly::AsyncSocket::AsyncSocket</a></div><div class="ttdeci">AsyncSocket()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket.cpp:277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47606a814bf840e0933b855820a16a7c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::shared_ptr&lt;<a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>&gt; folly::AsyncSocket::newSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a> *&#160;</td>
          <td class="paramname"><em>evb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Helper function to create a shared_ptr&lt;AsyncSocket&gt;. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00311">311</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00364">destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                                                      {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">return</span> std::shared_ptr&lt;AsyncSocket&gt;(<span class="keyword">new</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">AsyncSocket</a>(evb, fd), Destructor());</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a45779d1664a08156b88d8476da84586b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a45779d1664a08156b88d8476da84586b">folly::AsyncSocket::AsyncSocket</a></div><div class="ttdeci">AsyncSocket()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00277">AsyncSocket.cpp:277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aca0d3439a7e8b4d25bbb09d0c87c9f23"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1AsyncSocket_1_1ReadResult.html">AsyncSocket::ReadResult</a> folly::AsyncSocket::performRead </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempt to read from the socket.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The buffer to read data into. </td></tr>
    <tr><td class="paramname">buflen</td><td>The length of the buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a read result. See read result for details. </dd></dl>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#aca6ba3901ed3f8d9de3e5e084464db53">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01764">1764</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01253">appBytesReceived_</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00143">folly::IOBufQueue::append()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00459">folly::IOBufQueue::move()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="AsyncSocket_8h_source.html#l01258">preReceivedData_</a>, <a class="el" href="Cursor_8h_source.html#l00407">folly::io::detail::CursorBase&lt; Derived, BufType &gt;::pullAtMost()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00943">READ_BLOCKING</a>, <a class="el" href="AsyncSocket_8h_source.html#l00942">READ_ERROR</a>, <a class="el" href="NetOps_8cpp_source.html#l00180">folly::netops::recv()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00255">folly::IOBufQueue::trimStart()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01380">folly::AsyncSSLSocket::performRead()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                                                              {</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::performRead() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, buf=&quot;</span> &lt;&lt; *buf</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, buflen=&quot;</span> &lt;&lt; *buflen;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a> &amp;&amp; !<a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a>-&gt;empty()) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::performRead() this=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;, reading pre-received data&quot;</span>;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    io::Cursor cursor(<a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a>.get());</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keyword">auto</span> len = cursor.pullAtMost(*buf, *buflen);</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    IOBufQueue queue;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    queue.append(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a>));</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    queue.trimStart(len);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a> = queue.move();</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">appBytesReceived_</a> += len;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> ReadResult(len);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  ssize_t bytes = <a class="code" href="namespacefolly_1_1netops.html#a454d594094d9885abeb47dd5d2f646f6">recv</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, *buf, *buflen, MSG_DONTWAIT);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">if</span> (bytes &lt; 0) {</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">if</span> (errno == EAGAIN || errno == EWOULDBLOCK) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <span class="comment">// No more data to read right now.</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">return</span> ReadResult(<a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef">READ_BLOCKING</a>);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">return</span> ReadResult(<a class="code" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">READ_ERROR</a>);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">appBytesReceived_</a> += bytes;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">return</span> ReadResult(bytes);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a603a263c372b9611b611f6525f5415e6"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a603a263c372b9611b611f6525f5415e6">folly::AsyncSocket::appBytesReceived_</a></div><div class="ttdeci">size_t appBytesReceived_</div><div class="ttdoc">Num of bytes received from socket. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01253">AsyncSocket.h:1253</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba67318bcdb25a0a0daab4b658ec24de9d">folly::AsyncSocket::READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00942">AsyncSocket.h:942</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba898c52ddf55eda1696a8b5e02492c3ef">folly::AsyncSocket::READ_BLOCKING</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00943">AsyncSocket.h:943</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a454d594094d9885abeb47dd5d2f646f6"><div class="ttname"><a href="namespacefolly_1_1netops.html#a454d594094d9885abeb47dd5d2f646f6">folly::netops::recv</a></div><div class="ttdeci">ssize_t recv(NetworkSocket s, void *buf, size_t len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00180">NetOps.cpp:180</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6344043cf39ccd7cbb4f200d5f983fcd"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">folly::AsyncSocket::preReceivedData_</a></div><div class="ttdeci">std::unique_ptr&lt; IOBuf &gt; preReceivedData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01258">AsyncSocket.h:1258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a35c95aae8d6578c1cf1ad443e2a420b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1AsyncSocket_1_1WriteResult.html">AsyncSocket::WriteResult</a> folly::AsyncSocket::performWrite </td>
          <td>(</td>
          <td class="paramtype">const iovec *&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>countWritten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>partialWritten</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempt to write to the socket.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vec</td><td>The iovec array pointing to the buffers to write. </td></tr>
    <tr><td class="paramname">count</td><td>The length of the iovec array. </td></tr>
    <tr><td class="paramname">flags</td><td>Set of write flags. </td></tr>
    <tr><td class="paramname">countWritten</td><td>On return, the value pointed to by this parameter will contain the number of iovec entries that were fully written. </td></tr>
    <tr><td class="paramname">partialWritten</td><td>On return, the value pointed to by this parameter will contain the number of bytes written in the partially written iovec entry.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a <a class="el" href="structfolly_1_1AsyncSocket_1_1WriteResult.html">WriteResult</a>. See <a class="el" href="structfolly_1_1AsyncSocket_1_1WriteResult.html">WriteResult</a> for more details. </dd></dl>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a583896c75194bab86956f6c8a94075d1">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02387">2387</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01254">appBytesWritten_</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00170">folly::AsyncSocket::SendMsgParamsCallback::getAncillaryData()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00180">folly::AsyncSocket::SendMsgParamsCallback::getAncillaryDataSize()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00156">folly::AsyncSocket::SendMsgParamsCallback::getFlags()</a>, <a class="el" href="SysUio_8h_source.html#l00039">folly::kIovMax</a>, <a class="el" href="AsyncSocket_8h_source.html#l00185">folly::AsyncSocket::SendMsgParamsCallback::maxAncillaryDataSize</a>, <a class="el" href="AsyncSocket_8h_source.html#l01248">sendMsgParamCallback_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, <a class="el" href="AsyncSocket_8h_source.html#l01275">zeroCopyEnabled_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01279">zeroCopyReenableCounter_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01278">zeroCopyReenableThreshold_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00117">folly::AsyncSocket::BytesWriteRequest::performWrite()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01501">folly::AsyncSSLSocket::performWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00893">folly::AsyncSocket::WriteRequest::start()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                              {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="comment">// We use sendmsg() instead of writev() so that we can pass in MSG_NOSIGNAL</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="comment">// We correctly handle EPIPE errors, so we never want to receive SIGPIPE</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  <span class="comment">// (since it may terminate the program if the main program doesn&#39;t explicitly</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="comment">// ignore it).</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  <span class="keyword">struct </span>msghdr msg;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  msg.msg_name = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  msg.msg_namelen = 0;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  msg.msg_iov = <span class="keyword">const_cast&lt;</span>iovec*<span class="keyword">&gt;</span>(<a class="code" href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a>);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  msg.msg_iovlen = std::min&lt;size_t&gt;(<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>, <a class="code" href="namespacefolly.html#a5e47aff44de8391907ac86ed634232a7">kIovMax</a>);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  msg.msg_flags = 0;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  msg.msg_controllen = <a class="code" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#abe03d9fdc7902dd216e9b954324d4c19">getAncillaryDataSize</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  CHECK_GE(</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#a6f86bff18a2bcc7ee0c79a24e31cb727">AsyncSocket::SendMsgParamsCallback::maxAncillaryDataSize</a>,</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      msg.msg_controllen);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  <span class="keywordflow">if</span> (msg.msg_controllen != 0) {</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    msg.msg_control = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(alloca(msg.msg_controllen));</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#ace07b2da3c05a46f5c6462e696a90f1c">getAncillaryData</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>, msg.msg_control);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    msg.msg_control = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  }</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordtype">int</span> msg_flags = <a class="code" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#a91d9e2db3f8bccdd158336bdb9e5af45">getFlags</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>, <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a>);</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="keyword">auto</span> writeResult = <a class="code" href="classfolly_1_1AsyncSocket.html#a1504d851c6bbff263684e03e8af092c9">sendSocketMessage</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, &amp;msg, msg_flags);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keyword">auto</span> totalWritten = writeResult.writeReturn;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="keywordflow">if</span> (totalWritten &lt; 0 &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> &amp;&amp; errno == ENOBUFS) {</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="comment">// workaround for running with zerocopy enabled but without a big enough</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="comment">// memlock value - see ulimit -l</span></div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a2d60076e9e2951c3406b01eaf65e0646">zeroCopyReenableCounter_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a078418769fa327ad592f58e115f65fca">zeroCopyReenableThreshold_</a>;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    msg_flags = <a class="code" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#a91d9e2db3f8bccdd158336bdb9e5af45">getFlags</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>, <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a>);</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    writeResult = <a class="code" href="classfolly_1_1AsyncSocket.html#a1504d851c6bbff263684e03e8af092c9">sendSocketMessage</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, &amp;msg, msg_flags);</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    totalWritten = writeResult.writeReturn;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  }</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;  <span class="keywordflow">if</span> (totalWritten &lt; 0) {</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordtype">bool</span> tryAgain = (errno == EAGAIN);</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="preprocessor">#ifdef __APPLE__</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="comment">// Apple has a bug where doing a second write on a socket which we</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <span class="comment">// have opened with TFO causes an ENOTCONN to be thrown. However the</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <span class="comment">// socket is really connected, so treat ENOTCONN as a EAGAIN until</span></div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="comment">// this bug is fixed.</span></div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    tryAgain |= (errno == ENOTCONN);</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">if</span> (!writeResult.exception &amp;&amp; tryAgain) {</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="comment">// TCP buffer is full; we can&#39;t write any more data right now.</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      *countWritten = 0;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      *partialWritten = 0;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <span class="keywordflow">return</span> WriteResult(0);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    }</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="comment">// error</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    *countWritten = 0;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    *partialWritten = 0;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="keywordflow">return</span> writeResult;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  }</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a1b0d2fa902cb3aac97142a58580bbd27">appBytesWritten_</a> += totalWritten;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> bytesWritten;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> n;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="keywordflow">for</span> (bytesWritten = <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>(totalWritten), n = 0; n &lt; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>; ++n) {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keyword">const</span> iovec* <a class="code" href="namespacefolly_1_1pushmi.html">v</a> = <a class="code" href="classvector.html">vec</a> + n;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">if</span> (v-&gt;iov_len &gt; bytesWritten) {</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <span class="comment">// Partial write finished in the middle of this iovec</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      *countWritten = n;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      *partialWritten = bytesWritten;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      <span class="keywordflow">return</span> WriteResult(totalWritten);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    }</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    bytesWritten -= <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>(v-&gt;iov_len);</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  }</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  assert(bytesWritten == 0);</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  *countWritten = n;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  *partialWritten = 0;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="keywordflow">return</span> WriteResult(totalWritten);</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1pushmi_html"><div class="ttname"><a href="namespacefolly_1_1pushmi.html">folly::pushmi</a></div><div class="ttdef"><b>Definition:</b> <a href="boosters_8h_source.html#l00030">boosters.h:30</a></div></div>
<div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="namespacefolly_html_a5e47aff44de8391907ac86ed634232a7"><div class="ttname"><a href="namespacefolly.html#a5e47aff44de8391907ac86ed634232a7">folly::kIovMax</a></div><div class="ttdeci">constexpr size_t kIovMax</div><div class="ttdef"><b>Definition:</b> <a href="SysUio_8h_source.html#l00039">SysUio.h:39</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abe7dadc0ca3105ab63508cbc033e85f9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">folly::AsyncSocket::sendMsgParamCallback_</a></div><div class="ttdeci">SendMsgParamsCallback * sendMsgParamCallback_</div><div class="ttdoc">&lt; Callback for retrieving </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01248">AsyncSocket.h:1248</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2d60076e9e2951c3406b01eaf65e0646"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2d60076e9e2951c3406b01eaf65e0646">folly::AsyncSocket::zeroCopyReenableCounter_</a></div><div class="ttdeci">size_t zeroCopyReenableCounter_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01279">AsyncSocket.h:1279</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback_html_a6f86bff18a2bcc7ee0c79a24e31cb727"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#a6f86bff18a2bcc7ee0c79a24e31cb727">folly::AsyncSocket::SendMsgParamsCallback::maxAncillaryDataSize</a></div><div class="ttdeci">static const size_t maxAncillaryDataSize</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00185">AsyncSocket.h:185</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback_html_ace07b2da3c05a46f5c6462e696a90f1c"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#ace07b2da3c05a46f5c6462e696a90f1c">folly::AsyncSocket::SendMsgParamsCallback::getAncillaryData</a></div><div class="ttdeci">virtual void getAncillaryData(folly::WriteFlags, void *) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00170">AsyncSocket.h:170</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad99736e9c89e1cf75d27defb5476c0bf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">folly::AsyncSocket::zeroCopyEnabled_</a></div><div class="ttdeci">bool zeroCopyEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01275">AsyncSocket.h:1275</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a078418769fa327ad592f58e115f65fca"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a078418769fa327ad592f58e115f65fca">folly::AsyncSocket::zeroCopyReenableThreshold_</a></div><div class="ttdeci">size_t zeroCopyReenableThreshold_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01278">AsyncSocket.h:1278</a></div></div>
<div class="ttc" id="classvector_html"><div class="ttname"><a href="classvector.html">vector</a></div><div class="ttdef"><b>Definition:</b> <a href="Traits_8h_source.html#l00588">Traits.h:588</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback_html_a91d9e2db3f8bccdd158336bdb9e5af45"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#a91d9e2db3f8bccdd158336bdb9e5af45">folly::AsyncSocket::SendMsgParamsCallback::getFlags</a></div><div class="ttdeci">int getFlags(folly::WriteFlags flags, bool zeroCopyEnabled) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00156">AsyncSocket.h:156</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="gen_2test_2StringTest_8cpp_html_ac4ba865c2f8f6f90e3c64552279f3d21"><div class="ttname"><a href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a></div><div class="ttdeci">vector&lt; string &gt; vec</div><div class="ttdef"><b>Definition:</b> <a href="gen_2test_2StringTest_8cpp_source.html#l00035">StringTest.cpp:35</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback_html_abe03d9fdc7902dd216e9b954324d4c19"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html#abe03d9fdc7902dd216e9b954324d4c19">folly::AsyncSocket::SendMsgParamsCallback::getAncillaryDataSize</a></div><div class="ttdeci">virtual uint32_t getAncillaryDataSize(folly::WriteFlags) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00180">AsyncSocket.h:180</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1504d851c6bbff263684e03e8af092c9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1504d851c6bbff263684e03e8af092c9">folly::AsyncSocket::sendSocketMessage</a></div><div class="ttdeci">AsyncSocket::WriteResult sendSocketMessage(int fd, struct msghdr *msg, int msg_flags)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02321">AsyncSocket.cpp:2321</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1b0d2fa902cb3aac97142a58580bbd27"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1b0d2fa902cb3aac97142a58580bbd27">folly::AsyncSocket::appBytesWritten_</a></div><div class="ttdeci">size_t appBytesWritten_</div><div class="ttdoc">Num of bytes written to socket. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01254">AsyncSocket.h:1254</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7475e0e3f554b5b93eb35bfefb04f870"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::prepareReadBuffer </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a1b7ef248401bb56eb1494826e00d795b">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01798">1798</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a1015afbbb572583647171c87eeea1695">folly::AsyncReader::ReadCallback::getReadBuffer()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                                                              {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="comment">// no matter what, buffer should be preapared for non-ssl socket</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  CHECK(<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>);</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a1015afbbb572583647171c87eeea1695">getReadBuffer</a>(buf, buflen);</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncReader_1_1ReadCallback_html_a1015afbbb572583647171c87eeea1695"><div class="ttname"><a href="classfolly_1_1AsyncReader_1_1ReadCallback.html#a1015afbbb572583647171c87eeea1695">folly::AsyncReader::ReadCallback::getReadBuffer</a></div><div class="ttdeci">virtual void getReadBuffer(void **bufReturn, size_t *lenReturn)=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a09bb5f87e58789177a2a07e06a9b9a36"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::processZeroCopyMsg </td>
          <td>(</td>
          <td class="paramtype">const cmsghdr &amp;&#160;</td>
          <td class="paramname"><em>cmsg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00981">981</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">i</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00942">releaseZeroCopyBuf()</a>, <a class="el" href="NetOps_8h_source.html#l00047">SO_EE_CODE_ZEROCOPY_COPIED</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01275">zeroCopyEnabled_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                                        {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="preprocessor">#ifdef FOLLY_HAVE_MSG_ERRQUEUE</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span>sock_extended_err* serr =</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>struct sock_extended_err*<span class="keyword">&gt;</span>(CMSG_DATA(&amp;cmsg));</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> hi = serr-&gt;ee_data;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> lo = serr-&gt;ee_info;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">// disable zero copy if the buffer was actually copied</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordflow">if</span> ((serr-&gt;ee_code &amp; <a class="code" href="NetOps_8h.html#aee17481476b4676409856222a80bdaf8">SO_EE_CODE_ZEROCOPY_COPIED</a>) &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a>) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::processZeroCopyMsg(): setting &quot;</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;zeroCopyEnabled_ = false due to SO_EE_CODE_ZEROCOPY_COPIED &quot;</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;on &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = lo; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> &lt;= hi; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>++) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#abee5aa25fd7e7c37f7f1e2e0041d5dfb">releaseZeroCopyBuf</a>(<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  (void)cmsg;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div><div class="ttc" id="NetOps_8h_html_aee17481476b4676409856222a80bdaf8"><div class="ttname"><a href="NetOps_8h.html#aee17481476b4676409856222a80bdaf8">SO_EE_CODE_ZEROCOPY_COPIED</a></div><div class="ttdeci">#define SO_EE_CODE_ZEROCOPY_COPIED</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8h_source.html#l00047">NetOps.h:47</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_html_a7e98b8a17c0aad30ba64d47b74e2a6c1"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">gtest_output_test_golden_lin.txt:83</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad99736e9c89e1cf75d27defb5476c0bf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">folly::AsyncSocket::zeroCopyEnabled_</a></div><div class="ttdeci">bool zeroCopyEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01275">AsyncSocket.h:1275</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abee5aa25fd7e7c37f7f1e2e0041d5dfb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abee5aa25fd7e7c37f7f1e2e0041d5dfb">folly::AsyncSocket::releaseZeroCopyBuf</a></div><div class="ttdeci">void releaseZeroCopyBuf(uint32_t id)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00942">AsyncSocket.cpp:942</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57dc7d97876bd46c8ea6812765827d68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::processZeroCopyWriteInProgress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tries to process the msg error queue And returns true if there are no more zero copy writes in progress </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01870">1870</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01223">idZeroCopyBufPtrMap_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00810">setEvbChangedCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                                                          {</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.empty()) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a085ae8fe5c02376a95228a2543534b0a">handleErrMessages</a>();</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.empty();</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ae7c8deddc31b2526738304413c014f9a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">folly::AsyncSocket::idZeroCopyBufPtrMap_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, folly::IOBuf * &gt; idZeroCopyBufPtrMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01223">AsyncSocket.h:1223</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a085ae8fe5c02376a95228a2543534b0a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a085ae8fe5c02376a95228a2543534b0a">folly::AsyncSocket::handleErrMessages</a></div><div class="ttdeci">virtual size_t handleErrMessages() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01804">AsyncSocket.cpp:1804</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1d8b1194b502e2ceef816bc6ba79e490"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::readable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine if the transport is readable or not.</p>
<dl class="section return"><dt>Returns</dt><dd>true iff the transport is readable, false otherwise. </dd></dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#aba4bb7b72923875aad58482c6bbf1303">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01443">1443</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="NetOps_8cpp_source.html#l00141">folly::netops::poll()</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, <a class="el" href="MockAsyncSSLSocket_8h_source.html#l00041">folly::test::MockAsyncSSLSocket::connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                                 {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> == -1) {</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keyword">struct </span>pollfd fds[1];</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  fds[0].fd = <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  fds[0].events = POLLIN;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  fds[0].revents = 0;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="namespacefolly_1_1netops.html#a96864641e16a4614f4b5390c94c8f330">poll</a>(fds, 1, 0);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">return</span> rc == 1;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a96864641e16a4614f4b5390c94c8f330"><div class="ttname"><a href="namespacefolly_1_1netops.html#a96864641e16a4614f4b5390c94c8f330">folly::netops::poll</a></div><div class="ttdeci">int poll(PollDescriptor fds[], nfds_t nfds, int timeout)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00141">NetOps.cpp:141</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad6393490c14c3d5510d1cc9bd1b6d985"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::registerForConnectEvents </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00630">630</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="EventHandler_8h_source.html#l00042">folly::EventHandler::NONE</a>, <a class="el" href="EventHandler_8h_source.html#l00100">folly::EventHandler::registerHandler()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, and <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00600">socketConnect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                           {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// Register for write events, so we&#39;ll</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// be notified when the connection finishes/fails.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// Note that we don&#39;t register for a persistent event here.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> == <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> = <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#a202afaf81f9a36978938fd39e8e2fb87">registerHandler</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a>)) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to register AsyncSocket connect handler&quot;</span>));</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">folly::EventHandler::NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00042">EventHandler.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a202afaf81f9a36978938fd39e8e2fb87"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a202afaf81f9a36978938fd39e8e2fb87">folly::EventHandler::registerHandler</a></div><div class="ttdeci">bool registerHandler(uint16_t events)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00100">EventHandler.h:100</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abee5aa25fd7e7c37f7f1e2e0041d5dfb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::releaseZeroCopyBuf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00942">942</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01224">idZeroCopyBufInfoMap_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01223">idZeroCopyBufPtrMap_</a>, and <a class="el" href="StaticSingletonManager_8cpp_source.html#l00038">ptr</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00981">processZeroCopyMsg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                                                {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keyword">auto</span> iter = <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.find(<span class="keywordtype">id</span>);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  CHECK(iter != <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.end());</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keyword">auto</span> <a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a> = iter-&gt;second;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keyword">auto</span> iter1 = <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>.find(ptr);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  CHECK(iter1 != <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>.end());</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (0 == --iter1-&gt;second.count_) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>.erase(iter1);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">idZeroCopyBufPtrMap_</a>.erase(iter);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;}</div><div class="ttc" id="StaticSingletonManager_8cpp_html_a53a30bc00154d79fa155f60e2dfabf5f"><div class="ttname"><a href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="StaticSingletonManager_8cpp_source.html#l00038">StaticSingletonManager.cpp:38</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ae7c8deddc31b2526738304413c014f9a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae7c8deddc31b2526738304413c014f9a">folly::AsyncSocket::idZeroCopyBufPtrMap_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, folly::IOBuf * &gt; idZeroCopyBufPtrMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01223">AsyncSocket.h:1223</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aad93a27de08b4923ac10d47852b8b91a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">folly::AsyncSocket::idZeroCopyBufInfoMap_</a></div><div class="ttdeci">std::unordered_map&lt; folly::IOBuf *, IOBufInfo &gt; idZeroCopyBufInfoMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01224">AsyncSocket.h:1224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8306e8803b9f0b30a8b06306857641e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::scheduleConnectTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#ad9b31795d01472ca64972f18676ba67e">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00617">617</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01263">connectTimeout_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00080">folly::AsyncTimeout::scheduleTimeout()</a>, <a class="el" href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc">folly::detail::timeout</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01306">folly::AsyncSSLSocket::scheduleConnectTimeout()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00600">socketConnect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                         {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// Connection in progress.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc">timeout</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">connectTimeout_</a>.count();</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">if</span> (timeout &gt; 0) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// Start a timer in case the connection takes too long.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">scheduleTimeout</a>(<a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>(timeout))) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to schedule AsyncSocket connect timeout&quot;</span>));</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1detail_html_a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc"><div class="ttname"><a href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc">folly::detail::spin_result::timeout</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a480eeb96732defcff38a160fcd75bd5a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">folly::AsyncSocket::connectTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds connectTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01263">AsyncSocket.h:1263</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_acb0b7716adfa30f6b0fd5261094d2228"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">folly::AsyncTimeout::scheduleTimeout</a></div><div class="ttdeci">bool scheduleTimeout(uint32_t milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00080">AsyncTimeout.cpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a924fd12e56e790708f85ae1c639eb5f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::scheduleImmediateRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Schedule checkForImmediateRead to be executed in the next loop iteration. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01031">1031</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01489">good()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01243">immediateReadHandler_</a>, and <a class="el" href="EventBase_8cpp_source.html#l00520">folly::EventBase::runInLoop()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>.</p>
<div class="fragment"><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                                        {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a65f64411d21717a984cf6dbdc7d1e391">good</a>()) {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a657bdf25f8e72ac620547bf3d064caed">runInLoop</a>(&amp;<a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6afc3c01f58b7d7b06af81267da854fb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">folly::AsyncSocket::immediateReadHandler_</a></div><div class="ttdeci">ImmediateReadCB immediateReadHandler_</div><div class="ttdoc">LoopCallback for checking read. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01243">AsyncSocket.h:1243</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a657bdf25f8e72ac620547bf3d064caed"><div class="ttname"><a href="classfolly_1_1EventBase.html#a657bdf25f8e72ac620547bf3d064caed">folly::EventBase::runInLoop</a></div><div class="ttdeci">void runInLoop(LoopCallback *callback, bool thisIteration=false)</div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8cpp_source.html#l00520">EventBase.cpp:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a65f64411d21717a984cf6dbdc7d1e391"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a65f64411d21717a984cf6dbdc7d1e391">folly::AsyncSocket::good</a></div><div class="ttdeci">bool good() const override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01489">AsyncSocket.cpp:1489</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad3ff183b8fbd66a6096ef89ba4b31885"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::scheduleInitialReadWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Schedule handleInitalReadWrite to run in the next iteration. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01040">1040</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="GlobalThreadPoolList_8cpp_source.html#l00061">addr</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01558">cacheLocalAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01564">cachePeerAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02147">checkForImmediateRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02569">fail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02661">failAllWrites()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02642">failWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01489">good()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02542">invokeAllErrors()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02730">invokeConnectErr()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02739">invokeConnectSuccess()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00967">isZeroCopyMsg()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00905">isZeroCopyRequest()</a>, <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>, <a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">folly::NONE</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01764">performRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01798">prepareReadBuffer()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00981">processZeroCopyMsg()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00630">registerForConnectEvents()</a>, <a class="el" href="EventBase_8cpp_source.html#l00520">folly::EventBase::runInLoop()</a>, <a class="el" href="StringKeyedBenchmark_8cpp_source.html#l00048">s</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00617">scheduleConnectTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00600">socketConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, <a class="el" href="Conv_8cpp_source.html#l00212">string</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02316">tfoSendMsg()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01045">writeChainImpl()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>.</p>
<div class="fragment"><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                                           {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a65f64411d21717a984cf6dbdc7d1e391">good</a>()) {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a657bdf25f8e72ac620547bf3d064caed">runInLoop</a>([<span class="keyword">this</span>, dg] {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a65f64411d21717a984cf6dbdc7d1e391">good</a>()) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a3b16428961251692bfac25ceab9b83bc">handleInitialReadWrite</a>();</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      });</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a657bdf25f8e72ac620547bf3d064caed"><div class="ttname"><a href="classfolly_1_1EventBase.html#a657bdf25f8e72ac620547bf3d064caed">folly::EventBase::runInLoop</a></div><div class="ttdeci">void runInLoop(LoopCallback *callback, bool thisIteration=false)</div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8cpp_source.html#l00520">EventBase.cpp:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a65f64411d21717a984cf6dbdc7d1e391"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a65f64411d21717a984cf6dbdc7d1e391">folly::AsyncSocket::good</a></div><div class="ttdeci">bool good() const override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01489">AsyncSocket.cpp:1489</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3b16428961251692bfac25ceab9b83bc"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3b16428961251692bfac25ceab9b83bc">folly::AsyncSocket::handleInitialReadWrite</a></div><div class="ttdeci">virtual void handleInitialReadWrite() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02169">AsyncSocket.cpp:2169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1504d851c6bbff263684e03e8af092c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1AsyncSocket_1_1WriteResult.html">AsyncSocket::WriteResult</a> folly::AsyncSocket::sendSocketMessage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct msghdr *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msg_flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends the message over the socket using sendmsg</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Message to send </td></tr>
    <tr><td class="paramname">msg_flags</td><td>Flags to pass to sendmsg </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02321">2321</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="GlobalThreadPoolList_8cpp_source.html#l00061">addr</a>, <a class="el" href="AsyncSocket_8h_source.html#l01230">addr_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="SocketAddress_8h_source.html#l00393">folly::SocketAddress::getAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00630">registerForConnectEvents()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00617">scheduleConnectTimeout()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="NetOps_8cpp_source.html#l00328">folly::netops::sendmsg()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00600">socketConnect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01270">tfoFinished_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02316">tfoSendMsg()</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00029">folly::AsyncSocketException::UNKNOWN</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00948">WRITE_ERROR</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                                                                        {</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  ssize_t totalWritten = 0;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>) {</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    sockaddr_storage <a class="code" href="GlobalThreadPoolList_8cpp.html#ab94a49ce2d97d58d5e22352a39c2345c">addr</a>;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keyword">auto</span> len = <a class="code" href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">addr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a18e296d1cb96598fcbe7ad71af0ccd43">getAddress</a>(&amp;addr);</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    msg-&gt;msg_name = &amp;<a class="code" href="GlobalThreadPoolList_8cpp.html#ab94a49ce2d97d58d5e22352a39c2345c">addr</a>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    msg-&gt;msg_namelen = len;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    totalWritten = <a class="code" href="classfolly_1_1AsyncSocket.html#a8470776d92fd540977c20093c2ebb425">tfoSendMsg</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, msg, msg_flags);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordflow">if</span> (totalWritten &gt;= 0) {</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#acf23078ee5e1b8f6f27820d418d2b8e0">tfoFinished_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <span class="comment">// We schedule this asynchrously so that we don&#39;t end up</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="comment">// invoking initial read or write while a write is in progress.</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#ad3ff183b8fbd66a6096ef89ba4b31885">scheduleInitialReadWrite</a>();</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EINPROGRESS) {</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      VLOG(4) &lt;&lt; <span class="stringliteral">&quot;TFO falling back to connecting&quot;</span>;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="comment">// A normal sendmsg doesn&#39;t return EINPROGRESS, however</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      <span class="comment">// TFO might fallback to connecting if there is no</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <span class="comment">// cookie.</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="keywordflow">try</span> {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a8306e8803b9f0b30a8b06306857641e1">scheduleConnectTimeout</a>();</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#ad6393490c14c3d5510d1cc9bd1b6d985">registerForConnectEvents</a>();</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      } <span class="keywordflow">catch</span> (<span class="keyword">const</span> AsyncSocketException&amp; ex) {</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <span class="keywordflow">return</span> WriteResult(</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab">WRITE_ERROR</a>, std::make_unique&lt;AsyncSocketException&gt;(ex));</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      }</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <span class="comment">// Let&#39;s fake it that no bytes were written and return an errno.</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      errno = EAGAIN;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      totalWritten = -1;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EOPNOTSUPP) {</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="comment">// Try falling back to connecting.</span></div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      VLOG(4) &lt;&lt; <span class="stringliteral">&quot;TFO not supported&quot;</span>;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <span class="keywordflow">try</span> {</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        <span class="keywordtype">int</span> ret = <a class="code" href="classfolly_1_1AsyncSocket.html#a55b97da40cc72b3468e5dcc95aeab723">socketConnect</a>((<span class="keyword">const</span> sockaddr*)&amp;addr, len);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        <span class="keywordflow">if</span> (ret == 0) {</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;          <span class="comment">// connect succeeded immediately</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;          <span class="comment">// Treat this like no data was written.</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#ad3ff183b8fbd66a6096ef89ba4b31885">scheduleInitialReadWrite</a>();</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        }</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <span class="comment">// If there was no exception during connections,</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        <span class="comment">// we would return that no bytes were written.</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        errno = EAGAIN;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        totalWritten = -1;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      } <span class="keywordflow">catch</span> (<span class="keyword">const</span> AsyncSocketException&amp; ex) {</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="keywordflow">return</span> WriteResult(</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab">WRITE_ERROR</a>, std::make_unique&lt;AsyncSocketException&gt;(ex));</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      }</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EAGAIN) {</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      <span class="comment">// Normally sendmsg would indicate that the write would block.</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="comment">// However in the fast open case, it would indicate that sendmsg</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <span class="comment">// fell back to a connect. This is a return code from connect()</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="comment">// instead, and is an error condition indicating no fds available.</span></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <span class="keywordflow">return</span> WriteResult(</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab">WRITE_ERROR</a>,</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;          std::make_unique&lt;AsyncSocketException&gt;(</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;              <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba4aca90d49c66cab95d0212060f64e7c1">AsyncSocketException::UNKNOWN</a>, <span class="stringliteral">&quot;No more free local ports&quot;</span>));</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    }</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    totalWritten = <a class="code" href="namespacefolly_1_1netops.html#a1a77b634158e087042857cbcb04ee7c2">::sendmsg</a>(fd, msg, msg_flags);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  }</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="keywordflow">return</span> WriteResult(totalWritten);</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a8470776d92fd540977c20093c2ebb425"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8470776d92fd540977c20093c2ebb425">folly::AsyncSocket::tfoSendMsg</a></div><div class="ttdeci">virtual ssize_t tfoSendMsg(int fd, struct msghdr *msg, int msg_flags)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02316">AsyncSocket.cpp:2316</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a1a77b634158e087042857cbcb04ee7c2"><div class="ttname"><a href="namespacefolly_1_1netops.html#a1a77b634158e087042857cbcb04ee7c2">folly::netops::sendmsg</a></div><div class="ttdeci">ssize_t sendmsg(NetworkSocket socket, const msghdr *message, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00328">NetOps.cpp:328</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acf23078ee5e1b8f6f27820d418d2b8e0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acf23078ee5e1b8f6f27820d418d2b8e0">folly::AsyncSocket::tfoFinished_</a></div><div class="ttdeci">bool tfoFinished_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01270">AsyncSocket.h:1270</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3e1b028124db5daf901e095f21a3f053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3e1b028124db5daf901e095f21a3f053">folly::AsyncSocket::addr_</a></div><div class="ttdeci">folly::SocketAddress addr_</div><div class="ttdoc">The address we tried to connect to. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01230">AsyncSocket.h:1230</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad3ff183b8fbd66a6096ef89ba4b31885"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad3ff183b8fbd66a6096ef89ba4b31885">folly::AsyncSocket::scheduleInitialReadWrite</a></div><div class="ttdeci">void scheduleInitialReadWrite() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01040">AsyncSocket.h:1040</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba4aca90d49c66cab95d0212060f64e7c1"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba4aca90d49c66cab95d0212060f64e7c1">folly::AsyncSocketException::UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00029">AsyncSocketException.h:29</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad6393490c14c3d5510d1cc9bd1b6d985"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad6393490c14c3d5510d1cc9bd1b6d985">folly::AsyncSocket::registerForConnectEvents</a></div><div class="ttdeci">void registerForConnectEvents()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00630">AsyncSocket.cpp:630</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a75264044454c0e503366399eb234f501affbcd7ec1267ac26906f6b3e0b78fbab">folly::AsyncSocket::WRITE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00948">AsyncSocket.h:948</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a18e296d1cb96598fcbe7ad71af0ccd43"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a18e296d1cb96598fcbe7ad71af0ccd43">folly::SocketAddress::getAddress</a></div><div class="ttdeci">socklen_t getAddress(sockaddr_storage *addr) const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00393">SocketAddress.h:393</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8306e8803b9f0b30a8b06306857641e1"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8306e8803b9f0b30a8b06306857641e1">folly::AsyncSocket::scheduleConnectTimeout</a></div><div class="ttdeci">virtual void scheduleConnectTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00617">AsyncSocket.cpp:617</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a55b97da40cc72b3468e5dcc95aeab723"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a55b97da40cc72b3468e5dcc95aeab723">folly::AsyncSocket::socketConnect</a></div><div class="ttdeci">int socketConnect(const struct sockaddr *addr, socklen_t len)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00600">AsyncSocket.cpp:600</a></div></div>
<div class="ttc" id="GlobalThreadPoolList_8cpp_html_ab94a49ce2d97d58d5e22352a39c2345c"><div class="ttname"><a href="GlobalThreadPoolList_8cpp.html#ab94a49ce2d97d58d5e22352a39c2345c">addr</a></div><div class="ttdeci">ThreadPoolListHook * addr</div><div class="ttdef"><b>Definition:</b> <a href="GlobalThreadPoolList_8cpp_source.html#l00061">GlobalThreadPoolList.cpp:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62461e998cb7ce43e77ec44ed7e6bb69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setBufferCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html">BufferCallback</a> *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02829">2829</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01267">bufferCallback_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02435">proxygen::HTTPSession::checkForShutdown()</a>, and <a class="el" href="HTTPUpstreamSession_8h_source.html#l00034">proxygen::HTTPUpstreamSession::HTTPUpstreamSession()</a>.</p>
<div class="fragment"><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;                                                      {</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a> = cb;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a021fe473fcb0935ed3e52926f601d6c7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">folly::AsyncSocket::bufferCallback_</a></div><div class="ttdeci">BufferCallback * bufferCallback_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01267">AsyncSocket.h:1267</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac8d9f7f1f3860742279ace525e342b2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setCloseOnExec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the FD_CLOEXEC flag so that the socket will be closed if the program later forks and execs. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00420">420</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00312">AsyncSocket()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                 {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">int</span> rv = fcntl(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, F_SETFD, FD_CLOEXEC);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">if</span> (rv != 0) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to set close-on-exec flag&quot;</span>),</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        errnoCopy);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a75dc1609a14cb481978b1ffd84abe264"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::setCongestionFlavor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>cname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01608">1608</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="AsyncSocket_8cpp.html#aa70372e25d5268d1ad93957e6cbab550">TCP_CONGESTION</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                                                           {</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="preprocessor">#ifndef TCP_CONGESTION</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="preprocessor">#define TCP_CONGESTION 13</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setCongestionFlavor() called on non-open &quot;</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;socket &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;(state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>,</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;          IPPROTO_TCP,</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;          <a class="code" href="AsyncSocket_8cpp.html#aa70372e25d5268d1ad93957e6cbab550">TCP_CONGESTION</a>,</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;          cname.c_str(),</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;          socklen_t(cname.length() + 1)) != 0) {</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordtype">int</span> errnoCopy = errno;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;failed to update TCP_CONGESTION option on AsyncSocket &quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(errnoCopy);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">return</span> errnoCopy;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="AsyncSocket_8cpp_html_aa70372e25d5268d1ad93957e6cbab550"><div class="ttname"><a href="AsyncSocket_8cpp.html#aa70372e25d5268d1ad93957e6cbab550">TCP_CONGESTION</a></div><div class="ttdeci">#define TCP_CONGESTION</div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ea42e53c7f830758dd475a4fbc61eaa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setEorTracking </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>track</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a4b433bb271ad7d56b09150337ceb4366">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a1c7a4438e7ccbdbd82f070f214c73872">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00563">563</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01274">trackEor_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00403">folly::AsyncSSLSocket::setEorTracking()</a>.</p>
<div class="fragment"><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                           {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a26ff0294ace9883cce16a3cc414c79eb">trackEor_</a> = track;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a26ff0294ace9883cce16a3cc414c79eb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a26ff0294ace9883cce16a3cc414c79eb">folly::AsyncSocket::trackEor_</a></div><div class="ttdeci">bool trackEor_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01274">AsyncSocket.h:1274</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57abf5683cd77e0e039da17f428e581f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setErrMessageCB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set a pointer to <a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> implementation which will be receiving notifications for messages posted to the error queue associated with the socket. <a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a> is implemented only for platforms with per-socket error message queus support (<a class="el" href="namespacefolly_1_1netops.html#acab8f8655eda889b3c8175393102d2ca">recvmsg()</a> system call must ) </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00691">691</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01558">cacheLocalAddress()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01246">errMessageCallback_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="SocketAddress_8h_source.html#l00407">folly::SocketAddress::getFamily()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01231">localAddr_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">UNINIT</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                                                              {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  VLOG(6) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setErrMessageCB() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, callback=&quot;</span> &lt;&lt; callback &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="comment">// In the latest stable kernel 4.14.3 as of 2017-12-04, unix domain</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// socket does not support MSG_ERRQUEUE. So recvmsg(MSG_ERRQUEUE)</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// will read application data from unix doamin socket as error</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="comment">// message, which breaks the message flow in application.  Feel free</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="comment">// to remove the next code block if MSG_ERRQUEUE is added for unix</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// domain socket in the future.</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (callback != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a7d0df7dc3ac8600329165a8fc81b7ba0">cacheLocalAddress</a>();</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">localAddr_</a>.<a class="code" href="classfolly_1_1SocketAddress.html#a7f3d2de895c6537c3c06c61089a4ce78">getFamily</a>() == AF_UNIX) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Failed to set ErrMessageCallback=&quot;</span> &lt;&lt; callback</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; for Unix Doamin Socket where MSG_ERRQUEUE is unsupported,&quot;</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// Short circuit if callback is the same as the existing errMessageCallback_.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">if</span> (callback == <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a>) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacefolly.html#a236df91ae3d0d023dd67c6923d3cd47b">msgErrQueueSupported</a>) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// Per-socket error message queue is not supported on this platform.</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">if</span> (callback == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// We should be able to reset the callback regardless of the</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// socket state. It&#39;s important to have a reliable callback</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">// cancellation mechanism.</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a> = callback;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">switch</span> ((<a class="code" href="AsyncSocketTest_8h.html#a162174eadd5ba027f937df3c312aade9">StateEnum</a>)state_) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>:</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>:</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>: {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">errMessageCallback_</a> = callback;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>:</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>:</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="comment">// We should never reach here.  SHUT_READ should always be set</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <span class="comment">// if we are in STATE_CLOSED or STATE_ERROR.</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">StateEnum::UNINIT</a>:</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="comment">// We do not allow setReadCallback() to be called before we start</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="comment">// connecting.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">// We don&#39;t put a default case in the switch statement, so that the compiler</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">// will warn us to update the switch statement if a new state is added.</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a7d0df7dc3ac8600329165a8fc81b7ba0"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a7d0df7dc3ac8600329165a8fc81b7ba0">folly::AsyncSocket::cacheLocalAddress</a></div><div class="ttdeci">void cacheLocalAddress() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01558">AsyncSocket.cpp:1558</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ab9a3ba327f65d68c592f0a27cc87997b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ab9a3ba327f65d68c592f0a27cc87997b">folly::AsyncSocket::localAddr_</a></div><div class="ttdeci">folly::SocketAddress localAddr_</div><div class="ttdoc">The address we are connecting from. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01231">AsyncSocket.h:1231</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5838613ef655ef0ad26ac6a27cfef4f3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">folly::AsyncSocket::invalidState</a></div><div class="ttdeci">void invalidState(ConnectCallback *callback)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02676">AsyncSocket.cpp:2676</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a7f3d2de895c6537c3c06c61089a4ce78"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a7f3d2de895c6537c3c06c61089a4ce78">folly::SocketAddress::getFamily</a></div><div class="ttdeci">sa_family_t getFamily() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00407">SocketAddress.h:407</a></div></div>
<div class="ttc" id="AsyncSocketTest_8h_html_a162174eadd5ba027f937df3c312aade9"><div class="ttname"><a href="AsyncSocketTest_8h.html#a162174eadd5ba027f937df3c312aade9">StateEnum</a></div><div class="ttdeci">StateEnum</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00024">AsyncSocketTest.h:24</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8cd2284b5c3231a222d1e437bf653a92"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8cd2284b5c3231a222d1e437bf653a92">folly::AsyncSocket::errMessageCallback_</a></div><div class="ttdeci">ErrMessageCallback * errMessageCallback_</div><div class="ttdoc">TimestampCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01246">AsyncSocket.h:1246</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">folly::AsyncSocket::StateEnum::UNINIT</a></div></div>
<div class="ttc" id="namespacefolly_html_a236df91ae3d0d023dd67c6923d3cd47b"><div class="ttname"><a href="namespacefolly.html#a236df91ae3d0d023dd67c6923d3cd47b">folly::msgErrQueueSupported</a></div><div class="ttdeci">static constexpr bool msgErrQueueSupported</div><div class="ttdef"><b>Definition:</b> <a href="AsyncServerSocket_8cpp_source.html#l00050">AsyncServerSocket.cpp:50</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af626583c1f7763bc4310a47ea196e11c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setEvbChangedCallback </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1AsyncSocket_1_1EvbChangeCallback.html">EvbChangeCallback</a> &gt;&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00810">810</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01544">cacheAddresses()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01265">evbChangeCb_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01570">isZeroCopyWriteInProgress()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01870">processZeroCopyWriteInProgress()</a>.</p>
<div class="fragment"><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                                                                  {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">evbChangeCb_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cb);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a4a7a199fbc05606dc14ec10938cc917e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a4a7a199fbc05606dc14ec10938cc917e">folly::AsyncSocket::evbChangeCb_</a></div><div class="ttdeci">std::unique_ptr&lt; EvbChangeCallback &gt; evbChangeCb_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01265">AsyncSocket.h:1265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a754f77101cf9eb0e2cd8c3413c5eeeeb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setMaxReadsPerEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>maxReads</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the maximum number of reads to execute from the underlying socket each time the <a class="el" href="classfolly_1_1EventBase.html">EventBase</a> detects that new ingress data is available. The default is unlimited, but callers can use this method to limit the amount of data read from the socket per event loop iteration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxReads</td><td>Maximum number of reads per data-available event; a value of zero means unlimited. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00451">451</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01234">maxReadsPerEvent_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00365">wangle::Acceptor::connectionReady()</a>, and <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01542">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                              {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">maxReadsPerEvent_</a> = maxReads;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a13e6267a58606637f16040dc92a906d3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a13e6267a58606637f16040dc92a906d3">folly::AsyncSocket::maxReadsPerEvent_</a></div><div class="ttdeci">uint16_t maxReadsPerEvent_</div><div class="ttdoc">Max reads per event loop iteration. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01234">AsyncSocket.h:1234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4f4196e93e89bf6e7bcff383a40f315e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::setNoDelay </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>noDelay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Force writes to be transmitted immediately.</p>
<p>This controls the TCP_NODELAY socket option. When enabled, TCP segments are sent as soon as possible, even if it is not a full frame of data. When disabled, the data may be buffered briefly to try and wait for a full frame of data.</p>
<p>By default, TCP_NODELAY is enabled for <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> objects.</p>
<p>This method will fail if the socket is not currently open.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if the TCP_NODELAY flag was successfully updated, or a non-zero errno value on error. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01589">1589</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                                        {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setNoDelay() called on non-open socket &quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacefolly.html#af765fccfa9242184196b4906286ada49">value</a> = noDelay ? 1 : 0;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, IPPROTO_TCP, TCP_NODELAY, &amp;value, <span class="keyword">sizeof</span>(value)) != 0) {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordtype">int</span> errnoCopy = errno;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;failed to update TCP_NODELAY option on AsyncSocket &quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; (fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(errnoCopy);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">return</span> errnoCopy;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  }</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="namespacefolly_html_af765fccfa9242184196b4906286ada49"><div class="ttname"><a href="namespacefolly.html#af765fccfa9242184196b4906286ada49">folly::value</a></div><div class="ttdeci">uint64_t value(const typename LockFreeRingBuffer&lt; T, Atom &gt;::Cursor &amp;rbcursor)</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBufferTest_8cpp_source.html#l00096">LockFreeRingBufferTest.cpp:96</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06bfd71fb07c138ef3f7f5280f2e27b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setPeerCertificate </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> &gt;&#160;</td>
          <td class="paramname"><em>cert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00833">833</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01282">peerCertData_</a>.</p>
<div class="fragment"><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                                                           {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a3907234f141981d565e4b4b0fec76827">peerCertData_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cert);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a3907234f141981d565e4b4b0fec76827"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3907234f141981d565e4b4b0fec76827">folly::AsyncSocket::peerCertData_</a></div><div class="ttdeci">std::unique_ptr&lt; const AsyncTransportCertificate &gt; peerCertData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01282">AsyncSocket.h:1282</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a858f988a6df8db2e7e6f13404a21ade1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void folly::AsyncSocket::setPreReceivedData </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> &gt;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set pre-received data, to be returned to read callback before any data from the socket. </p>

<p>Reimplemented in <a class="el" href="classfolly_1_1test_1_1MockAsyncSocket.html#a07a426ba94cfed11729df1703ba5f5e4">folly::test::MockAsyncSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00770">770</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01258">preReceivedData_</a>.</p>

<p>Referenced by <a class="el" href="SocketPeeker_8h_source.html#l00082">wangle::SocketPeeker::readDataAvailable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                                                             {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a>) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a>-&gt;prependChain(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(data));</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">preReceivedData_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(data);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6344043cf39ccd7cbb4f200d5f983fcd"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6344043cf39ccd7cbb4f200d5f983fcd">folly::AsyncSocket::preReceivedData_</a></div><div class="ttdeci">std::unique_ptr&lt; IOBuf &gt; preReceivedData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01258">AsyncSocket.h:1258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac7afca6080b9c403467dde9df3e12067"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::setQuickAck </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>quickack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01635">1635</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                                          {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  (void)quickack;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setQuickAck() called on non-open socket &quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  }</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="preprocessor">#ifdef TCP_QUICKACK // Linux-only</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacefolly.html#af765fccfa9242184196b4906286ada49">value</a> = quickack ? 1 : 0;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, IPPROTO_TCP, TCP_QUICKACK, &amp;value, <span class="keyword">sizeof</span>(value)) != 0) {</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordtype">int</span> errnoCopy = errno;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;failed to update TCP_QUICKACK option on AsyncSocket&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(errnoCopy);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keywordflow">return</span> errnoCopy;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">return</span> ENOSYS;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="namespacefolly_html_af765fccfa9242184196b4906286ada49"><div class="ttname"><a href="namespacefolly.html#af765fccfa9242184196b4906286ada49">folly::value</a></div><div class="ttdeci">uint64_t value(const typename LockFreeRingBuffer&lt; T, Atom &gt;::Cursor &amp;rbcursor)</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBufferTest_8cpp_source.html#l00096">LockFreeRingBufferTest.cpp:96</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1073cae399d39afd963bd75eeacea579"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setReadCB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfolly_1_1AsyncTransportWrapper.html#aadcfc3fae2e9815d9424ba9ee8a7c6a1">folly::AsyncTransportWrapper</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a69e50958dce83286d9743522be38f5d4">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00768">768</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00155">folly::EventBase::LoopCallback::cancelLoopCallback()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02147">checkForImmediateRead()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01243">immediateReadHandler_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="EventBase_8h_source.html#l00160">folly::EventBase::LoopCallback::isLoopCallbackScheduled()</a>, <a class="el" href="EventHandler_8h_source.html#l00043">folly::EventHandler::READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l01249">readCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">UNINIT</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>, <a class="el" href="SocketPeeker_8h_source.html#l00082">wangle::SocketPeeker::readDataAvailable()</a>, <a class="el" href="SocketPeeker_8h_source.html#l00071">wangle::SocketPeeker::readErr()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01328">folly::AsyncSSLSocket::setReadCB()</a>, <a class="el" href="SocketPeeker_8h_source.html#l00046">wangle::SocketPeeker::start()</a>, <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01542">TEST()</a>, <a class="el" href="AsyncSocketTest2_8cpp_source.html#l00858">testConnectOptWrite()</a>, <a class="el" href="AsyncSocketTest2_8cpp_source.html#l00844">tmpDisableReads()</a>, and <a class="el" href="SocketPeeker_8h_source.html#l00040">wangle::SocketPeeker::~SocketPeeker()</a>.</p>
<div class="fragment"><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                                                  {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  VLOG(6) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setReadCallback() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, callback=&quot;</span> &lt;&lt; callback &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="comment">// Short circuit if callback is the same as the existing readCallback_.</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// Note that this is needed for proper functioning during some cleanup cases.</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// During cleanup we allow setReadCallback(nullptr) to be called even if the</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// read callback is already unset and we have been detached from an event</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// base.  This check prevents us from asserting</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// eventBase_-&gt;isInEventBaseThread() when eventBase_ is nullptr.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">if</span> (callback == <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">/* We are removing a read callback */</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">if</span> (callback == <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>.<a class="code" href="classfolly_1_1EventBase_1_1LoopCallback.html#aed098dba0a92a874bb35e40170b47a97">isLoopCallbackScheduled</a>()) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>.<a class="code" href="classfolly_1_1EventBase_1_1LoopCallback.html#a2acd9352956b309677572284f5666d31">cancelLoopCallback</a>();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a>) {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="comment">// Reads have already been shut down on this socket.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="comment">// Allow setReadCallback(nullptr) to be called in this case, but don&#39;t</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// allow a new callback to be set.</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="comment">// For example, setReadCallback(nullptr) can happen after an error if we</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">// invoke some other error callback before invoking readError().  The other</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">// error callback that is invoked first may go ahead and clear the read</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="comment">// callback before we get a chance to invoke readError().</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">if</span> (callback != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">EventHandler::READ</a>) == 0);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">switch</span> ((<a class="code" href="AsyncSocketTest_8h.html#a162174eadd5ba027f937df3c312aade9">StateEnum</a>)state_) {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>:</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>:</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <span class="comment">// For convenience, we allow the read callback to be set while we are</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="comment">// still connecting.  We just store the callback for now.  Once the</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="comment">// connection completes we&#39;ll register for read events.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = callback;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>: {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a> = callback;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> oldFlags = <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>) {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> |= <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">EventHandler::READ</a>;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp;= ~EventHandler::READ;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="comment">// Update our registration if our flags have changed</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> != oldFlags) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment">// We intentionally ignore the return value here.</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="comment">// updateEventRegistration() will move us into the error state if it</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="comment">// fails, and we don&#39;t need to do anything else here afterwards.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        (void)<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>();</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">readCallback_</a>) {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a5b3900bbfbc3b3df56139455812b1e20">checkForImmediateRead</a>();</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>:</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>:</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="comment">// We should never reach here.  SHUT_READ should always be set</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="comment">// if we are in STATE_CLOSED or STATE_ERROR.</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">StateEnum::UNINIT</a>:</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="comment">// We do not allow setReadCallback() to be called before we start</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="comment">// connecting.</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// We don&#39;t put a default case in the switch statement, so that the compiler</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">// will warn us to update the switch statement if a new state is added.</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_1_1LoopCallback_html_aed098dba0a92a874bb35e40170b47a97"><div class="ttname"><a href="classfolly_1_1EventBase_1_1LoopCallback.html#aed098dba0a92a874bb35e40170b47a97">folly::EventBase::LoopCallback::isLoopCallbackScheduled</a></div><div class="ttdeci">bool isLoopCallbackScheduled() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00160">EventBase.h:160</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6afc3c01f58b7d7b06af81267da854fb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">folly::AsyncSocket::immediateReadHandler_</a></div><div class="ttdeci">ImmediateReadCB immediateReadHandler_</div><div class="ttdoc">LoopCallback for checking read. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01243">AsyncSocket.h:1243</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5838613ef655ef0ad26ac6a27cfef4f3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">folly::AsyncSocket::invalidState</a></div><div class="ttdeci">void invalidState(ConnectCallback *callback)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02676">AsyncSocket.cpp:2676</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_1_1LoopCallback_html_a2acd9352956b309677572284f5666d31"><div class="ttname"><a href="classfolly_1_1EventBase_1_1LoopCallback.html#a2acd9352956b309677572284f5666d31">folly::EventBase::LoopCallback::cancelLoopCallback</a></div><div class="ttdeci">void cancelLoopCallback()</div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00155">EventBase.h:155</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="AsyncSocketTest_8h_html_a162174eadd5ba027f937df3c312aade9"><div class="ttname"><a href="AsyncSocketTest_8h.html#a162174eadd5ba027f937df3c312aade9">StateEnum</a></div><div class="ttdeci">StateEnum</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00024">AsyncSocketTest.h:24</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">folly::AsyncSocket::StateEnum::UNINIT</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a906f90d8df2c070c588c5a9d82bb4044"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a906f90d8df2c070c588c5a9d82bb4044">folly::AsyncSocket::readCallback_</a></div><div class="ttdeci">ReadCallback * readCallback_</div><div class="ttdoc">ReadCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01249">AsyncSocket.h:1249</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5b3900bbfbc3b3df56139455812b1e20"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5b3900bbfbc3b3df56139455812b1e20">folly::AsyncSocket::checkForImmediateRead</a></div><div class="ttdeci">virtual void checkForImmediateRead() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02147">AsyncSocket.cpp:2147</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca7b6303958f6418301a09e7ee402eae8f">folly::EventHandler::READ</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00043">EventHandler.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab33c3d26e3754af1d3bd6f5712bd2a50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::setRecvBufSize </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufsize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the recv bufsize </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01677">1677</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                                              {</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setRecvBufSize() called on non-open socket &quot;</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;(state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  }</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SOL_SOCKET, SO_RCVBUF, &amp;bufsize, <span class="keyword">sizeof</span>(bufsize)) != 0) {</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordtype">int</span> errnoCopy = errno;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;failed to update SO_RCVBUF option on AsyncSocket&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(errnoCopy);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">return</span> errnoCopy;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  }</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a070558985ea7c8ffcf3eb325c6297b5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setSelfCertificate </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a> &gt;&#160;</td>
          <td class="paramname"><em>cert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00841">841</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01284">selfCertData_</a>.</p>
<div class="fragment"><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                                           {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad9d64cd70c3ace2aaed6c7bac1569801">selfCertData_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cert);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad9d64cd70c3ace2aaed6c7bac1569801"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad9d64cd70c3ace2aaed6c7bac1569801">folly::AsyncSocket::selfCertData_</a></div><div class="ttdeci">std::unique_ptr&lt; const AsyncTransportCertificate &gt; selfCertData_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01284">AsyncSocket.h:1284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9ae0767c13c1067445c6b52c7b42ebf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::setSendBufSize </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufsize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the send bufsize </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01659">1659</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                                              {</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setSendBufSize() called on non-open socket &quot;</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;(state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SOL_SOCKET, SO_SNDBUF, &amp;bufsize, <span class="keyword">sizeof</span>(bufsize)) != 0) {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="keywordtype">int</span> errnoCopy = errno;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;failed to update SO_SNDBUF option on AsyncSocket&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(errnoCopy);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">return</span> errnoCopy;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  }</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbca197b35d100494859c5536fa10e5f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setSendMsgParamCB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set a pointer to <a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a> implementation which will be used to form <a class="el" href="namespacefolly_1_1netops.html#a1a77b634158e087042857cbcb04ee7c2">sendmsg()</a> system call parameters </p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00760">760</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01248">sendMsgParamCallback_</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                                                   {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">sendMsgParamCallback_</a> = callback;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_abe7dadc0ca3105ab63508cbc033e85f9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abe7dadc0ca3105ab63508cbc033e85f9">folly::AsyncSocket::sendMsgParamCallback_</a></div><div class="ttdeci">SendMsgParamsCallback * sendMsgParamCallback_</div><div class="ttdoc">&lt; Callback for retrieving </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01248">AsyncSocket.h:1248</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8f628cc27eb4e41a49a27e2eb7243b88"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setSendTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>milliseconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the send timeout.</p>
<p>If write requests do not make any progress for more than the specified number of milliseconds, fail all pending writes and close the socket.</p>
<p>If write requests are currently pending when <a class="el" href="classfolly_1_1AsyncSocket.html#a8f628cc27eb4e41a49a27e2eb7243b88">setSendTimeout()</a> is called, the timeout interval is immediately restarted using the new value.</p>
<p>(See the comments for <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> for an explanation of why <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> provides <a class="el" href="classfolly_1_1AsyncSocket.html#a8f628cc27eb4e41a49a27e2eb7243b88">setSendTimeout()</a> but not setRecvTimeout().)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliseconds</td><td>The timeout duration, in milliseconds. If 0, no timeout will be used. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#a01212c97e666c0aa276de31d5fb96b02">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00666">666</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncTimeout_8cpp_source.html#l00084">folly::AsyncTimeout::cancelTimeout()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02642">failWrite()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00080">folly::AsyncTimeout::scheduleTimeout()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01233">sendTimeout_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00966">SHUT_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>
<div class="fragment"><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                                                      {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a> = milliseconds;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// If we are currently pending on write requests, immediately update</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// writeTimeout_ with the new value.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>) &amp;&amp;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> != <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> != <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>)) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>) == 0);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a> &gt; 0) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">scheduleTimeout</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a>)) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        AsyncSocketException ex(</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to reschedule send timeout in setSendTimeout&quot;</span>));</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, ex);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">cancelTimeout</a>();</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a2080a127e6087755e7d603883bebfd55"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">folly::AsyncTimeout::cancelTimeout</a></div><div class="ttdeci">void cancelTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00084">AsyncTimeout.cpp:84</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad0e5779653171e26bbac4121442767a5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">folly::AsyncSocket::sendTimeout_</a></div><div class="ttdeci">uint32_t sendTimeout_</div><div class="ttdoc">The send timeout, in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01233">AsyncSocket.h:1233</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_acb0b7716adfa30f6b0fd5261094d2228"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">folly::AsyncTimeout::scheduleTimeout</a></div><div class="ttdeci">bool scheduleTimeout(uint32_t milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00080">AsyncTimeout.cpp:80</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abb6d052c065fe2d254e4b073d956f0fc"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">folly::AsyncSocket::failWrite</a></div><div class="ttdeci">void failWrite(const char *fn, WriteCallback *callback, size_t bytesWritten, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02642">AsyncSocket.cpp:2642</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a20126fac41aae0edaae099927b736ceb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setShutdownSocketSet </td>
          <td>(</td>
          <td class="paramtype">const std::weak_ptr&lt; <a class="el" href="classfolly_1_1ShutdownSocketSet.html">ShutdownSocketSet</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>wSS</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00400">400</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="ShutdownSocketSet_8cpp_source.html#l00049">folly::ShutdownSocketSet::remove()</a>, <a class="el" href="ShutdownSocketSetTest_8cpp_source.html#l00034">folly::test::shutdownSocketSet</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01252">wShutdownSocketSet_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00201">folly::AsyncSocket::SendMsgParamsCallback::getFlagsImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                                  {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> newSS = wNewSS.lock();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">wShutdownSocketSet_</a>.lock();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">if</span> (newSS == <a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a>) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a> &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> != -1) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">shutdownSocketSet</a>-&gt;<a class="code" href="classfolly_1_1ShutdownSocketSet.html#a00fc0d4b70c183e3678c97a727bd7c1e">remove</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (newSS &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> != -1) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    newSS-&gt;add(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">wShutdownSocketSet_</a> = wNewSS;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div><div class="ttc" id="classfolly_1_1ShutdownSocketSet_html_a00fc0d4b70c183e3678c97a727bd7c1e"><div class="ttname"><a href="classfolly_1_1ShutdownSocketSet.html#a00fc0d4b70c183e3678c97a727bd7c1e">folly::ShutdownSocketSet::remove</a></div><div class="ttdeci">void remove(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="ShutdownSocketSet_8cpp_source.html#l00049">ShutdownSocketSet.cpp:49</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6378c8d2f69abec78df8c2d5256710cf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6378c8d2f69abec78df8c2d5256710cf">folly::AsyncSocket::wShutdownSocketSet_</a></div><div class="ttdeci">std::weak_ptr&lt; ShutdownSocketSet &gt; wShutdownSocketSet_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01252">AsyncSocket.h:1252</a></div></div>
<div class="ttc" id="namespacefolly_1_1test_html_afd367401765c92ca52e1f5a35623614e"><div class="ttname"><a href="namespacefolly_1_1test.html#afd367401765c92ca52e1f5a35623614e">folly::test::shutdownSocketSet</a></div><div class="ttdeci">ShutdownSocketSet shutdownSocketSet</div><div class="ttdef"><b>Definition:</b> <a href="ShutdownSocketSetTest_8cpp_source.html#l00034">ShutdownSocketSetTest.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a415ccca275e051318710c1b677dfd64e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::setSockOpt </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> *&#160;</td>
          <td class="paramname"><em>optval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generic API for setting a socket option.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>same as the "level" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
    <tr><td class="paramname">optname</td><td>same as the "optname" parameter in <a class="el" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt()</a>. </td></tr>
    <tr><td class="paramname">optval</td><td>the option value to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>same as the return value of <a class="el" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt()</a>. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00727">727</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, and <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">folly::T</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01324">closeWithReset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                                          {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, level, optname, optval, <span class="keyword">sizeof</span>(<a class="code" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>));</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="namespacefolly_html_a0652a9c51b69e7a13d40ccbcb139bc55"><div class="ttname"><a href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">folly::T</a></div><div class="ttdeci">folly::std T</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3ebf21d62d550100bcfa3556cf4dbd8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int folly::AsyncSocket::setSockOptVirtual </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>optval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t&#160;</td>
          <td class="paramname"><em>optlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Virtual method for setting a socket option accepting integer value, which is the most typical case. Convenient for overriding and mocking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>same as the "level" parameter in <a class="el" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt()</a>. </td></tr>
    <tr><td class="paramname">optname</td><td>same as the "optname" parameter in <a class="el" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt()</a>. </td></tr>
    <tr><td class="paramname">optval</td><td>same as "optval" parameter in <a class="el" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt()</a>. </td></tr>
    <tr><td class="paramname">optlen</td><td>same as "optlen" parameter in <a class="el" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>same as the return value of <a class="el" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt()</a>. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00758">758</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>.</p>

<p>Referenced by <a class="el" href="MockAsyncSocket_8h_source.html#l00040">folly::test::MockAsyncSocket::connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                        {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, level, optname, optval, optlen);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80575e520b5ae0ce1173d9ebb117dca4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::setTCPProfile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>profd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01695">1695</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00698">SO_SET_NAMESPACE</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>.</p>
<div class="fragment"><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                                        {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::setTCPProfile() called on non-open socket &quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SOL_SOCKET, <a class="code" href="AsyncSocket_8h.html#a25f8787ffdc55c2e30bc518e17949f67">SO_SET_NAMESPACE</a>, &amp;profd, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)) != 0) {</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordtype">int</span> errnoCopy = errno;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;failed to set socket namespace option on AsyncSocket&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;(fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(errnoCopy);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">return</span> errnoCopy;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  }</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="AsyncSocket_8h_html_a25f8787ffdc55c2e30bc518e17949f67"><div class="ttname"><a href="AsyncSocket_8h.html#a25f8787ffdc55c2e30bc518e17949f67">SO_SET_NAMESPACE</a></div><div class="ttdeci">#define SO_SET_NAMESPACE</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00698">AsyncSocket.h:698</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5afbe9dfa62d935143e2d9c88816b19e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::setZeroCopy </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00860">860</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="NetOps_8cpp_source.html#l00112">folly::netops::getsockopt()</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, <a class="el" href="NetOps_8h_source.html#l00051">SO_ZEROCOPY</a>, <a class="el" href="String_8cpp_source.html#l00273">val</a>, <a class="el" href="AsyncSocket_8h_source.html#l01275">zeroCopyEnabled_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01276">zeroCopyVal_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                                         {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefolly.html#a236df91ae3d0d023dd67c6923d3cd47b">msgErrQueueSupported</a>) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad86ca763673ec724504693c6445a9c16">zeroCopyVal_</a> = enable;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt; 0) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="String_8cpp.html#a3c8bc0bb4f045bfe78d1196cb786792c">val</a> = enable ? 1 : 0;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">setsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SOL_SOCKET, <a class="code" href="NetOps_8h.html#ad0006a8aad54351859c8a8774eae4e32">SO_ZEROCOPY</a>, &amp;val, <span class="keyword">sizeof</span>(val));</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// if enable == false, set zeroCopyEnabled_ = false regardless</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">// if SO_ZEROCOPY is set or not</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (!enable) {</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> = enable;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment">/* if the setsockopt failed, try to see if the socket inherited the flag</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">     * since we cannot set SO_ZEROCOPY on a socket s = accept</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">if</span> (ret) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      val = 0;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      socklen_t optlen = <span class="keyword">sizeof</span>(<a class="code" href="String_8cpp.html#a3c8bc0bb4f045bfe78d1196cb786792c">val</a>);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      ret = <a class="code" href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">getsockopt</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SOL_SOCKET, <a class="code" href="NetOps_8h.html#ad0006a8aad54351859c8a8774eae4e32">SO_ZEROCOPY</a>, &amp;val, &amp;optlen);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">if</span> (!ret) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        enable = val ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (!ret) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">zeroCopyEnabled_</a> = enable;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div><div class="ttc" id="NetOps_8h_html_ad0006a8aad54351859c8a8774eae4e32"><div class="ttname"><a href="NetOps_8h.html#ad0006a8aad54351859c8a8774eae4e32">SO_ZEROCOPY</a></div><div class="ttdeci">#define SO_ZEROCOPY</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8h_source.html#l00051">NetOps.h:51</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="String_8cpp_html_a3c8bc0bb4f045bfe78d1196cb786792c"><div class="ttname"><a href="String_8cpp.html#a3c8bc0bb4f045bfe78d1196cb786792c">val</a></div><div class="ttdeci">double val</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00273">String.cpp:273</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad86ca763673ec724504693c6445a9c16"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad86ca763673ec724504693c6445a9c16">folly::AsyncSocket::zeroCopyVal_</a></div><div class="ttdeci">bool zeroCopyVal_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01276">AsyncSocket.h:1276</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad99736e9c89e1cf75d27defb5476c0bf"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad99736e9c89e1cf75d27defb5476c0bf">folly::AsyncSocket::zeroCopyEnabled_</a></div><div class="ttdeci">bool zeroCopyEnabled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01275">AsyncSocket.h:1275</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_aa5fcb96753f19c95a1051c3840b50331"><div class="ttname"><a href="namespacefolly_1_1netops.html#aa5fcb96753f19c95a1051c3840b50331">folly::netops::getsockopt</a></div><div class="ttdeci">int getsockopt(NetworkSocket s, int level, int optname, void *optval, socklen_t *optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00112">NetOps.cpp:112</a></div></div>
<div class="ttc" id="namespacefolly_html_a236df91ae3d0d023dd67c6923d3cd47b"><div class="ttname"><a href="namespacefolly.html#a236df91ae3d0d023dd67c6923d3cd47b">folly::msgErrQueueSupported</a></div><div class="ttdeci">static constexpr bool msgErrQueueSupported</div><div class="ttdef"><b>Definition:</b> <a href="AsyncServerSocket_8cpp_source.html#l00050">AsyncServerSocket.cpp:50</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4aec3bc7306879ad18bc04cb6f8b8fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setZeroCopyBuf </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00955">955</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01224">idZeroCopyBufInfoMap_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="StaticSingletonManager_8cpp_source.html#l00038">ptr</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00117">folly::AsyncSocket::BytesWriteRequest::performWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                                                                {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>* <a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a> = buf.get();</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keyword">auto</span>&amp; p = <a class="code" href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">idZeroCopyBufInfoMap_</a>[<a class="code" href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a>];</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  CHECK(p.buf_.get() == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  p.buf_ = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(buf);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBuf_html"><div class="ttname"><a href="classfolly_1_1IOBuf.html">folly::IOBuf</a></div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8h_source.html#l00221">IOBuf.h:221</a></div></div>
<div class="ttc" id="StaticSingletonManager_8cpp_html_a53a30bc00154d79fa155f60e2dfabf5f"><div class="ttname"><a href="StaticSingletonManager_8cpp.html#a53a30bc00154d79fa155f60e2dfabf5f">ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="StaticSingletonManager_8cpp_source.html#l00038">StaticSingletonManager.cpp:38</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_aad93a27de08b4923ac10d47852b8b91a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#aad93a27de08b4923ac10d47852b8b91a">folly::AsyncSocket::idZeroCopyBufInfoMap_</a></div><div class="ttdeci">std::unordered_map&lt; folly::IOBuf *, IOBufInfo &gt; idZeroCopyBufInfoMap_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01224">AsyncSocket.h:1224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4b713c4cd70a7c1dadf4e9cfa97b16a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::setZeroCopyReenableThreshold </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>threshold</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00901">901</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01278">zeroCopyReenableThreshold_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00512">getZeroCopyReenableThreshold()</a>.</p>
<div class="fragment"><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                                                               {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a078418769fa327ad592f58e115f65fca">zeroCopyReenableThreshold_</a> = threshold;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a078418769fa327ad592f58e115f65fca"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a078418769fa327ad592f58e115f65fca">folly::AsyncSocket::zeroCopyReenableThreshold_</a></div><div class="ttdeci">size_t zeroCopyReenableThreshold_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01278">AsyncSocket.h:1278</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe360d7c9c1381385b115ddcdd8c764f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::shutdownWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform a half-shutdown of the write side of the transport.</p>
<p>The caller should not make any more calls to <a class="el" href="classfolly_1_1AsyncSocket.html#a8843e77dfee583e3da4f4e5649acd3e4">write()</a> or <a class="el" href="classfolly_1_1AsyncSocket.html#a37e6b5f6ace50cddbea0a5bfb645511c">writev()</a> after <a class="el" href="classfolly_1_1AsyncSocket.html#afe360d7c9c1381385b115ddcdd8c764f">shutdownWrite()</a> is called. Any future write attempts will fail immediately.</p>
<p>Not all transport types support half-shutdown. If the underlying transport does not support half-shutdown, it will fully shutdown both the read and write sides of the transport. (Fully shutting down the socket is better than doing nothing at all, since the caller may rely on the <a class="el" href="classfolly_1_1AsyncSocket.html#afe360d7c9c1381385b115ddcdd8c764f">shutdownWrite()</a> call to notify the other end of the connection that no more data can be read.)</p>
<p>If there is pending data still waiting to be written on the transport, the actual shutdown will be delayed until the pending data has been written.</p>
<p>Note: There is no corresponding shutdownRead() equivalent. Simply uninstall the read callback if you wish to stop reading. (On TCP sockets at least, shutting down the read side of the socket is a no-op anyway.) </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#ada71dabe73fe09ba801281b17d4b96ac">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a0c87f0feee357752b16d6c858d56bc57">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01339">1339</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00964">SHUT_WRITE_PENDING</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                                {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::shutdownWrite(): this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;, shutdownFlags=&quot;</span> &lt;&lt; std::hex</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;          &lt;&lt; (int)<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a>;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// If there are no pending writes, shutdownWrite() is identical to</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// shutdownWriteNow().</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">shutdownWriteNow</a>();</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">// There are pending writes.  Set SHUT_WRITE_PENDING so that the actual</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// shutdown will be performed once all writes complete.</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a>;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ae4fe34feba854c83cbb8665c0efd1053"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">folly::AsyncSocket::shutdownWriteNow</a></div><div class="ttdeci">void shutdownWriteNow() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01358">AsyncSocket.cpp:1358</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">folly::AsyncSocket::SHUT_WRITE_PENDING</a></div><div class="ttdoc">shutdownWrite() called, but we are still waiting on writes to drain </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00964">AsyncSocket.h:964</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae4fe34feba854c83cbb8665c0efd1053"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::shutdownWriteNow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform a half-shutdown of the write side of the transport.</p>
<p><a class="el" href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">shutdownWriteNow()</a> is identical to <a class="el" href="classfolly_1_1AsyncSocket.html#afe360d7c9c1381385b115ddcdd8c764f">shutdownWrite()</a>, except that it immediately performs the shutdown, rather than waiting for pending writes to complete. Any pending write requests will be immediately failed when <a class="el" href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">shutdownWriteNow()</a> is called. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransport.html#ad56d953503da7ffd3c223fd1154b7c1c">folly::AsyncTransport</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSSLSocket.html#ae883d407755d326750f202d60593595d">folly::AsyncSSLSocket</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01358">1358</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncTimeout_8cpp_source.html#l00084">folly::AsyncTimeout::cancelTimeout()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">CLOSED</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453">folly::DFATAL</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02661">failAllWrites()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l00966">SHUT_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l00964">SHUT_WRITE_PENDING</a>, <a class="el" href="RefCountBenchmark_8cpp_source.html#l00024">folly::shutdown()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="namespacefolly.html#ab5f75b0596665fce7bf906c90f111283">folly::socketShutdownForWritesEx</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">UNINIT</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01339">shutdownWrite()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                                   {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::shutdownWriteNow(): this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;, shutdownFlags=&quot;</span> &lt;&lt; std::hex</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;          &lt;&lt; (int)<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>) {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">// Writes are already shutdown; nothing else to do.</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">// If SHUT_READ is already set, just call closeNow() to completely</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">// close the socket.  This can happen if close() was called with writes</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="comment">// pending, and then shutdownWriteNow() is called before all pending writes</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// complete.</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a>) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow</a>();</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  }</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>) {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  }</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">switch</span> (static_cast&lt;StateEnum&gt;(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>)) {</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>: {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="comment">// If the write timeout was set, cancel it.</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">cancelTimeout</a>();</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="comment">// If we are registered for write events, unregister.</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(0, <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>)) {</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="comment">// We will have been moved into the error state.</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="comment">// Shutdown writes on the file descriptor</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <a class="code" href="namespacefolly.html#a89e6d5d07a92c88cf24c7a3f9a02f94e">shutdown</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, SHUT_WR);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <span class="comment">// Immediately fail all write requests</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">failAllWrites</a>(<a class="code" href="namespacefolly.html#ab5f75b0596665fce7bf906c90f111283">socketShutdownForWritesEx</a>);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>: {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="comment">// Set the SHUT_WRITE_PENDING flag.</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="comment">// When the connection completes, it will check this flag,</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <span class="comment">// shutdown the write half of the socket, and then set SHUT_WRITE.</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a>;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="comment">// Immediately fail all write requests</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">failAllWrites</a>(<a class="code" href="namespacefolly.html#ab5f75b0596665fce7bf906c90f111283">socketShutdownForWritesEx</a>);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">StateEnum::UNINIT</a>:</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="comment">// Callers normally shouldn&#39;t call shutdownWriteNow() before the socket</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="comment">// even starts connecting.  Nonetheless, go ahead and set</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <span class="comment">// SHUT_WRITE_PENDING.  Once the socket eventually connects it will</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="comment">// immediately shut down the write side of the socket.</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>:</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <span class="comment">// In fast open state we haven&#39;t call connected yet, and if we shutdown</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <span class="comment">// the writes, we will never try to call connect, so shut everything down</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <span class="comment">// Immediately fail all write requests</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">failAllWrites</a>(<a class="code" href="namespacefolly.html#ab5f75b0596665fce7bf906c90f111283">socketShutdownForWritesEx</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">StateEnum::CLOSED</a>:</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>:</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="comment">// We should never get here.  SHUT_WRITE should always be set</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="comment">// in STATE_CLOSED and STATE_ERROR.</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      VLOG(4) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::shutdownWriteNow() (this=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;) in unexpected state &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; with SHUT_WRITE not set (&quot;</span> &lt;&lt; std::hex &lt;&lt; (int)<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      assert(<span class="keyword">false</span>);</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  }</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453">DFATAL</a>) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::shutdownWriteNow() (this=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;) called in unknown state &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a110ccf2f5d2ff4eda1fd1a494293467d">folly::AsyncSocket::StateEnum::CLOSED</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_a2080a127e6087755e7d603883bebfd55"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">folly::AsyncTimeout::cancelTimeout</a></div><div class="ttdeci">void cancelTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00084">AsyncTimeout.cpp:84</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="namespacefolly_html_a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453"><div class="ttname"><a href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aad301b1984c2230caf8836ab7e69e4453">folly::LogLevel::DFATAL</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">folly::AsyncSocket::SHUT_WRITE_PENDING</a></div><div class="ttdoc">shutdownWrite() called, but we are still waiting on writes to drain </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00964">AsyncSocket.h:964</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a09c88d174fd0d7a87040d8db72e54862"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">folly::AsyncSocket::closeNow</a></div><div class="ttdeci">void closeNow() override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01252">AsyncSocket.cpp:1252</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0882ee58c818367f82b6b6a4db50dd1c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0882ee58c818367f82b6b6a4db50dd1c">folly::AsyncSocket::failAllWrites</a></div><div class="ttdeci">void failAllWrites(const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02661">AsyncSocket.cpp:2661</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="namespacefolly_html_ab5f75b0596665fce7bf906c90f111283"><div class="ttname"><a href="namespacefolly.html#ab5f75b0596665fce7bf906c90f111283">folly::socketShutdownForWritesEx</a></div><div class="ttdeci">const AsyncSocketException socketShutdownForWritesEx(AsyncSocketException::END_OF_FILE,&quot;socket shutdown for writes&quot;)</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="namespacefolly_html_a89e6d5d07a92c88cf24c7a3f9a02f94e"><div class="ttname"><a href="namespacefolly.html#a89e6d5d07a92c88cf24c7a3f9a02f94e">folly::shutdown</a></div><div class="ttdeci">void shutdown(Counter &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="RefCountBenchmark_8cpp_source.html#l00024">RefCountBenchmark.cpp:24</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a0bb2c0f400808f8752d404f5c921d1df">folly::AsyncSocket::StateEnum::UNINIT</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a55b97da40cc72b3468e5dcc95aeab723"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::socketConnect </td>
          <td>(</td>
          <td class="paramtype">const struct sockaddr *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l00600">600</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="NetOps_8cpp_source.html#l00094">folly::netops::connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00030">folly::AsyncSocketException::NOT_OPEN</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00630">registerForConnectEvents()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00617">scheduleConnectTimeout()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                                                          {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordtype">int</span> rv = <a class="code" href="namespacefolly_1_1netops.html#ac1c485d763067b5987724117affe463d">fsp::connect</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>, saddr, len);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">if</span> (rv &lt; 0) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> (errnoCopy == EINPROGRESS) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a8306e8803b9f0b30a8b06306857641e1">scheduleConnectTimeout</a>();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#ad6393490c14c3d5510d1cc9bd1b6d985">registerForConnectEvents</a>();</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">throw</span> AsyncSocketException(</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">AsyncSocketException::NOT_OPEN</a>,</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;          <span class="stringliteral">&quot;connect failed (immediately)&quot;</span>,</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          errnoCopy);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">return</span> rv;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_ac1c485d763067b5987724117affe463d"><div class="ttname"><a href="namespacefolly_1_1netops.html#ac1c485d763067b5987724117affe463d">folly::netops::connect</a></div><div class="ttdeci">int connect(NetworkSocket s, const sockaddr *name, socklen_t namelen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00094">NetOps.cpp:94</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba73a2f501c1762ea90ca6ce742a34eb89">folly::AsyncSocketException::NOT_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00030">AsyncSocketException.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad6393490c14c3d5510d1cc9bd1b6d985"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad6393490c14c3d5510d1cc9bd1b6d985">folly::AsyncSocket::registerForConnectEvents</a></div><div class="ttdeci">void registerForConnectEvents()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00630">AsyncSocket.cpp:630</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8306e8803b9f0b30a8b06306857641e1"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8306e8803b9f0b30a8b06306857641e1">folly::AsyncSocket::scheduleConnectTimeout</a></div><div class="ttdeci">virtual void scheduleConnectTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00617">AsyncSocket.cpp:617</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a33e15b31f2e7087c75d9d916a7bd7db7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::startFail </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02516">2516</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00155">folly::EventBase::LoopCallback::cancelLoopCallback()</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00084">folly::AsyncTimeout::cancelTimeout()</a>, <a class="el" href="EventHandler_8h_source.html#l00143">folly::EventHandler::changeHandlerFD()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="DelayedDestructionBase_8h_source.html#l00202">folly::DelayedDestructionBase::getDestructorGuardCount()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01243">immediateReadHandler_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="EventBase_8h_source.html#l00160">folly::EventBase::LoopCallback::isLoopCallbackScheduled()</a>, <a class="el" href="EventHandler_8h_source.html#l00042">folly::EventHandler::NONE</a>, <a class="el" href="AsyncSocket_8h_source.html#l00980">SHUT_READ</a>, <a class="el" href="AsyncSocket_8h_source.html#l00966">SHUT_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="EventHandler_8cpp_source.html#l00103">folly::EventHandler::unregisterHandler()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02569">fail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00650">folly::AsyncSSLSocket::failHandshake()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02619">failWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                            {</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  <span class="comment">// startFail() should only be called once</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  assert(<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> != <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  assert(<a class="code" href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">getDestructorGuardCount</a>() &gt; 0);</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <span class="comment">// Ensure that SHUT_READ and SHUT_WRITE are set,</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <span class="comment">// so all future attempts to read or write will be rejected</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> |= (<a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">SHUT_READ</a> | <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a>);</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="comment">// Cancel any scheduled immediate read.</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>.<a class="code" href="classfolly_1_1EventBase_1_1LoopCallback.html#aed098dba0a92a874bb35e40170b47a97">isLoopCallbackScheduled</a>()) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">immediateReadHandler_</a>.<a class="code" href="classfolly_1_1EventBase_1_1LoopCallback.html#a2acd9352956b309677572284f5666d31">cancelLoopCallback</a>();</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  }</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> != <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>) {</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> = <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">unregisterHandler</a>();</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  }</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">cancelTimeout</a>();</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &gt;= 0) {</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">changeHandlerFD</a>(-1);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">doClose</a>();</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  }</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncTimeout_html_a2080a127e6087755e7d603883bebfd55"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#a2080a127e6087755e7d603883bebfd55">folly::AsyncTimeout::cancelTimeout</a></div><div class="ttdeci">void cancelTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00084">AsyncTimeout.cpp:84</a></div></div>
<div class="ttc" id="classfolly_1_1DelayedDestructionBase_html_a31591f967cbdb0b071bff2880de37cb0"><div class="ttname"><a href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">folly::DelayedDestructionBase::getDestructorGuardCount</a></div><div class="ttdeci">uint32_t getDestructorGuardCount() const </div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestructionBase_8h_source.html#l00202">DelayedDestructionBase.h:202</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">folly::EventHandler::NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00042">EventHandler.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a72e295058c1ffc6a8506120c061dc991"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">folly::EventHandler::unregisterHandler</a></div><div class="ttdeci">void unregisterHandler()</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00103">EventHandler.cpp:103</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_1_1LoopCallback_html_aed098dba0a92a874bb35e40170b47a97"><div class="ttname"><a href="classfolly_1_1EventBase_1_1LoopCallback.html#aed098dba0a92a874bb35e40170b47a97">folly::EventBase::LoopCallback::isLoopCallbackScheduled</a></div><div class="ttdeci">bool isLoopCallbackScheduled() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00160">EventBase.h:160</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6afc3c01f58b7d7b06af81267da854fb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6afc3c01f58b7d7b06af81267da854fb">folly::AsyncSocket::immediateReadHandler_</a></div><div class="ttdeci">ImmediateReadCB immediateReadHandler_</div><div class="ttdoc">LoopCallback for checking read. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01243">AsyncSocket.h:1243</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_1_1LoopCallback_html_a2acd9352956b309677572284f5666d31"><div class="ttname"><a href="classfolly_1_1EventBase_1_1LoopCallback.html#a2acd9352956b309677572284f5666d31">folly::EventBase::LoopCallback::cancelLoopCallback</a></div><div class="ttdeci">void cancelLoopCallback()</div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00155">EventBase.h:155</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_aef72fafbedd426fb96c4dd46b6d85395"><div class="ttname"><a href="classfolly_1_1EventHandler.html#aef72fafbedd426fb96c4dd46b6d85395">folly::EventHandler::changeHandlerFD</a></div><div class="ttdeci">void changeHandlerFD(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00143">EventHandler.h:143</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a73e58fa61e790fa3677134f27830c272"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a73e58fa61e790fa3677134f27830c272">folly::AsyncSocket::doClose</a></div><div class="ttdeci">void doClose()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02790">AsyncSocket.cpp:2790</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a5602d4cb581c86e1e65b2a4b9cb4b255">folly::AsyncSocket::SHUT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00980">AsyncSocket.h:980</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8470776d92fd540977c20093c2ebb425"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t folly::AsyncSocket::tfoSendMsg </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct msghdr *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msg_flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02316">2316</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="SocketFastOpen_8cpp_source.html#l00108">folly::detail::tfo_sendmsg()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>.</p>
<div class="fragment"><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;                                                                         {</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1detail.html#a2432c4e884d46b279752b5a22f47ce9a">detail::tfo_sendmsg</a>(fd, msg, msg_flags);</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1detail_html_a2432c4e884d46b279752b5a22f47ce9a"><div class="ttname"><a href="namespacefolly_1_1detail.html#a2432c4e884d46b279752b5a22f47ce9a">folly::detail::tfo_sendmsg</a></div><div class="ttdeci">ssize_t tfo_sendmsg(int, const struct msghdr *, int)</div><div class="ttdef"><b>Definition:</b> <a href="SocketFastOpen_8cpp_source.html#l00108">SocketFastOpen.cpp:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab9852513aa1702cb5cdab956f391121a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::timeoutExpired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02285">2285</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01245">connectCallback_</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">CONNECTING</a>, <a class="el" href="AsyncSocket_8h_source.html#l01263">connectTimeout_</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02642">failWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01233">sendTimeout_</a>, <a class="el" href="Format_8h_source.html#l00280">folly::sformat()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, and <a class="el" href="AsyncSocketException_8h_source.html#l00032">folly::AsyncSocketException::TIMED_OUT</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8h_source.html#l00615">folly::AsyncSSLSocket::getSSLContext()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                                          {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  VLOG(7) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;: timeout expired: &quot;</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> &lt;&lt; <span class="stringliteral">&quot;, events=&quot;</span> &lt;&lt; std::hex &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a>;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a> == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">StateEnum::CONNECTING</a>) {</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="comment">// connect() timed out</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="comment">// Unregister for I/O events.</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">connectCallback_</a>) {</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      AsyncSocketException ex(</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba8f00f3fe93529900db3432005fe0a78b">AsyncSocketException::TIMED_OUT</a>,</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;          <a class="code" href="namespacefolly.html#a99cf466a35ae40b7d08fcc9a54e62ae2">folly::sformat</a>(</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;              <span class="stringliteral">&quot;connect timed out after {}ms&quot;</span>, <a class="code" href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">connectTimeout_</a>.count()));</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">failConnect</a>(__func__, ex);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      <span class="comment">// we faced a connect error without a connect callback, which could</span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="comment">// happen due to TFO.</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      AsyncSocketException ex(</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba8f00f3fe93529900db3432005fe0a78b">AsyncSocketException::TIMED_OUT</a>, <span class="stringliteral">&quot;write timed out during connection&quot;</span>);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, ex);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    }</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="comment">// a normal write operation timed out</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    AsyncSocketException ex(</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba8f00f3fe93529900db3432005fe0a78b">AsyncSocketException::TIMED_OUT</a>,</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        <a class="code" href="namespacefolly.html#a99cf466a35ae40b7d08fcc9a54e62ae2">folly::sformat</a>(<span class="stringliteral">&quot;write timed out after {}ms&quot;</span>, <a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a>));</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, ex);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  }</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;}</div><div class="ttc" id="namespacefolly_html_a99cf466a35ae40b7d08fcc9a54e62ae2"><div class="ttname"><a href="namespacefolly.html#a99cf466a35ae40b7d08fcc9a54e62ae2">folly::sformat</a></div><div class="ttdeci">std::string sformat(StringPiece fmt, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="Format_8h_source.html#l00280">Format.h:280</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51ba8f00f3fe93529900db3432005fe0a78b"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51ba8f00f3fe93529900db3432005fe0a78b">folly::AsyncSocketException::TIMED_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00032">AsyncSocketException.h:32</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad0e5779653171e26bbac4121442767a5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">folly::AsyncSocket::sendTimeout_</a></div><div class="ttdeci">uint32_t sendTimeout_</div><div class="ttdoc">The send timeout, in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01233">AsyncSocket.h:1233</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a9a14f95e151eec641316e7c784ce832d">folly::AsyncSocket::StateEnum::CONNECTING</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a480eeb96732defcff38a160fcd75bd5a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a480eeb96732defcff38a160fcd75bd5a">folly::AsyncSocket::connectTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds connectTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01263">AsyncSocket.h:1263</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a87ea20cc1d2d9bef07579d829afeaca9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a87ea20cc1d2d9bef07579d829afeaca9">folly::AsyncSocket::failConnect</a></div><div class="ttdeci">void failConnect(const char *fn, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02577">AsyncSocket.cpp:2577</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abb6d052c065fe2d254e4b073d956f0fc"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">folly::AsyncSocket::failWrite</a></div><div class="ttdeci">void failWrite(const char *fn, WriteCallback *callback, size_t bytesWritten, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02642">AsyncSocket.cpp:2642</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2c7b2e4603cfb8308254b06df795bd87"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2c7b2e4603cfb8308254b06df795bd87">folly::AsyncSocket::connectCallback_</a></div><div class="ttdeci">ConnectCallback * connectCallback_</div><div class="ttdoc">ConnectCallback. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01245">AsyncSocket.h:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0eb85478207f92cc1b64512422ebc51a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::updateEventRegistration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Re-register the <a class="el" href="classfolly_1_1EventHandler.html">EventHandler</a> after eventFlags_ has changed.</p>
<p>If an error occurs, <a class="el" href="classfolly_1_1AsyncSocket.html#a6bf01814cfb39f9bf71b4bfcd1842a75">fail()</a> is called to move the socket into the error state and call all currently installed callbacks. After an error, the <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> is completely unregistered.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns true on success, or false on error. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02480">2480</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02569">fail()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8h_source.html#l01242">ioHandler_</a>, <a class="el" href="EventHandler_8h_source.html#l00042">folly::EventHandler::NONE</a>, <a class="el" href="EventHandler_8h_source.html#l00046">folly::EventHandler::PERSIST</a>, <a class="el" href="EventHandler_8h_source.html#l00100">folly::EventHandler::registerHandler()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, <a class="el" href="EventHandler_8cpp_source.html#l00103">folly::EventHandler::unregisterHandler()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01108">folly::AsyncSSLSocket::handleAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01209">folly::AsyncSSLSocket::handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01155">folly::AsyncSSLSocket::handleReturnFromSSLAccept()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00461">folly::AsyncSSLSocket::sslAccept()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02505">updateEventRegistration()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00971">folly::AsyncSSLSocket::willBlock()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                                          {</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::updateEventRegistration(this=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> &lt;&lt; <span class="stringliteral">&quot;, evb=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a> &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, events=&quot;</span> &lt;&lt; std::hex &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a>;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="keywordflow">if</span> (eventFlags_ == <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>) {</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">unregisterHandler</a>();</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  }</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <span class="comment">// Always register for persistent events, so we don&#39;t have to re-register</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="comment">// after being called back.</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">ioHandler_</a>.<a class="code" href="classfolly_1_1EventHandler.html#a202afaf81f9a36978938fd39e8e2fb87">registerHandler</a>(</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;          <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>(eventFlags_ | <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572">EventHandler::PERSIST</a>))) {</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    eventFlags_ = <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">EventHandler::NONE</a>; <span class="comment">// we&#39;re not registered after error</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    AsyncSocketException ex(</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to update AsyncSocket event registration&quot;</span>));</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a6bf01814cfb39f9bf71b4bfcd1842a75">fail</a>(<span class="stringliteral">&quot;updateEventRegistration&quot;</span>, ex);</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  }</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca60be439c6bcefd5e64997f8f4d05a572">folly::EventHandler::PERSIST</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00046">EventHandler.h:46</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862ca09eafb954636d468c193f04022deff75">folly::EventHandler::NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00042">EventHandler.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a6bf01814cfb39f9bf71b4bfcd1842a75"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a6bf01814cfb39f9bf71b4bfcd1842a75">folly::AsyncSocket::fail</a></div><div class="ttdeci">void fail(const char *fn, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02569">AsyncSocket.cpp:2569</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a72e295058c1ffc6a8506120c061dc991"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a72e295058c1ffc6a8506120c061dc991">folly::EventHandler::unregisterHandler</a></div><div class="ttdeci">void unregisterHandler()</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8cpp_source.html#l00103">EventHandler.cpp:103</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a44cd7e00ca56a32008c4a9f7df9a7b3e"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a44cd7e00ca56a32008c4a9f7df9a7b3e">folly::AsyncSocket::ioHandler_</a></div><div class="ttdeci">IoHandler ioHandler_</div><div class="ttdoc">A EventHandler to monitor the fd. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01242">AsyncSocket.h:1242</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a202afaf81f9a36978938fd39e8e2fb87"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a202afaf81f9a36978938fd39e8e2fb87">folly::EventHandler::registerHandler</a></div><div class="ttdeci">bool registerHandler(uint16_t events)</div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00100">EventHandler.h:100</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a39b05e999018c733b79d986d6913421d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::updateEventRegistration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>disable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update event registration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Flags of events to enable. Set it to 0 if no events need to be enabled in this call. </td></tr>
    <tr><td class="paramname">disable</td><td>Flags of events to disable. Set it to 0 if no events need to be disabled in this call.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true iff the update is successful. </dd></dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02505">2505</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>.</p>
<div class="fragment"><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;                                                                           {</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> oldFlags = <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a>;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> |= enable;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp;= ~disable;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> == oldFlags) {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>();</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  }</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a82ad311206f8bda954e7b8f6363b6f08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> folly::AsyncSocket::withAddr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02814">2814</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="AsyncTransport_8h_source.html#l00346">folly::AsyncTransport::getLocalAddress()</a>, <a class="el" href="AsyncTransport_8h_source.html#l00375">folly::AsyncTransport::getPeerAddress()</a>, and <a class="el" href="FiberManagerInternal_8h_source.html#l00584">folly::fibers::local()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02770">invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00630">registerForConnectEvents()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01306">folly::AsyncSSLSocket::scheduleConnectTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00617">scheduleConnectTimeout()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00420">setCloseOnExec()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                                                  {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <span class="comment">// Don&#39;t use addr_ directly because it may not be initialized</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="comment">// e.g. if constructed from fd</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <a class="code" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> peer, <a class="code" href="namespacefolly_1_1fibers.html#a22a1997749381111f322c5acfd6db44e">local</a>;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <a class="code" href="classfolly_1_1AsyncTransport.html#a6e5ab2f16893cce42f777ec8ea16f15c">getPeerAddress</a>(&amp;peer);</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <a class="code" href="classfolly_1_1AsyncTransport.html#af1a389b6efc9421d1956ce228c5fd699">getLocalAddress</a>(&amp;local);</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp;) {</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <span class="comment">// ignore</span></div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="comment">// ignore</span></div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  }</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a> + <span class="stringliteral">&quot; (peer=&quot;</span> + peer.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>() + <span class="stringliteral">&quot;, local=&quot;</span> + local.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>() + <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;}</div><div class="ttc" id="classfolly_1_1SocketAddress_html"><div class="ttname"><a href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8h_source.html#l00032">SocketAddress.h:32</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransport_html_a6e5ab2f16893cce42f777ec8ea16f15c"><div class="ttname"><a href="classfolly_1_1AsyncTransport.html#a6e5ab2f16893cce42f777ec8ea16f15c">folly::AsyncTransport::getPeerAddress</a></div><div class="ttdeci">SocketAddress getPeerAddress() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00375">AsyncTransport.h:375</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransport_html_af1a389b6efc9421d1956ce228c5fd699"><div class="ttname"><a href="classfolly_1_1AsyncTransport.html#af1a389b6efc9421d1956ce228c5fd699">folly::AsyncTransport::getLocalAddress</a></div><div class="ttdeci">SocketAddress getLocalAddress() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncTransport_8h_source.html#l00346">AsyncTransport.h:346</a></div></div>
<div class="ttc" id="StringKeyedBenchmark_8cpp_html_aa7f1a46e86fabf3df0ec876cd34220c2"><div class="ttname"><a href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a></div><div class="ttdeci">static set&lt; string &gt; s</div><div class="ttdef"><b>Definition:</b> <a href="StringKeyedBenchmark_8cpp_source.html#l00048">StringKeyedBenchmark.cpp:48</a></div></div>
<div class="ttc" id="namespacefolly_1_1fibers_html_a22a1997749381111f322c5acfd6db44e"><div class="ttname"><a href="namespacefolly_1_1fibers.html#a22a1997749381111f322c5acfd6db44e">folly::fibers::local</a></div><div class="ttdeci">T &amp; local()</div><div class="ttdef"><b>Definition:</b> <a href="FiberManagerInternal_8h_source.html#l00584">FiberManagerInternal.h:584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1ca4a657c8f86f2e7949a4e39f743c7f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::writable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine if the transport is writable or not.</p>
<dl class="section return"><dt>Returns</dt><dd>true iff the transport is writable, false otherwise. </dd></dl>

<p>Reimplemented from <a class="el" href="classfolly_1_1AsyncTransport.html#a9e0b12bf1a34a729a8ae242d73779619">folly::AsyncTransport</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01455">1455</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, and <a class="el" href="NetOps_8cpp_source.html#l00141">folly::netops::poll()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00535">writeRequestReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                                 {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a> == -1) {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keyword">struct </span>pollfd fds[1];</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  fds[0].fd = <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a>;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  fds[0].events = POLLOUT;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  fds[0].revents = 0;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="namespacefolly_1_1netops.html#a96864641e16a4614f4b5390c94c8f330">poll</a>(fds, 1, 0);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="keywordflow">return</span> rc == 1;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1netops_html_a96864641e16a4614f4b5390c94c8f330"><div class="ttname"><a href="namespacefolly_1_1netops.html#a96864641e16a4614f4b5390c94c8f330">folly::netops::poll</a></div><div class="ttdeci">int poll(PollDescriptor fds[], nfds_t nfds, int timeout)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00141">NetOps.cpp:141</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8843e77dfee583e3da4f4e5649acd3e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em> = <code><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If you supply a non-null <a class="el" href="classWriteCallback.html">WriteCallback</a>, exactly one of writeSuccess() or writeErr() will be invoked when the write completes. If you supply the same <a class="el" href="classWriteCallback.html">WriteCallback</a> object for multiple <a class="el" href="classfolly_1_1AsyncSocket.html#a8843e77dfee583e3da4f4e5649acd3e4">write()</a> calls, it will be invoked exactly once per call. The only way to cancel outstanding write requests is to close the socket (e.g., with <a class="el" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow()</a> or <a class="el" href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">shutdownWriteNow()</a>). When closing the socket this way, writeErr() will still be invoked once for each outstanding write operation. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a3d018e502876f2c97a54188174d78a02">folly::AsyncTransportWrapper</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01003">1003</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00512">getZeroCopyReenableThreshold()</a>, and <a class="el" href="AsyncSocketTest2_8cpp_source.html#l01542">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                      {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  iovec <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html">op</a>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  op.iov_base = <span class="keyword">const_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(buf);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  op.iov_len = bytes;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ad8d98d29d9453d246fb19b525200eb29">writeImpl</a>(callback, &amp;op, 1, unique_ptr&lt;IOBuf&gt;(), <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;}</div><div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_1_1operators_html"><div class="ttname"><a href="namespacefolly_1_1pushmi_1_1operators.html">folly::pushmi::operators</a></div><div class="ttdef"><b>Definition:</b> <a href="bulk_8h_source.html#l00023">bulk.h:23</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad8d98d29d9453d246fb19b525200eb29"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad8d98d29d9453d246fb19b525200eb29">folly::AsyncSocket::writeImpl</a></div><div class="ttdeci">void writeImpl(WriteCallback *callback, const iovec *vec, size_t count, std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, WriteFlags flags=WriteFlags::NONE)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01055">AsyncSocket.cpp:1055</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="add12994d4630f4ff5abb0027039473d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::writeChain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em> = <code><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If you supply a non-null <a class="el" href="classWriteCallback.html">WriteCallback</a>, exactly one of writeSuccess() or writeErr() will be invoked when the write completes. If you supply the same <a class="el" href="classWriteCallback.html">WriteCallback</a> object for multiple <a class="el" href="classfolly_1_1AsyncSocket.html#a8843e77dfee583e3da4f4e5649acd3e4">write()</a> calls, it will be invoked exactly once per call. The only way to cancel outstanding write requests is to close the socket (e.g., with <a class="el" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow()</a> or <a class="el" href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">shutdownWriteNow()</a>). When closing the socket this way, writeErr() will still be invoked once for each outstanding write operation. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a47d05fc753c7d175fd794c74edc22a65">folly::AsyncTransportWrapper</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01022">1022</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00909">adjustZeroCopyFlags()</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="Portability_8h_source.html#l00180">FOLLY_GNU_DISABLE_WARNING</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00040">FOLLY_HAVE_VLA_01</a>, <a class="el" href="Portability_8h_source.html#l00179">FOLLY_POP_WARNING</a>, <a class="el" href="Portability_8h_source.html#l00178">FOLLY_PUSH_WARNING</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01045">writeChainImpl()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00512">getZeroCopyReenableThreshold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                      {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#abeab8a5e33a423f02325c8d7c0d4365a">adjustZeroCopyFlags</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  constexpr <span class="keywordtype">size_t</span> kSmallSizeMax = 64;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a> = buf-&gt;<a class="code" href="classfolly_1_1IOBuf.html#ad23972657a0dd820d36bd83ebc74ca39">countChainElements</a>();</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">if</span> (count &lt;= kSmallSizeMax) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="comment">// suppress &quot;warning: variable length array &#39;vec&#39; is used [-Wvla]&quot;</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="Portability_8h.html#a7f4463769c98ffb786751dd9946773df">FOLLY_PUSH_WARNING</a></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="Portability_8h.html#aa315a0e3a3286458420df4e74d1b3e6f">FOLLY_GNU_DISABLE_WARNING</a>(<span class="stringliteral">&quot;-Wvla&quot;</span>)</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    iovec <a class="code" href="classvector.html">vec</a>[BOOST_PP_IF(<a class="code" href="AsyncSocket_8cpp.html#a3eb5ab184512cd1f80a134a59f936b99">FOLLY_HAVE_VLA_01</a>, count, kSmallSizeMax)];</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="Portability_8h.html#a4a2f173e1bec794aa19364144948180d">FOLLY_POP_WARNING</a></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a384bd7218a485ed9839611bf48d3a9cd">writeChainImpl</a>(callback, <a class="code" href="classvector.html">vec</a>, count, <a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">move</a>(buf), <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  } else {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    iovec* vec = <span class="keyword">new</span> iovec[<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>];</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a384bd7218a485ed9839611bf48d3a9cd">writeChainImpl</a>(callback, vec, count, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(buf), flags);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keyword">delete</span>[] <a class="code" href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;}</div><div class="ttc" id="Portability_8h_html_aa315a0e3a3286458420df4e74d1b3e6f"><div class="ttname"><a href="Portability_8h.html#aa315a0e3a3286458420df4e74d1b3e6f">FOLLY_GNU_DISABLE_WARNING</a></div><div class="ttdeci">#define FOLLY_GNU_DISABLE_WARNING(warningName)</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00180">Portability.h:180</a></div></div>
<div class="ttc" id="Portability_8h_html_a4a2f173e1bec794aa19364144948180d"><div class="ttname"><a href="Portability_8h.html#a4a2f173e1bec794aa19364144948180d">FOLLY_POP_WARNING</a></div><div class="ttdeci">#define FOLLY_POP_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00179">Portability.h:179</a></div></div>
<div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="Portability_8h_html_a7f4463769c98ffb786751dd9946773df"><div class="ttname"><a href="Portability_8h.html#a7f4463769c98ffb786751dd9946773df">FOLLY_PUSH_WARNING</a></div><div class="ttdeci">#define FOLLY_PUSH_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00178">Portability.h:178</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="classfolly_1_1IOBuf_html_ad23972657a0dd820d36bd83ebc74ca39"><div class="ttname"><a href="classfolly_1_1IOBuf.html#ad23972657a0dd820d36bd83ebc74ca39">folly::IOBuf::countChainElements</a></div><div class="ttdeci">size_t countChainElements() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8cpp_source.html#l00493">IOBuf.cpp:493</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a384bd7218a485ed9839611bf48d3a9cd"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a384bd7218a485ed9839611bf48d3a9cd">folly::AsyncSocket::writeChainImpl</a></div><div class="ttdeci">void writeChainImpl(WriteCallback *callback, iovec *vec, size_t count, std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, WriteFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01045">AsyncSocket.cpp:1045</a></div></div>
<div class="ttc" id="AsyncSocket_8cpp_html_a3eb5ab184512cd1f80a134a59f936b99"><div class="ttname"><a href="AsyncSocket_8cpp.html#a3eb5ab184512cd1f80a134a59f936b99">FOLLY_HAVE_VLA_01</a></div><div class="ttdeci">#define FOLLY_HAVE_VLA_01</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00040">AsyncSocket.cpp:40</a></div></div>
<div class="ttc" id="classvector_html"><div class="ttname"><a href="classvector.html">vector</a></div><div class="ttdef"><b>Definition:</b> <a href="Traits_8h_source.html#l00588">Traits.h:588</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="gen_2test_2StringTest_8cpp_html_ac4ba865c2f8f6f90e3c64552279f3d21"><div class="ttname"><a href="gen_2test_2StringTest_8cpp.html#ac4ba865c2f8f6f90e3c64552279f3d21">vec</a></div><div class="ttdeci">vector&lt; string &gt; vec</div><div class="ttdef"><b>Definition:</b> <a href="gen_2test_2StringTest_8cpp_source.html#l00035">StringTest.cpp:35</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abeab8a5e33a423f02325c8d7c0d4365a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abeab8a5e33a423f02325c8d7c0d4365a">folly::AsyncSocket::adjustZeroCopyFlags</a></div><div class="ttdeci">void adjustZeroCopyFlags(folly::WriteFlags &amp;flags)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00909">AsyncSocket.cpp:909</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a384bd7218a485ed9839611bf48d3a9cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::writeChainImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">iovec *&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Populate an iovec array from an <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> and attempt to write it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>Write completion/error callback. </td></tr>
    <tr><td class="paramname">vec</td><td>Target iovec array; caller retains ownership. </td></tr>
    <tr><td class="paramname">count</td><td>Number of IOBufs to write, beginning at start of buf. </td></tr>
    <tr><td class="paramname">buf</td><td>Chain of iovecs. </td></tr>
    <tr><td class="paramname">flags</td><td>set of flags for the underlying write calls, like cork </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01045">1045</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01022">writeChain()</a>.</p>
<div class="fragment"><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                      {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordtype">size_t</span> veclen = buf-&gt;<a class="code" href="classfolly_1_1IOBuf.html#a9b1e73c46f54a34e7ae552f29ebe4cc1">fillIov</a>(<a class="code" href="classvector.html">vec</a>, <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ad8d98d29d9453d246fb19b525200eb29">writeImpl</a>(callback, <a class="code" href="classvector.html">vec</a>, veclen, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(buf), <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;}</div><div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBuf_html_a9b1e73c46f54a34e7ae552f29ebe4cc1"><div class="ttname"><a href="classfolly_1_1IOBuf.html#a9b1e73c46f54a34e7ae552f29ebe4cc1">folly::IOBuf::fillIov</a></div><div class="ttdeci">size_t fillIov(struct iovec *iov, size_t len) const </div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8cpp_source.html#l01072">IOBuf.cpp:1072</a></div></div>
<div class="ttc" id="classvector_html"><div class="ttname"><a href="classvector.html">vector</a></div><div class="ttdef"><b>Definition:</b> <a href="Traits_8h_source.html#l00588">Traits.h:588</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad8d98d29d9453d246fb19b525200eb29"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad8d98d29d9453d246fb19b525200eb29">folly::AsyncSocket::writeImpl</a></div><div class="ttdeci">void writeImpl(WriteCallback *callback, const iovec *vec, size_t count, std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, WriteFlags flags=WriteFlags::NONE)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01055">AsyncSocket.cpp:1055</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad8d98d29d9453d246fb19b525200eb29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::writeImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const iovec *&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em> = <code><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write as much data as possible to the socket without blocking, and queue up any leftover data to send when the socket can handle writes again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>The callback to invoke when the write is completed. </td></tr>
    <tr><td class="paramname">vec</td><td>Array of buffers to write; this method will make a copy of the vector (but not the buffers themselves) if the write has to be completed asynchronously. </td></tr>
    <tr><td class="paramname">count</td><td>Number of elements in vec. </td></tr>
    <tr><td class="paramname">buf</td><td>The <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> that manages the buffers referenced by vec, or a pointer to nullptr if the buffers are not associated with an <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a>. Note that ownership of the <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> is transferred here; upon completion of the write, the <a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a> deletes the <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a>. </td></tr>
    <tr><td class="paramname">flags</td><td>Set of write flags. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01055">1055</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l00924">addZeroCopyBuf()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00915">folly::AsyncSocket::WriteRequest::append()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01267">bufferCallback_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00567">connecting()</a>, <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a2df0082e7c38e408faf3875d0551883f">folly::AsyncSocket::WriteRequest::consume()</a>, <a class="el" href="EventBase_8h_source.html#l00520">folly::EventBase::dcheckIsInEventBaseThread()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">ESTABLISHED</a>, <a class="el" href="AsyncSocket_8h_source.html#l01240">eventBase_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01228">eventFlags_</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02642">failWrite()</a>, <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">FAST_OPEN</a>, <a class="el" href="AsyncSocket_8h_source.html#l01229">fd_</a>, <a class="el" href="AsyncSocketException_8h_source.html#l00037">folly::AsyncSocketException::INTERNAL_ERROR</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00905">isZeroCopyRequest()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00083">folly::AsyncSocket::BytesWriteRequest::newRequest()</a>, <a class="el" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#a8963ea807cfe24e9c8a94b2b494bb076">folly::AsyncTransport::BufferCallback::onEgressBuffered()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>, <a class="el" href="AsyncTimeout_8cpp_source.html#l00080">folly::AsyncTimeout::scheduleTimeout()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01233">sendTimeout_</a>, <a class="el" href="AsyncSocket_8h_source.html#l00966">SHUT_WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l00964">SHUT_WRITE_PENDING</a>, <a class="el" href="AsyncSocket_8h_source.html#l01227">shutdownFlags_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01226">state_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02814">withAddr()</a>, <a class="el" href="EventHandler_8h_source.html#l00044">folly::EventHandler::WRITE</a>, <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>, <a class="el" href="AsyncSocket_8h_source.html#l01251">writeReqTail_</a>, <a class="el" href="classfolly_1_1AsyncWriter_1_1WriteCallback.html#ad468270db1897c6b828640511bec12da">folly::AsyncWriter::WriteCallback::writeSuccess()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01241">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01003">write()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01045">writeChainImpl()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01014">writev()</a>.</p>
<div class="fragment"><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                      {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  VLOG(6) &lt;&lt; <span class="stringliteral">&quot;AsyncSocket::writev() this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, fd=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">fd_</a></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, callback=&quot;</span> &lt;&lt; callback &lt;&lt; <span class="stringliteral">&quot;, count=&quot;</span> &lt;&lt; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, state=&quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">state_</a>;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  unique_ptr&lt;IOBuf&gt; ioBuf(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(buf));</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">eventBase_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">dcheckIsInEventBaseThread</a>();</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">shutdownFlags_</a> &amp; (<a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">SHUT_WRITE</a> | <a class="code" href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">SHUT_WRITE_PENDING</a>)) {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">// No new writes may be performed after the write side of the socket has</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// been shutdown.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="comment">// We could just call callback-&gt;writeError() here to fail just this write.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// However, fail hard and use invalidState() to fail all outstanding</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// callbacks and move the socket into the error state.  There&#39;s most likely</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="comment">// a bug in the caller&#39;s code, so we abort everything rather than trying to</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">// proceed as best we can.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> countWritten = 0;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> partialWritten = 0;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  ssize_t bytesWritten = 0;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordtype">bool</span> mustRegister = <span class="keyword">false</span>;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordflow">if</span> ((state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a> || state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">StateEnum::FAST_OPEN</a>) &amp;&amp;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      !<a class="code" href="classfolly_1_1AsyncSocket.html#a93e67c068481e6f6786e3c5b24e737c9">connecting</a>()) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="comment">// If we are established and there are no other writes pending,</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="comment">// we can attempt to perform the write immediately.</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      assert(<a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>) == 0);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keyword">auto</span> writeResult = <a class="code" href="classfolly_1_1AsyncSocket.html#a35c95aae8d6578c1cf1ad443e2a420b4">performWrite</a>(</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;          <a class="code" href="classvector.html">vec</a>, <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>(<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>), <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>, &amp;countWritten, &amp;partialWritten);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      bytesWritten = writeResult.writeReturn;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">if</span> (bytesWritten &lt; 0) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keyword">auto</span> errnoCopy = errno;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordflow">if</span> (writeResult.exception) {</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, callback, 0, *writeResult.<a class="code" href="classWriteCallback.html#a6422986e4d3a9cb9b16ba1b54c7abf19">exception</a>);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        AsyncSocketException ex(</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;writev failed&quot;</span>),</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            errnoCopy);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, callback, 0, ex);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (countWritten == <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>) {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="comment">// done, add the whole buffer</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">if</span> (countWritten &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a2df177b0b6319bdda09875af3f240330">isZeroCopyRequest</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>)) {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82c507b8ef666e4cfc3c0a58babd701c">addZeroCopyBuf</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(ioBuf));</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="comment">// We successfully wrote everything.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="comment">// Invoke the callback and return.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">if</span> (callback) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;          callback-&gt;<a class="code" href="classWriteCallback.html#ad31fe1caa024d6ac14511cd2842d448d">writeSuccess</a>();</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">// continue writing the next writeReq</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="comment">// add just the ptr</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">if</span> (bytesWritten &amp;&amp; <a class="code" href="classfolly_1_1AsyncSocket.html#a2df177b0b6319bdda09875af3f240330">isZeroCopyRequest</a>(<a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>)) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a82c507b8ef666e4cfc3c0a58babd701c">addZeroCopyBuf</a>(ioBuf.get());</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a>) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;          <a class="code" href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">bufferCallback_</a>-&gt;<a class="code" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#a8963ea807cfe24e9c8a94b2b494bb076">onEgressBuffered</a>();</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a93e67c068481e6f6786e3c5b24e737c9">connecting</a>()) {</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="comment">// Writes might put the socket back into connecting state</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="comment">// if TFO is enabled, and using TFO fails.</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="comment">// This means that write timeouts would not be active, however</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="comment">// connect timeouts would affect this stage.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        mustRegister = <span class="keyword">true</span>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a93e67c068481e6f6786e3c5b24e737c9">connecting</a>()) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="comment">// Invalid state for writing</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">invalidState</a>(callback);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// Create a new WriteRequest to add to the queue</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  WriteRequest* req;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    req = <a class="code" href="classfolly_1_1AsyncSocket_1_1BytesWriteRequest.html#a803e5719bc5866da20cba87e92339ef1">BytesWriteRequest::newRequest</a>(</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="keyword">this</span>,</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        callback,</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <a class="code" href="classvector.html">vec</a> + countWritten,</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>(<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a> - countWritten),</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        partialWritten,</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>(bytesWritten),</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(ioBuf),</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; ex) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// we mainly expect to catch std::bad_alloc here</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    AsyncSocketException tex(</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;failed to append new WriteRequest: &quot;</span>) + ex.what()));</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, callback, <span class="keywordtype">size_t</span>(bytesWritten), tex);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  req-&gt;consume();</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    assert(<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> = req;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#ae952c0f4253f9a6087e53b861c90c825">append</a>(req);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> = req;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// Register for write events if are established and not currently</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// waiting on write events</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">if</span> (mustRegister) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">StateEnum::ESTABLISHED</a>);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    assert((<a class="code" href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">eventFlags_</a> &amp; <a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>) == 0);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">updateEventRegistration</a>(<a class="code" href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">EventHandler::WRITE</a>, 0)) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      assert(state_ == <a class="code" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">StateEnum::ERROR</a>);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a> &gt; 0) {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <span class="comment">// Schedule a timeout to fire if the write takes too long.</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">writeTimeout_</a>.<a class="code" href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">scheduleTimeout</a>(<a class="code" href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">sendTimeout_</a>)) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        AsyncSocketException ex(</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">AsyncSocketException::INTERNAL_ERROR</a>,</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            <a class="code" href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">withAddr</a>(<span class="stringliteral">&quot;failed to schedule send timeout&quot;</span>));</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">failWrite</a>(__func__, ex);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    }</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_1_1BytesWriteRequest_html_a803e5719bc5866da20cba87e92339ef1"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1BytesWriteRequest.html#a803e5719bc5866da20cba87e92339ef1">folly::AsyncSocket::BytesWriteRequest::newRequest</a></div><div class="ttdeci">static BytesWriteRequest * newRequest(AsyncSocket *socket, WriteCallback *callback, const iovec *ops, uint32_t opCount, uint32_t partialWritten, uint32_t bytesWritten, unique_ptr&lt; IOBuf &gt; &amp;&amp;ioBuf, WriteFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00083">AsyncSocket.cpp:83</a></div></div>
<div class="ttc" id="classWriteCallback_html_ad31fe1caa024d6ac14511cd2842d448d"><div class="ttname"><a href="classWriteCallback.html#ad31fe1caa024d6ac14511cd2842d448d">WriteCallback::writeSuccess</a></div><div class="ttdeci">void writeSuccess() noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00062">AsyncSocketTest.h:62</a></div></div>
<div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocketException_html_afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21"><div class="ttname"><a href="classfolly_1_1AsyncSocketException.html#afc42bb0d3857d67851aaf2c8e963c51bac3bb35289872760b785f06aa019eef21">folly::AsyncSocketException::INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketException_8h_source.html#l00037">AsyncSocketException.h:37</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a93e67c068481e6f6786e3c5b24e737c9"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a93e67c068481e6f6786e3c5b24e737c9">folly::AsyncSocket::connecting</a></div><div class="ttdeci">bool connecting() const override</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00567">AsyncSocket.h:567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82ad311206f8bda954e7b8f6363b6f08"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82ad311206f8bda954e7b8f6363b6f08">folly::AsyncSocket::withAddr</a></div><div class="ttdeci">std::string withAddr(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02814">AsyncSocket.cpp:2814</a></div></div>
<div class="ttc" id="classWriteCallback_html_a6422986e4d3a9cb9b16ba1b54c7abf19"><div class="ttname"><a href="classWriteCallback.html#a6422986e4d3a9cb9b16ba1b54c7abf19">WriteCallback::exception</a></div><div class="ttdeci">folly::AsyncSocketException exception</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocketTest_8h_source.html#l00083">AsyncSocketTest.h:83</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a2df177b0b6319bdda09875af3f240330"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a2df177b0b6319bdda09875af3f240330">folly::AsyncSocket::isZeroCopyRequest</a></div><div class="ttdeci">bool isZeroCopyRequest(WriteFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00905">AsyncSocket.cpp:905</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68ab5585fd6d166291ac35ff1a226658aa4">folly::AsyncSocket::StateEnum::FAST_OPEN</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a35c95aae8d6578c1cf1ad443e2a420b4"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a35c95aae8d6578c1cf1ad443e2a420b4">folly::AsyncSocket::performWrite</a></div><div class="ttdeci">virtual WriteResult performWrite(const iovec *vec, uint32_t count, WriteFlags flags, uint32_t *countWritten, uint32_t *partialWritten)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02387">AsyncSocket.cpp:2387</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad0e5779653171e26bbac4121442767a5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad0e5779653171e26bbac4121442767a5">folly::AsyncSocket::sendTimeout_</a></div><div class="ttdeci">uint32_t sendTimeout_</div><div class="ttdoc">The send timeout, in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01233">AsyncSocket.h:1233</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a18a97a140e9cf58a3b78cd29494c0cc7">folly::AsyncSocket::SHUT_WRITE_PENDING</a></div><div class="ttdoc">shutdownWrite() called, but we are still waiting on writes to drain </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00964">AsyncSocket.h:964</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac67b3fa56a6bb51e0cdfcd79c9e6587c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac67b3fa56a6bb51e0cdfcd79c9e6587c">folly::AsyncSocket::eventBase_</a></div><div class="ttdeci">EventBase * eventBase_</div><div class="ttdoc">The EventBase. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01240">AsyncSocket.h:1240</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a0eb85478207f92cc1b64512422ebc51a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a0eb85478207f92cc1b64512422ebc51a">folly::AsyncSocket::updateEventRegistration</a></div><div class="ttdeci">bool updateEventRegistration()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02480">AsyncSocket.cpp:2480</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad34f907ef4780c65f65f487fbb101ddb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">folly::AsyncSocket::writeReqTail_</a></div><div class="ttdeci">WriteRequest * writeReqTail_</div><div class="ttdoc">End of WriteRequest chain. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01251">AsyncSocket.h:1251</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5cf589f5b244f5919b524e25d9c6573c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5cf589f5b244f5919b524e25d9c6573c">folly::AsyncSocket::shutdownFlags_</a></div><div class="ttdeci">uint8_t shutdownFlags_</div><div class="ttdoc">Shutdown state (ShutdownFlags) </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01227">AsyncSocket.h:1227</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTransport_1_1BufferCallback_html_a8963ea807cfe24e9c8a94b2b494bb076"><div class="ttname"><a href="classfolly_1_1AsyncTransport_1_1BufferCallback.html#a8963ea807cfe24e9c8a94b2b494bb076">folly::AsyncTransport::BufferCallback::onEgressBuffered</a></div><div class="ttdeci">virtual void onEgressBuffered()=0</div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a5838613ef655ef0ad26ac6a27cfef4f3"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a5838613ef655ef0ad26ac6a27cfef4f3">folly::AsyncSocket::invalidState</a></div><div class="ttdeci">void invalidState(ConnectCallback *callback)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02676">AsyncSocket.cpp:2676</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_ae952c0f4253f9a6087e53b861c90c825"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#ae952c0f4253f9a6087e53b861c90c825">folly::AsyncSocket::WriteRequest::append</a></div><div class="ttdeci">void append(WriteRequest *next)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00915">AsyncSocket.h:915</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a11fb9807a3d991d80fe51070bb5a54e2"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a11fb9807a3d991d80fe51070bb5a54e2">folly::AsyncSocket::eventFlags_</a></div><div class="ttdeci">uint16_t eventFlags_</div><div class="ttdoc">EventBase::HandlerFlags settings. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01228">AsyncSocket.h:1228</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68abb1ca97ec761fc37101737ba0aa2e7c5">folly::AsyncSocket::StateEnum::ERROR</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a3ac33cc28156e4b2efe2fcd8d08545d7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a3ac33cc28156e4b2efe2fcd8d08545d7">folly::AsyncSocket::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdoc">A timeout for connect and write. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01241">AsyncSocket.h:1241</a></div></div>
<div class="ttc" id="classvector_html"><div class="ttname"><a href="classvector.html">vector</a></div><div class="ttdef"><b>Definition:</b> <a href="Traits_8h_source.html#l00588">Traits.h:588</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a42a80d7c0f6207dcaef1d84b7584d67d"><div class="ttname"><a href="classfolly_1_1EventBase.html#a42a80d7c0f6207dcaef1d84b7584d67d">folly::EventBase::dcheckIsInEventBaseThread</a></div><div class="ttdeci">void dcheckIsInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00520">EventBase.h:520</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68a7640f170af693e00a6c91df543aa2b76">folly::AsyncSocket::StateEnum::ESTABLISHED</a></div></div>
<div class="ttc" id="classfolly_1_1EventHandler_html_a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565"><div class="ttname"><a href="classfolly_1_1EventHandler.html#a03ecfc8fd68fa86b693c1e56148e862caa0e284efead463f0bb88c334f9635565">folly::EventHandler::WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="EventHandler_8h_source.html#l00044">EventHandler.h:44</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a1eb17e4de6bf77ab3213561220dfd32b"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a1eb17e4de6bf77ab3213561220dfd32b">folly::AsyncSocket::state_</a></div><div class="ttdeci">StateEnum state_</div><div class="ttdoc">StateEnum describing current state. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01226">AsyncSocket.h:1226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a021fe473fcb0935ed3e52926f601d6c7"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a021fe473fcb0935ed3e52926f601d6c7">folly::AsyncSocket::bufferCallback_</a></div><div class="ttdeci">BufferCallback * bufferCallback_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01267">AsyncSocket.h:1267</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a82c507b8ef666e4cfc3c0a58babd701c"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a82c507b8ef666e4cfc3c0a58babd701c">folly::AsyncSocket::addZeroCopyBuf</a></div><div class="ttdeci">void addZeroCopyBuf(std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l00924">AsyncSocket.cpp:924</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ac82bc5846ec324f7f7a44493ec5c0f48"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ac82bc5846ec324f7f7a44493ec5c0f48">folly::AsyncSocket::fd_</a></div><div class="ttdeci">int fd_</div><div class="ttdoc">The socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01229">AsyncSocket.h:1229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncTimeout_html_acb0b7716adfa30f6b0fd5261094d2228"><div class="ttname"><a href="classfolly_1_1AsyncTimeout.html#acb0b7716adfa30f6b0fd5261094d2228">folly::AsyncTimeout::scheduleTimeout</a></div><div class="ttdeci">bool scheduleTimeout(uint32_t milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncTimeout_8cpp_source.html#l00080">AsyncTimeout.cpp:80</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_abb6d052c065fe2d254e4b073d956f0fc"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#abb6d052c065fe2d254e4b073d956f0fc">folly::AsyncSocket::failWrite</a></div><div class="ttdeci">void failWrite(const char *fn, WriteCallback *callback, size_t bytesWritten, const AsyncSocketException &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02642">AsyncSocket.cpp:2642</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a8d9cabdff57a7baf4b652e7219ce5338a2510bc9d5e2b9043ea3980f54696c833">folly::AsyncSocket::SHUT_WRITE</a></div><div class="ttdoc">writes have been completely shut down </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00966">AsyncSocket.h:966</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abfde63b2a0e3be3fc2c4439a770d9480"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::writeRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a> *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01187">1187</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8h_source.html#l00915">folly::AsyncSocket::WriteRequest::append()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00893">folly::AsyncSocket::WriteRequest::start()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01250">writeReqHead_</a>, and <a class="el" href="AsyncSocket_8h_source.html#l01251">writeReqTail_</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00512">getZeroCopyReenableThreshold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                                                {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    assert(<a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">writeReqHead_</a> = <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> = req;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    req-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a890fe18f9df314c8c09f747f72933f10">start</a>();</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a>-&gt;<a class="code" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#ae952c0f4253f9a6087e53b861c90c825">append</a>(req);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">writeReqTail_</a> = req;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_ad34f907ef4780c65f65f487fbb101ddb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad34f907ef4780c65f65f487fbb101ddb">folly::AsyncSocket::writeReqTail_</a></div><div class="ttdeci">WriteRequest * writeReqTail_</div><div class="ttdoc">End of WriteRequest chain. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01251">AsyncSocket.h:1251</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_acd7789a2ae214e4841366cd78ade9b69"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#acd7789a2ae214e4841366cd78ade9b69">folly::AsyncSocket::writeReqHead_</a></div><div class="ttdeci">WriteRequest * writeReqHead_</div><div class="ttdoc">Chain of WriteRequests. </div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l01250">AsyncSocket.h:1250</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_ae952c0f4253f9a6087e53b861c90c825"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#ae952c0f4253f9a6087e53b861c90c825">folly::AsyncSocket::WriteRequest::append</a></div><div class="ttdeci">void append(WriteRequest *next)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00915">AsyncSocket.h:915</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_1_1WriteRequest_html_a890fe18f9df314c8c09f747f72933f10"><div class="ttname"><a href="classfolly_1_1AsyncSocket_1_1WriteRequest.html#a890fe18f9df314c8c09f747f72933f10">folly::AsyncSocket::WriteRequest::start</a></div><div class="ttdeci">virtual void start()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00893">AsyncSocket.h:893</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a16a784b390370ae40c9dd9f556d22f68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::writeRequestReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00535">535</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01324">closeWithReset()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01496">error()</a>, <a class="el" href="AsyncTransport_8h_source.html#l00346">folly::AsyncTransport::getLocalAddress()</a>, <a class="el" href="AsyncTransport_8h_source.html#l00375">folly::AsyncTransport::getPeerAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01489">good()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01471">hangup()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01537">isDetachable()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01467">isPending()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01443">readable()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01339">shutdownWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01455">writable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                           {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">handleWrite</a>();</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html_a607fe5f9fbd872861a9506fef684b12a"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a607fe5f9fbd872861a9506fef684b12a">folly::AsyncSocket::handleWrite</a></div><div class="ttdeci">virtual void handleWrite() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l02019">AsyncSocket.cpp:2019</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a37e6b5f6ace50cddbea0a5bfb645511c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncSocket::writev </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a847bd8d65ee57ded38abb8c9b4c4be06">WriteCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const iovec *&#160;</td>
          <td class="paramname"><em>vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7">WriteFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em> = <code><a class="el" href="namespacefolly.html#a268239ef872bd1f7025dca14313f5fc7ab50339a10e1de285ac99d4c3990b8693">WriteFlags::NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If you supply a non-null <a class="el" href="classWriteCallback.html">WriteCallback</a>, exactly one of writeSuccess() or writeErr() will be invoked when the write completes. If you supply the same <a class="el" href="classWriteCallback.html">WriteCallback</a> object for multiple <a class="el" href="classfolly_1_1AsyncSocket.html#a8843e77dfee583e3da4f4e5649acd3e4">write()</a> calls, it will be invoked exactly once per call. The only way to cancel outstanding write requests is to close the socket (e.g., with <a class="el" href="classfolly_1_1AsyncSocket.html#a09c88d174fd0d7a87040d8db72e54862">closeNow()</a> or <a class="el" href="classfolly_1_1AsyncSocket.html#ae4fe34feba854c83cbb8665c0efd1053">shutdownWriteNow()</a>). When closing the socket this way, writeErr() will still be invoked once for each outstanding write operation. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncTransportWrapper.html#ae19f9fe6299024287e4ec8c47e0935ef">folly::AsyncTransportWrapper</a>.</p>

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l01014">1014</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>

<p>References <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00512">getZeroCopyReenableThreshold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                      {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <a class="code" href="classfolly_1_1AsyncSocket.html#ad8d98d29d9453d246fb19b525200eb29">writeImpl</a>(callback, <a class="code" href="classvector.html">vec</a>, <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>, unique_ptr&lt;IOBuf&gt;(), <a class="code" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div><div class="ttc" id="http__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8h_source.html#l00127">http_parser.h:127</a></div></div>
<div class="ttc" id="classvector_html"><div class="ttname"><a href="classvector.html">vector</a></div><div class="ttdef"><b>Definition:</b> <a href="Traits_8h_source.html#l00588">Traits.h:588</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_ad8d98d29d9453d246fb19b525200eb29"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#ad8d98d29d9453d246fb19b525200eb29">folly::AsyncSocket::writeImpl</a></div><div class="ttdeci">void writeImpl(WriteCallback *callback, const iovec *vec, size_t count, std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, WriteFlags flags=WriteFlags::NONE)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8cpp_source.html#l01055">AsyncSocket.cpp:1055</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a3f1f5f6ed57460ff419047d771081702"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68">StateEnum</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8cpp_source.html#l02807">2807</a> of file <a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;                                       {</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  os &lt;&lt; static_cast&lt;int&gt;(<a class="code" href="http__parser_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>);</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="keywordflow">return</span> os;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;}</div><div class="ttc" id="http__parser_8c_html_adc6e5733fc3c22f0a7b2914188c49c90"><div class="ttname"><a href="http__parser_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a></div><div class="ttdeci">state</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8c_source.html#l00272">http_parser.c:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3e1b028124db5daf901e095f21a3f053"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> folly::AsyncSocket::addr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The address we tried to connect to. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01230">1230</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01564">cachePeerAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02569">fail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02619">failWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01580">getPeerAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a603a263c372b9611b611f6525f5415e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::appBytesReceived_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Num of bytes received from socket. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01253">1253</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00591">getAppBytesReceived()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01380">folly::AsyncSSLSocket::performRead()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01764">performRead()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b0d2fa902cb3aac97142a58580bbd27"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::appBytesWritten_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Num of bytes written to socket. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01254">1254</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01651">folly::AsyncSSLSocket::eorAwareSSLWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00583">getAppBytesWritten()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="a021fe473fcb0935ed3e52926f601d6c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncTransport_1_1BufferCallback.html">BufferCallback</a>* folly::AsyncSocket::bufferCallback_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01267">1267</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02829">setBufferCallback()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c7b2e4603cfb8308254b06df795bd87"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a>* folly::AsyncSocket::connectCallback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classfolly_1_1AsyncSocket_1_1ConnectCallback.html">ConnectCallback</a>. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01245">1245</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00659">cancelConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02730">invokeConnectErr()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02739">invokeConnectSuccess()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01306">folly::AsyncSSLSocket::scheduleConnectTimeout()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>.</p>

</div>
</div>
<a class="anchor" id="a978a6b1e49cab71a0282771d71b58330"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::steady_clock::time_point folly::AsyncSocket::connectEndTime_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01261">1261</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00611">getConnectEndTime()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00599">getConnectTime()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02730">invokeConnectErr()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02739">invokeConnectSuccess()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ee9c5b4e48ce86e5d0459243a04f106"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::steady_clock::time_point folly::AsyncSocket::connectStartTime_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01260">1260</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00607">getConnectStartTime()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00599">getConnectTime()</a>.</p>

</div>
</div>
<a class="anchor" id="a480eeb96732defcff38a160fcd75bd5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds folly::AsyncSocket::connectTimeout_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01263">1263</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00603">getConnectTimeout()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01306">folly::AsyncSSLSocket::scheduleConnectTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00617">scheduleConnectTimeout()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>.</p>

</div>
</div>
<a class="anchor" id="a5bc92a7d9a26f853da734a4d1793c95a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">AsyncSocket::OptionMap</a> folly::AsyncSocket::emptyOptionMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l00378">378</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8h_source.html#l00330">folly::AsyncSSLSocket::getSecurityProtocol()</a>, and <a class="el" href="HTTPConnector_8h_source.html#l00040">proxygen::HTTPConnector::Callback::~Callback()</a>.</p>

</div>
</div>
<a class="anchor" id="a8cd2284b5c3231a222d1e437bf653a92"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1ErrMessageCallback.html">ErrMessageCallback</a>* folly::AsyncSocket::errMessageCallback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>TimestampCallback. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01246">1246</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00756">getErrMessageCallback()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a7a199fbc05606dc14ec10938cc917e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classfolly_1_1AsyncSocket_1_1EvbChangeCallback.html">EvbChangeCallback</a>&gt; folly::AsyncSocket::evbChangeCb_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01265">1265</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00810">setEvbChangedCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="ac67b3fa56a6bb51e0cdfcd79c9e6587c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1EventBase.html">EventBase</a>* folly::AsyncSocket::eventBase_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="classfolly_1_1EventBase.html">EventBase</a>. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01240">1240</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00364">destroy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00328">getEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01489">good()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01209">folly::AsyncSSLSocket::handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01155">folly::AsyncSSLSocket::handleReturnFromSSLAccept()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01537">isDetachable()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01570">isZeroCopyWriteInProgress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01870">processZeroCopyWriteInProgress()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01031">scheduleImmediateRead()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01040">scheduleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01339">shutdownWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00461">folly::AsyncSSLSocket::sslAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00753">folly::AsyncSSLSocket::sslConn()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00971">folly::AsyncSSLSocket::willBlock()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00358">~AsyncSocket()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00311">folly::AsyncSSLSocket::~AsyncSSLSocket()</a>.</p>

</div>
</div>
<a class="anchor" id="a11fb9807a3d991d80fe51070bb5a54e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> folly::AsyncSocket::eventFlags_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>EventBase::HandlerFlags settings. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01228">1228</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01108">folly::AsyncSSLSocket::handleAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01209">folly::AsyncSSLSocket::handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01357">folly::AsyncSSLSocket::handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01155">folly::AsyncSSLSocket::handleReturnFromSSLAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01449">folly::AsyncSSLSocket::handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01473">folly::AsyncSSLSocket::interpretSSLError()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00438">folly::AsyncSSLSocket::invalidState()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01380">folly::AsyncSSLSocket::performRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01501">folly::AsyncSSLSocket::performWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00630">registerForConnectEvents()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01084">folly::AsyncSSLSocket::restartSSLAccept()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00971">folly::AsyncSSLSocket::willBlock()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00311">folly::AsyncSSLSocket::~AsyncSSLSocket()</a>.</p>

</div>
</div>
<a class="anchor" id="ac82bc5846ec324f7f7a44493ec5c0f48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncSocket::fd_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The socket file descriptor. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01229">1229</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00312">AsyncSocket()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01544">cacheAddresses()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01558">cacheLocalAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01564">cachePeerAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00327">folly::AsyncSSLSocket::closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01324">closeWithReset()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00364">destroy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02569">fail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02619">failWrite()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00335">getFd()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00714">getSockOpt()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00743">getSockOptVirtual()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01585">getTFOSucceded()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01108">folly::AsyncSSLSocket::handleAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01209">folly::AsyncSSLSocket::handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01357">folly::AsyncSSLSocket::handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01155">folly::AsyncSSLSocket::handleReturnFromSSLAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01449">folly::AsyncSSLSocket::handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01471">hangup()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01473">folly::AsyncSSLSocket::interpretSSLError()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00438">folly::AsyncSSLSocket::invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01380">folly::AsyncSSLSocket::performRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01764">performRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01501">folly::AsyncSSLSocket::performWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00981">processZeroCopyMsg()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01443">readable()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01084">folly::AsyncSSLSocket::restartSSLAccept()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00420">setCloseOnExec()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01608">setCongestionFlavor()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01589">setNoDelay()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01635">setQuickAck()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01677">setRecvBufSize()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01659">setSendBufSize()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00400">setShutdownSocketSet()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00727">setSockOpt()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00758">setSockOptVirtual()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01695">setTCPProfile()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00740">folly::AsyncSSLSocket::setupSSLBio()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00860">setZeroCopy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01339">shutdownWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00600">socketConnect()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00753">folly::AsyncSSLSocket::sslConn()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00971">folly::AsyncSSLSocket::willBlock()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01455">writable()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00358">~AsyncSocket()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00311">folly::AsyncSSLSocket::~AsyncSSLSocket()</a>.</p>

</div>
</div>
<a class="anchor" id="aad93a27de08b4923ac10d47852b8b91a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>*, <a class="el" href="structfolly_1_1AsyncSocket_1_1IOBufInfo.html">IOBufInfo</a>&gt; folly::AsyncSocket::idZeroCopyBufInfoMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01224">1224</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00924">addZeroCopyBuf()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00963">containsZeroCopyBuf()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00942">releaseZeroCopyBuf()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00955">setZeroCopyBuf()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7c8deddc31b2526738304413c014f9a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>, <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>*&gt; folly::AsyncSocket::idZeroCopyBufPtrMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01223">1223</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00924">addZeroCopyBuf()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01570">isZeroCopyWriteInProgress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01870">processZeroCopyWriteInProgress()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00942">releaseZeroCopyBuf()</a>.</p>

</div>
</div>
<a class="anchor" id="a6afc3c01f58b7d7b06af81267da854fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1ImmediateReadCB.html">ImmediateReadCB</a> folly::AsyncSocket::immediateReadHandler_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>LoopCallback for checking read. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01243">1243</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8h_source.html#l01031">scheduleImmediateRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>.</p>

</div>
</div>
<a class="anchor" id="a44cd7e00ca56a32008c4a9f7df9a7b3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1IoHandler.html">IoHandler</a> folly::AsyncSocket::ioHandler_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="structA.html">A</a> <a class="el" href="classfolly_1_1EventHandler.html">EventHandler</a> to monitor the fd. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01242">1242</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01467">isPending()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00630">registerForConnectEvents()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>.</p>

</div>
</div>
<a class="anchor" id="a6af9d40372da8d8ef78e3dc541ce3c95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::isBufferMovable_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01236">1236</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01380">folly::AsyncSSLSocket::performRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01346">folly::AsyncSSLSocket::prepareReadBuffer()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01328">folly::AsyncSSLSocket::setReadCB()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9a3ba327f65d68c592f0a27cc87997b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> folly::AsyncSocket::localAddr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The address we are connecting from. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01231">1231</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01558">cacheLocalAddress()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01575">getLocalAddress()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>.</p>

</div>
</div>
<a class="anchor" id="a13e6267a58606637f16040dc92a906d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> folly::AsyncSocket::maxReadsPerEvent_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Max reads per event loop iteration. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01234">1234</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00463">getMaxReadsPerEvent()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00451">setMaxReadsPerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="af11e1c5946f6867e200b742a7a9ec81d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::noTransparentTls_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01271">1271</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00312">AsyncSocket()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00239">folly::AsyncSSLSocket::AsyncSSLSocket()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00692">folly::AsyncSSLSocket::connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00789">disableTransparentTls()</a>.</p>

</div>
</div>
<a class="anchor" id="ae0822f5996b63b8dff24b72462051f21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::noTSocks_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01272">1272</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00312">AsyncSocket()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00793">disableTSocks()</a>.</p>

</div>
</div>
<a class="anchor" id="a3907234f141981d565e4b4b0fec76827"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a>&gt; folly::AsyncSocket::peerCertData_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">      <span class="keyword">nullptr</span>}</div></div><!-- fragment -->
<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01282">1282</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00935">folly::AsyncSSLSocket::getPeerCertificate()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00837">getPeerCertificate()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00833">setPeerCertificate()</a>.</p>

</div>
</div>
<a class="anchor" id="a6344043cf39ccd7cbb4f200d5f983fcd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a>&gt; folly::AsyncSocket::preReceivedData_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01258">1258</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00327">AsyncSocket()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02147">checkForImmediateRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01764">performRead()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00770">setPreReceivedData()</a>.</p>

</div>
</div>
<a class="anchor" id="a906f90d8df2c070c588c5a9d82bb4044"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#a2245452bbe2d83579c30d5351e232590">ReadCallback</a>* folly::AsyncSocket::readCallback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classfolly_1_1ReadCallback.html">ReadCallback</a>. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01249">1249</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00856">getReadCallback()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02542">invokeAllErrors()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01346">folly::AsyncSSLSocket::prepareReadBuffer()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01798">prepareReadBuffer()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>.</p>

</div>
</div>
<a class="anchor" id="a656f40d4509ba634aea8934e06767ace"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a20c38cc5aac7cc6b0a3c6ab05428436d">int8_t</a> folly::AsyncSocket::readErr_ {<a class="el" href="classfolly_1_1AsyncSocket.html#a877dd6091ffe3c2d56fab4a550aba3bba14a73b401bf2064b1381b9109c295c39">READ_NO_ERROR</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The read error encountered, if any. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01238">1238</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00571">isClosedByPeer()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00577">isClosedBySelf()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9d64cd70c3ace2aaed6c7bac1569801"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;const <a class="el" href="classfolly_1_1AsyncTransportCertificate.html">AsyncTransportCertificate</a>&gt; folly::AsyncSocket::selfCertData_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">      <span class="keyword">nullptr</span>}</div></div><!-- fragment -->
<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01284">1284</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00950">folly::AsyncSSLSocket::getSelfCertificate()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00846">getSelfCertificate()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00841">setSelfCertificate()</a>.</p>

</div>
</div>
<a class="anchor" id="abe7dadc0ca3105ab63508cbc033e85f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1SendMsgParamsCallback.html">SendMsgParamsCallback</a>* folly::AsyncSocket::sendMsgParamCallback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&lt; Callback for retrieving </p>
<p><a class="el" href="namespacefolly_1_1netops.html#a1a77b634158e087042857cbcb04ee7c2">sendmsg()</a> parameters </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01248">1248</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00764">getSendMsgParamsCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00760">setSendMsgParamCB()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0e5779653171e26bbac4121442767a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> folly::AsyncSocket::sendTimeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The send timeout, in milliseconds. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01233">1233</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00437">getSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cf589f5b244f5919b524e25d9c6573c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> folly::AsyncSocket::shutdownFlags_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shutdown state (ShutdownFlags) </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01227">1227</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01489">good()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01339">shutdownWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a1eb17e4de6bf77ab3213561220dfd32b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket.html#a583098b445359f76611ffa98b2455a68">StateEnum</a> folly::AsyncSocket::state_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>StateEnum describing current state. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01226">1226</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00312">AsyncSocket()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00659">cancelConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00692">folly::AsyncSSLSocket::connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00567">connecting()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00364">destroy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01496">error()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02569">fail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02577">failConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02602">failErrMessageRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02587">failRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02619">failWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02553">finishFail()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01489">good()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01108">folly::AsyncSSLSocket::handleAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01209">folly::AsyncSSLSocket::handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01804">handleErrMessages()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01357">folly::AsyncSSLSocket::handleRead()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01881">handleRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01155">folly::AsyncSSLSocket::handleReturnFromSSLAccept()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01449">folly::AsyncSSLSocket::handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01473">folly::AsyncSSLSocket::interpretSSLError()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00438">folly::AsyncSSLSocket::invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02676">invalidState()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01713">ioReady()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00571">isClosedByPeer()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00577">isClosedBySelf()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01380">folly::AsyncSSLSocket::performRead()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01501">folly::AsyncSSLSocket::performWrite()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01084">folly::AsyncSSLSocket::restartSSLAccept()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01608">setCongestionFlavor()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00691">setErrMessageCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01589">setNoDelay()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01635">setQuickAck()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00768">setReadCB()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01677">setRecvBufSize()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01659">setSendBufSize()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01695">setTCPProfile()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01339">shutdownWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, <a class="el" href="MockAsyncSSLSocket_8h_source.html#l00079">folly::test::MockAsyncSSLSocket::sslAccept()</a>, <a class="el" href="MockAsyncSSLSocket_8h_source.html#l00064">folly::test::MockAsyncSSLSocket::sslConn()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00609">folly::AsyncSSLSocket::timeoutExpired()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02285">timeoutExpired()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02480">updateEventRegistration()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00971">folly::AsyncSSLSocket::willBlock()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00358">~AsyncSocket()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l00311">folly::AsyncSSLSocket::~AsyncSSLSocket()</a>.</p>

</div>
</div>
<a class="anchor" id="aabfb1f8f218b83c041ff22df6ba9584b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::tfoAttempted_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01269">1269</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00615">getTFOAttempted()</a>, and <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01294">folly::AsyncSSLSocket::invokeConnectSuccess()</a>.</p>

</div>
</div>
<a class="anchor" id="aef0a936550b62f3ead97f33b0b5fdd40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::tfoEnabled_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01268">1268</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00782">enableTFO()</a>.</p>

</div>
</div>
<a class="anchor" id="acf23078ee5e1b8f6f27820d418d2b8e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::tfoFinished_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01270">1270</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00625">getTFOFinished()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02321">sendSocketMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a26ff0294ace9883cce16a3cc414c79eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::trackEor_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01274">1274</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00559">isEorTrackingEnabled()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00563">setEorTracking()</a>.</p>

</div>
</div>
<a class="anchor" id="acd7789a2ae214e4841366cd78ade9b69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a>* folly::AsyncSocket::writeReqHead_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Chain of WriteRequests. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01250">1250</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01198">close()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02661">failAllWrites()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02619">failWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02169">handleInitialReadWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01339">shutdownWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01187">writeRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="ad34f907ef4780c65f65f487fbb101ddb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a>* folly::AsyncSocket::writeReqTail_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>End of <a class="el" href="classfolly_1_1AsyncSocket_1_1WriteRequest.html">WriteRequest</a> chain. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01251">1251</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01187">writeRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ac33cc28156e4b2efe2fcd8d08545d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket_1_1WriteTimeout.html">WriteTimeout</a> folly::AsyncSocket::writeTimeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="structA.html">A</a> timeout for connect and write. </p>

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01241">1241</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l01500">attachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01252">closeNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01519">detachEventBase()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02206">handleConnect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02019">handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01537">isDetachable()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00617">scheduleConnectTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00666">setSendTimeout()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01358">shutdownWriteNow()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02516">startFail()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l01055">writeImpl()</a>.</p>

</div>
</div>
<a class="anchor" id="a6378c8d2f69abec78df8c2d5256710cf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::weak_ptr&lt;<a class="el" href="classfolly_1_1ShutdownSocketSet.html">ShutdownSocketSet</a>&gt; folly::AsyncSocket::wShutdownSocketSet_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01252">1252</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00375">detachFd()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02790">doClose()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00337">init()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00400">setShutdownSocketSet()</a>.</p>

</div>
</div>
<a class="anchor" id="a185c4e793feab0b51a786611cc3173af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> folly::AsyncSocket::zeroCopyBufId_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01216">1216</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l01202">getNextZeroCopyBufId()</a>, and <a class="el" href="AsyncSocket_8h_source.html#l00508">getZeroCopyBufId()</a>.</p>

</div>
</div>
<a class="anchor" id="ad99736e9c89e1cf75d27defb5476c0bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::zeroCopyEnabled_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01275">1275</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00909">adjustZeroCopyFlags()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00504">getZeroCopy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00905">isZeroCopyRequest()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00981">processZeroCopyMsg()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00860">setZeroCopy()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d60076e9e2951c3406b01eaf65e0646"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::zeroCopyReenableCounter_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01279">1279</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00909">adjustZeroCopyFlags()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="a078418769fa327ad592f58e115f65fca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncSocket::zeroCopyReenableThreshold_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01278">1278</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8h_source.html#l00512">getZeroCopyReenableThreshold()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l02387">performWrite()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00901">setZeroCopyReenableThreshold()</a>.</p>

</div>
</div>
<a class="anchor" id="ad86ca763673ec724504693c6445a9c16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::AsyncSocket::zeroCopyVal_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncSocket_8h_source.html#l01276">1276</a> of file <a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncSocket_8cpp_source.html#l00431">connect()</a>, and <a class="el" href="AsyncSocket_8cpp_source.html#l00860">setZeroCopy()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/io/async/<a class="el" href="AsyncSocket_8h_source.html">AsyncSocket.h</a></li>
<li>proxygen/folly/folly/io/async/<a class="el" href="AsyncSocket_8cpp_source.html">AsyncSocket.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
