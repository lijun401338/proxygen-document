<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::futures Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacefolly_1_1futures.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">folly::futures Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacefolly_1_1futures_1_1detail"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures_1_1detail.html">detail</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacefolly_1_1futures_1_1test"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures_1_1test.html">test</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1futures_1_1Barrier.html">Barrier</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a358535124c503905f6a36cb3428f3543"><td class="memTemplParams" colspan="2">template&lt;class It , class F , class ItT , class Result &gt; </td></tr>
<tr class="memitem:a358535124c503905f6a36cb3428f3543"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classfolly_1_1Future.html">Future</a>&lt; Result &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#a358535124c503905f6a36cb3428f3543">map</a> (It first, It last, F func)</td></tr>
<tr class="separator:a358535124c503905f6a36cb3428f3543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c3751adde3d843148ce5a9d4f2116a"><td class="memTemplParams" colspan="2">template&lt;class It , class F , class ItT , class Result &gt; </td></tr>
<tr class="memitem:ab0c3751adde3d843148ce5a9d4f2116a"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classfolly_1_1Future.html">Future</a>&lt; Result &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#ab0c3751adde3d843148ce5a9d4f2116a">map</a> (<a class="el" href="classfolly_1_1Executor.html">Executor</a> &amp;exec, It first, It last, F func)</td></tr>
<tr class="separator:ab0c3751adde3d843148ce5a9d4f2116a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4562a876ed28c23e98c168f553280c7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1Future.html">Future</a>&lt; <a class="el" href="structfolly_1_1Unit.html">Unit</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#a4562a876ed28c23e98c168f553280c7a">sleep</a> (<a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a> dur, <a class="el" href="classfolly_1_1Timekeeper.html">Timekeeper</a> *tk)</td></tr>
<tr class="separator:a4562a876ed28c23e98c168f553280c7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6383b29b8516a3a89d511c18f559dc41"><td class="memTemplParams" colspan="2">template&lt;class Collection , class F &gt; </td></tr>
<tr class="memitem:a6383b29b8516a3a89d511c18f559dc41"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#a6383b29b8516a3a89d511c18f559dc41">map</a> (Collection &amp;&amp;<a class="el" href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a>, F &amp;&amp;func) -&gt; decltype(<a class="el" href="classmap.html">map</a>(c.begin(), c.end(), func))</td></tr>
<tr class="separator:a6383b29b8516a3a89d511c18f559dc41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3abb0a4ff99f9c1f08e36da503acc0a"><td class="memTemplParams" colspan="2">template&lt;class Collection , class F &gt; </td></tr>
<tr class="memitem:ac3abb0a4ff99f9c1f08e36da503acc0a"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#ac3abb0a4ff99f9c1f08e36da503acc0a">map</a> (<a class="el" href="classfolly_1_1Executor.html">Executor</a> &amp;exec, Collection &amp;&amp;<a class="el" href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a>, F &amp;&amp;func) -&gt; decltype(<a class="el" href="classmap.html">map</a>(exec, c.begin(), c.end(), func))</td></tr>
<tr class="separator:ac3abb0a4ff99f9c1f08e36da503acc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f1b8c3cf11ac69dfa52f7d8eb241855"><td class="memTemplParams" colspan="2">template&lt;class Policy , class FF &gt; </td></tr>
<tr class="memitem:a3f1b8c3cf11ac69dfa52f7d8eb241855"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespacefolly.html#a959935d9eb6cce6bd25049997b200b93">invoke_result_t</a>&lt; FF, size_t &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#a3f1b8c3cf11ac69dfa52f7d8eb241855">retrying</a> (Policy &amp;&amp;p, FF &amp;&amp;ff)</td></tr>
<tr class="separator:a3f1b8c3cf11ac69dfa52f7d8eb241855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae366d690f37a32b65e291733cb781c2d"><td class="memItemLeft" align="right" valign="top">std::function&lt; bool(size_t, const <a class="el" href="classfolly_1_1exception__wrapper.html">exception_wrapper</a> &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#ae366d690f37a32b65e291733cb781c2d">retryingPolicyBasic</a> (size_t max_tries)</td></tr>
<tr class="separator:ae366d690f37a32b65e291733cb781c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88cfeb974fe0c99db61acd1d2f454c9d"><td class="memTemplParams" colspan="2">template&lt;class Policy , class URNG &gt; </td></tr>
<tr class="memitem:a88cfeb974fe0c99db61acd1d2f454c9d"><td class="memTemplItemLeft" align="right" valign="top">std::function&lt; <a class="el" href="classfolly_1_1Future.html">Future</a>&lt; bool &gt;size_t, const <a class="el" href="classfolly_1_1exception__wrapper.html">exception_wrapper</a> &amp;)&gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#a88cfeb974fe0c99db61acd1d2f454c9d">retryingPolicyCappedJitteredExponentialBackoff</a> (size_t max_tries, <a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a> backoff_min, <a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a> backoff_max, double jitter_param, URNG &amp;&amp;<a class="el" href="FBStringBenchmark_8cpp.html#ab66adb5e852db03f1992cca3f5357054">rng</a>, Policy &amp;&amp;p)</td></tr>
<tr class="separator:a88cfeb974fe0c99db61acd1d2f454c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65793ae9aee423e657594271d5aaf124"><td class="memItemLeft" align="right" valign="top">std::function&lt; <a class="el" href="classfolly_1_1Future.html">Future</a>&lt; bool &gt;size_t, const <a class="el" href="classfolly_1_1exception__wrapper.html">exception_wrapper</a> &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefolly_1_1futures.html#a65793ae9aee423e657594271d5aaf124">retryingPolicyCappedJitteredExponentialBackoff</a> (size_t max_tries, <a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a> backoff_min, <a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a> backoff_max, double jitter_param)</td></tr>
<tr class="separator:a65793ae9aee423e657594271d5aaf124"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This namespace is for utility functions that would usually be static members of <a class="el" href="classfolly_1_1Future.html">Future</a>, except they don't make sense there because they don't depend on the template type (rather, on the type of their arguments in some cases). This is the least-bad naming scheme we could think of. Some of the functions herein have really-likely-to-collide names, like "map" and "sleep". </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6383b29b8516a3a89d511c18f559dc41"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Collection , class F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto folly::futures::map </td>
          <td>(</td>
          <td class="paramtype">Collection &amp;&amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; decltype(<a class="el" href="classmap.html">map</a>(c.begin(), c.end(), func)) </td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="helpers_8h_source.html#l00078">78</a> of file <a class="el" href="helpers_8h_source.html">helpers.h</a>.</p>

<p>References <a class="el" href="OptionalTest_8cpp_source.html#l00053">c</a>, and <a class="el" href="Future-inl_8h_source.html#l02358">map()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                                                              {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="PackedSyncPtrTest_8cpp.html#a2a761d9ec8bcdc907b3e45a3ba097c32">map</a>(<a class="code" href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a>.begin(), <a class="code" href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a>.end(), std::forward&lt;F&gt;(func));</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div><div class="ttc" id="PackedSyncPtrTest_8cpp_html_a2a761d9ec8bcdc907b3e45a3ba097c32"><div class="ttname"><a href="PackedSyncPtrTest_8cpp.html#a2a761d9ec8bcdc907b3e45a3ba097c32">map</a></div><div class="ttdeci">static Map map(mapCap)</div></div>
<div class="ttc" id="OptionalTest_8cpp_html_adc08ed1554f35803d229aeaf11216b3f"><div class="ttname"><a href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a></div><div class="ttdeci">char c</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3abb0a4ff99f9c1f08e36da503acc0a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Collection , class F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto folly::futures::map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Executor.html">Executor</a> &amp;&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Collection &amp;&amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; decltype(<a class="el" href="classmap.html">map</a>(exec, c.begin(), c.end(), func)) </td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="helpers_8h_source.html#l00084">84</a> of file <a class="el" href="helpers_8h_source.html">helpers.h</a>.</p>

<p>References <a class="el" href="OptionalTest_8cpp_source.html#l00053">c</a>, <a class="el" href="Future-inl_8h_source.html#l01441">folly::collectAllSemiFuture()</a>, <a class="el" href="extension__points_8h_source.html#l00359">folly::pushmi::executor</a>, <a class="el" href="Base-inl_8h_source.html#l02553">folly::gen::first</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00176">int8_t</a>, <a class="el" href="Future-inl_8h_source.html#l01310">folly::makeFuture()</a>, <a class="el" href="Future-inl_8h_source.html#l01322">folly::makeFutureWith()</a>, <a class="el" href="Future-inl_8h_source.html#l00712">folly::makeSemiFuture()</a>, <a class="el" href="Future-inl_8h_source.html#l00721">folly::makeSemiFutureWith()</a>, <a class="el" href="Future-inl_8h_source.html#l02358">map()</a>, <a class="el" href="Executor_8h_source.html#l00049">folly::Executor::MID_PRI</a>, <a class="el" href="extension__operators_8h_source.html#l00048">folly::pushmi::detail::t</a>, <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">folly::T</a>, <a class="el" href="ClientProtocol_8cpp_source.html#l00777">type</a>, <a class="el" href="Conv_8cpp_source.html#l00050">value</a>, <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>, and <a class="el" href="Future-inl_8h_source.html#l01290">folly::via()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                     {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="PackedSyncPtrTest_8cpp.html#a2a761d9ec8bcdc907b3e45a3ba097c32">map</a>(exec, <a class="code" href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a>.begin(), <a class="code" href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a>.end(), std::forward&lt;F&gt;(func));</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="ttc" id="PackedSyncPtrTest_8cpp_html_a2a761d9ec8bcdc907b3e45a3ba097c32"><div class="ttname"><a href="PackedSyncPtrTest_8cpp.html#a2a761d9ec8bcdc907b3e45a3ba097c32">map</a></div><div class="ttdeci">static Map map(mapCap)</div></div>
<div class="ttc" id="OptionalTest_8cpp_html_adc08ed1554f35803d229aeaf11216b3f"><div class="ttname"><a href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a></div><div class="ttdeci">char c</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a358535124c503905f6a36cb3428f3543"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class It , class F , class ItT , class Result &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classfolly_1_1Future.html">Future</a>&lt; Result &gt; &gt; folly::futures::map </td>
          <td>(</td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set func as the callback for each input <a class="el" href="classfolly_1_1Future.html">Future</a> and return a vector of Futures containing the results in the input order. </p>

<p>Definition at line <a class="el" href="Future-inl_8h_source.html#l02358">2358</a> of file <a class="el" href="Future-inl_8h_source.html">Future-inl.h</a>.</p>

<p>References <a class="el" href="Portability_8h_source.html#l00180">FOLLY_GNU_DISABLE_WARNING</a>, <a class="el" href="Portability_8h_source.html#l00179">FOLLY_POP_WARNING</a>, <a class="el" href="Portability_8h_source.html#l00178">FOLLY_PUSH_WARNING</a>, and <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>

<p>Referenced by <a class="el" href="futures_2test_2Benchmark_8cpp_source.html#l00362">complexBenchmark()</a>, <a class="el" href="helpers_8h_source.html#l00078">map()</a>, and <a class="el" href="MapTest_8cpp_source.html#l00022">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                                                         {</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  std::vector&lt;Future&lt;Result&gt;&gt; results;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  results.reserve(std::distance(<a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a>, last));</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a>; it != last; it++) {</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <a class="code" href="Portability_8h.html#a7f4463769c98ffb786751dd9946773df">FOLLY_PUSH_WARNING</a></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <a class="code" href="Portability_8h.html#aa315a0e3a3286458420df4e74d1b3e6f">FOLLY_GNU_DISABLE_WARNING</a>(<span class="stringliteral">&quot;-Wdeprecated-declarations&quot;</span>)</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    results.<a class="code" href="FBStringTestBenchmarks_8cpp_8h.html#ae6d05b4daacde7ac0b0e4fed9afb2d83">push_back</a>(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">move</a>(*it).then(func));</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <a class="code" href="Portability_8h.html#a4a2f173e1bec794aa19364144948180d">FOLLY_POP_WARNING</a></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  }</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <a class="code" href="SmallLocksBenchmark_8cpp.html#a9717e7bbecb906637e86cef6da3d83c2">return</a> results;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;}</div><div class="ttc" id="Portability_8h_html_aa315a0e3a3286458420df4e74d1b3e6f"><div class="ttname"><a href="Portability_8h.html#aa315a0e3a3286458420df4e74d1b3e6f">FOLLY_GNU_DISABLE_WARNING</a></div><div class="ttdeci">#define FOLLY_GNU_DISABLE_WARNING(warningName)</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00180">Portability.h:180</a></div></div>
<div class="ttc" id="Portability_8h_html_a4a2f173e1bec794aa19364144948180d"><div class="ttname"><a href="Portability_8h.html#a4a2f173e1bec794aa19364144948180d">FOLLY_POP_WARNING</a></div><div class="ttdeci">#define FOLLY_POP_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00179">Portability.h:179</a></div></div>
<div class="ttc" id="Portability_8h_html_a7f4463769c98ffb786751dd9946773df"><div class="ttname"><a href="Portability_8h.html#a7f4463769c98ffb786751dd9946773df">FOLLY_PUSH_WARNING</a></div><div class="ttdeci">#define FOLLY_PUSH_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00178">Portability.h:178</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="FBStringTestBenchmarks_8cpp_8h_html_ae6d05b4daacde7ac0b0e4fed9afb2d83"><div class="ttname"><a href="FBStringTestBenchmarks_8cpp_8h.html#ae6d05b4daacde7ac0b0e4fed9afb2d83">push_back</a></div><div class="ttdeci">void BENCHFUN() push_back(size_t iters, size_t arg)</div><div class="ttdef"><b>Definition:</b> <a href="FBStringTestBenchmarks_8cpp_8h_source.html#l00231">FBStringTestBenchmarks.cpp.h:231</a></div></div>
<div class="ttc" id="SmallLocksBenchmark_8cpp_html_a9717e7bbecb906637e86cef6da3d83c2"><div class="ttname"><a href="SmallLocksBenchmark_8cpp.html#a9717e7bbecb906637e86cef6da3d83c2">return</a></div><div class="ttdeci">return</div><div class="ttdef"><b>Definition:</b> <a href="SmallLocksBenchmark_8cpp_source.html#l00443">SmallLocksBenchmark.cpp:443</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_af220ef9930b641e74fa9588a0bcffb8c"><div class="ttname"><a href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">folly::gen::first</a></div><div class="ttdeci">constexpr detail::First first</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02553">Base-inl.h:2553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab0c3751adde3d843148ce5a9d4f2116a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class It , class F , class ItT , class Result &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classfolly_1_1Future.html">Future</a>&lt; Result &gt; &gt; folly::futures::map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Executor.html">Executor</a> &amp;&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set func as the callback for each input <a class="el" href="classfolly_1_1Future.html">Future</a> and return a vector of Futures containing the results in the input order and completing on exec. </p>

<p>Definition at line <a class="el" href="Future-inl_8h_source.html#l02371">2371</a> of file <a class="el" href="Future-inl_8h_source.html">Future-inl.h</a>.</p>

<p>References <a class="el" href="Portability_8h_source.html#l00180">FOLLY_GNU_DISABLE_WARNING</a>, <a class="el" href="Portability_8h_source.html#l00179">FOLLY_POP_WARNING</a>, <a class="el" href="Portability_8h_source.html#l00178">FOLLY_PUSH_WARNING</a>, and <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>
<div class="fragment"><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                                                                         {</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  std::vector&lt;Future&lt;Result&gt;&gt; results;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  results.reserve(std::distance(<a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a>, last));</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a>; it != last; it++) {</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <a class="code" href="Portability_8h.html#a7f4463769c98ffb786751dd9946773df">FOLLY_PUSH_WARNING</a></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <a class="code" href="Portability_8h.html#aa315a0e3a3286458420df4e74d1b3e6f">FOLLY_GNU_DISABLE_WARNING</a>(<span class="stringliteral">&quot;-Wdeprecated-declarations&quot;</span>)</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    results.<a class="code" href="FBStringTestBenchmarks_8cpp_8h.html#ae6d05b4daacde7ac0b0e4fed9afb2d83">push_back</a>(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">move</a>(*it).<a class="code" href="namespacefolly.html#a5c93184be74f41219a2f4ec2300c5f89">via</a>(&amp;exec).then(func));</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <a class="code" href="Portability_8h.html#a4a2f173e1bec794aa19364144948180d">FOLLY_POP_WARNING</a></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  }</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <a class="code" href="SmallLocksBenchmark_8cpp.html#a9717e7bbecb906637e86cef6da3d83c2">return</a> results;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;}</div><div class="ttc" id="Portability_8h_html_aa315a0e3a3286458420df4e74d1b3e6f"><div class="ttname"><a href="Portability_8h.html#aa315a0e3a3286458420df4e74d1b3e6f">FOLLY_GNU_DISABLE_WARNING</a></div><div class="ttdeci">#define FOLLY_GNU_DISABLE_WARNING(warningName)</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00180">Portability.h:180</a></div></div>
<div class="ttc" id="Portability_8h_html_a4a2f173e1bec794aa19364144948180d"><div class="ttname"><a href="Portability_8h.html#a4a2f173e1bec794aa19364144948180d">FOLLY_POP_WARNING</a></div><div class="ttdeci">#define FOLLY_POP_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00179">Portability.h:179</a></div></div>
<div class="ttc" id="Portability_8h_html_a7f4463769c98ffb786751dd9946773df"><div class="ttname"><a href="Portability_8h.html#a7f4463769c98ffb786751dd9946773df">FOLLY_PUSH_WARNING</a></div><div class="ttdeci">#define FOLLY_PUSH_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00178">Portability.h:178</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="FBStringTestBenchmarks_8cpp_8h_html_ae6d05b4daacde7ac0b0e4fed9afb2d83"><div class="ttname"><a href="FBStringTestBenchmarks_8cpp_8h.html#ae6d05b4daacde7ac0b0e4fed9afb2d83">push_back</a></div><div class="ttdeci">void BENCHFUN() push_back(size_t iters, size_t arg)</div><div class="ttdef"><b>Definition:</b> <a href="FBStringTestBenchmarks_8cpp_8h_source.html#l00231">FBStringTestBenchmarks.cpp.h:231</a></div></div>
<div class="ttc" id="SmallLocksBenchmark_8cpp_html_a9717e7bbecb906637e86cef6da3d83c2"><div class="ttname"><a href="SmallLocksBenchmark_8cpp.html#a9717e7bbecb906637e86cef6da3d83c2">return</a></div><div class="ttdeci">return</div><div class="ttdef"><b>Definition:</b> <a href="SmallLocksBenchmark_8cpp_source.html#l00443">SmallLocksBenchmark.cpp:443</a></div></div>
<div class="ttc" id="namespacefolly_html_a5c93184be74f41219a2f4ec2300c5f89"><div class="ttname"><a href="namespacefolly.html#a5c93184be74f41219a2f4ec2300c5f89">folly::via</a></div><div class="ttdeci">Future&lt; Unit &gt; via(Executor::KeepAlive&lt;&gt; executor, int8_t priority)</div><div class="ttdef"><b>Definition:</b> <a href="Future-inl_8h_source.html#l01373">Future-inl.h:1373</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_af220ef9930b641e74fa9588a0bcffb8c"><div class="ttname"><a href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">folly::gen::first</a></div><div class="ttdeci">constexpr detail::First first</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02553">Base-inl.h:2553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f1b8c3cf11ac69dfa52f7d8eb241855"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Policy , class FF &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefolly.html#a959935d9eb6cce6bd25049997b200b93">invoke_result_t</a>&lt; FF, size_t &gt; folly::futures::retrying </td>
          <td>(</td>
          <td class="paramtype">Policy &amp;&amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FF &amp;&amp;&#160;</td>
          <td class="paramname"><em>ff</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>retrying</p>
<p>Given a policy and a future-factory, creates futures according to the policy.</p>
<p>The policy must be moveable - retrying will move it a lot - and callable of either of the two forms:</p><ul>
<li>Future&lt;bool&gt;(size_t, exception_wrapper)</li>
<li>bool(size_t, exception_wrapper) Internally, the latter is transformed into the former in the obvious way. The first parameter is the attempt number of the next prospective attempt; the second parameter is the most recent exception. The policy returns a Future&lt;bool&gt; which, when completed with true, indicates that a retry is desired.</li>
</ul>
<p>We provide a few generic policies:</p><ul>
<li>Basic</li>
<li>CappedJitteredexponentialBackoff</li>
</ul>
<p>Custom policies may use the most recent try number and exception to decide whether to retry and optionally to do something interesting like delay before the retry. Users may pass inline lambda expressions as policies, or may define their own data types meeting the above requirements. Users are responsible for managing the lifetimes of anything pointed to or referred to from inside the policy.</p>
<p>For example, one custom policy may try up to k times, but only if the most recent exception is one of a few types or has one of a few error codes indicating that the failure was transitory.</p>
<p>Cancellation is not supported.</p>
<p>If both FF and Policy inline executes, then it is possible to hit a stack overflow due to the recursive nature of the retry implementation </p>

<p>Definition at line <a class="el" href="Retrying_8h_source.html#l00234">234</a> of file <a class="el" href="Retrying_8h_source.html">Retrying.h</a>.</p>

<p>References <a class="el" href="Retrying_8h_source.html#l00114">folly::futures::detail::retrying()</a>.</p>

<p>Referenced by <a class="el" href="RetryingTest_8cpp_source.html#l00067">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                                          {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keyword">using</span> <a class="code" href="classtag.html">tag</a> = <span class="keyword">typename</span> detail::retrying_policy_traits&lt;Policy&gt;::tag;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1futures_1_1detail.html#a94a094771105df2cdb68a06792f81732">detail::retrying</a>(std::forward&lt;Policy&gt;(p), std::forward&lt;FF&gt;(ff), <a class="code" href="classtag.html">tag</a>());</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div><div class="ttc" id="classtag_html"><div class="ttname"><a href="classtag.html">tag</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeTest_8cpp_source.html#l01435">RangeTest.cpp:1435</a></div></div>
<div class="ttc" id="namespacefolly_1_1futures_1_1detail_html_a94a094771105df2cdb68a06792f81732"><div class="ttname"><a href="namespacefolly_1_1futures_1_1detail.html#a94a094771105df2cdb68a06792f81732">folly::futures::detail::retrying</a></div><div class="ttdeci">invoke_result_t&lt; FF, size_t &gt; retrying(Policy &amp;&amp;p, FF &amp;&amp;ff, retrying_policy_fut_tag)</div><div class="ttdef"><b>Definition:</b> <a href="Retrying_8h_source.html#l00135">Retrying.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae366d690f37a32b65e291733cb781c2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt;bool(size_t, const <a class="el" href="classfolly_1_1exception__wrapper.html">exception_wrapper</a>&amp;)&gt; folly::futures::retryingPolicyBasic </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_tries</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Retrying_8h_source.html#l00240">240</a> of file <a class="el" href="Retrying_8h_source.html">Retrying.h</a>.</p>

<p>Referenced by <a class="el" href="RetryingTest_8cpp_source.html#l00125">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                      {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keywordtype">size_t</span> n, <span class="keyword">const</span> exception_wrapper&amp;) { <span class="keywordflow">return</span> n &lt; max_tries; };</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a88cfeb974fe0c99db61acd1d2f454c9d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Policy , class URNG &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt;<a class="el" href="classfolly_1_1Future.html">Future</a>&lt;bool&gt;size_t, const <a class="el" href="classfolly_1_1exception__wrapper.html">exception_wrapper</a>&amp;)&gt; folly::futures::retryingPolicyCappedJitteredExponentialBackoff </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_tries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a>&#160;</td>
          <td class="paramname"><em>backoff_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a>&#160;</td>
          <td class="paramname"><em>backoff_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>jitter_param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">URNG &amp;&amp;&#160;</td>
          <td class="paramname"><em>rng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Policy &amp;&amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Retrying_8h_source.html#l00246">246</a> of file <a class="el" href="Retrying_8h_source.html">Retrying.h</a>.</p>

<p>References <a class="el" href="Retrying_8h_source.html#l00159">folly::futures::detail::retryingPolicyCappedJitteredExponentialBackoff()</a>, and <a class="el" href="CollectTest_8cpp_source.html#l00031">rng</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keyword">using</span> <a class="code" href="classtag.html">tag</a> = <span class="keyword">typename</span> detail::retrying_policy_traits&lt;Policy&gt;::tag;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1futures.html#a65793ae9aee423e657594271d5aaf124">detail::retryingPolicyCappedJitteredExponentialBackoff</a>(</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      max_tries,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      backoff_min,</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      backoff_max,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      jitter_param,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      std::forward&lt;URNG&gt;(<a class="code" href="CollectTest_8cpp.html#af200073b3d4db5813c00cf99d414689b">rng</a>),</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      std::forward&lt;Policy&gt;(p),</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="classtag.html">tag</a>());</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="ttc" id="classtag_html"><div class="ttname"><a href="classtag.html">tag</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeTest_8cpp_source.html#l01435">RangeTest.cpp:1435</a></div></div>
<div class="ttc" id="CollectTest_8cpp_html_af200073b3d4db5813c00cf99d414689b"><div class="ttname"><a href="CollectTest_8cpp.html#af200073b3d4db5813c00cf99d414689b">rng</a></div><div class="ttdeci">auto rng</div><div class="ttdef"><b>Definition:</b> <a href="CollectTest_8cpp_source.html#l00031">CollectTest.cpp:31</a></div></div>
<div class="ttc" id="namespacefolly_1_1futures_html_a65793ae9aee423e657594271d5aaf124"><div class="ttname"><a href="namespacefolly_1_1futures.html#a65793ae9aee423e657594271d5aaf124">folly::futures::retryingPolicyCappedJitteredExponentialBackoff</a></div><div class="ttdeci">std::function&lt; Future&lt; bool &gt;size_t, const exception_wrapper &amp;)&gt; retryingPolicyCappedJitteredExponentialBackoff(size_t max_tries, Duration backoff_min, Duration backoff_max, double jitter_param)</div><div class="ttdef"><b>Definition:</b> <a href="Retrying_8h_source.html#l00265">Retrying.h:265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a65793ae9aee423e657594271d5aaf124"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt;<a class="el" href="classfolly_1_1Future.html">Future</a>&lt;bool&gt;size_t, const <a class="el" href="classfolly_1_1exception__wrapper.html">exception_wrapper</a>&amp;)&gt; folly::futures::retryingPolicyCappedJitteredExponentialBackoff </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_tries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a>&#160;</td>
          <td class="paramname"><em>backoff_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a>&#160;</td>
          <td class="paramname"><em>backoff_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>jitter_param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Retrying_8h_source.html#l00265">265</a> of file <a class="el" href="Retrying_8h_source.html">Retrying.h</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="Retrying_8h_source.html#l00159">folly::futures::detail::retryingPolicyCappedJitteredExponentialBackoff()</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                         {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keyword">auto</span> p = [](size_t, <span class="keyword">const</span> exception_wrapper&amp;) { <span class="keywordflow">return</span> <span class="keyword">true</span>; };</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1futures.html#a65793ae9aee423e657594271d5aaf124">retryingPolicyCappedJitteredExponentialBackoff</a>(</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      max_tries,</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      backoff_min,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      backoff_max,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      jitter_param,</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      ThreadLocalPRNG(),</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(p));</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="namespacefolly_1_1futures_html_a65793ae9aee423e657594271d5aaf124"><div class="ttname"><a href="namespacefolly_1_1futures.html#a65793ae9aee423e657594271d5aaf124">folly::futures::retryingPolicyCappedJitteredExponentialBackoff</a></div><div class="ttdeci">std::function&lt; Future&lt; bool &gt;size_t, const exception_wrapper &amp;)&gt; retryingPolicyCappedJitteredExponentialBackoff(size_t max_tries, Duration backoff_min, Duration backoff_max, double jitter_param)</div><div class="ttdef"><b>Definition:</b> <a href="Retrying_8h_source.html#l00265">Retrying.h:265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4562a876ed28c23e98c168f553280c7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1Future.html">Future</a>&lt; <a class="el" href="structfolly_1_1Unit.html">Unit</a> &gt; folly::futures::sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#ad1989ff61ba788d22aa07cb22f8c5c49">Duration</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Timekeeper.html">Timekeeper</a> *&#160;</td>
          <td class="paramname"> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a <a class="el" href="classfolly_1_1Future.html">Future</a> that will complete after the specified duration. The Duration typedef of a <code><a class="el" href="namespacestd_1_1chrono.html">std::chrono</a></code> duration type indicates the resolution you can expect to be meaningful (milliseconds at the time of writing). Normally you wouldn't need to specify a <a class="el" href="classfolly_1_1Timekeeper.html">Timekeeper</a>, we will use the global futures timekeeper (we run a thread whose job it is to keep time for futures timeouts) but we provide the option for power users.</p>
<p>The <a class="el" href="classfolly_1_1Timekeeper.html">Timekeeper</a> thread will be lazily created the first time it is needed. If your program never uses any timeouts or other time-based Futures you will pay no <a class="el" href="classfolly_1_1Timekeeper.html">Timekeeper</a> thread overhead. </p>

<p>Definition at line <a class="el" href="Future_8cpp_source.html#l00042">42</a> of file <a class="el" href="Future_8cpp_source.html">Future.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1Timekeeper.html#a1c702bd70e6c1b22ee1db289682af047">folly::Timekeeper::after()</a>, <a class="el" href="ThreadWheelTimekeeper_8cpp_source.html#l00159">folly::detail::getTimekeeperSingleton()</a>, <a class="el" href="Likely_8h_source.html#l00047">LIKELY</a>, and <a class="el" href="Likely_8h_source.html#l00048">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="folly_2folly_2experimental_2coro_2Utils_8h_source.html#l00077">folly::coro::TimedWaitAwaitable&lt; Awaitable &gt;::await_suspend()</a>, <a class="el" href="BenchmarkTest_8cpp_source.html#l00262">BENCHMARK()</a>, <a class="el" href="Future-inl_8h_source.html#l00941">folly::SemiFuture&lt; T &gt;::delayed()</a>, <a class="el" href="Future-inl_8h_source.html#l01986">folly::Future&lt; T &gt;::delayed()</a>, <a class="el" href="ExpiringFilter_8h_source.html#l00030">wangle::ExpiringFilter&lt; Req, Resp &gt;::ExpiringFilter()</a>, <a class="el" href="ThreadPoolExecutorTest_8cpp_source.html#l00708">keepAliveTest()</a>, <a class="el" href="RpcServer_8cpp_source.html#l00044">RpcService::operator()()</a>, <a class="el" href="Retrying_8h_source.html#l00159">folly::futures::detail::retryingPolicyCappedJitteredExponentialBackoff()</a>, <a class="el" href="ExpiringFilter_8h_source.html#l00057">wangle::ExpiringFilter&lt; Req, Resp &gt;::startIdleTimer()</a>, <a class="el" href="SemiFutureTest_8cpp_source.html#l01053">TEST()</a>, and <a class="el" href="ThreadPoolExecutorTest_8cpp_source.html#l00845">virtualExecutorTest()</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                                 {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  std::shared_ptr&lt;Timekeeper&gt; tks;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a>(!tk)) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    tks = <a class="code" href="namespacefolly_1_1detail.html#abf4f317468aa1da41cc0dcc508df6515">folly::detail::getTimekeeperSingleton</a>();</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    tk = tks.get();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(!tk)) {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">return</span> makeFuture&lt;Unit&gt;(FutureNoTimekeeper());</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">return</span> tk-&gt;after(dur);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1detail_html_abf4f317468aa1da41cc0dcc508df6515"><div class="ttname"><a href="namespacefolly_1_1detail.html#abf4f317468aa1da41cc0dcc508df6515">folly::detail::getTimekeeperSingleton</a></div><div class="ttdeci">std::shared_ptr&lt; Timekeeper &gt; getTimekeeperSingleton()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadWheelTimekeeper_8cpp_source.html#l00159">ThreadWheelTimekeeper.cpp:159</a></div></div>
<div class="ttc" id="Likely_8h_html_affde14445f49f65ff4f5b592e44ee71a"><div class="ttname"><a href="Likely_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a></div><div class="ttdeci">#define LIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00047">Likely.h:47</a></div></div>
<div class="ttc" id="Likely_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00048">Likely.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="namespacefolly_1_1futures.html">futures</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
