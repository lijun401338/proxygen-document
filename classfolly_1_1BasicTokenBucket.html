<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::BasicTokenBucket&lt; Clock &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1BasicTokenBucket.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1BasicTokenBucket-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::BasicTokenBucket&lt; Clock &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac96d978d1c6446ea063d75fb98a7d9ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#ac96d978d1c6446ea063d75fb98a7d9ec">BasicTokenBucket</a> (double genRate, double burstSize, double zeroTime=0) noexcept</td></tr>
<tr class="separator:ac96d978d1c6446ea063d75fb98a7d9ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58db9f030a9122ec1574caae961a22d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#ad58db9f030a9122ec1574caae961a22d">BasicTokenBucket</a> (const <a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a> &amp;other) noexcept=default</td></tr>
<tr class="separator:ad58db9f030a9122ec1574caae961a22d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fc1285dea515e13abfbbb6632770de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a44fc1285dea515e13abfbbb6632770de">operator=</a> (const <a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a> &amp;other) noexcept=default</td></tr>
<tr class="separator:a44fc1285dea515e13abfbbb6632770de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af145033e42a296d253289f76c22bca02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#af145033e42a296d253289f76c22bca02">reset</a> (double genRate, double burstSize, double nowInSeconds=<a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>()) noexcept</td></tr>
<tr class="separator:af145033e42a296d253289f76c22bca02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ca6a96e25b495b856cdd03c3b33b69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a51ca6a96e25b495b856cdd03c3b33b69">setCapacity</a> (double <a class="el" href="http__parser__cpp_8cpp.html#a4e5747065ed2d7b90f2d8a148c88b55b">tokens</a>, double nowInSeconds) noexcept</td></tr>
<tr class="separator:a51ca6a96e25b495b856cdd03c3b33b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab1b07f7268c9cbc831c09df09a263c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#aab1b07f7268c9cbc831c09df09a263c8">consume</a> (double toConsume, double nowInSeconds=<a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>())</td></tr>
<tr class="separator:aab1b07f7268c9cbc831c09df09a263c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42eb8e71fe44906b9f335572b5972c5c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a42eb8e71fe44906b9f335572b5972c5c">consumeOrDrain</a> (double toConsume, double nowInSeconds=<a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>())</td></tr>
<tr class="separator:a42eb8e71fe44906b9f335572b5972c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b6ef8863d5bc820a6f606a97e44fcc2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a2b6ef8863d5bc820a6f606a97e44fcc2">available</a> (double nowInSeconds=<a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>()) const </td></tr>
<tr class="separator:a2b6ef8863d5bc820a6f606a97e44fcc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987cded843f0e8713e465499de908459"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a987cded843f0e8713e465499de908459">rate</a> () const noexcept</td></tr>
<tr class="separator:a987cded843f0e8713e465499de908459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41ed12f1a81e187e0920abf84ee44e54"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a41ed12f1a81e187e0920abf84ee44e54">burst</a> () const noexcept</td></tr>
<tr class="separator:a41ed12f1a81e187e0920abf84ee44e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0477689e96a9c4d12491982e75cb95ea"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a> () noexcept(noexcept(Impl::defaultClockNow()))</td></tr>
<tr class="separator:a0477689e96a9c4d12491982e75cb95ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a581684e25444975c9f531a8d82f7908a"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a581684e25444975c9f531a8d82f7908a">Impl</a> = <a class="el" href="classfolly_1_1BasicDynamicTokenBucket.html">BasicDynamicTokenBucket</a>&lt; Clock &gt;</td></tr>
<tr class="separator:a581684e25444975c9f531a8d82f7908a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4c7bead679cb364cfbac35b406f40a70"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a581684e25444975c9f531a8d82f7908a">Impl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">tokenBucket_</a></td></tr>
<tr class="separator:a4c7bead679cb364cfbac35b406f40a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e1461c9ea2311e970e83f6e645e3582"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a></td></tr>
<tr class="separator:a7e1461c9ea2311e970e83f6e645e3582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83a6512f35a1d009960e6f592ef92d3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a></td></tr>
<tr class="separator:ab83a6512f35a1d009960e6f592ef92d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Clock = std::chrono::steady_clock&gt;<br />
class folly::BasicTokenBucket&lt; Clock &gt;</h3>

<p>Specialization of <a class="el" href="classfolly_1_1BasicDynamicTokenBucket.html">BasicDynamicTokenBucket</a> with a fixed token generation rate and a fixed maximum burst size. </p>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00221">221</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a581684e25444975c9f531a8d82f7908a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::<a class="el" href="classfolly_1_1BasicTokenBucket.html#a581684e25444975c9f531a8d82f7908a">Impl</a> =  <a class="el" href="classfolly_1_1BasicDynamicTokenBucket.html">BasicDynamicTokenBucket</a>&lt;Clock&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00225">225</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac96d978d1c6446ea063d75fb98a7d9ec"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::<a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>genRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>burstSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>zeroTime</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Construct a token bucket with a specific maximum rate and burst size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">genRate</td><td>Number of tokens to generate per second. </td></tr>
    <tr><td class="paramname">burstSize</td><td>Maximum burst size. Must be greater than 0. </td></tr>
    <tr><td class="paramname">zeroTime</td><td>Initial time at which to consider the token bucket starting to fill. Defaults to 0, so by default token bucket is "full" after construction. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00237">237</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

<p>References <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>, and <a class="el" href="TokenBucket_8h_source.html#l00077">folly::BasicDynamicTokenBucket&lt; Clock &gt;::operator=()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      : <a class="code" href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">tokenBucket_</a>(zeroTime), <a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a>(genRate), <a class="code" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a>(burstSize) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    assert(<a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a> &gt; 0);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    assert(<a class="code" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a> &gt; 0);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a7e1461c9ea2311e970e83f6e645e3582"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">folly::BasicTokenBucket::rate_</a></div><div class="ttdeci">double rate_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00371">TokenBucket.h:371</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_ab83a6512f35a1d009960e6f592ef92d3"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">folly::BasicTokenBucket::burstSize_</a></div><div class="ttdeci">double burstSize_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00372">TokenBucket.h:372</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a4c7bead679cb364cfbac35b406f40a70"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">folly::BasicTokenBucket::tokenBucket_</a></div><div class="ttdeci">Impl tokenBucket_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00370">TokenBucket.h:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad58db9f030a9122ec1574caae961a22d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::<a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a>&lt; Clock &gt; &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copy constructor.</p>
<p>Warning: not thread safe! </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2b6ef8863d5bc820a6f606a97e44fcc2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::available </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nowInSeconds</em> = <code><a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>()</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of tokens currently available.</p>
<p>Thread-safe (but returned value may immediately be outdated). </p>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00347">347</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

<p>Referenced by <a class="el" href="TokenBucketTest_8cpp_source.html#l00023">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                                                  {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">tokenBucket_</a>.<a class="code" href="classfolly_1_1BasicDynamicTokenBucket.html#a63a516cf321eec2ac745782c135d566c">available</a>(<a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a>, <a class="code" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a>, nowInSeconds);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a7e1461c9ea2311e970e83f6e645e3582"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">folly::BasicTokenBucket::rate_</a></div><div class="ttdeci">double rate_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00371">TokenBucket.h:371</a></div></div>
<div class="ttc" id="classfolly_1_1BasicDynamicTokenBucket_html_a63a516cf321eec2ac745782c135d566c"><div class="ttname"><a href="classfolly_1_1BasicDynamicTokenBucket.html#a63a516cf321eec2ac745782c135d566c">folly::BasicDynamicTokenBucket::available</a></div><div class="ttdeci">double available(double rate, double burstSize, double nowInSeconds=defaultClockNow()) const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00182">TokenBucket.h:182</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_ab83a6512f35a1d009960e6f592ef92d3"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">folly::BasicTokenBucket::burstSize_</a></div><div class="ttdeci">double burstSize_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00372">TokenBucket.h:372</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a4c7bead679cb364cfbac35b406f40a70"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">folly::BasicTokenBucket::tokenBucket_</a></div><div class="ttdeci">Impl tokenBucket_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00370">TokenBucket.h:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a41ed12f1a81e187e0920abf84ee44e54"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::burst </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the maximum burst size.</p>
<p>Thread-safe (but returned value may immediately be outdated). </p>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00365">365</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_ab83a6512f35a1d009960e6f592ef92d3"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">folly::BasicTokenBucket::burstSize_</a></div><div class="ttdeci">double burstSize_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00372">TokenBucket.h:372</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab1b07f7268c9cbc831c09df09a263c8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::consume </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>toConsume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nowInSeconds</em> = <code><a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempts to consume some number of tokens. Tokens are first added to the bucket based on the time elapsed since the last attempt to consume tokens. Note: Attempts to consume more tokens than the burst size will always fail.</p>
<p>Thread-safe.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toConsume</td><td>The number of tokens to consume. </td></tr>
    <tr><td class="paramname">nowInSeconds</td><td>Current time in seconds. Should be monotonically increasing from the nowInSeconds specified in this token bucket's constructor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the rate limit check passed, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00318">318</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

<p>Referenced by <a class="el" href="TokenBucketTest_8cpp_source.html#l00077">doTokenBucketTest()</a>, <a class="el" href="TokenBucketTest_8cpp_source.html#l00023">TEST()</a>, and <a class="el" href="TokenBucketTest_8cpp_source.html#l00038">TEST_P()</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                                                          {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">tokenBucket_</a>.<a class="code" href="classfolly_1_1BasicDynamicTokenBucket.html#ab856b46a7ec582c106c589a0ac423591">consume</a>(toConsume, <a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a>, <a class="code" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a>, nowInSeconds);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a7e1461c9ea2311e970e83f6e645e3582"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">folly::BasicTokenBucket::rate_</a></div><div class="ttdeci">double rate_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00371">TokenBucket.h:371</a></div></div>
<div class="ttc" id="classfolly_1_1BasicDynamicTokenBucket_html_ab856b46a7ec582c106c589a0ac423591"><div class="ttname"><a href="classfolly_1_1BasicDynamicTokenBucket.html#ab856b46a7ec582c106c589a0ac423591">folly::BasicDynamicTokenBucket::consume</a></div><div class="ttdeci">bool consume(double toConsume, double rate, double burstSize, double nowInSeconds=defaultClockNow())</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00121">TokenBucket.h:121</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_ab83a6512f35a1d009960e6f592ef92d3"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">folly::BasicTokenBucket::burstSize_</a></div><div class="ttdeci">double burstSize_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00372">TokenBucket.h:372</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a4c7bead679cb364cfbac35b406f40a70"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">folly::BasicTokenBucket::tokenBucket_</a></div><div class="ttdeci">Impl tokenBucket_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00370">TokenBucket.h:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42eb8e71fe44906b9f335572b5972c5c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::consumeOrDrain </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>toConsume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nowInSeconds</em> = <code><a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Similar to consume, but always consumes some number of tokens. If the bucket contains enough tokens - consumes toConsume tokens. Otherwise the bucket is drained.</p>
<p>Thread-safe.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toConsume</td><td>The number of tokens to consume. </td></tr>
    <tr><td class="paramname">nowInSeconds</td><td>Current time in seconds. Should be monotonically increasing from the nowInSeconds specified in this token bucket's constructor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of tokens that were consumed. </dd></dl>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00335">335</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                               {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">tokenBucket_</a>.<a class="code" href="classfolly_1_1BasicDynamicTokenBucket.html#afc61e59d44018bc8723f2a06874b5097">consumeOrDrain</a>(</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        toConsume, <a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a>, <a class="code" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a>, nowInSeconds);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a7e1461c9ea2311e970e83f6e645e3582"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">folly::BasicTokenBucket::rate_</a></div><div class="ttdeci">double rate_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00371">TokenBucket.h:371</a></div></div>
<div class="ttc" id="classfolly_1_1BasicDynamicTokenBucket_html_afc61e59d44018bc8723f2a06874b5097"><div class="ttname"><a href="classfolly_1_1BasicDynamicTokenBucket.html#afc61e59d44018bc8723f2a06874b5097">folly::BasicDynamicTokenBucket::consumeOrDrain</a></div><div class="ttdeci">double consumeOrDrain(double toConsume, double rate, double burstSize, double nowInSeconds=defaultClockNow())</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00154">TokenBucket.h:154</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_ab83a6512f35a1d009960e6f592ef92d3"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">folly::BasicTokenBucket::burstSize_</a></div><div class="ttdeci">double burstSize_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00372">TokenBucket.h:372</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a4c7bead679cb364cfbac35b406f40a70"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">folly::BasicTokenBucket::tokenBucket_</a></div><div class="ttdeci">Impl tokenBucket_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00370">TokenBucket.h:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0477689e96a9c4d12491982e75cb95ea"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::defaultClockNow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the current time in seconds since Epoch. </p>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00263">263</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                                                            {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1BasicDynamicTokenBucket.html#ad12b6534c4c0e9b0cb44d73a09fa4fb9">Impl::defaultClockNow</a>();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicDynamicTokenBucket_html_ad12b6534c4c0e9b0cb44d73a09fa4fb9"><div class="ttname"><a href="classfolly_1_1BasicDynamicTokenBucket.html#ad12b6534c4c0e9b0cb44d73a09fa4fb9">folly::BasicDynamicTokenBucket::defaultClockNow</a></div><div class="ttdeci">static double defaultClockNow() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00099">TokenBucket.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44fc1285dea515e13abfbbb6632770de"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a>&amp; <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a>&lt; Clock &gt; &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copy-assignment operator.</p>
<p>Warning: not thread safe! </p>

</div>
</div>
<a class="anchor" id="a987cded843f0e8713e465499de908459"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::rate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of tokens generated per second.</p>
<p>Thread-safe (but returned value may immediately be outdated). </p>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00356">356</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                               {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a7e1461c9ea2311e970e83f6e645e3582"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">folly::BasicTokenBucket::rate_</a></div><div class="ttdeci">double rate_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00371">TokenBucket.h:371</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af145033e42a296d253289f76c22bca02"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::reset </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>genRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>burstSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nowInSeconds</em> = <code><a class="el" href="classfolly_1_1BasicTokenBucket.html#a0477689e96a9c4d12491982e75cb95ea">defaultClockNow</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Change rate and burst size.</p>
<p>Warning: not thread safe!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">genRate</td><td>Number of tokens to generate per second. </td></tr>
    <tr><td class="paramname">burstSize</td><td>Maximum burst size. Must be greater than 0. </td></tr>
    <tr><td class="paramname">nowInSeconds</td><td>Current time in seconds. Should be monotonically increasing from the nowInSeconds specified in this token bucket's constructor. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00278">278</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

<p>References <a class="el" href="TokenBucket_8h_source.html#l00182">folly::BasicDynamicTokenBucket&lt; Clock &gt;::available()</a>.</p>

<p>Referenced by <a class="el" href="TokenBucket_8h_source.html#l00300">folly::BasicTokenBucket&lt; Clock &gt;::setCapacity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                                        {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    assert(genRate &gt; 0);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    assert(burstSize &gt; 0);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> availTokens = <a class="code" href="classfolly_1_1BasicTokenBucket.html#a2b6ef8863d5bc820a6f606a97e44fcc2">available</a>(nowInSeconds);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a> = genRate;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">burstSize_</a> = burstSize;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classfolly_1_1BasicTokenBucket.html#a51ca6a96e25b495b856cdd03c3b33b69">setCapacity</a>(availTokens, nowInSeconds);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a7e1461c9ea2311e970e83f6e645e3582"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">folly::BasicTokenBucket::rate_</a></div><div class="ttdeci">double rate_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00371">TokenBucket.h:371</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a2b6ef8863d5bc820a6f606a97e44fcc2"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a2b6ef8863d5bc820a6f606a97e44fcc2">folly::BasicTokenBucket::available</a></div><div class="ttdeci">double available(double nowInSeconds=defaultClockNow()) const </div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00347">TokenBucket.h:347</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_ab83a6512f35a1d009960e6f592ef92d3"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#ab83a6512f35a1d009960e6f592ef92d3">folly::BasicTokenBucket::burstSize_</a></div><div class="ttdeci">double burstSize_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00372">TokenBucket.h:372</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a51ca6a96e25b495b856cdd03c3b33b69"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a51ca6a96e25b495b856cdd03c3b33b69">folly::BasicTokenBucket::setCapacity</a></div><div class="ttdeci">void setCapacity(double tokens, double nowInSeconds) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00300">TokenBucket.h:300</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51ca6a96e25b495b856cdd03c3b33b69"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::setCapacity </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tokens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nowInSeconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Change number of tokens in bucket.</p>
<p>Warning: not thread safe!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tokens</td><td>Desired number of tokens in bucket after the call. </td></tr>
    <tr><td class="paramname">nowInSeconds</td><td>Current time in seconds. Should be monotonically increasing from the nowInSeconds specified in this token bucket's constructor. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00300">300</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

<p>References <a class="el" href="TokenBucket_8h_source.html#l00278">folly::BasicTokenBucket&lt; Clock &gt;::reset()</a>, and <a class="el" href="http__parser_8c_source.html#l00184">tokens</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                                                {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">tokenBucket_</a>.<a class="code" href="classfolly_1_1BasicDynamicTokenBucket.html#a6b65e85b6cc40092c881483b3b1a8bf2">reset</a>(nowInSeconds - <a class="code" href="http__parser_8c.html#a4e5747065ed2d7b90f2d8a148c88b55b">tokens</a> / <a class="code" href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">rate_</a>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div><div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a7e1461c9ea2311e970e83f6e645e3582"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a7e1461c9ea2311e970e83f6e645e3582">folly::BasicTokenBucket::rate_</a></div><div class="ttdeci">double rate_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00371">TokenBucket.h:371</a></div></div>
<div class="ttc" id="classfolly_1_1BasicDynamicTokenBucket_html_a6b65e85b6cc40092c881483b3b1a8bf2"><div class="ttname"><a href="classfolly_1_1BasicDynamicTokenBucket.html#a6b65e85b6cc40092c881483b3b1a8bf2">folly::BasicDynamicTokenBucket::reset</a></div><div class="ttdeci">void reset(double zeroTime=0) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00092">TokenBucket.h:92</a></div></div>
<div class="ttc" id="http__parser_8c_html_a4e5747065ed2d7b90f2d8a148c88b55b"><div class="ttname"><a href="http__parser_8c.html#a4e5747065ed2d7b90f2d8a148c88b55b">tokens</a></div><div class="ttdeci">static const char tokens[256]</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8c_source.html#l00184">http_parser.c:184</a></div></div>
<div class="ttc" id="classfolly_1_1BasicTokenBucket_html_a4c7bead679cb364cfbac35b406f40a70"><div class="ttname"><a href="classfolly_1_1BasicTokenBucket.html#a4c7bead679cb364cfbac35b406f40a70">folly::BasicTokenBucket::tokenBucket_</a></div><div class="ttdeci">Impl tokenBucket_</div><div class="ttdef"><b>Definition:</b> <a href="TokenBucket_8h_source.html#l00370">TokenBucket.h:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab83a6512f35a1d009960e6f592ef92d3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::burstSize_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00372">372</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7e1461c9ea2311e970e83f6e645e3582"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::rate_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00371">371</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4c7bead679cb364cfbac35b406f40a70"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock  = std::chrono::steady_clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1BasicTokenBucket.html#a581684e25444975c9f531a8d82f7908a">Impl</a> <a class="el" href="classfolly_1_1BasicTokenBucket.html">folly::BasicTokenBucket</a>&lt; Clock &gt;::tokenBucket_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="TokenBucket_8h_source.html#l00370">370</a> of file <a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>proxygen/folly/folly/<a class="el" href="TokenBucket_8h_source.html">TokenBucket.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1BasicTokenBucket.html">BasicTokenBucket</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
