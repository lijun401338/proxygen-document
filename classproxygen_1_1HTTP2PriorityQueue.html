<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: proxygen::HTTP2PriorityQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classproxygen_1_1HTTP2PriorityQueue.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classproxygen_1_1HTTP2PriorityQueue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">proxygen::HTTP2PriorityQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for proxygen::HTTP2PriorityQueue:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classproxygen_1_1HTTP2PriorityQueue.png" usemap="#proxygen::HTTP2PriorityQueue_map" alt=""/>
  <map id="proxygen::HTTP2PriorityQueue_map" name="proxygen::HTTP2PriorityQueue_map">
<area href="classproxygen_1_1HTTP2PriorityQueueBase.html" alt="proxygen::HTTP2PriorityQueueBase" shape="rect" coords="0,56,224,80"/>
<area href="classproxygen_1_1HTTPCodec_1_1PriorityQueue.html" alt="proxygen::HTTPCodec::PriorityQueue" shape="rect" coords="0,0,224,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a35f9381d8797bb0edbad64bc3b078047"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">NextEgressResult</a> = std::vector&lt; std::pair&lt; <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *, double &gt;&gt;</td></tr>
<tr class="separator:a35f9381d8797bb0edbad64bc3b078047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classproxygen_1_1HTTP2PriorityQueueBase"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classproxygen_1_1HTTP2PriorityQueueBase')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html">proxygen::HTTP2PriorityQueueBase</a></td></tr>
<tr class="memitem:a5f3899c53116ed9ab8c8cec47427970e inherit pub_types_classproxygen_1_1HTTP2PriorityQueueBase"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a> = <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase_1_1BaseNode.html">BaseNode</a> *</td></tr>
<tr class="separator:a5f3899c53116ed9ab8c8cec47427970e inherit pub_types_classproxygen_1_1HTTP2PriorityQueueBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a02e85fa71b512110b878c3a2eb2e481f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a02e85fa71b512110b878c3a2eb2e481f">HTTP2PriorityQueue</a> ()</td></tr>
<tr class="separator:a02e85fa71b512110b878c3a2eb2e481f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a3a5befcec01d0ce3a0a154b91f564"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a90a3a5befcec01d0ce3a0a154b91f564">HTTP2PriorityQueue</a> (const <a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> &amp;timeout)</td></tr>
<tr class="separator:a90a3a5befcec01d0ce3a0a154b91f564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaad3c130c9e92d91ffdcf97a7ac6d1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#acaad3c130c9e92d91ffdcf97a7ac6d1c">attachThreadLocals</a> (const <a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> &amp;timeout)</td></tr>
<tr class="memdesc:acaad3c130c9e92d91ffdcf97a7ac6d1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">class <a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a>  <a href="#acaad3c130c9e92d91ffdcf97a7ac6d1c">More...</a><br /></td></tr>
<tr class="separator:acaad3c130c9e92d91ffdcf97a7ac6d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795a9d524c7c784d2978f770368a4573"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a795a9d524c7c784d2978f770368a4573">detachThreadLocals</a> ()</td></tr>
<tr class="separator:a795a9d524c7c784d2978f770368a4573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e486d1e0df051e3caf104c92a237595"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a2e486d1e0df051e3caf104c92a237595">setMaxVirtualNodes</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> maxVirtualNodes)</td></tr>
<tr class="separator:a2e486d1e0df051e3caf104c92a237595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6cb4f1766dbef9faee951ddfb4478a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#aa6cb4f1766dbef9faee951ddfb4478a6">signalPendingEgress</a> (<a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a> <a class="el" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a>) override</td></tr>
<tr class="separator:aa6cb4f1766dbef9faee951ddfb4478a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc08640ffefe5b0a867a29dea74eee59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#abc08640ffefe5b0a867a29dea74eee59">clearPendingEgress</a> (<a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a> <a class="el" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a>) override</td></tr>
<tr class="separator:abc08640ffefe5b0a867a29dea74eee59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92631ad8256084b9abd06ffe739de3b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a92631ad8256084b9abd06ffe739de3b1">addPriorityNode</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id, <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a>) override</td></tr>
<tr class="separator:a92631ad8256084b9abd06ffe739de3b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67e4c47f7b598513ecf028605336135a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a67e4c47f7b598513ecf028605336135a">addOrUpdatePriorityNode</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id, <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> pri)</td></tr>
<tr class="separator:a67e4c47f7b598513ecf028605336135a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4cae92ec2e25ffda692e39e2215fc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#aaa4cae92ec2e25ffda692e39e2215fc3">dropPriorityNodes</a> ()</td></tr>
<tr class="separator:aaa4cae92ec2e25ffda692e39e2215fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1114b1ae4f30fbee8b97413ebd8d5b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">addTransaction</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id, <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> pri, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, bool permanent=false, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> *depth=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>) override</td></tr>
<tr class="separator:a0f1114b1ae4f30fbee8b97413ebd8d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16276ac880fcec6859ce73eb96daacf0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a16276ac880fcec6859ce73eb96daacf0">updatePriority</a> (<a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a> handle, <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> pri, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> *depth=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>) override</td></tr>
<tr class="separator:a16276ac880fcec6859ce73eb96daacf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a681d153d627f4f8d383e0859cce9f56d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a681d153d627f4f8d383e0859cce9f56d">removeTransaction</a> (<a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a> handle) override</td></tr>
<tr class="separator:a681d153d627f4f8d383e0859cce9f56d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0b3818288824506c5a3abb23101f439"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a> () const </td></tr>
<tr class="separator:ad0b3818288824506c5a3abb23101f439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30544c5f16c80484c7ef3d32f155f490"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a30544c5f16c80484c7ef3d32f155f490">numPendingEgress</a> () const </td></tr>
<tr class="separator:a30544c5f16c80484c7ef3d32f155f490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a201fca5cd327bb602666f5cd928bc3c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a201fca5cd327bb602666f5cd928bc3c6">numVirtualNodes</a> () const </td></tr>
<tr class="separator:a201fca5cd327bb602666f5cd928bc3c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee7f2f2e01154e1db112e6b3aa455ce0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#aee7f2f2e01154e1db112e6b3aa455ce0">iterate</a> (const std::function&lt; bool(<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *, double)&gt; &amp;fn, const std::function&lt; bool()&gt; &amp;stopFn, bool all)</td></tr>
<tr class="separator:aee7f2f2e01154e1db112e6b3aa455ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcbbcfcc49189030798249dc896fcac7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#adcbbcfcc49189030798249dc896fcac7">iterateBFS</a> (const std::function&lt; bool(<a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a> &amp;, <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *, double)&gt; &amp;fn, const std::function&lt; bool()&gt; &amp;stopFn, bool all)</td></tr>
<tr class="separator:adcbbcfcc49189030798249dc896fcac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7a98e71ef297cccaa40e64ded686951"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ae7a98e71ef297cccaa40e64ded686951">nextEgress</a> (<a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">NextEgressResult</a> &amp;result, bool spdyMode=false)</td></tr>
<tr class="separator:ae7a98e71ef297cccaa40e64ded686951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c522c4128ea274ee5772d69d9f30b34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a1c522c4128ea274ee5772d69d9f30b34">rebuildTree</a> ()</td></tr>
<tr class="memdesc:a1c522c4128ea274ee5772d69d9f30b34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error handling code.  <a href="#a1c522c4128ea274ee5772d69d9f30b34">More...</a><br /></td></tr>
<tr class="separator:a1c522c4128ea274ee5772d69d9f30b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1999fc82a9aa0e63e48def2b601b681a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a1999fc82a9aa0e63e48def2b601b681a">getRebuildCount</a> () const </td></tr>
<tr class="separator:a1999fc82a9aa0e63e48def2b601b681a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a74cb604e8236e03004676ebaf348b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a19a74cb604e8236e03004676ebaf348b">isRebuilt</a> () const </td></tr>
<tr class="separator:a19a74cb604e8236e03004676ebaf348b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classproxygen_1_1HTTPCodec_1_1PriorityQueue"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classproxygen_1_1HTTPCodec_1_1PriorityQueue')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPCodec_1_1PriorityQueue.html">proxygen::HTTPCodec::PriorityQueue</a></td></tr>
<tr class="memitem:a594cc233d5cf07c2a135d636dc1ac991 inherit pub_methods_classproxygen_1_1HTTPCodec_1_1PriorityQueue"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPCodec_1_1PriorityQueue.html#a594cc233d5cf07c2a135d636dc1ac991">~PriorityQueue</a> ()</td></tr>
<tr class="separator:a594cc233d5cf07c2a135d636dc1ac991 inherit pub_methods_classproxygen_1_1HTTPCodec_1_1PriorityQueue"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aada08a779ebec54ef40f17657d2f1364"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#aada08a779ebec54ef40f17657d2f1364">setNodeLifetime</a> (std::chrono::milliseconds lifetime)</td></tr>
<tr class="separator:aada08a779ebec54ef40f17657d2f1364"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a06a6250504e4c0b66d42b60f6bb26a73"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a06a6250504e4c0b66d42b60f6bb26a73">NodeMap</a> = boost::intrusive::unordered_set&lt; <a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a>, boost::intrusive::constant_time_size&lt; false &gt;&gt;</td></tr>
<tr class="separator:a06a6250504e4c0b66d42b60f6bb26a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2266613833cba96d623eee31338c1afe"><td class="memItemLeft" align="right" valign="top">typedef boost::intrusive::link_mode&lt; boost::intrusive::auto_unlink &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a2266613833cba96d623eee31338c1afe">link_mode</a></td></tr>
<tr class="separator:a2266613833cba96d623eee31338c1afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afb9f1555bf188aa261fae13785580d64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">find</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> *depth=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>)</td></tr>
<tr class="separator:afb9f1555bf188aa261fae13785580d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad17068dd456f93a95072ec3e43a978bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ad17068dd456f93a95072ec3e43a978bb">findInternal</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id)</td></tr>
<tr class="separator:ad17068dd456f93a95072ec3e43a978bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823dae29c613335844f12ef0b8b3eb6f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a823dae29c613335844f12ef0b8b3eb6f">allowDanglingNodes</a> () const </td></tr>
<tr class="separator:a823dae29c613335844f12ef0b8b3eb6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031ffffa94e491cb5f2ae7c038d1a7cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a031ffffa94e491cb5f2ae7c038d1a7cc">scheduleNodeExpiration</a> (<a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a> *node)</td></tr>
<tr class="separator:a031ffffa94e491cb5f2ae7c038d1a7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac57ce4be6d8e7623200739bdd2da8bf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ac57ce4be6d8e7623200739bdd2da8bf5">updateEnqueuedWeight</a> ()</td></tr>
<tr class="separator:ac57ce4be6d8e7623200739bdd2da8bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ae806041664cbc84f66c5826b8d349177"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ae806041664cbc84f66c5826b8d349177">nextEgressResult</a> (<a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a> &amp;queue, <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, double r)</td></tr>
<tr class="separator:ae806041664cbc84f66c5826b8d349177"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abf58a7d0c7a961b7464f297dafccf511"><td class="memItemLeft" align="right" valign="top">NodeMap::bucket_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#abf58a7d0c7a961b7464f297dafccf511">nodeBuckets_</a> [<a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ae1517dd39ac349c682c1a98e743c151e">kNumBuckets</a>]</td></tr>
<tr class="separator:abf58a7d0c7a961b7464f297dafccf511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3587cbdd473166fed035273971c28c52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a06a6250504e4c0b66d42b60f6bb26a73">NodeMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">nodes_</a></td></tr>
<tr class="separator:a3587cbdd473166fed035273971c28c52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4557bda2ce50c7a0ffb0330874a1fe9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a> {*this, <a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>, 0, 1, <a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a4557bda2ce50c7a0ffb0330874a1fe9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad03d3ff2b88896b65c4dcaaf2c04bf49"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">rebuildCount_</a> {0}</td></tr>
<tr class="separator:ad03d3ff2b88896b65c4dcaaf2c04bf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec5a80788f0441adfb5f88a32d6a2fdc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a> {0}</td></tr>
<tr class="separator:aec5a80788f0441adfb5f88a32d6a2fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ea027a556c831f57c0579c172d4901c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">maxVirtualNodes_</a> {50}</td></tr>
<tr class="separator:a0ea027a556c831f57c0579c172d4901c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab34d7645f95a94e5f46349fc01757a7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a> {0}</td></tr>
<tr class="separator:ab34d7645f95a94e5f46349fc01757a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c67d416b18c57368f22cf8dc92a188"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a> {false}</td></tr>
<tr class="separator:a44c67d416b18c57368f22cf8dc92a188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579a2d30527894df3a6339a160438d7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">timeout_</a></td></tr>
<tr class="separator:a579a2d30527894df3a6339a160438d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46f36146598be2c0a254619f7379d9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">NextEgressResult</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#aa46f36146598be2c0a254619f7379d9d">nextEgressResults_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:aa46f36146598be2c0a254619f7379d9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ae1517dd39ac349c682c1a98e743c151e"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ae1517dd39ac349c682c1a98e743c151e">kNumBuckets</a> = 100</td></tr>
<tr class="separator:ae1517dd39ac349c682c1a98e743c151e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe15f90202ed06b96bfcf099b621af8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#adfe15f90202ed06b96bfcf099b621af8">kMaxRebuilds_</a> = 3</td></tr>
<tr class="separator:adfe15f90202ed06b96bfcf099b621af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef07bbcb75673840058ca99261e490c"><td class="memItemLeft" align="right" valign="top">static std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">kNodeLifetime_</a></td></tr>
<tr class="separator:a7ef07bbcb75673840058ca99261e490c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00059">59</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a2266613833cba96d623eee31338c1afe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::intrusive::link_mode&lt;boost::intrusive::auto_unlink&gt; <a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a2266613833cba96d623eee31338c1afe">proxygen::HTTP2PriorityQueue::link_mode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00194">194</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a35f9381d8797bb0edbad64bc3b078047"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">proxygen::HTTP2PriorityQueue::NextEgressResult</a> =  std::vector&lt;std::pair&lt;<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a>*, double&gt;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00148">148</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a06a6250504e4c0b66d42b60f6bb26a73"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a06a6250504e4c0b66d42b60f6bb26a73">proxygen::HTTP2PriorityQueue::NodeMap</a> =  boost::intrusive::unordered_set&lt; <a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a>, boost::intrusive::constant_time_size&lt;false&gt;&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00064">64</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a02e85fa71b512110b878c3a2eb2e481f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">proxygen::HTTP2PriorityQueue::HTTP2PriorityQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00070">70</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      : <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">nodes_</a>(NodeMap::bucket_traits(<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#abf58a7d0c7a961b7464f297dafccf511">nodeBuckets_</a>, <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ae1517dd39ac349c682c1a98e743c151e">kNumBuckets</a>)) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#ad64d44281ef8c5e2a8327a76a701ab57">setPermanent</a>();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_ad64d44281ef8c5e2a8327a76a701ab57"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#ad64d44281ef8c5e2a8327a76a701ab57">proxygen::HTTP2PriorityQueue::Node::setPermanent</a></div><div class="ttdeci">void setPermanent()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00233">HTTP2PriorityQueue.h:233</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a3587cbdd473166fed035273971c28c52"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">proxygen::HTTP2PriorityQueue::nodes_</a></div><div class="ttdeci">NodeMap nodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00408">HTTP2PriorityQueue.h:408</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_abf58a7d0c7a961b7464f297dafccf511"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#abf58a7d0c7a961b7464f297dafccf511">proxygen::HTTP2PriorityQueue::nodeBuckets_</a></div><div class="ttdeci">NodeMap::bucket_type nodeBuckets_[kNumBuckets]</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00407">HTTP2PriorityQueue.h:407</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ae1517dd39ac349c682c1a98e743c151e"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ae1517dd39ac349c682c1a98e743c151e">proxygen::HTTP2PriorityQueue::kNumBuckets</a></div><div class="ttdeci">static const size_t kNumBuckets</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00066">HTTP2PriorityQueue.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a90a3a5befcec01d0ce3a0a154b91f564"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">proxygen::HTTP2PriorityQueue::HTTP2PriorityQueue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00075">75</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      : <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">nodes_</a>(NodeMap::bucket_traits(<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#abf58a7d0c7a961b7464f297dafccf511">nodeBuckets_</a>, <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ae1517dd39ac349c682c1a98e743c151e">kNumBuckets</a>)),</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">timeout_</a>(timeout) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#ad64d44281ef8c5e2a8327a76a701ab57">setPermanent</a>();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_ad64d44281ef8c5e2a8327a76a701ab57"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#ad64d44281ef8c5e2a8327a76a701ab57">proxygen::HTTP2PriorityQueue::Node::setPermanent</a></div><div class="ttdeci">void setPermanent()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00233">HTTP2PriorityQueue.h:233</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a3587cbdd473166fed035273971c28c52"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">proxygen::HTTP2PriorityQueue::nodes_</a></div><div class="ttdeci">NodeMap nodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00408">HTTP2PriorityQueue.h:408</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a579a2d30527894df3a6339a160438d7c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">proxygen::HTTP2PriorityQueue::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00416">HTTP2PriorityQueue.h:416</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_abf58a7d0c7a961b7464f297dafccf511"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#abf58a7d0c7a961b7464f297dafccf511">proxygen::HTTP2PriorityQueue::nodeBuckets_</a></div><div class="ttdeci">NodeMap::bucket_type nodeBuckets_[kNumBuckets]</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00407">HTTP2PriorityQueue.h:407</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ae1517dd39ac349c682c1a98e743c151e"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ae1517dd39ac349c682c1a98e743c151e">proxygen::HTTP2PriorityQueue::kNumBuckets</a></div><div class="ttdeci">static const size_t kNumBuckets</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00066">HTTP2PriorityQueue.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a67e4c47f7b598513ecf028605336135a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::addOrUpdatePriorityNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a>&#160;</td>
          <td class="paramname"><em>pri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00444">444</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00695">find()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01330">proxygen::HTTPSession::onPriority()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02523">proxygen::HTTPSession::sendPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                                                     {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keyword">auto</span> handle = <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">find</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (handle) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// already added</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    CHECK(handle-&gt;getTransaction() == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a16276ac880fcec6859ce73eb96daacf0">updatePriority</a>(handle, pri);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// brand new</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">addTransaction</a>(<span class="keywordtype">id</span>, pri, <span class="keyword">nullptr</span>, <span class="keyword">false</span> <span class="comment">/* not permanent */</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0f1114b1ae4f30fbee8b97413ebd8d5b"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">proxygen::HTTP2PriorityQueue::addTransaction</a></div><div class="ttdeci">Handle addTransaction(HTTPCodec::StreamID id, http2::PriorityUpdate pri, HTTPTransaction *txn, bool permanent=false, uint64_t *depth=nullptr) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00458">HTTP2PriorityQueue.cpp:458</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_afb9f1555bf188aa261fae13785580d64"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">proxygen::HTTP2PriorityQueue::find</a></div><div class="ttdeci">Node * find(HTTPCodec::StreamID id, uint64_t *depth=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00695">HTTP2PriorityQueue.cpp:695</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a16276ac880fcec6859ce73eb96daacf0"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a16276ac880fcec6859ce73eb96daacf0">proxygen::HTTP2PriorityQueue::updatePriority</a></div><div class="ttdeci">Handle updatePriority(Handle handle, http2::PriorityUpdate pri, uint64_t *depth=nullptr) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00529">HTTP2PriorityQueue.cpp:529</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a92631ad8256084b9abd06ffe739de3b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::addPriorityNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPCodec_1_1PriorityQueue.html#abb613f1d0278eca54bc7e80d87137944">proxygen::HTTPCodec::PriorityQueue</a>.</p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00095">95</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>References <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#ab88b943c7dc595b06dd998ac7fe61efe">proxygen::HTTP2PriorityQueueBase::addTransaction()</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                         {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">addTransaction</a>(<span class="keywordtype">id</span>, {(<a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>)<a class="code" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a>, <span class="keyword">false</span>, 0}, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0f1114b1ae4f30fbee8b97413ebd8d5b"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">proxygen::HTTP2PriorityQueue::addTransaction</a></div><div class="ttdeci">Handle addTransaction(HTTPCodec::StreamID id, http2::PriorityUpdate pri, HTTPTransaction *txn, bool permanent=false, uint64_t *depth=nullptr) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00458">HTTP2PriorityQueue.cpp:458</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="AtFork_8cpp_html_a235449ce5d78fe77bad1c1397b02b1bf"><div class="ttname"><a href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a></div><div class="ttdeci">folly::Function&lt; void()&gt; parent</div><div class="ttdef"><b>Definition:</b> <a href="AtFork_8cpp_source.html#l00034">AtFork.cpp:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f1114b1ae4f30fbee8b97413ebd8d5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">HTTP2PriorityQueue::Handle</a> proxygen::HTTP2PriorityQueue::addTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a>&#160;</td>
          <td class="paramname"><em>pri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>permanent</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> *&#160;</td>
          <td class="paramname"><em>depth</em> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#ab88b943c7dc595b06dd998ac7fe61efe">proxygen::HTTP2PriorityQueueBase</a>.</p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">458</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00355">proxygen::HTTP2PriorityQueue::Node::convertVirtualNode()</a>, <a class="el" href="HTTP2Framer_8cpp_source.html#l00021">proxygen::http2::DefaultPriority</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00085">proxygen::http2::PriorityUpdate::exclusive</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00695">find()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00241">proxygen::HTTP2PriorityQueue::Node::getID()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00413">maxVirtualNodes_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00414">numVirtualNodes_</a>, <a class="el" href="AtFork_8cpp_source.html#l00034">parent</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00415">pendingWeightChange_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00409">root_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00179">scheduleNodeExpiration()</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00084">proxygen::http2::PriorityUpdate::streamDependency</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>, and <a class="el" href="HTTP2Framer_8h_source.html#l00086">proxygen::http2::PriorityUpdate::weight</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00444">addOrUpdatePriorityNode()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                                                    {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  CHECK_NE(<span class="keywordtype">id</span>, 0);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  CHECK_NE(<span class="keywordtype">id</span>, pri.streamDependency) &lt;&lt; <span class="stringliteral">&quot;Tried to create a loop in the tree&quot;</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  CHECK(!txn || !permanent);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  Node *existingNode = <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">find</a>(<span class="keywordtype">id</span>, depth);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">if</span> (existingNode) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    CHECK(!permanent);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    existingNode-&gt;convertVirtualNode(CHECK_NOTNULL(txn));</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a16276ac880fcec6859ce73eb96daacf0">updatePriority</a>(existingNode, pri);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">return</span> existingNode;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a> &gt;= <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">maxVirtualNodes_</a>) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a>++;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  Node* <a class="code" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a> = &amp;<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">if</span> (depth) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    *depth = 1;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (pri.streamDependency != 0) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    Node* dep = <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">find</a>(pri.streamDependency, depth);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (dep == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// specified a missing parent (timed out an idle node)?</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      VLOG(4) &lt;&lt; <span class="stringliteral">&quot;assigning default priority to txn=&quot;</span> &lt;&lt; id;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">// No point to try to instantiate one more virtual node</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">// if we already reached the virtual node limit</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a> &lt; <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">maxVirtualNodes_</a>) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// The parent node hasn&#39;t arrived yet. For now setting</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment">// its priority fields to default.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        parent = <span class="keyword">dynamic_cast&lt;</span>Node*<span class="keyword">&gt;</span>(</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">addTransaction</a>(pri.streamDependency,</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                           <a class="code" href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">http2::DefaultPriority</a>,</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                           <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                           permanent,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                           depth));</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        CHECK_NOTNULL(parent);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> (depth) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          *depth += 1;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Virtual node limit reached, ignoring stream dependency &quot;</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                &lt;&lt; pri.streamDependency &lt;&lt; <span class="stringliteral">&quot; for new node ID &quot;</span> &lt;&lt; id;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      parent = dep;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span> (depth) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        *depth += 1;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Adding id=&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; with parent=&quot;</span> &lt;&lt; parent-&gt;getID() &lt;&lt;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="stringliteral">&quot; and weight=&quot;</span> &lt;&lt; ((<a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>)pri.weight + 1);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keyword">auto</span> node = std::make_unique&lt;Node&gt;(*<span class="keyword">this</span>, <a class="code" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a>, id, pri.weight, txn);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> (permanent) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    node-&gt;setPermanent();</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a031ffffa94e491cb5f2ae7c038d1a7cc">scheduleNodeExpiration</a>(node.get());</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keyword">auto</span> result = parent-&gt;emplaceNode(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(node), pri.exclusive);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0ea027a556c831f57c0579c172d4901c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">proxygen::HTTP2PriorityQueue::maxVirtualNodes_</a></div><div class="ttdeci">uint32_t maxVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00413">HTTP2PriorityQueue.h:413</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ab34d7645f95a94e5f46349fc01757a7e"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">proxygen::HTTP2PriorityQueue::numVirtualNodes_</a></div><div class="ttdeci">uint32_t numVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00414">HTTP2PriorityQueue.h:414</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a031ffffa94e491cb5f2ae7c038d1a7cc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a031ffffa94e491cb5f2ae7c038d1a7cc">proxygen::HTTP2PriorityQueue::scheduleNodeExpiration</a></div><div class="ttdeci">void scheduleNodeExpiration(Node *node)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00179">HTTP2PriorityQueue.h:179</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0f1114b1ae4f30fbee8b97413ebd8d5b"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">proxygen::HTTP2PriorityQueue::addTransaction</a></div><div class="ttdeci">Handle addTransaction(HTTPCodec::StreamID id, http2::PriorityUpdate pri, HTTPTransaction *txn, bool permanent=false, uint64_t *depth=nullptr) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00458">HTTP2PriorityQueue.cpp:458</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_afb9f1555bf188aa261fae13785580d64"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">proxygen::HTTP2PriorityQueue::find</a></div><div class="ttdeci">Node * find(HTTPCodec::StreamID id, uint64_t *depth=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00695">HTTP2PriorityQueue.cpp:695</a></div></div>
<div class="ttc" id="namespaceproxygen_1_1http2_html_a9d6bc6481640269a7770347be1f72fd5"><div class="ttname"><a href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">proxygen::http2::DefaultPriority</a></div><div class="ttdeci">const PriorityUpdate DefaultPriority</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Framer_8cpp_source.html#l00021">HTTP2Framer.cpp:21</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a16276ac880fcec6859ce73eb96daacf0"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a16276ac880fcec6859ce73eb96daacf0">proxygen::HTTP2PriorityQueue::updatePriority</a></div><div class="ttdeci">Handle updatePriority(Handle handle, http2::PriorityUpdate pri, uint64_t *depth=nullptr) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00529">HTTP2PriorityQueue.cpp:529</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a44c67d416b18c57368f22cf8dc92a188"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">proxygen::HTTP2PriorityQueue::pendingWeightChange_</a></div><div class="ttdeci">bool pendingWeightChange_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00415">HTTP2PriorityQueue.h:415</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
<div class="ttc" id="AtFork_8cpp_html_a235449ce5d78fe77bad1c1397b02b1bf"><div class="ttname"><a href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a></div><div class="ttdeci">folly::Function&lt; void()&gt; parent</div><div class="ttdef"><b>Definition:</b> <a href="AtFork_8cpp_source.html#l00034">AtFork.cpp:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a823dae29c613335844f12ef0b8b3eb6f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTP2PriorityQueue::allowDanglingNodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00175">175</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00578">removeTransaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                  {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">timeout_</a> &amp;&amp; <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">kNodeLifetime_</a>.count() &gt; 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a579a2d30527894df3a6339a160438d7c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">proxygen::HTTP2PriorityQueue::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00416">HTTP2PriorityQueue.h:416</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a7ef07bbcb75673840058ca99261e490c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">proxygen::HTTP2PriorityQueue::kNodeLifetime_</a></div><div class="ttdeci">static std::chrono::milliseconds kNodeLifetime_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00419">HTTP2PriorityQueue.h:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acaad3c130c9e92d91ffdcf97a7ac6d1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::attachThreadLocals </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>class <a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a> </p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00433">433</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00416">timeout_</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00174">proxygen::HTTPUpstreamSession::attachThreadLocals()</a>.</p>
<div class="fragment"><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                                                             {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">timeout_</a> = <a class="code" href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc">timeout</a>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1detail_html_a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc"><div class="ttname"><a href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a90272dda245ae1fb3cf197e91a8689dc">folly::detail::spin_result::timeout</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a579a2d30527894df3a6339a160438d7c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">proxygen::HTTP2PriorityQueue::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00416">HTTP2PriorityQueue.h:416</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abc08640ffefe5b0a867a29dea74eee59"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::clearPendingEgress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a>&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a775fcd7d7d4c27b71ca700c4f7ef93ff">proxygen::HTTP2PriorityQueueBase</a>.</p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00606">606</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00412">activeCount_</a>, and <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00415">pendingWeightChange_</a>.</p>
<div class="fragment"><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                                    {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  CHECK_GT(<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a>, 0);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// clear does a CHECK on handle-&gt;isEnqueued()</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  CHECK_NOTNULL(dynamic_cast&lt;HTTP2PriorityQueue::Node*&gt;(handle))</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    -&gt;clearPendingEgress();</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a>--;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aec5a80788f0441adfb5f88a32d6a2fdc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">proxygen::HTTP2PriorityQueue::activeCount_</a></div><div class="ttdeci">uint64_t activeCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00412">HTTP2PriorityQueue.h:412</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a44c67d416b18c57368f22cf8dc92a188"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">proxygen::HTTP2PriorityQueue::pendingWeightChange_</a></div><div class="ttdeci">bool pendingWeightChange_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00415">HTTP2PriorityQueue.h:415</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a795a9d524c7c784d2978f770368a4573"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::detachThreadLocals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00437">437</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00344">proxygen::HTTP2PriorityQueue::Node::dropPriorityNodes()</a>, and <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00416">timeout_</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00206">proxygen::HTTPUpstreamSession::detachThreadLocals()</a>.</p>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                            {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// a bit harsh, we could cancel and reschedule the timeout</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aaa4cae92ec2e25ffda692e39e2215fc3">dropPriorityNodes</a>();</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">timeout_</a> = WheelTimerInstance();</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aaa4cae92ec2e25ffda692e39e2215fc3"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aaa4cae92ec2e25ffda692e39e2215fc3">proxygen::HTTP2PriorityQueue::dropPriorityNodes</a></div><div class="ttdeci">void dropPriorityNodes()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00103">HTTP2PriorityQueue.h:103</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a579a2d30527894df3a6339a160438d7c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">proxygen::HTTP2PriorityQueue::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00416">HTTP2PriorityQueue.h:416</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa4cae92ec2e25ffda692e39e2215fc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::dropPriorityNodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00103">103</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>References <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#ab88b943c7dc595b06dd998ac7fe61efe">proxygen::HTTP2PriorityQueueBase::addTransaction()</a>, <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#ab9fda9e325d10dd40994ee45b49c0324">proxygen::HTTP2PriorityQueueBase::removeTransaction()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>, and <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a79981b30f800a1f4872ddbd708c1bc5a">proxygen::HTTP2PriorityQueueBase::updatePriority()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00278">proxygen::HTTPSession::~HTTPSession()</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                           {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#abbd3a594a0661cf6bb3409ab126b4e16">dropPriorityNodes</a>();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_abbd3a594a0661cf6bb3409ab126b4e16"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#abbd3a594a0661cf6bb3409ab126b4e16">proxygen::HTTP2PriorityQueue::Node::dropPriorityNodes</a></div><div class="ttdeci">void dropPriorityNodes()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00344">HTTP2PriorityQueue.cpp:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad0b3818288824506c5a3abb23101f439"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTP2PriorityQueue::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00122">122</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02043">proxygen::HTTPSession::getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02800">proxygen::HTTPSession::hasMoreWrites()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02880">proxygen::HTTPSession::onConnectionSendWindowClosed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02223">proxygen::HTTPSession::scheduleWrite()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00278">proxygen::HTTPSession::~HTTPSession()</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                     {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a> == 0;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aec5a80788f0441adfb5f88a32d6a2fdc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">proxygen::HTTP2PriorityQueue::activeCount_</a></div><div class="ttdeci">uint64_t activeCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00412">HTTP2PriorityQueue.h:412</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afb9f1555bf188aa261fae13785580d64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">HTTP2PriorityQueue::Node</a> * proxygen::HTTP2PriorityQueue::find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> *&#160;</td>
          <td class="paramname"><em>depth</em> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00695">695</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00408">nodes_</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00444">addOrUpdatePriorityNode()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                                              {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == 0) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">nodes_</a>.find(<span class="keywordtype">id</span>, Node::IdHash(), Node::IdNodeEqual());</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">if</span> (it == <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">nodes_</a>.end()) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">if</span> (depth) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    *depth = it-&gt;calculateDepth();</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">return</span> &amp;(*it);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a3587cbdd473166fed035273971c28c52"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a3587cbdd473166fed035273971c28c52">proxygen::HTTP2PriorityQueue::nodes_</a></div><div class="ttdeci">NodeMap nodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00408">HTTP2PriorityQueue.h:408</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad17068dd456f93a95072ec3e43a978bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a>* proxygen::HTTP2PriorityQueue::findInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00168">168</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00616">iterateBFS()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                           {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == 0) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">find</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_afb9f1555bf188aa261fae13785580d64"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">proxygen::HTTP2PriorityQueue::find</a></div><div class="ttdeci">Node * find(HTTPCodec::StreamID id, uint64_t *depth=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00695">HTTP2PriorityQueue.cpp:695</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1999fc82a9aa0e63e48def2b601b681a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> proxygen::HTTP2PriorityQueue::getRebuildCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00160">160</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">rebuildCount_</a>; }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad03d3ff2b88896b65c4dcaaf2c04bf49"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">proxygen::HTTP2PriorityQueue::rebuildCount_</a></div><div class="ttdeci">uint32_t rebuildCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00410">HTTP2PriorityQueue.h:410</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a19a74cb604e8236e03004676ebaf348b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTP2PriorityQueue::isRebuilt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00161">161</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>References <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">rebuildCount_</a> &gt; 0; }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad03d3ff2b88896b65c4dcaaf2c04bf49"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">proxygen::HTTP2PriorityQueue::rebuildCount_</a></div><div class="ttdeci">uint32_t rebuildCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00410">HTTP2PriorityQueue.h:410</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee7f2f2e01154e1db112e6b3aa455ce0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::iterate </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; bool(<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *, double)&gt; &amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; bool()&gt; &amp;&#160;</td>
          <td class="paramname"><em>stopFn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00135">135</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>References <a class="el" href="Base_8h_source.html#l00786">folly::gen::all()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                                            {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ac57ce4be6d8e7623200739bdd2da8bf5">updateEnqueuedWeight</a>();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#a3b83ff9c8ad4a6cf8f09399a69ed84b2">iterate</a>(fn, stopFn, <a class="code" href="namespacefolly_1_1gen.html#aed9f8880b612f8b54d9e9f929c729224">all</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_a3b83ff9c8ad4a6cf8f09399a69ed84b2"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#a3b83ff9c8ad4a6cf8f09399a69ed84b2">proxygen::HTTP2PriorityQueue::Node::iterate</a></div><div class="ttdeci">bool iterate(const std::function&lt; bool(HTTPCodec::StreamID, HTTPTransaction *, double)&gt; &amp;fn, const std::function&lt; bool()&gt; &amp;stopFn, bool all)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00261">HTTP2PriorityQueue.cpp:261</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ac57ce4be6d8e7623200739bdd2da8bf5"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ac57ce4be6d8e7623200739bdd2da8bf5">proxygen::HTTP2PriorityQueue::updateEnqueuedWeight</a></div><div class="ttdeci">void updateEnqueuedWeight()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00710">HTTP2PriorityQueue.cpp:710</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_aed9f8880b612f8b54d9e9f929c729224"><div class="ttname"><a href="namespacefolly_1_1gen.html#aed9f8880b612f8b54d9e9f929c729224">folly::gen::all</a></div><div class="ttdeci">Composed all(Predicate pred=Predicate())</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00786">Base.h:786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adcbbcfcc49189030798249dc896fcac7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::iterateBFS </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; bool(<a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a> &amp;, <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *, double)&gt; &amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; bool()&gt; &amp;&#160;</td>
          <td class="paramname"><em>stopFn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00616">616</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="Base_8h_source.html#l00786">folly::gen::all()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00168">findInternal()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00409">root_</a>, <a class="el" href="ThreadPoolExecutorTest_8cpp_source.html#l00076">stop()</a>, <a class="el" href="F14TestUtil_8h_source.html#l00414">folly::f14::swap()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00325">proxygen::HTTP2PriorityQueue::Node::updateEnqueuedWeight()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00285">proxygen::HTTP2PriorityQueue::Node::visitBFS()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02850">proxygen::HTTPSession::resumeTransactions()</a>.</p>
<div class="fragment"><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                               {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aaf3bf0b35d43a6bb0792f569ec90d7cc">Node::PendingList</a> pendingNodes{{0, &amp;<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>, 1.0}};</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aaf3bf0b35d43a6bb0792f569ec90d7cc">Node::PendingList</a> newPendingNodes;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="ThreadPoolExecutorTest_8cpp.html#a0ea28a5762e16aed626c3e1d155147a8">stop</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ac57ce4be6d8e7623200739bdd2da8bf5">updateEnqueuedWeight</a>();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">while</span> (!stop &amp;&amp; !stopFn() &amp;&amp; !pendingNodes.empty()) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    CHECK(newPendingNodes.empty());</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">while</span> (!stop &amp;&amp; !pendingNodes.empty()) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      Node* node = <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad17068dd456f93a95072ec3e43a978bb">findInternal</a>(pendingNodes.front().id);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">if</span> (node) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        stop = node-&gt;<a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#a7434bdf947944b6947ed8d2dd7ee26b9">visitBFS</a>(pendingNodes.front().ratio, fn, <a class="code" href="namespacefolly_1_1gen.html#aed9f8880b612f8b54d9e9f929c729224">all</a>,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                              newPendingNodes, <span class="keyword">false</span> <span class="comment">/* all children */</span>);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      pendingNodes.pop_front();</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="namespacefolly_1_1f14.html#a20b1454bd115690f6bccf4b9121f2b38">std::swap</a>(pendingNodes, newPendingNodes);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_aaf3bf0b35d43a6bb0792f569ec90d7cc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aaf3bf0b35d43a6bb0792f569ec90d7cc">proxygen::HTTP2PriorityQueue::Node::PendingList</a></div><div class="ttdeci">std::deque&lt; PendingNode &gt; PendingList</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00336">HTTP2PriorityQueue.h:336</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad17068dd456f93a95072ec3e43a978bb"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad17068dd456f93a95072ec3e43a978bb">proxygen::HTTP2PriorityQueue::findInternal</a></div><div class="ttdeci">Node * findInternal(HTTPCodec::StreamID id)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00168">HTTP2PriorityQueue.h:168</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_a7434bdf947944b6947ed8d2dd7ee26b9"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#a7434bdf947944b6947ed8d2dd7ee26b9">proxygen::HTTP2PriorityQueue::Node::visitBFS</a></div><div class="ttdeci">bool visitBFS(double relativeParentWeight, const std::function&lt; bool(HTTP2PriorityQueue &amp;queue, HTTPCodec::StreamID, HTTPTransaction *, double)&gt; &amp;fn, bool all, PendingList &amp;pendingNodes, bool enqueuedChildren)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00285">HTTP2PriorityQueue.cpp:285</a></div></div>
<div class="ttc" id="ThreadPoolExecutorTest_8cpp_html_a0ea28a5762e16aed626c3e1d155147a8"><div class="ttname"><a href="ThreadPoolExecutorTest_8cpp.html#a0ea28a5762e16aed626c3e1d155147a8">stop</a></div><div class="ttdeci">static void stop()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadPoolExecutorTest_8cpp_source.html#l00076">ThreadPoolExecutorTest.cpp:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ac57ce4be6d8e7623200739bdd2da8bf5"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ac57ce4be6d8e7623200739bdd2da8bf5">proxygen::HTTP2PriorityQueue::updateEnqueuedWeight</a></div><div class="ttdeci">void updateEnqueuedWeight()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00710">HTTP2PriorityQueue.cpp:710</a></div></div>
<div class="ttc" id="namespacefolly_1_1f14_html_a20b1454bd115690f6bccf4b9121f2b38"><div class="ttname"><a href="namespacefolly_1_1f14.html#a20b1454bd115690f6bccf4b9121f2b38">folly::f14::swap</a></div><div class="ttdeci">void swap(SwapTrackingAlloc&lt; T &gt; &amp;, SwapTrackingAlloc&lt; T &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="F14TestUtil_8h_source.html#l00414">F14TestUtil.h:414</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_aed9f8880b612f8b54d9e9f929c729224"><div class="ttname"><a href="namespacefolly_1_1gen.html#aed9f8880b612f8b54d9e9f929c729224">folly::gen::all</a></div><div class="ttdeci">Composed all(Predicate pred=Predicate())</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00786">Base.h:786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae7a98e71ef297cccaa40e64ded686951"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::nextEgress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">HTTP2PriorityQueue::NextEgressResult</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>spdyMode</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00648">648</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00412">activeCount_</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00640">nextEgressResult()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00418">nextEgressResults_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00409">root_</a>, <a class="el" href="ThreadPoolExecutorTest_8cpp_source.html#l00076">stop()</a>, <a class="el" href="F14TestUtil_8h_source.html#l00414">folly::f14::swap()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00325">proxygen::HTTP2PriorityQueue::Node::updateEnqueuedWeight()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00285">proxygen::HTTP2PriorityQueue::Node::visitBFS()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02043">proxygen::HTTPSession::getNextToSend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                                              {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keyword">struct </span>WeightCmp {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> std::pair&lt;HTTPTransaction*, double&gt;&amp; t1,</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                    <span class="keyword">const</span> std::pair&lt;HTTPTransaction*, double&gt;&amp; t2) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">return</span> t1.second &gt; t2.second;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  };</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  result.reserve(<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a>);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aa46f36146598be2c0a254619f7379d9d">nextEgressResults_</a> = &amp;result;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ac57ce4be6d8e7623200739bdd2da8bf5">updateEnqueuedWeight</a>();</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aaf3bf0b35d43a6bb0792f569ec90d7cc">Node::PendingList</a> pendingNodes;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aaf3bf0b35d43a6bb0792f569ec90d7cc">Node::PendingList</a> pendingNodesTmp;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  pendingNodes.emplace_back(0, &amp;<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>, 1.0);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="ThreadPoolExecutorTest_8cpp.html#a0ea28a5762e16aed626c3e1d155147a8">stop</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">while</span> (!stop &amp;&amp; !pendingNodes.empty()) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      Node* node = pendingNodes.front().node;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">if</span> (node) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        stop = node-&gt;visitBFS(pendingNodes.front().ratio, <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ae806041664cbc84f66c5826b8d349177">nextEgressResult</a>,</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                              <span class="keyword">false</span>, pendingNodesTmp,</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                              <span class="keyword">true</span> <span class="comment">/* enqueued children */</span>);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      pendingNodes.pop_front();</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// In SPDY mode, we stop as soon one level of the tree produces results,</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// then normalize the ratios.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span> (spdyMode &amp;&amp; !result.empty() &amp;&amp; !pendingNodesTmp.empty()) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="keywordtype">double</span> totalRatio = 0;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;txnPair: result) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        totalRatio += txnPair.second;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      CHECK_GT(totalRatio, 0);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;txnPair: result) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        txnPair.second = txnPair.second / totalRatio;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="namespacefolly_1_1f14.html#a20b1454bd115690f6bccf4b9121f2b38">std::swap</a>(pendingNodes, pendingNodesTmp);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  } <span class="keywordflow">while</span> (!stop &amp;&amp; !pendingNodes.empty());</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  std::sort(result.begin(), result.end(), WeightCmp());</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aa46f36146598be2c0a254619f7379d9d">nextEgressResults_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_aaf3bf0b35d43a6bb0792f569ec90d7cc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aaf3bf0b35d43a6bb0792f569ec90d7cc">proxygen::HTTP2PriorityQueue::Node::PendingList</a></div><div class="ttdeci">std::deque&lt; PendingNode &gt; PendingList</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00336">HTTP2PriorityQueue.h:336</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aec5a80788f0441adfb5f88a32d6a2fdc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">proxygen::HTTP2PriorityQueue::activeCount_</a></div><div class="ttdeci">uint64_t activeCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00412">HTTP2PriorityQueue.h:412</a></div></div>
<div class="ttc" id="ThreadPoolExecutorTest_8cpp_html_a0ea28a5762e16aed626c3e1d155147a8"><div class="ttname"><a href="ThreadPoolExecutorTest_8cpp.html#a0ea28a5762e16aed626c3e1d155147a8">stop</a></div><div class="ttdeci">static void stop()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadPoolExecutorTest_8cpp_source.html#l00076">ThreadPoolExecutorTest.cpp:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ac57ce4be6d8e7623200739bdd2da8bf5"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ac57ce4be6d8e7623200739bdd2da8bf5">proxygen::HTTP2PriorityQueue::updateEnqueuedWeight</a></div><div class="ttdeci">void updateEnqueuedWeight()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00710">HTTP2PriorityQueue.cpp:710</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ae806041664cbc84f66c5826b8d349177"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ae806041664cbc84f66c5826b8d349177">proxygen::HTTP2PriorityQueue::nextEgressResult</a></div><div class="ttdeci">static bool nextEgressResult(HTTP2PriorityQueue &amp;queue, HTTPCodec::StreamID id, HTTPTransaction *txn, double r)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00640">HTTP2PriorityQueue.cpp:640</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aa46f36146598be2c0a254619f7379d9d"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aa46f36146598be2c0a254619f7379d9d">proxygen::HTTP2PriorityQueue::nextEgressResults_</a></div><div class="ttdeci">NextEgressResult * nextEgressResults_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00418">HTTP2PriorityQueue.h:418</a></div></div>
<div class="ttc" id="namespacefolly_1_1f14_html_a20b1454bd115690f6bccf4b9121f2b38"><div class="ttname"><a href="namespacefolly_1_1f14.html#a20b1454bd115690f6bccf4b9121f2b38">folly::f14::swap</a></div><div class="ttdeci">void swap(SwapTrackingAlloc&lt; T &gt; &amp;, SwapTrackingAlloc&lt; T &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="F14TestUtil_8h_source.html#l00414">F14TestUtil.h:414</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae806041664cbc84f66c5826b8d349177"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTP2PriorityQueue::nextEgressResult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a> &amp;&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00640">640</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00418">nextEgressResults_</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00648">nextEgress()</a>.</p>
<div class="fragment"><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                                                     {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  queue.nextEgressResults_-&gt;emplace_back(txn, r);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a30544c5f16c80484c7ef3d32f155f490"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> proxygen::HTTP2PriorityQueue::numPendingEgress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00127">127</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02137">proxygen::HTTPSession::runLoopCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                    {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aec5a80788f0441adfb5f88a32d6a2fdc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">proxygen::HTTP2PriorityQueue::activeCount_</a></div><div class="ttdeci">uint64_t activeCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00412">HTTP2PriorityQueue.h:412</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a201fca5cd327bb602666f5cd928bc3c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> proxygen::HTTP2PriorityQueue::numVirtualNodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00131">131</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                   {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ab34d7645f95a94e5f46349fc01757a7e"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">proxygen::HTTP2PriorityQueue::numVirtualNodes_</a></div><div class="ttdeci">uint32_t numVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00414">HTTP2PriorityQueue.h:414</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1c522c4128ea274ee5772d69d9f30b34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::rebuildTree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error handling code. </p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00722">722</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00378">proxygen::HTTP2PriorityQueue::Node::flattenSubtree()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00411">kMaxRebuilds_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00410">rebuildCount_</a>, and <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00409">root_</a>.</p>
<div class="fragment"><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  CHECK_LE(<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">rebuildCount_</a> + 1, <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#adfe15f90202ed06b96bfcf099b621af8">kMaxRebuilds_</a>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#a5e6f404fe3a0e252a9e9eeff6909b6ae">flattenSubtree</a>();</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">rebuildCount_</a>++;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad03d3ff2b88896b65c4dcaaf2c04bf49"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad03d3ff2b88896b65c4dcaaf2c04bf49">proxygen::HTTP2PriorityQueue::rebuildCount_</a></div><div class="ttdeci">uint32_t rebuildCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00410">HTTP2PriorityQueue.h:410</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_adfe15f90202ed06b96bfcf099b621af8"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#adfe15f90202ed06b96bfcf099b621af8">proxygen::HTTP2PriorityQueue::kMaxRebuilds_</a></div><div class="ttdeci">static uint32_t kMaxRebuilds_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00411">HTTP2PriorityQueue.h:411</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_a5e6f404fe3a0e252a9e9eeff6909b6ae"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#a5e6f404fe3a0e252a9e9eeff6909b6ae">proxygen::HTTP2PriorityQueue::Node::flattenSubtree</a></div><div class="ttdeci">void flattenSubtree()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00378">HTTP2PriorityQueue.cpp:378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a681d153d627f4f8d383e0859cce9f56d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::removeTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">HTTP2PriorityQueue::Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#ab9fda9e325d10dd40994ee45b49c0324">proxygen::HTTP2PriorityQueueBase</a>.</p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00578">578</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00175">allowDanglingNodes()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00195">proxygen::HTTP2PriorityQueue::Node::clearPendingEgress()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00256">proxygen::HTTP2PriorityQueue::Node::clearTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00241">proxygen::HTTP2PriorityQueue::Node::getID()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00283">proxygen::HTTP2PriorityQueue::Node::isEnqueued()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00413">maxVirtualNodes_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00414">numVirtualNodes_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00415">pendingWeightChange_</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00233">proxygen::HTTP2PriorityQueue::Node::removeFromTree()</a>, and <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00179">scheduleNodeExpiration()</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                                                                     {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  Node* node = CHECK_NOTNULL(dynamic_cast&lt;HTTP2PriorityQueue::Node*&gt;(handle));</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// TODO: or require the node to do it?</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keywordflow">if</span> (node-&gt;isEnqueued()) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#abc08640ffefe5b0a867a29dea74eee59">clearPendingEgress</a>(handle);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a823dae29c613335844f12ef0b8b3eb6f">allowDanglingNodes</a>() &amp;&amp; <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a> &lt; <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">maxVirtualNodes_</a>) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    node-&gt;clearTransaction();</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a>++;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a031ffffa94e491cb5f2ae7c038d1a7cc">scheduleNodeExpiration</a>(node);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    VLOG(5) &lt;&lt; <span class="stringliteral">&quot;Deleting dangling node over max id=&quot;</span> &lt;&lt; node-&gt;getID();</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    node-&gt;removeFromTree();</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0ea027a556c831f57c0579c172d4901c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">proxygen::HTTP2PriorityQueue::maxVirtualNodes_</a></div><div class="ttdeci">uint32_t maxVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00413">HTTP2PriorityQueue.h:413</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ab34d7645f95a94e5f46349fc01757a7e"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">proxygen::HTTP2PriorityQueue::numVirtualNodes_</a></div><div class="ttdeci">uint32_t numVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00414">HTTP2PriorityQueue.h:414</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a031ffffa94e491cb5f2ae7c038d1a7cc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a031ffffa94e491cb5f2ae7c038d1a7cc">proxygen::HTTP2PriorityQueue::scheduleNodeExpiration</a></div><div class="ttdeci">void scheduleNodeExpiration(Node *node)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00179">HTTP2PriorityQueue.h:179</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_abc08640ffefe5b0a867a29dea74eee59"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#abc08640ffefe5b0a867a29dea74eee59">proxygen::HTTP2PriorityQueue::clearPendingEgress</a></div><div class="ttdeci">void clearPendingEgress(Handle h) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00606">HTTP2PriorityQueue.cpp:606</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a44c67d416b18c57368f22cf8dc92a188"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">proxygen::HTTP2PriorityQueue::pendingWeightChange_</a></div><div class="ttdeci">bool pendingWeightChange_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00415">HTTP2PriorityQueue.h:415</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a823dae29c613335844f12ef0b8b3eb6f"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a823dae29c613335844f12ef0b8b3eb6f">proxygen::HTTP2PriorityQueue::allowDanglingNodes</a></div><div class="ttdeci">bool allowDanglingNodes() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00175">HTTP2PriorityQueue.h:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a031ffffa94e491cb5f2ae7c038d1a7cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::scheduleNodeExpiration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00179">179</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00241">proxygen::HTTP2PriorityQueue::Node::getID()</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00103">proxygen::HTTP2PriorityQueue::Node::detachChild()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00578">removeTransaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                          {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">timeout_</a>) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      VLOG(5) &lt;&lt; <span class="stringliteral">&quot;scheduling expiration for node=&quot;</span> &lt;&lt; node-&gt;getID();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      DCHECK_GT(<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">kNodeLifetime_</a>.count(), 0);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">scheduleTimeout</a>(node, <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">kNodeLifetime_</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a579a2d30527894df3a6339a160438d7c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a579a2d30527894df3a6339a160438d7c">proxygen::HTTP2PriorityQueue::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00416">HTTP2PriorityQueue.h:416</a></div></div>
<div class="ttc" id="classproxygen_1_1WheelTimerInstance_html_a9c1db79a186f24aee623e9d46b91e898"><div class="ttname"><a href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">proxygen::WheelTimerInstance::scheduleTimeout</a></div><div class="ttdeci">void scheduleTimeout(folly::HHWheelTimer::Callback *callback, std::chrono::milliseconds timeout)</div><div class="ttdef"><b>Definition:</b> <a href="WheelTimerInstance_8cpp_source.html#l00059">WheelTimerInstance.cpp:59</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a7ef07bbcb75673840058ca99261e490c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">proxygen::HTTP2PriorityQueue::kNodeLifetime_</a></div><div class="ttdeci">static std::chrono::milliseconds kNodeLifetime_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00419">HTTP2PriorityQueue.h:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2e486d1e0df051e3caf104c92a237595"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::setMaxVirtualNodes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>maxVirtualNodes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00085">85</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>References <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a775fcd7d7d4c27b71ca700c4f7ef93ff">proxygen::HTTP2PriorityQueueBase::clearPendingEgress()</a>, <a class="el" href="Hazptr_8h_source.html#l00116">h</a>, and <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#affc0541d33b92f8ac94bb95faf4d9015">proxygen::HTTP2PriorityQueueBase::signalPendingEgress()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                    {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">maxVirtualNodes_</a> = maxVirtualNodes;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0ea027a556c831f57c0579c172d4901c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">proxygen::HTTP2PriorityQueue::maxVirtualNodes_</a></div><div class="ttdeci">uint32_t maxVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00413">HTTP2PriorityQueue.h:413</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aada08a779ebec54ef40f17657d2f1364"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void proxygen::HTTP2PriorityQueue::setNodeLifetime </td>
          <td>(</td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>lifetime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00152">152</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                                              {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">kNodeLifetime_</a> = lifetime;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a7ef07bbcb75673840058ca99261e490c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a7ef07bbcb75673840058ca99261e490c">proxygen::HTTP2PriorityQueue::kNodeLifetime_</a></div><div class="ttdeci">static std::chrono::milliseconds kNodeLifetime_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00419">HTTP2PriorityQueue.h:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6cb4f1766dbef9faee951ddfb4478a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::signalPendingEgress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">Handle</a>&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#affc0541d33b92f8ac94bb95faf4d9015">proxygen::HTTP2PriorityQueueBase</a>.</p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00596">596</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00412">activeCount_</a>, <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase_1_1BaseNode.html#a433cbcf28eb308085b0658e4c0c7fb78">proxygen::HTTP2PriorityQueueBase::BaseNode::isEnqueued()</a>, and <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00415">pendingWeightChange_</a>.</p>
<div class="fragment"><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                                     {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">if</span> (!handle-&gt;isEnqueued()) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    CHECK_NOTNULL(dynamic_cast&lt;HTTP2PriorityQueue::Node*&gt;(handle))</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      -&gt;signalPendingEgress();</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a>++;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aec5a80788f0441adfb5f88a32d6a2fdc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">proxygen::HTTP2PriorityQueue::activeCount_</a></div><div class="ttdeci">uint64_t activeCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00412">HTTP2PriorityQueue.h:412</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a44c67d416b18c57368f22cf8dc92a188"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">proxygen::HTTP2PriorityQueue::pendingWeightChange_</a></div><div class="ttdeci">bool pendingWeightChange_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00415">HTTP2PriorityQueue.h:415</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac57ce4be6d8e7623200739bdd2da8bf5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTP2PriorityQueue::updateEnqueuedWeight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00710">710</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00412">activeCount_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00415">pendingWeightChange_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00409">root_</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00325">proxygen::HTTP2PriorityQueue::Node::updateEnqueuedWeight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                                         {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a>) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aa224a9f052aee7223776bb055043ccf1">updateEnqueuedWeight</a>(<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">activeCount_</a> &gt; 0);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_1_1Node_html_aa224a9f052aee7223776bb055043ccf1"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html#aa224a9f052aee7223776bb055043ccf1">proxygen::HTTP2PriorityQueue::Node::updateEnqueuedWeight</a></div><div class="ttdeci">void updateEnqueuedWeight(bool activeNodes)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00325">HTTP2PriorityQueue.cpp:325</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aec5a80788f0441adfb5f88a32d6a2fdc"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aec5a80788f0441adfb5f88a32d6a2fdc">proxygen::HTTP2PriorityQueue::activeCount_</a></div><div class="ttdeci">uint64_t activeCount_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00412">HTTP2PriorityQueue.h:412</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a44c67d416b18c57368f22cf8dc92a188"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">proxygen::HTTP2PriorityQueue::pendingWeightChange_</a></div><div class="ttdeci">bool pendingWeightChange_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00415">HTTP2PriorityQueue.h:415</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a16276ac880fcec6859ce73eb96daacf0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">HTTP2PriorityQueue::Handle</a> proxygen::HTTP2PriorityQueue::updatePriority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a5f3899c53116ed9ab8c8cec47427970e">HTTP2PriorityQueue::Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a>&#160;</td>
          <td class="paramname"><em>pri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> *&#160;</td>
          <td class="paramname"><em>depth</em> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase.html#a79981b30f800a1f4872ddbd708c1bc5a">proxygen::HTTP2PriorityQueueBase</a>.</p>

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">529</a> of file <a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, <a class="el" href="classproxygen_1_1HTTP2PriorityQueueBase_1_1BaseNode.html#ae5abfb9239fce01e8b66097c0a0368f4">proxygen::HTTP2PriorityQueueBase::BaseNode::calculateDepth()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00365">proxygen::HTTP2PriorityQueue::Node::calculateDepth()</a>, <a class="el" href="HTTP2Framer_8cpp_source.html#l00021">proxygen::http2::DefaultPriority</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00085">proxygen::http2::PriorityUpdate::exclusive</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00695">find()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00241">proxygen::HTTP2PriorityQueue::Node::getID()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00237">proxygen::HTTP2PriorityQueue::Node::getParent()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00145">proxygen::HTTP2PriorityQueue::Node::isDescendantOf()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00413">maxVirtualNodes_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00414">numVirtualNodes_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00245">proxygen::HTTP2PriorityQueue::Node::parentID()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00415">pendingWeightChange_</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00117">proxygen::HTTP2PriorityQueue::Node::reparent()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00409">root_</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00084">proxygen::http2::PriorityUpdate::streamDependency</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00182">uint16_t</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00221">proxygen::HTTP2PriorityQueue::Node::updateWeight()</a>, and <a class="el" href="HTTP2Framer_8h_source.html#l00086">proxygen::http2::PriorityUpdate::weight</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00444">addOrUpdatePriorityNode()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                                    {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  Node* node = CHECK_NOTNULL(dynamic_cast&lt;HTTP2PriorityQueue::Node*&gt;(handle));</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">pendingWeightChange_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Updating id=&quot;</span> &lt;&lt; node-&gt;getID() &lt;&lt; <span class="stringliteral">&quot; with parent=&quot;</span> &lt;&lt;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    pri.streamDependency &lt;&lt; <span class="stringliteral">&quot; and weight=&quot;</span> &lt;&lt; ((<a class="code" href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>)pri.weight + 1);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  node-&gt;updateWeight(pri.weight);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  CHECK_NE(pri.streamDependency, node-&gt;getID()) &lt;&lt;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="stringliteral">&quot;Tried to create a loop in the tree&quot;</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">if</span> (pri.streamDependency == node-&gt;parentID() &amp;&amp; !pri.exclusive) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// no move</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (depth) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      *depth = handle-&gt;calculateDepth();</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span> handle;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  Node* newParent = <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">find</a>(pri.streamDependency, depth);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (!newParent) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (pri.streamDependency == 0 || <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">numVirtualNodes_</a> &gt;= <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">maxVirtualNodes_</a>) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      newParent = &amp;<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">root_</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="comment">// allocate a virtual node for non-existing parent in my depenency tree</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// then do normal priority processing</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      newParent = <span class="keyword">dynamic_cast&lt;</span>Node*<span class="keyword">&gt;</span>(</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;          <a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">addTransaction</a>(pri.streamDependency,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                         <a class="code" href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">http2::DefaultPriority</a>,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                         <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                         <span class="keyword">false</span>,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                         depth));</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      CHECK_NOTNULL(newParent);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      VLOG(4) &lt;&lt; <span class="stringliteral">&quot;updatePriority missing parent, creating virtual parent=&quot;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;              &lt;&lt; newParent-&gt;getID() &lt;&lt; <span class="stringliteral">&quot; for txn=&quot;</span> &lt;&lt; node-&gt;getID();</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">if</span> (newParent-&gt;isDescendantOf(node)) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    newParent = newParent-&gt;reparent(node-&gt;getParent(), <span class="keyword">false</span>);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  node = node-&gt;reparent(newParent, pri.exclusive);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (depth) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    *depth = node-&gt;calculateDepth();</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">return</span> node;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0ea027a556c831f57c0579c172d4901c"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0ea027a556c831f57c0579c172d4901c">proxygen::HTTP2PriorityQueue::maxVirtualNodes_</a></div><div class="ttdeci">uint32_t maxVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00413">HTTP2PriorityQueue.h:413</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ab34d7645f95a94e5f46349fc01757a7e"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ab34d7645f95a94e5f46349fc01757a7e">proxygen::HTTP2PriorityQueue::numVirtualNodes_</a></div><div class="ttdeci">uint32_t numVirtualNodes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00414">HTTP2PriorityQueue.h:414</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a4557bda2ce50c7a0ffb0330874a1fe9a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a4557bda2ce50c7a0ffb0330874a1fe9a">proxygen::HTTP2PriorityQueue::root_</a></div><div class="ttdeci">Node root_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00409">HTTP2PriorityQueue.h:409</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a0f1114b1ae4f30fbee8b97413ebd8d5b"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a0f1114b1ae4f30fbee8b97413ebd8d5b">proxygen::HTTP2PriorityQueue::addTransaction</a></div><div class="ttdeci">Handle addTransaction(HTTPCodec::StreamID id, http2::PriorityUpdate pri, HTTPTransaction *txn, bool permanent=false, uint64_t *depth=nullptr) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00458">HTTP2PriorityQueue.cpp:458</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_afb9f1555bf188aa261fae13785580d64"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#afb9f1555bf188aa261fae13785580d64">proxygen::HTTP2PriorityQueue::find</a></div><div class="ttdeci">Node * find(HTTPCodec::StreamID id, uint64_t *depth=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00695">HTTP2PriorityQueue.cpp:695</a></div></div>
<div class="ttc" id="namespaceproxygen_1_1http2_html_a9d6bc6481640269a7770347be1f72fd5"><div class="ttname"><a href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">proxygen::http2::DefaultPriority</a></div><div class="ttdeci">const PriorityUpdate DefaultPriority</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Framer_8cpp_source.html#l00021">HTTP2Framer.cpp:21</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a44c67d416b18c57368f22cf8dc92a188"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a44c67d416b18c57368f22cf8dc92a188">proxygen::HTTP2PriorityQueue::pendingWeightChange_</a></div><div class="ttdeci">bool pendingWeightChange_</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00415">HTTP2PriorityQueue.h:415</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5a8b2dc9e45a9ee81a94ef304fb62505"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a></div><div class="ttdeci">uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00182">ConstexprMathBenchmark.cpp:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aec5a80788f0441adfb5f88a32d6a2fdc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> proxygen::HTTP2PriorityQueue::activeCount_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00412">412</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00606">clearPendingEgress()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00648">nextEgress()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00596">signalPendingEgress()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00710">updateEnqueuedWeight()</a>.</p>

</div>
</div>
<a class="anchor" id="adfe15f90202ed06b96bfcf099b621af8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> proxygen::HTTP2PriorityQueue::kMaxRebuilds_ = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00411">411</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00722">rebuildTree()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ef07bbcb75673840058ca99261e490c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds proxygen::HTTP2PriorityQueue::kNodeLifetime_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">  std::chrono::seconds(30)</div></div><!-- fragment -->
<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00419">419</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae1517dd39ac349c682c1a98e743c151e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t proxygen::HTTP2PriorityQueue::kNumBuckets = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00066">66</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0ea027a556c831f57c0579c172d4901c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> proxygen::HTTP2PriorityQueue::maxVirtualNodes_ {50}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00413">413</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00578">removeTransaction()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>.</p>

</div>
</div>
<a class="anchor" id="aa46f36146598be2c0a254619f7379d9d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">NextEgressResult</a>* proxygen::HTTP2PriorityQueue::nextEgressResults_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00418">418</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00648">nextEgress()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00640">nextEgressResult()</a>.</p>

</div>
</div>
<a class="anchor" id="abf58a7d0c7a961b7464f297dafccf511"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">NodeMap::bucket_type proxygen::HTTP2PriorityQueue::nodeBuckets_[<a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ae1517dd39ac349c682c1a98e743c151e">kNumBuckets</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00407">407</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3587cbdd473166fed035273971c28c52"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a06a6250504e4c0b66d42b60f6bb26a73">NodeMap</a> proxygen::HTTP2PriorityQueue::nodes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00408">408</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00695">find()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00021">proxygen::HTTP2PriorityQueue::Node::Node()</a>.</p>

</div>
</div>
<a class="anchor" id="ab34d7645f95a94e5f46349fc01757a7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> proxygen::HTTP2PriorityQueue::numVirtualNodes_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00414">414</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00355">proxygen::HTTP2PriorityQueue::Node::convertVirtualNode()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00578">removeTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00035">proxygen::HTTP2PriorityQueue::Node::~Node()</a>.</p>

</div>
</div>
<a class="anchor" id="a44c67d416b18c57368f22cf8dc92a188"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTP2PriorityQueue::pendingWeightChange_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00415">415</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00606">clearPendingEgress()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00578">removeTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00596">signalPendingEgress()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00710">updateEnqueuedWeight()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>.</p>

</div>
</div>
<a class="anchor" id="ad03d3ff2b88896b65c4dcaaf2c04bf49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> proxygen::HTTP2PriorityQueue::rebuildCount_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00410">410</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00722">rebuildTree()</a>.</p>

</div>
</div>
<a class="anchor" id="a4557bda2ce50c7a0ffb0330874a1fe9a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue_1_1Node.html">Node</a> proxygen::HTTP2PriorityQueue::root_ {*this, <a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>, 0, 1, <a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00409">409</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00458">addTransaction()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00616">iterateBFS()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00648">nextEgress()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00722">rebuildTree()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00710">updateEnqueuedWeight()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00529">updatePriority()</a>.</p>

</div>
</div>
<a class="anchor" id="a579a2d30527894df3a6339a160438d7c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> proxygen::HTTP2PriorityQueue::timeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00416">416</a> of file <a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a>.</p>

<p>Referenced by <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00433">attachThreadLocals()</a>, and <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00437">detachThreadLocals()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/lib/http/session/<a class="el" href="HTTP2PriorityQueue_8h_source.html">HTTP2PriorityQueue.h</a></li>
<li>proxygen/lib/http/session/<a class="el" href="HTTP2PriorityQueue_8cpp_source.html">HTTP2PriorityQueue.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceproxygen.html">proxygen</a></li><li class="navelem"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
