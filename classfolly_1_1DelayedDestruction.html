<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::DelayedDestruction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1DelayedDestruction.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1DelayedDestruction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::DelayedDestruction Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::DelayedDestruction:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1DelayedDestruction.png" usemap="#folly::DelayedDestruction_map" alt=""/>
  <map id="folly::DelayedDestruction_map" name="folly::DelayedDestruction_map">
<area href="classfolly_1_1DelayedDestructionBase.html" alt="folly::DelayedDestructionBase" shape="rect" coords="0,56,319,80"/>
<area href="classDeleteGuarder.html" alt="DeleteGuarder" shape="rect" coords="329,168,648,192"/>
<area href="classfizz_1_1client_1_1test_1_1TestFizzClient.html" alt="fizz::client::test::TestFizzClient" shape="rect" coords="329,224,648,248"/>
<area href="classfizz_1_1server_1_1test_1_1TestFizzServer.html" alt="fizz::server::test::TestFizzServer" shape="rect" coords="329,280,648,304"/>
<area href="classfizz_1_1test_1_1TestFizzBase.html" alt="fizz::test::TestFizzBase" shape="rect" coords="329,336,648,360"/>
<area href="classfolly_1_1AsyncPipeReader.html" alt="folly::AsyncPipeReader" shape="rect" coords="329,392,648,416"/>
<area href="classfolly_1_1AsyncPipeWriter.html" alt="folly::AsyncPipeWriter" shape="rect" coords="329,448,648,472"/>
<area href="classfolly_1_1AsyncServerSocket.html" alt="folly::AsyncServerSocket" shape="rect" coords="329,504,648,528"/>
<area href="classfolly_1_1AsyncTransport.html" alt="folly::AsyncTransport" shape="rect" coords="329,560,648,584"/>
<area href="classfolly_1_1HHWheelTimer.html" alt="folly::HHWheelTimer" shape="rect" coords="329,616,648,640"/>
<area href="classfolly_1_1NotificationQueue_1_1Consumer.html" alt="folly::NotificationQueue&lt; MessageT &gt;::Consumer" shape="rect" coords="329,672,648,696"/>
<area href="classproxygen_1_1AsyncTimeoutSet.html" alt="proxygen::AsyncTimeoutSet" shape="rect" coords="329,728,648,752"/>
<area href="classwangle_1_1AcceptorHandshakeHelper.html" alt="wangle::AcceptorHandshakeHelper" shape="rect" coords="329,784,648,808"/>
<area href="classwangle_1_1BroadcastPool_1_1BroadcastManager.html" alt="wangle::BroadcastPool&lt; T, R, P &gt;::BroadcastManager" shape="rect" coords="329,840,648,864"/>
<area href="classwangle_1_1ConnectionManager.html" alt="wangle::ConnectionManager" shape="rect" coords="329,896,648,920"/>
<area href="classwangle_1_1ManagedConnection.html" alt="wangle::ManagedConnection" shape="rect" coords="329,952,648,976"/>
<area href="classwangle_1_1SocketPeeker.html" alt="wangle::SocketPeeker" shape="rect" coords="329,1008,648,1032"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">Destructor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6dd27b219d5af8b2a93d6c324c65e95a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">destroy</a> ()</td></tr>
<tr class="separator:a6dd27b219d5af8b2a93d6c324c65e95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b64caadd65cdae43185e05eb4beb3fa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a2b64caadd65cdae43185e05eb4beb3fa">getDestroyPending</a> () const </td></tr>
<tr class="separator:a2b64caadd65cdae43185e05eb4beb3fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1DelayedDestructionBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1DelayedDestructionBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestructionBase.html">folly::DelayedDestructionBase</a></td></tr>
<tr class="memitem:a50c17a3675426754e89707ded8566f9f inherit pub_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#a50c17a3675426754e89707ded8566f9f">~DelayedDestructionBase</a> ()=default</td></tr>
<tr class="separator:a50c17a3675426754e89707ded8566f9f inherit pub_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:adc9a58eaf38e0e9afea76101942ae7df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#adc9a58eaf38e0e9afea76101942ae7df">~DelayedDestruction</a> () override=default</td></tr>
<tr class="separator:adc9a58eaf38e0e9afea76101942ae7df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42db04c8a694b8584822371afb67012c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a42db04c8a694b8584822371afb67012c">DelayedDestruction</a> ()</td></tr>
<tr class="separator:a42db04c8a694b8584822371afb67012c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classfolly_1_1DelayedDestructionBase"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfolly_1_1DelayedDestructionBase')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfolly_1_1DelayedDestructionBase.html">folly::DelayedDestructionBase</a></td></tr>
<tr class="memitem:ad0257a1b700f005ee75d45ecf67abf76 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#ad0257a1b700f005ee75d45ecf67abf76">DelayedDestructionBase</a> ()</td></tr>
<tr class="separator:ad0257a1b700f005ee75d45ecf67abf76 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31591f967cbdb0b071bff2880de37cb0 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">getDestructorGuardCount</a> () const </td></tr>
<tr class="separator:a31591f967cbdb0b071bff2880de37cb0 inherit pro_methods_classfolly_1_1DelayedDestructionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7ee4bf1f49efa71a3a618596e0e6a93b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a7ee4bf1f49efa71a3a618596e0e6a93b">onDelayedDestroy</a> (bool delayed) override</td></tr>
<tr class="separator:a7ee4bf1f49efa71a3a618596e0e6a93b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a521eb7ae565486d295483e0ef8b502e4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">destroyPending_</a></td></tr>
<tr class="separator:a521eb7ae565486d295483e0ef8b502e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> is a helper class to ensure objects are not deleted while they still have functions executing in a higher stack frame.</p>
<p>This is useful for objects that invoke callback functions, to ensure that a callback does not destroy the calling object.</p>
<p>Classes needing this functionality should:</p><ul>
<li>derive from <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a></li>
<li>make their destructor private or protected, so it cannot be called directly</li>
<li>create a DestructorGuard object on the stack in each public method that may invoke a callback</li>
</ul>
<p><a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> does not perform any locking. It is intended to be used only from a single thread. </p>

<p>Definition at line <a class="el" href="DelayedDestruction_8h_source.html#l00042">42</a> of file <a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adc9a58eaf38e0e9afea76101942ae7df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::DelayedDestruction::~DelayedDestruction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Protected destructor.</p>
<p>Making this protected ensures that users cannot delete <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> objects directly, and that everyone must use <a class="el" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">destroy()</a> instead. Subclasses of <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> must also define their destructors as protected or private in order for this to work.</p>
<p>This also means that <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> objects cannot be created directly on the stack; they must always be dynamically allocated on the heap.</p>
<p>In order to use a <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> object with a <a class="el" href="classshared__ptr.html">shared_ptr</a>, create the <a class="el" href="classshared__ptr.html">shared_ptr</a> using a <a class="el" href="classfolly_1_1DelayedDestruction_1_1Destructor.html">DelayedDestruction::Destructor</a> as the second argument to the <a class="el" href="classshared__ptr.html">shared_ptr</a> constructor. </p>

<p>Referenced by <a class="el" href="DelayedDestruction_8h_source.html#l00076">getDestroyPending()</a>.</p>

</div>
</div>
<a class="anchor" id="a42db04c8a694b8584822371afb67012c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::DelayedDestruction::DelayedDestruction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DelayedDestruction_8h_source.html#l00099">99</a> of file <a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;: <a class="code" href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">destroyPending_</a>(<span class="keyword">false</span>) {}</div><div class="ttc" id="classfolly_1_1DelayedDestruction_html_a521eb7ae565486d295483e0ef8b502e4"><div class="ttname"><a href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">folly::DelayedDestruction::destroyPending_</a></div><div class="ttdeci">bool destroyPending_</div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestruction_8h_source.html#l00109">DelayedDestruction.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6dd27b219d5af8b2a93d6c324c65e95a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void folly::DelayedDestruction::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">destroy()</a> requests destruction of the object.</p>
<p>This method will destroy the object after it has no more functions running higher up on the stack. (i.e., No more DestructorGuard objects exist for this object.) This method must be used instead of the destructor. </p>

<p>Reimplemented in <a class="el" href="classfolly_1_1AsyncSocket.html#ae0f8c59aa413c7d7a130820d8c212a10">folly::AsyncSocket</a>, <a class="el" href="classfolly_1_1AsyncServerSocket.html#a81ffdd396f2f65b8360aa6bd718714ac">folly::AsyncServerSocket</a>, <a class="el" href="classfolly_1_1NotificationQueue_1_1Consumer.html#ac0baa11215fd74b8f248e7764236c5fb">folly::NotificationQueue&lt; MessageT &gt;::Consumer</a>, <a class="el" href="classproxygen_1_1AsyncTimeoutSet.html#a7d73639d69b63ae20941cf85366e64b4">proxygen::AsyncTimeoutSet</a>, <a class="el" href="classfizz_1_1AsyncFizzBase.html#af4d1eda866ca288f4f0e52faa022b5d8">fizz::AsyncFizzBase</a>, and <a class="el" href="classfolly_1_1UndelayedDestruction.html#a83840c34b4e1f2bbf967ec8667783bd2">folly::UndelayedDestruction&lt; HHWheelTimer &gt;</a>.</p>

<p>Definition at line <a class="el" href="DelayedDestruction_8h_source.html#l00051">51</a> of file <a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a>.</p>

<p>References <a class="el" href="DelayedDestruction_8h_source.html#l00109">destroyPending_</a>, <a class="el" href="DelayedDestructionBase_8h_source.html#l00202">folly::DelayedDestructionBase::getDestructorGuardCount()</a>, and <a class="el" href="DelayedDestruction_8h_source.html#l00111">onDelayedDestroy()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02435">proxygen::HTTPSession::checkForShutdown()</a>, <a class="el" href="NotificationQueue_8h_source.html#l00672">folly::NotificationQueue&lt; MessageT &gt;::Consumer::destroy()</a>, <a class="el" href="AsyncServerSocket_8cpp_source.html#l00264">folly::AsyncServerSocket::destroy()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l00364">folly::AsyncSocket::destroy()</a>, and <a class="el" href="DelayedDestruction_8h_source.html#l00071">folly::DelayedDestruction::Destructor::operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                         {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// If guardCount_ is not 0, just set destroyPending_ to delay</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// actual destruction.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">getDestructorGuardCount</a>() != 0) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <a class="code" href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">destroyPending_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <a class="code" href="classfolly_1_1DelayedDestruction.html#a7ee4bf1f49efa71a3a618596e0e6a93b">onDelayedDestroy</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div><div class="ttc" id="classfolly_1_1DelayedDestructionBase_html_a31591f967cbdb0b071bff2880de37cb0"><div class="ttname"><a href="classfolly_1_1DelayedDestructionBase.html#a31591f967cbdb0b071bff2880de37cb0">folly::DelayedDestructionBase::getDestructorGuardCount</a></div><div class="ttdeci">uint32_t getDestructorGuardCount() const </div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestructionBase_8h_source.html#l00202">DelayedDestructionBase.h:202</a></div></div>
<div class="ttc" id="classfolly_1_1DelayedDestruction_html_a521eb7ae565486d295483e0ef8b502e4"><div class="ttname"><a href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">folly::DelayedDestruction::destroyPending_</a></div><div class="ttdeci">bool destroyPending_</div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestruction_8h_source.html#l00109">DelayedDestruction.h:109</a></div></div>
<div class="ttc" id="classfolly_1_1DelayedDestruction_html_a7ee4bf1f49efa71a3a618596e0e6a93b"><div class="ttname"><a href="classfolly_1_1DelayedDestruction.html#a7ee4bf1f49efa71a3a618596e0e6a93b">folly::DelayedDestruction::onDelayedDestroy</a></div><div class="ttdeci">void onDelayedDestroy(bool delayed) override</div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestruction_8h_source.html#l00111">DelayedDestruction.h:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b64caadd65cdae43185e05eb4beb3fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::DelayedDestruction::getDestroyPending </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DelayedDestruction_8h_source.html#l00076">76</a> of file <a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a>.</p>

<p>References <a class="el" href="DelayedDestruction_8h_source.html#l00109">destroyPending_</a>, and <a class="el" href="classfolly_1_1DelayedDestruction.html#adc9a58eaf38e0e9afea76101942ae7df">~DelayedDestruction()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                 {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">destroyPending_</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div><div class="ttc" id="classfolly_1_1DelayedDestruction_html_a521eb7ae565486d295483e0ef8b502e4"><div class="ttname"><a href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">folly::DelayedDestruction::destroyPending_</a></div><div class="ttdeci">bool destroyPending_</div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestruction_8h_source.html#l00109">DelayedDestruction.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ee4bf1f49efa71a3a618596e0e6a93b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::DelayedDestruction::onDelayedDestroy </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>delayed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Implement onDelayedDestroy in subclasses. <a class="el" href="classfolly_1_1DelayedDestruction.html#a7ee4bf1f49efa71a3a618596e0e6a93b">onDelayedDestroy()</a> is invoked when the object is potentially being destroyed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delayed</td><td>This parameter is true if destruction was delayed because of a DestructorGuard object, or false if <a class="el" href="classfolly_1_1DelayedDestruction.html#a7ee4bf1f49efa71a3a618596e0e6a93b">onDelayedDestroy()</a> is being called directly from the destructor. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfolly_1_1DelayedDestructionBase.html#a65487c0672e60ea66d41e8d6fefe0106">folly::DelayedDestructionBase</a>.</p>

<p>Reimplemented in <a class="el" href="classfolly_1_1UndelayedDestruction.html#ab3850f9c8b3fd31ca562d43a2932d8cc">folly::UndelayedDestruction&lt; HHWheelTimer &gt;</a>.</p>

<p>Definition at line <a class="el" href="DelayedDestruction_8h_source.html#l00111">111</a> of file <a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a>.</p>

<p>Referenced by <a class="el" href="DelayedDestruction_8h_source.html#l00051">destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                               {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// check if it is ok to destroy now</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (delayed &amp;&amp; !<a class="code" href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">destroyPending_</a>) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">destroyPending_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">delete</span> <span class="keyword">this</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div><div class="ttc" id="classfolly_1_1DelayedDestruction_html_a521eb7ae565486d295483e0ef8b502e4"><div class="ttname"><a href="classfolly_1_1DelayedDestruction.html#a521eb7ae565486d295483e0ef8b502e4">folly::DelayedDestruction::destroyPending_</a></div><div class="ttdeci">bool destroyPending_</div><div class="ttdef"><b>Definition:</b> <a href="DelayedDestruction_8h_source.html#l00109">DelayedDestruction.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a521eb7ae565486d295483e0ef8b502e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::DelayedDestruction::destroyPending_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>destroyPending_ is set to true if destoy() is called while guardCount_ is non-zero. It is set to false before the object is deleted.</p>
<p>If destroyPending_ is true, the object will be destroyed the next time guardCount_ drops to 0. </p>

<p>Definition at line <a class="el" href="DelayedDestruction_8h_source.html#l00109">109</a> of file <a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a>.</p>

<p>Referenced by <a class="el" href="DelayedDestruction_8h_source.html#l00051">destroy()</a>, and <a class="el" href="DelayedDestruction_8h_source.html#l00076">getDestroyPending()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>proxygen/folly/folly/io/async/<a class="el" href="DelayedDestruction_8h_source.html">DelayedDestruction.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
