<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::DynamicParser Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1DynamicParser.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1DynamicParser-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::DynamicParser Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1DynamicParser_1_1ParserStack.html">ParserStack</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa3593d167826318d02d87f16ad12febf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febf">OnError</a> { <a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa921df56002ee5dc960debedc8ae06072">OnError::RECORD</a>, 
<a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa655474de4674aba7a436a73cd8d9a906">OnError::THROW</a>
 }</td></tr>
<tr class="separator:aa3593d167826318d02d87f16ad12febf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a33e11424a33b5160853fafc9155f5c14"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a33e11424a33b5160853fafc9155f5c14">DynamicParser</a> (<a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febf">OnError</a> on_error, const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> *d)</td></tr>
<tr class="separator:a33e11424a33b5160853fafc9155f5c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e12d5fe7948520a5e5ab87e3ac7556"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#aa4e12d5fe7948520a5e5ab87e3ac7556">releaseErrors</a> ()</td></tr>
<tr class="separator:aa4e12d5fe7948520a5e5ab87e3ac7556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf008bca3bd1c61317de3e1bbe58759"><td class="memTemplParams" colspan="2">template&lt;typename Fn &gt; </td></tr>
<tr class="memitem:afbf008bca3bd1c61317de3e1bbe58759"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#afbf008bca3bd1c61317de3e1bbe58759">optional</a> (const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;<a class="el" href="classfolly_1_1DynamicParser.html#ac7a9d040753fd5f733a3e9b528466f97">key</a>, Fn)</td></tr>
<tr class="separator:afbf008bca3bd1c61317de3e1bbe58759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7337e80a223fc49f253057ad22929be"><td class="memTemplParams" colspan="2">template&lt;typename Fn &gt; </td></tr>
<tr class="memitem:ab7337e80a223fc49f253057ad22929be"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#ab7337e80a223fc49f253057ad22929be">required</a> (const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;<a class="el" href="classfolly_1_1DynamicParser.html#ac7a9d040753fd5f733a3e9b528466f97">key</a>, Fn)</td></tr>
<tr class="separator:ab7337e80a223fc49f253057ad22929be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aad7a9c3e0159b35bd12871dfac7fa4"><td class="memTemplParams" colspan="2">template&lt;typename Fn &gt; </td></tr>
<tr class="memitem:a0aad7a9c3e0159b35bd12871dfac7fa4"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a0aad7a9c3e0159b35bd12871dfac7fa4">objectItems</a> (Fn)</td></tr>
<tr class="separator:a0aad7a9c3e0159b35bd12871dfac7fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a38f8476446f75b39a47475f1950889"><td class="memTemplParams" colspan="2">template&lt;typename Fn &gt; </td></tr>
<tr class="memitem:a4a38f8476446f75b39a47475f1950889"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a4a38f8476446f75b39a47475f1950889">arrayItems</a> (Fn)</td></tr>
<tr class="separator:a4a38f8476446f75b39a47475f1950889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a9d040753fd5f733a3e9b528466f97"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#ac7a9d040753fd5f733a3e9b528466f97">key</a> () const </td></tr>
<tr class="separator:ac7a9d040753fd5f733a3e9b528466f97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ec53996633b340a69a637fe369f14f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a> () const </td></tr>
<tr class="separator:af9ec53996633b340a69a637fe369f14f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49eda9d36f0d3345bc417a7d93d3d6a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1DynamicParser.html">DynamicParser</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a49eda9d36f0d3345bc417a7d93d3d6a6">setAllowNonStringKeyErrors</a> (bool <a class="el" href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a>)</td></tr>
<tr class="separator:a49eda9d36f0d3345bc417a7d93d3d6a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac391747f41f6f4b6d7e83d2ef048fb3c"><td class="memTemplParams" colspan="2">template&lt;typename Fn &gt; </td></tr>
<tr class="memitem:ac391747f41f6f4b6d7e83d2ef048fb3c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">wrapError</a> (const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> *lookup_key, Fn)</td></tr>
<tr class="separator:ac391747f41f6f4b6d7e83d2ef048fb3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab175349abe705242673f222f4893d4fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#ab175349abe705242673f222f4893d4fe">reportError</a> (const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> *lookup_k, const std::exception &amp;ex)</td></tr>
<tr class="separator:ab175349abe705242673f222f4893d4fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cbf51aa89d4960e068a939c5107e72a"><td class="memTemplParams" colspan="2">template&lt;typename Fn &gt; </td></tr>
<tr class="memitem:a5cbf51aa89d4960e068a939c5107e72a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">parse</a> (const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;<a class="el" href="classfolly_1_1DynamicParser.html#ac7a9d040753fd5f733a3e9b528466f97">key</a>, const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;<a class="el" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>, Fn fn)</td></tr>
<tr class="separator:a5cbf51aa89d4960e068a939c5107e72a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a45ef4da3a9e03376f31c638bd7335e8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febf">OnError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a45ef4da3a9e03376f31c638bd7335e8e">onError_</a></td></tr>
<tr class="separator:a45ef4da3a9e03376f31c638bd7335e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98d9bc5e368ac81e16972aea0881138d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1DynamicParser_1_1ParserStack.html">ParserStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a></td></tr>
<tr class="separator:a98d9bc5e368ac81e16972aea0881138d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b2e8c727c39d08e2913fa1dcd2088d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1DynamicParser.html#a12b2e8c727c39d08e2913fa1dcd2088d">allowNonStringKeyErrors_</a> {false}</td></tr>
<tr class="separator:a12b2e8c727c39d08e2913fa1dcd2088d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00229">229</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="aa3593d167826318d02d87f16ad12febf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febf">folly::DynamicParser::OnError</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aa3593d167826318d02d87f16ad12febfa921df56002ee5dc960debedc8ae06072"></a>RECORD&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aa3593d167826318d02d87f16ad12febfa655474de4674aba7a436a73cd8d9a906"></a>THROW&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00231">231</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                     {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// After parsing, releaseErrors() reports all parse errors.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// Throws DynamicParserLogicError on programmer errors.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    RECORD,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// Throws DynamicParserParseError on the first parse error, or</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// DynamicParserLogicError on programmer errors.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="namespacefolly.html#a1885220186586fb374aace4b081b2efca655474de4674aba7a436a73cd8d9a906">THROW</a>,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  };</div><div class="ttc" id="namespacefolly_html_a1885220186586fb374aace4b081b2efca655474de4674aba7a436a73cd8d9a906"><div class="ttname"><a href="namespacefolly.html#a1885220186586fb374aace4b081b2efca655474de4674aba7a436a73cd8d9a906">folly::QueueBehaviorIfFull::THROW</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a33e11424a33b5160853fafc9155f5c14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::DynamicParser::DynamicParser </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febf">OnError</a>&#160;</td>
          <td class="paramname"><em>on_error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> *&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00241">241</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      : <a class="code" href="classfolly_1_1DynamicParser.html#a45ef4da3a9e03376f31c638bd7335e8e">onError_</a>(<a class="code" href="namespacefolly_1_1pushmi.html#a8c6827ff5ab3b42b5d5204a123ad0d1f">on_error</a>), <a class="code" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a>(d) {} <span class="comment">// Always access input through stack_</span></div><div class="ttc" id="classfolly_1_1DynamicParser_html_a45ef4da3a9e03376f31c638bd7335e8e"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a45ef4da3a9e03376f31c638bd7335e8e">folly::DynamicParser::onError_</a></div><div class="ttdeci">OnError onError_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00406">DynamicParser.h:406</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_html_a8c6827ff5ab3b42b5d5204a123ad0d1f"><div class="ttname"><a href="namespacefolly_1_1pushmi.html#a8c6827ff5ab3b42b5d5204a123ad0d1f">folly::pushmi::on_error</a></div><div class="ttdeci">auto on_error(Fns...fns) -&gt; on_error_fn&lt; Fns... &gt;</div><div class="ttdef"><b>Definition:</b> <a href="boosters_8h_source.html#l00273">boosters.h:273</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a98d9bc5e368ac81e16972aea0881138d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">folly::DynamicParser::stack_</a></div><div class="ttdeci">ParserStack stack_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00407">DynamicParser.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4a38f8476446f75b39a47475f1950889"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Fn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void folly::DynamicParser::arrayItems </td>
          <td>(</td>
          <td class="paramtype">Fn&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Like <a class="el" href="classfolly_1_1DynamicParser.html#a0aad7a9c3e0159b35bd12871dfac7fa4">objectItems()</a> &ndash; arrays are treated identically to objects with integer keys from 0 to <a class="el" href="namespacefolly.html#a0606ba855bcb96a1673880aa3b404993">size()</a> - 1. </p>

<p>Definition at line <a class="el" href="DynamicParser-inl_8h_source.html#l00280">280</a> of file <a class="el" href="DynamicParser-inl_8h_source.html">DynamicParser-inl.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">i</a>, <a class="el" href="test_8c_source.html#l01591">parse()</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="DynamicParserTest_8cpp_source.html#l00119">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                    {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">wrapError</a>(<span class="keyword">nullptr</span>, [&amp;]() {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = 0;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="namespacefolly_1_1pushmi.html">v</a> : <a class="code" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>()) { <span class="comment">// Iteration can throw</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <a class="code" href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">parse</a>(i, <a class="code" href="namespacefolly_1_1pushmi.html">v</a>, fn); <span class="comment">// i =&gt; dynamic cannot throw</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      ++<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  });</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1pushmi_html"><div class="ttname"><a href="namespacefolly_1_1pushmi.html">folly::pushmi</a></div><div class="ttdef"><b>Definition:</b> <a href="boosters_8h_source.html#l00030">boosters.h:30</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_html_a7e98b8a17c0aad30ba64d47b74e2a6c1"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">gtest_output_test_golden_lin.txt:83</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_ac391747f41f6f4b6d7e83d2ef048fb3c"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">folly::DynamicParser::wrapError</a></div><div class="ttdeci">void wrapError(const folly::dynamic *lookup_key, Fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00291">DynamicParser-inl.h:291</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_af9ec53996633b340a69a637fe369f14f"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">folly::DynamicParser::value</a></div><div class="ttdeci">const folly::dynamic &amp; value() const </div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00290">DynamicParser.h:290</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a5cbf51aa89d4960e068a939c5107e72a"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">folly::DynamicParser::parse</a></div><div class="ttdeci">void parse(const folly::dynamic &amp;key, const folly::dynamic &amp;value, Fn fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00307">DynamicParser-inl.h:307</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac7a9d040753fd5f733a3e9b528466f97"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a>&amp; folly::DynamicParser::key </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The key currently being parsed (integer if inside an array). Throws if called outside of a parser callback. </p>

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00283">283</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>

<p>References <a class="el" href="FiberManager_8cpp_source.html#l00357">stack_</a>.</p>

<p>Referenced by <a class="el" href="DynamicParserTest_8cpp_source.html#l00119">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                         {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a>.<a class="code" href="structfolly_1_1DynamicParser_1_1ParserStack.html#afd5433efb2f1ab81c73cc235ca5a067b">key</a>();</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div><div class="ttc" id="structfolly_1_1DynamicParser_1_1ParserStack_html_afd5433efb2f1ab81c73cc235ca5a067b"><div class="ttname"><a href="structfolly_1_1DynamicParser_1_1ParserStack.html#afd5433efb2f1ab81c73cc235ca5a067b">folly::DynamicParser::ParserStack::key</a></div><div class="ttdeci">const folly::dynamic &amp; key() const </div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00315">DynamicParser-inl.h:315</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a98d9bc5e368ac81e16972aea0881138d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">folly::DynamicParser::stack_</a></div><div class="ttdeci">ParserStack stack_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00407">DynamicParser.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0aad7a9c3e0159b35bd12871dfac7fa4"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Fn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void folly::DynamicParser::objectItems </td>
          <td>(</td>
          <td class="paramtype">Fn&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Iterate over the current object's keys and values. Report each item's errors under its own key in a matching sub-object of "errors". </p>

<p>Definition at line <a class="el" href="DynamicParser-inl_8h_source.html#l00271">271</a> of file <a class="el" href="DynamicParser-inl_8h_source.html">DynamicParser-inl.h</a>.</p>

<p>References <a class="el" href="test_8c_source.html#l01591">parse()</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="DynamicParserTest_8cpp_source.html#l00119">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                     {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <a class="code" href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">wrapError</a>(<span class="keyword">nullptr</span>, [&amp;]() {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; kv : <a class="code" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>().items()) { <span class="comment">// .items() can throw</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">parse</a>(kv.first, kv.second, fn);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  });</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div><div class="ttc" id="classfolly_1_1DynamicParser_html_ac391747f41f6f4b6d7e83d2ef048fb3c"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">folly::DynamicParser::wrapError</a></div><div class="ttdeci">void wrapError(const folly::dynamic *lookup_key, Fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00291">DynamicParser-inl.h:291</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_af9ec53996633b340a69a637fe369f14f"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">folly::DynamicParser::value</a></div><div class="ttdeci">const folly::dynamic &amp; value() const </div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00290">DynamicParser.h:290</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a5cbf51aa89d4960e068a939c5107e72a"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">folly::DynamicParser::parse</a></div><div class="ttdeci">void parse(const folly::dynamic &amp;key, const folly::dynamic &amp;value, Fn fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00307">DynamicParser-inl.h:307</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afbf008bca3bd1c61317de3e1bbe58759"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Fn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void folly::DynamicParser::optional </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Fn&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Error-wraps fn(auto-converted key &amp; value) if d[key] is set. The top-of-file docblock explains the auto-conversion. </p>

<p>Definition at line <a class="el" href="DynamicParser-inl_8h_source.html#l00244">244</a> of file <a class="el" href="DynamicParser-inl_8h_source.html">DynamicParser-inl.h</a>.</p>

<p>References <a class="el" href="MapUtil_8h_source.html#l00169">folly::get_ptr()</a>, <a class="el" href="test_8c_source.html#l01591">parse()</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="DynamicParserTest_8cpp_source.html#l00080">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                                                           {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">wrapError</a>(&amp;key, [&amp;]() {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> vp = <a class="code" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>().<a class="code" href="namespacefolly.html#a9ce81b3f51cd637320038003e75c2d86">get_ptr</a>(key)) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">parse</a>(key, *vp, fn);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  });</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div><div class="ttc" id="namespacefolly_html_a9ce81b3f51cd637320038003e75c2d86"><div class="ttname"><a href="namespacefolly.html#a9ce81b3f51cd637320038003e75c2d86">folly::get_ptr</a></div><div class="ttdeci">const Map::mapped_type * get_ptr(const Map &amp;map, const Key &amp;key)</div><div class="ttdef"><b>Definition:</b> <a href="MapUtil_8h_source.html#l00169">MapUtil.h:169</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_ac391747f41f6f4b6d7e83d2ef048fb3c"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">folly::DynamicParser::wrapError</a></div><div class="ttdeci">void wrapError(const folly::dynamic *lookup_key, Fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00291">DynamicParser-inl.h:291</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_af9ec53996633b340a69a637fe369f14f"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">folly::DynamicParser::value</a></div><div class="ttdeci">const folly::dynamic &amp; value() const </div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00290">DynamicParser.h:290</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a5cbf51aa89d4960e068a939c5107e72a"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">folly::DynamicParser::parse</a></div><div class="ttdeci">void parse(const folly::dynamic &amp;key, const folly::dynamic &amp;value, Fn fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00307">DynamicParser-inl.h:307</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5cbf51aa89d4960e068a939c5107e72a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Fn &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::DynamicParser::parse </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Fn&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DynamicParser-inl_8h_source.html#l00307">307</a> of file <a class="el" href="DynamicParser-inl_8h_source.html">DynamicParser-inl.h</a>.</p>

<p>References <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="DynamicParser-inl_8h_source.html#l00102">folly::detail::invokeForKeyValue()</a>, and <a class="el" href="FiberManager_8cpp_source.html#l00357">stack_</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;           {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a>.<a class="code" href="structfolly_1_1DynamicParser_1_1ParserStack.html#a80fc67fead8ae03297db6e85bf281ec1">push</a>(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, <a class="code" href="namespacefolly_1_1pushmi.html">v</a>); <span class="comment">// User code can nest parser calls.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">wrapError</a>(<span class="keyword">nullptr</span>, [&amp;]() { <a class="code" href="namespacefolly_1_1detail.html#a96bc40651a0840f1d57d12b4262f96a1">detail::invokeForKeyValue</a>(fn, <a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, <a class="code" href="namespacefolly_1_1pushmi.html">v</a>); });</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1detail_html_a96bc40651a0840f1d57d12b4262f96a1"><div class="ttname"><a href="namespacefolly_1_1detail.html#a96bc40651a0840f1d57d12b4262f96a1">folly::detail::invokeForKeyValue</a></div><div class="ttdeci">EnableForArgTypes&lt; Fn &gt; invokeForKeyValue(Fn f, const folly::dynamic &amp;, const folly::dynamic &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00102">DynamicParser-inl.h:102</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_html"><div class="ttname"><a href="namespacefolly_1_1pushmi.html">folly::pushmi</a></div><div class="ttdef"><b>Definition:</b> <a href="boosters_8h_source.html#l00030">boosters.h:30</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_ac391747f41f6f4b6d7e83d2ef048fb3c"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">folly::DynamicParser::wrapError</a></div><div class="ttdeci">void wrapError(const folly::dynamic *lookup_key, Fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00291">DynamicParser-inl.h:291</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="structfolly_1_1DynamicParser_1_1ParserStack_html_a80fc67fead8ae03297db6e85bf281ec1"><div class="ttname"><a href="structfolly_1_1DynamicParser_1_1ParserStack.html#a80fc67fead8ae03297db6e85bf281ec1">folly::DynamicParser::ParserStack::push</a></div><div class="ttdeci">PopGuard push(const folly::dynamic &amp;k, const folly::dynamic &amp;v) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8cpp_source.html#l00130">DynamicParser.cpp:130</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a98d9bc5e368ac81e16972aea0881138d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">folly::DynamicParser::stack_</a></div><div class="ttdeci">ParserStack stack_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00407">DynamicParser.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4e12d5fe7948520a5e5ab87e3ac7556"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> folly::DynamicParser::releaseErrors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Once you finished the entire parse, returns a structured description of all parse errors (see top-of-file docblock). May ONLY be called once. May NOT be called if the parse threw any kind of exception. Returns an empty object for successful <a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa655474de4674aba7a436a73cd8d9a906">OnError::THROW</a> parsers. </p>

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00250">250</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>

<p>References <a class="el" href="FiberManager_8cpp_source.html#l00357">stack_</a>.</p>

<p>Referenced by <a class="el" href="DynamicParserTest_8cpp_source.html#l00293">checkItemParseError()</a>, <a class="el" href="DynamicParserTest_8cpp_source.html#l00038">checkMaybeCoercedKeys()</a>, <a class="el" href="DynamicParserTest_8cpp_source.html#l00224">checkXYKeyErrorsAndParseError()</a>, and <a class="el" href="DynamicParserTest_8cpp_source.html#l00080">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                               {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a>.<a class="code" href="structfolly_1_1DynamicParser_1_1ParserStack.html#af6c589205d15a7bf60f82deae08a37a2">releaseErrors</a>();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div><div class="ttc" id="structfolly_1_1DynamicParser_1_1ParserStack_html_af6c589205d15a7bf60f82deae08a37a2"><div class="ttname"><a href="structfolly_1_1DynamicParser_1_1ParserStack.html#af6c589205d15a7bf60f82deae08a37a2">folly::DynamicParser::ParserStack::releaseErrors</a></div><div class="ttdeci">folly::dynamic releaseErrors()</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8cpp_source.html#l00165">DynamicParser.cpp:165</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a98d9bc5e368ac81e16972aea0881138d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">folly::DynamicParser::stack_</a></div><div class="ttdeci">ParserStack stack_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00407">DynamicParser.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab175349abe705242673f222f4893d4fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::DynamicParser::reportError </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> *&#160;</td>
          <td class="paramname"><em>lookup_k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::exception &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DynamicParser_8cpp_source.html#l00053">53</a> of file <a class="el" href="DynamicParser_8cpp_source.html">DynamicParser.cpp</a>.</p>

<p>References <a class="el" href="DynamicParser_8h_source.html#l00408">allowNonStringKeyErrors_</a>, <a class="el" href="DynamicParser_8cpp_source.html#l00144">folly::DynamicParser::ParserStack::errors()</a>, <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">folly::FATAL</a>, <a class="el" href="dynamic-inl_8h_source.html#l00240">folly::dynamic::object()</a>, <a class="el" href="DynamicParser_8h_source.html#l00406">onError_</a>, <a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa921df56002ee5dc960debedc8ae06072">RECORD</a>, <a class="el" href="DynamicParser_8h_source.html#l00407">stack_</a>, <a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa655474de4674aba7a436a73cd8d9a906">THROW</a>, <a class="el" href="DynamicParser_8cpp_source.html#l00179">folly::DynamicParser::ParserStack::throwErrors()</a>, <a class="el" href="DynamicParser_8cpp_source.html#l00194">folly::detail::toPseudoJson()</a>, and <a class="el" href="DynamicParser_8h_source.html#l00290">value()</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                            {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// If descendants of this item, or other keys on it, already reported an</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// error, the error object would already exist.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keyword">auto</span>&amp; e = <a class="code" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a>.<a class="code" href="structfolly_1_1DynamicParser_1_1ParserStack.html#adadb26e5408a3a280506a218406744c0">errors</a>(<a class="code" href="classfolly_1_1DynamicParser.html#a12b2e8c727c39d08e2913fa1dcd2088d">allowNonStringKeyErrors_</a>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Save the original, unparseable value of the item causing the error.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// value() can throw here, but if it does, it is due to programmer error,</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// so we don&#39;t want to report it as a parse error anyway.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* e_val_ptr = e.get_ptr(<span class="stringliteral">&quot;value&quot;</span>)) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// Failing to access distinct keys on the same value can generate</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// multiple errors, but the value should remain the same.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (*e_val_ptr != <a class="code" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>()) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">throw</span> DynamicParserLogicError(</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;          <span class="stringliteral">&quot;Overwriting value: &quot;</span>,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;          <a class="code" href="namespacefolly_1_1detail.html#aa36e8ea6da58a2ef91ca1fae159e4aac">detail::toPseudoJson</a>(*e_val_ptr),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;          <span class="stringliteral">&quot; with &quot;</span>,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;          <a class="code" href="namespacefolly_1_1detail.html#aa36e8ea6da58a2ef91ca1fae159e4aac">detail::toPseudoJson</a>(<a class="code" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>()),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;          <span class="stringliteral">&quot; for error &quot;</span>,</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;          ex.what());</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// The e[&quot;value&quot;].isNull() trick cannot be used because value().type()</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// *can* be folly::dynamic::Type::NULLT, so we must hash again.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    e[<span class="stringliteral">&quot;value&quot;</span>] = <a class="code" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// Differentiate between &quot;parsing value&quot; and &quot;looking up key&quot; errors.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keyword">auto</span>&amp; e_msg = [&amp;]() -&gt; <a class="code" href="structfolly_1_1dynamic.html">folly::dynamic</a>&amp; {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (lookup_k == <span class="keyword">nullptr</span>) { <span class="comment">// {object,array}Items, or post-key-lookup</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">return</span> e[<span class="stringliteral">&quot;error&quot;</span>];</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// Multiple key lookups can report errors on the same collection.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">auto</span>&amp; key_errors = e[<span class="stringliteral">&quot;key_errors&quot;</span>];</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (key_errors.isNull()) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="comment">// Treat arrays as integer-keyed objects.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      key_errors = <a class="code" href="structfolly_1_1dynamic.html#a4deaba4e102d281a46a072e061967ac2">folly::dynamic::object</a>();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> insertAtKey(&amp;key_errors, <a class="code" href="classfolly_1_1DynamicParser.html#a12b2e8c727c39d08e2913fa1dcd2088d">allowNonStringKeyErrors_</a>, *lookup_k);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (!e_msg.isNull()) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">throw</span> DynamicParserLogicError(</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="stringliteral">&quot;Overwriting error: &quot;</span>,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="namespacefolly_1_1detail.html#aa36e8ea6da58a2ef91ca1fae159e4aac">detail::toPseudoJson</a>(e_msg),</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="stringliteral">&quot; with: &quot;</span>,</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        ex.what());</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  e_msg = ex.what();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="classfolly_1_1DynamicParser.html#a45ef4da3a9e03376f31c638bd7335e8e">onError_</a>) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa921df56002ee5dc960debedc8ae06072">OnError::RECORD</a>:</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">// Continue parsing</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa655474de4674aba7a436a73cd8d9a906">OnError::THROW</a>:</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a>.<a class="code" href="structfolly_1_1DynamicParser_1_1ParserStack.html#a121a6f949aff49d5335b4db743b4cd0e">throwErrors</a>(); <span class="comment">// Package releaseErrors() into an exception.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      LOG(<a class="code" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">FATAL</a>) &lt;&lt; <span class="stringliteral">&quot;Bad onError_: &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classfolly_1_1DynamicParser.html#a45ef4da3a9e03376f31c638bd7335e8e">onError_</a>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="ttc" id="classfolly_1_1DynamicParser_html_a12b2e8c727c39d08e2913fa1dcd2088d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a12b2e8c727c39d08e2913fa1dcd2088d">folly::DynamicParser::allowNonStringKeyErrors_</a></div><div class="ttdeci">bool allowNonStringKeyErrors_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00408">DynamicParser.h:408</a></div></div>
<div class="ttc" id="structfolly_1_1dynamic_html_a4deaba4e102d281a46a072e061967ac2"><div class="ttname"><a href="structfolly_1_1dynamic.html#a4deaba4e102d281a46a072e061967ac2">folly::dynamic::object</a></div><div class="ttdeci">static ObjectMaker object()</div><div class="ttdef"><b>Definition:</b> <a href="dynamic-inl_8h_source.html#l00240">dynamic-inl.h:240</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a45ef4da3a9e03376f31c638bd7335e8e"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a45ef4da3a9e03376f31c638bd7335e8e">folly::DynamicParser::onError_</a></div><div class="ttdeci">OnError onError_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00406">DynamicParser.h:406</a></div></div>
<div class="ttc" id="structfolly_1_1dynamic_html"><div class="ttname"><a href="structfolly_1_1dynamic.html">folly::dynamic</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamic_8h_source.html#l00079">dynamic.h:79</a></div></div>
<div class="ttc" id="structfolly_1_1DynamicParser_1_1ParserStack_html_a121a6f949aff49d5335b4db743b4cd0e"><div class="ttname"><a href="structfolly_1_1DynamicParser_1_1ParserStack.html#a121a6f949aff49d5335b4db743b4cd0e">folly::DynamicParser::ParserStack::throwErrors</a></div><div class="ttdeci">void throwErrors()</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8cpp_source.html#l00179">DynamicParser.cpp:179</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_af9ec53996633b340a69a637fe369f14f"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">folly::DynamicParser::value</a></div><div class="ttdeci">const folly::dynamic &amp; value() const </div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00290">DynamicParser.h:290</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_aa36e8ea6da58a2ef91ca1fae159e4aac"><div class="ttname"><a href="namespacefolly_1_1detail.html#aa36e8ea6da58a2ef91ca1fae159e4aac">folly::detail::toPseudoJson</a></div><div class="ttdeci">std::string toPseudoJson(const folly::dynamic &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8cpp_source.html#l00194">DynamicParser.cpp:194</a></div></div>
<div class="ttc" id="structfolly_1_1DynamicParser_1_1ParserStack_html_adadb26e5408a3a280506a218406744c0"><div class="ttname"><a href="structfolly_1_1DynamicParser_1_1ParserStack.html#adadb26e5408a3a280506a218406744c0">folly::DynamicParser::ParserStack::errors</a></div><div class="ttdeci">folly::dynamic &amp; errors(bool allow_non_string_keys) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8cpp_source.html#l00144">DynamicParser.cpp:144</a></div></div>
<div class="ttc" id="namespacefolly_html_a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc"><div class="ttname"><a href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa19da7170bea36556dde582519795f3fc">folly::LogLevel::FATAL</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_aa3593d167826318d02d87f16ad12febfa921df56002ee5dc960debedc8ae06072"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa921df56002ee5dc960debedc8ae06072">folly::DynamicParser::OnError::RECORD</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_aa3593d167826318d02d87f16ad12febfa655474de4674aba7a436a73cd8d9a906"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febfa655474de4674aba7a436a73cd8d9a906">folly::DynamicParser::OnError::THROW</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a98d9bc5e368ac81e16972aea0881138d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">folly::DynamicParser::stack_</a></div><div class="ttdeci">ParserStack stack_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00407">DynamicParser.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab7337e80a223fc49f253057ad22929be"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Fn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void folly::DynamicParser::required </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Fn&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DynamicParser-inl_8h_source.html#l00257">257</a> of file <a class="el" href="DynamicParser-inl_8h_source.html">DynamicParser-inl.h</a>.</p>

<p>References <a class="el" href="test_8c_source.html#l01591">parse()</a>, <a class="el" href="DynamicParser_8cpp_source.html#l00194">folly::detail::toPseudoJson()</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="DynamicParserTest_8cpp_source.html#l00038">checkMaybeCoercedKeys()</a>, and <a class="el" href="DynamicParserTest_8cpp_source.html#l00080">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                                           {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <a class="code" href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">wrapError</a>(&amp;key, [&amp;]() {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">auto</span> vp = <a class="code" href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">value</a>().<a class="code" href="structfolly_1_1dynamic.html#aa70cb187d92b20ecd741793128f36906">get_ptr</a>(key);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (!vp) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(folly::to&lt;std::string&gt;(</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          <span class="stringliteral">&quot;Couldn&#39;t find key &quot;</span>,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          <a class="code" href="namespacefolly_1_1detail.html#aa36e8ea6da58a2ef91ca1fae159e4aac">detail::toPseudoJson</a>(key),</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <span class="stringliteral">&quot; in dynamic object&quot;</span>));</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">parse</a>(key, *vp, fn);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  });</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div><div class="ttc" id="classfolly_1_1DynamicParser_html_ac391747f41f6f4b6d7e83d2ef048fb3c"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">folly::DynamicParser::wrapError</a></div><div class="ttdeci">void wrapError(const folly::dynamic *lookup_key, Fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00291">DynamicParser-inl.h:291</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_af9ec53996633b340a69a637fe369f14f"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#af9ec53996633b340a69a637fe369f14f">folly::DynamicParser::value</a></div><div class="ttdeci">const folly::dynamic &amp; value() const </div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00290">DynamicParser.h:290</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_aa36e8ea6da58a2ef91ca1fae159e4aac"><div class="ttname"><a href="namespacefolly_1_1detail.html#aa36e8ea6da58a2ef91ca1fae159e4aac">folly::detail::toPseudoJson</a></div><div class="ttdeci">std::string toPseudoJson(const folly::dynamic &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8cpp_source.html#l00194">DynamicParser.cpp:194</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a5cbf51aa89d4960e068a939c5107e72a"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a5cbf51aa89d4960e068a939c5107e72a">folly::DynamicParser::parse</a></div><div class="ttdeci">void parse(const folly::dynamic &amp;key, const folly::dynamic &amp;value, Fn fn)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00307">DynamicParser-inl.h:307</a></div></div>
<div class="ttc" id="structfolly_1_1dynamic_html_aa70cb187d92b20ecd741793128f36906"><div class="ttname"><a href="structfolly_1_1dynamic.html#aa70cb187d92b20ecd741793128f36906">folly::dynamic::get_ptr</a></div><div class="ttdeci">const dynamic * get_ptr(json_pointer const &amp;) const &amp;</div><div class="ttdef"><b>Definition:</b> <a href="dynamic_8cpp_source.html#l00371">dynamic.cpp:371</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49eda9d36f0d3345bc417a7d93d3d6a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1DynamicParser.html">DynamicParser</a>&amp; folly::DynamicParser::setAllowNonStringKeyErrors </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>By default, <a class="el" href="classfolly_1_1DynamicParser.html">DynamicParser</a>'s "nested" object coerces all keys to strings, whether from <a class="el" href="classfolly_1_1DynamicParser.html#a4a38f8476446f75b39a47475f1950889">arrayItems()</a> or from p.optional(some_int, ...), to allow errors be serialized to JSON. If you are parsing non-JSON dynamic objects with non-string keys, this is problematic. When set to true, "nested" objects will report integer keys for errors coming from inside arrays, or the original key type from inside values of objects. </p>

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00302">302</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>

<p>References <a class="el" href="OptionalTest_8cpp_source.html#l00053">b</a>, <a class="el" href="test_8c_source.html#l01591">parse()</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="DynamicParserTest_8cpp_source.html#l00038">checkMaybeCoercedKeys()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                                    {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="classfolly_1_1DynamicParser.html#a12b2e8c727c39d08e2913fa1dcd2088d">allowNonStringKeyErrors_</a> = <a class="code" href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div><div class="ttc" id="classfolly_1_1DynamicParser_html_a12b2e8c727c39d08e2913fa1dcd2088d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a12b2e8c727c39d08e2913fa1dcd2088d">folly::DynamicParser::allowNonStringKeyErrors_</a></div><div class="ttdeci">bool allowNonStringKeyErrors_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00408">DynamicParser.h:408</a></div></div>
<div class="ttc" id="OptionalTest_8cpp_html_a9c67fe724294816aca4adddf8255fece"><div class="ttname"><a href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a></div><div class="ttdeci">char b</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af9ec53996633b340a69a637fe369f14f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a>&amp; folly::DynamicParser::value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The value currently being parsed (initially, the input dynamic). Throws if parsing nullptr, or parsing after <a class="el" href="classfolly_1_1DynamicParser.html#aa4e12d5fe7948520a5e5ab87e3ac7556">releaseErrors()</a>. </p>

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00290">290</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>

<p>References <a class="el" href="FiberManager_8cpp_source.html#l00357">stack_</a>.</p>

<p>Referenced by <a class="el" href="DynamicParser_8cpp_source.html#l00053">reportError()</a>, and <a class="el" href="DynamicParserTest_8cpp_source.html#l00119">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                           {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">stack_</a>.<a class="code" href="structfolly_1_1DynamicParser_1_1ParserStack.html#abfc2bfad8c52f4720fde3936da1ec256">value</a>();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div><div class="ttc" id="structfolly_1_1DynamicParser_1_1ParserStack_html_abfc2bfad8c52f4720fde3936da1ec256"><div class="ttname"><a href="structfolly_1_1DynamicParser_1_1ParserStack.html#abfc2bfad8c52f4720fde3936da1ec256">folly::DynamicParser::ParserStack::value</a></div><div class="ttdeci">const folly::dynamic &amp; value() const </div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser-inl_8h_source.html#l00322">DynamicParser-inl.h:322</a></div></div>
<div class="ttc" id="classfolly_1_1DynamicParser_html_a98d9bc5e368ac81e16972aea0881138d"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#a98d9bc5e368ac81e16972aea0881138d">folly::DynamicParser::stack_</a></div><div class="ttdeci">ParserStack stack_</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8h_source.html#l00407">DynamicParser.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac391747f41f6f4b6d7e83d2ef048fb3c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Fn &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::DynamicParser::wrapError </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1dynamic.html">folly::dynamic</a> *&#160;</td>
          <td class="paramname"><em>lookup_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Fn&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If <code>fn</code> throws an exception, <a class="el" href="classfolly_1_1DynamicParser.html#ac391747f41f6f4b6d7e83d2ef048fb3c">wrapError()</a> catches it and inserts an enriched description into stack_.errors_. If lookup_key is non-null, reports a key lookup error in "key_errors", otherwise reportse a value error in "error".</p>
<p>Not public because that would encourage users to report multiple errors per input part, which is currently unsupported. It does not currently seem like normal user code should need this. </p>

<p>Definition at line <a class="el" href="DynamicParser-inl_8h_source.html#l00291">291</a> of file <a class="el" href="DynamicParser-inl_8h_source.html">DynamicParser-inl.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                                                 {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    fn();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  } <span class="keywordflow">catch</span> (DynamicParserLogicError&amp;) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// When the parser is misused, we throw all the way up to the user,</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// instead of reporting it as if the input is invalid.</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  } <span class="keywordflow">catch</span> (DynamicParserParseError&amp;) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// We are just bubbling up a parse error for OnError::THROW.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; ex) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="classfolly_1_1DynamicParser.html#ab175349abe705242673f222f4893d4fe">reportError</a>(lookup_k, ex);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div><div class="ttc" id="classfolly_1_1DynamicParser_html_ab175349abe705242673f222f4893d4fe"><div class="ttname"><a href="classfolly_1_1DynamicParser.html#ab175349abe705242673f222f4893d4fe">folly::DynamicParser::reportError</a></div><div class="ttdeci">void reportError(const folly::dynamic *lookup_k, const std::exception &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="DynamicParser_8cpp_source.html#l00053">DynamicParser.cpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a12b2e8c727c39d08e2913fa1dcd2088d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::DynamicParser::allowNonStringKeyErrors_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00408">408</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>

<p>Referenced by <a class="el" href="DynamicParser_8cpp_source.html#l00053">reportError()</a>.</p>

</div>
</div>
<a class="anchor" id="a45ef4da3a9e03376f31c638bd7335e8e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1DynamicParser.html#aa3593d167826318d02d87f16ad12febf">OnError</a> folly::DynamicParser::onError_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00406">406</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>

<p>Referenced by <a class="el" href="DynamicParser_8cpp_source.html#l00053">reportError()</a>.</p>

</div>
</div>
<a class="anchor" id="a98d9bc5e368ac81e16972aea0881138d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1DynamicParser_1_1ParserStack.html">ParserStack</a> folly::DynamicParser::stack_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DynamicParser_8h_source.html#l00407">407</a> of file <a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a>.</p>

<p>Referenced by <a class="el" href="DynamicParser_8cpp_source.html#l00053">reportError()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/experimental/<a class="el" href="DynamicParser_8h_source.html">DynamicParser.h</a></li>
<li>proxygen/folly/folly/experimental/<a class="el" href="DynamicParser-inl_8h_source.html">DynamicParser-inl.h</a></li>
<li>proxygen/folly/folly/experimental/<a class="el" href="DynamicParser_8cpp_source.html">DynamicParser.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1DynamicParser.html">DynamicParser</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
