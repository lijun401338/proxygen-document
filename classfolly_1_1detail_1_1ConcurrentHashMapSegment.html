<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1detail_1_1ConcurrentHashMapSegment.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html">Buckets</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:afdaacd96bfa76170cbaf610f9155c700"><td class="memItemLeft" align="right" valign="top">typedef KeyType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a></td></tr>
<tr class="separator:afdaacd96bfa76170cbaf610f9155c700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a517ea22f18749fe6ec0a1049f3b95ab9"><td class="memItemLeft" align="right" valign="top">typedef ValueType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a517ea22f18749fe6ec0a1049f3b95ab9">mapped_type</a></td></tr>
<tr class="separator:a517ea22f18749fe6ec0a1049f3b95ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206297664030372ca2ff3949099c9807"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; const KeyType, ValueType &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a206297664030372ca2ff3949099c9807">value_type</a></td></tr>
<tr class="separator:a206297664030372ca2ff3949099c9807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10eb86ae86fd90d724e7d96d9eb59e6"><td class="memItemLeft" align="right" valign="top">typedef std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab10eb86ae86fd90d724e7d96d9eb59e6">size_type</a></td></tr>
<tr class="separator:ab10eb86ae86fd90d724e7d96d9eb59e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0713d1421bc7c0207ff462e8ce9f75cd"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a> = <a class="el" href="classfolly_1_1detail_1_1concurrenthashmap_1_1NodeT.html">concurrenthashmap::NodeT</a>&lt; KeyType, ValueType, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;</td></tr>
<tr class="separator:a0713d1421bc7c0207ff462e8ce9f75cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4010a103a60ec79c8a88d726a3ada6db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a4010a103a60ec79c8a88d726a3ada6db">ConcurrentHashMapSegment</a> (size_t initial_buckets, float load_factor, size_t max_size)</td></tr>
<tr class="separator:a4010a103a60ec79c8a88d726a3ada6db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f65b5096b4093a8368557559961745"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a25f65b5096b4093a8368557559961745">~ConcurrentHashMapSegment</a> ()</td></tr>
<tr class="separator:a25f65b5096b4093a8368557559961745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b7935876950e798ceb39ff16238b2ab"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a1b7935876950e798ceb39ff16238b2ab">size</a> ()</td></tr>
<tr class="separator:a1b7935876950e798ceb39ff16238b2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f72808f8a39327ca7e0844f50cf97f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a1f72808f8a39327ca7e0844f50cf97f1">empty</a> ()</td></tr>
<tr class="separator:a1f72808f8a39327ca7e0844f50cf97f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2fa4f5b0713ecde408a6672b3cbde31"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae2fa4f5b0713ecde408a6672b3cbde31">insert</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, std::pair&lt; <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a>, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a517ea22f18749fe6ec0a1049f3b95ab9">mapped_type</a> &gt; &amp;&amp;<a class="el" href="structfoo.html">foo</a>)</td></tr>
<tr class="separator:ae2fa4f5b0713ecde408a6672b3cbde31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237c12949d6af9277f3be829909658db"><td class="memTemplParams" colspan="2">template&lt;typename Key , typename Value &gt; </td></tr>
<tr class="memitem:a237c12949d6af9277f3be829909658db"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a237c12949d6af9277f3be829909658db">insert</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, Key &amp;&amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, Value &amp;&amp;<a class="el" href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a>)</td></tr>
<tr class="separator:a237c12949d6af9277f3be829909658db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0505b7a28b3c219336cc2e1109e3ac2"><td class="memTemplParams" colspan="2">template&lt;typename Key , typename... Args&gt; </td></tr>
<tr class="memitem:ad0505b7a28b3c219336cc2e1109e3ac2"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ad0505b7a28b3c219336cc2e1109e3ac2">try_emplace</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, Key &amp;&amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, Args &amp;&amp;...args)</td></tr>
<tr class="separator:ad0505b7a28b3c219336cc2e1109e3ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbbe747aa639a859c9178d7c5d15a100"><td class="memTemplParams" colspan="2">template&lt;typename... Args&gt; </td></tr>
<tr class="memitem:adbbe747aa639a859c9178d7c5d15a100"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#adbbe747aa639a859c9178d7c5d15a100">emplace</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, const KeyType &amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a> *node)</td></tr>
<tr class="separator:adbbe747aa639a859c9178d7c5d15a100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab66ba0ff8a3029028078ce48044eb012"><td class="memTemplParams" colspan="2">template&lt;typename Key , typename Value &gt; </td></tr>
<tr class="memitem:ab66ba0ff8a3029028078ce48044eb012"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab66ba0ff8a3029028078ce48044eb012">insert_or_assign</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, Key &amp;&amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, Value &amp;&amp;<a class="el" href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a>)</td></tr>
<tr class="separator:ab66ba0ff8a3029028078ce48044eb012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a604529af7a597562c5b74260798af800"><td class="memTemplParams" colspan="2">template&lt;typename Key , typename Value &gt; </td></tr>
<tr class="memitem:a604529af7a597562c5b74260798af800"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a604529af7a597562c5b74260798af800">assign</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, Key &amp;&amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, Value &amp;&amp;<a class="el" href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a>)</td></tr>
<tr class="separator:a604529af7a597562c5b74260798af800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab750daa40f29017a0f7642a4b1d83d22"><td class="memTemplParams" colspan="2">template&lt;typename Key , typename Value &gt; </td></tr>
<tr class="memitem:ab750daa40f29017a0f7642a4b1d83d22"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab750daa40f29017a0f7642a4b1d83d22">assign_if_equal</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, Key &amp;&amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, const ValueType &amp;expected, Value &amp;&amp;desired)</td></tr>
<tr class="separator:ab750daa40f29017a0f7642a4b1d83d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659501d418087555f9631b49466c6053"><td class="memTemplParams" colspan="2">template&lt;typename MatchFunc , typename... Args&gt; </td></tr>
<tr class="memitem:a659501d418087555f9631b49466c6053"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">insert_internal</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;it, const KeyType &amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbd">InsertType</a> <a class="el" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a>, MatchFunc match, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a> *cur, Args &amp;&amp;...args)</td></tr>
<tr class="separator:a659501d418087555f9631b49466c6053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271c7c743b45119530240c6137c36a3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a271c7c743b45119530240c6137c36a3f">rehash</a> (size_t bucket_count)</td></tr>
<tr class="separator:a271c7c743b45119530240c6137c36a3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3debefc07b2260cb06b226f3f320fff8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3debefc07b2260cb06b226f3f320fff8">find</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;res, const KeyType &amp;<a class="el" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>)</td></tr>
<tr class="separator:a3debefc07b2260cb06b226f3f320fff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33c98e2909fe40871765eb0e74931964"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab10eb86ae86fd90d724e7d96d9eb59e6">size_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a33c98e2909fe40871765eb0e74931964">erase</a> (const <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a> &amp;key)</td></tr>
<tr class="separator:a33c98e2909fe40871765eb0e74931964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057531a07983cb860a432d4a21d202fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab10eb86ae86fd90d724e7d96d9eb59e6">size_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a057531a07983cb860a432d4a21d202fb">erase_internal</a> (const <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a> &amp;key, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> *iter)</td></tr>
<tr class="separator:a057531a07983cb860a432d4a21d202fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03fe4ce338e976cecf6c9b987f91e4f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a03fe4ce338e976cecf6c9b987f91e4f3">erase</a> (<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;res, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;pos)</td></tr>
<tr class="separator:a03fe4ce338e976cecf6c9b987f91e4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9cd8f9baac219226311f4c019736d62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ac9cd8f9baac219226311f4c019736d62">clear</a> ()</td></tr>
<tr class="separator:ac9cd8f9baac219226311f4c019736d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e146c5a04cb24802cfe07ecaab8bf44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a4e146c5a04cb24802cfe07ecaab8bf44">max_load_factor</a> (float factor)</td></tr>
<tr class="separator:a4e146c5a04cb24802cfe07ecaab8bf44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafd223d1ade7f13d0a1db1176f4e1ddb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aafd223d1ade7f13d0a1db1176f4e1ddb">cbegin</a> ()</td></tr>
<tr class="separator:aafd223d1ade7f13d0a1db1176f4e1ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb3cb9ab11c36bb5daf517db2b3245a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#adb3cb9ab11c36bb5daf517db2b3245a1">cend</a> ()</td></tr>
<tr class="separator:adb3cb9ab11c36bb5daf517db2b3245a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:afbcd1f30a41154a8ee8c72447599fdbd"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbd">InsertType</a> { <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a>, 
<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda85b994981aeffc767fa872902fa6acf8">InsertType::MUST_EXIST</a>, 
<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f">InsertType::ANY</a>, 
<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a">InsertType::MATCH</a>
 }</td></tr>
<tr class="separator:afbcd1f30a41154a8ee8c72447599fdbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aba4dd99bef700c906fded7afe7777f15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a> (size_t bucket_count, size_t hash)</td></tr>
<tr class="separator:aba4dd99bef700c906fded7afe7777f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13b1f470721c6ccaf3da39f94cbdee78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a13b1f470721c6ccaf3da39f94cbdee78">getBucketsAndCount</a> (size_t &amp;bcount, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html">Buckets</a> *&amp;buckets, <a class="el" href="classfolly_1_1hazptr__holder.html">hazptr_holder</a>&lt; <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt; &amp;hazptr)</td></tr>
<tr class="separator:a13b1f470721c6ccaf3da39f94cbdee78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a678f0f51614ae4a2dfd88f2db0e60797"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">m_</a></td></tr>
<tr class="separator:a678f0f51614ae4a2dfd88f2db0e60797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c896ef5717bcc8a801f4e07f8ac5d92"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">load_factor_</a></td></tr>
<tr class="separator:a3c896ef5717bcc8a801f4e07f8ac5d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bea8ee9b90ab6e67872f6dfc03c3f06"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">load_factor_nodes_</a></td></tr>
<tr class="separator:a3bea8ee9b90ab6e67872f6dfc03c3f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0964bfec1475bd7459935d89888d787b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a> {0}</td></tr>
<tr class="separator:a0964bfec1475bd7459935d89888d787b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3b884f4e29324cd48ad36f605d77f1"><td class="memItemLeft" align="right" valign="top">size_t const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a></td></tr>
<tr class="separator:a6f3b884f4e29324cd48ad36f605d77f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72b3eb729386b56bdedad539a461836"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt; <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html">Buckets</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:ae72b3eb729386b56bdedad539a461836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1fbc7ac5aa4f52b0fe38343c32e4ff"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ade1fbc7ac5aa4f52b0fe38343c32e4ff">seqlock_</a> {0}</td></tr>
<tr class="separator:ade1fbc7ac5aa4f52b0fe38343c32e4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a025c9ff3b66d0c40b5adc14aa879123f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a></td></tr>
<tr class="separator:a025c9ff3b66d0c40b5adc14aa879123f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename KeyType, typename ValueType, uint8_t ShardBits = 0, typename HashFn = std::hash&lt;KeyType&gt;, typename KeyEqual = std::equal_to&lt;KeyType&gt;, typename Allocator = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex = std::mutex&gt;<br />
class folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;</h3>


<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00208">208</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="afdaacd96bfa76170cbaf610f9155c700"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef KeyType <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00219">219</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a517ea22f18749fe6ec0a1049f3b95ab9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef ValueType <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a517ea22f18749fe6ec0a1049f3b95ab9">mapped_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00220">220</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0713d1421bc7c0207ff462e8ce9f75cd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a> =  <a class="el" href="classfolly_1_1detail_1_1concurrenthashmap_1_1NodeT.html">concurrenthashmap::NodeT</a>&lt;KeyType, ValueType, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00224">224</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab10eb86ae86fd90d724e7d96d9eb59e6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef std::size_t <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab10eb86ae86fd90d724e7d96d9eb59e6">size_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00222">222</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a206297664030372ca2ff3949099c9807"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;const KeyType, ValueType&gt; <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a206297664030372ca2ff3949099c9807">value_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00221">221</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="afbcd1f30a41154a8ee8c72447599fdbd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbd">folly::detail::ConcurrentHashMapSegment::InsertType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2"></a>DOES_NOT_EXIST&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbcd1f30a41154a8ee8c72447599fdbda85b994981aeffc767fa872902fa6acf8"></a>MUST_EXIST&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f"></a>ANY&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a"></a>MATCH&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00209">209</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    DOES_NOT_EXIST, <span class="comment">// insert/emplace operations.  If key exists, return false.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    MUST_EXIST, <span class="comment">// assign operations.  If key does not exist, return false.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    ANY, <span class="comment">// insert_or_assign.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    MATCH, <span class="comment">// assign_if_equal (not in std).  For concurrent maps, a</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;           <span class="comment">// way to atomically change a value if equal to some other</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;           <span class="comment">// value.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  };</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4010a103a60ec79c8a88d726a3ada6db"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">ConcurrentHashMapSegment</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>initial_buckets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>load_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00227">227</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="lang_2Bits_8h_source.html#l00161">folly::isPowTwo()</a>, <a class="el" href="lang_2Bits_8h_source.html#l00149">folly::nextPowTwo()</a>, and <a class="el" href="lang_2Bits_8h_source.html#l00130">folly::popcount()</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      : <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">load_factor_</a>(load_factor), <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a>(max_size) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    initial_buckets = <a class="code" href="namespacefolly.html#a2cf0e35381650449b689518c5e885f44">folly::nextPowTwo</a>(initial_buckets);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    DCHECK(</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a> == 0 ||</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        (<a class="code" href="namespacefolly.html#ac12bcf8aef57014c42c168fa89bd79d6">isPowTwo</a>(<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a>) &amp;&amp;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         (<a class="code" href="namespacefolly.html#a1d588cb1d9122b683c36b31481fc9e95">folly::popcount</a>(<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a> - 1) + ShardBits &lt;= 32)));</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">auto</span> buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html#a42cab962c80a4a717c941153126e80bf">Buckets::create</a>(initial_buckets);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.store(buckets, std::memory_order_release);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">load_factor_nodes_</a> = initial_buckets * <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">load_factor_</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.store(initial_buckets, std::memory_order_relaxed);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  }</div><div class="ttc" id="namespacefolly_html_a1d588cb1d9122b683c36b31481fc9e95"><div class="ttname"><a href="namespacefolly.html#a1d588cb1d9122b683c36b31481fc9e95">folly::popcount</a></div><div class="ttdeci">constexpr unsigned int popcount(T const v)</div><div class="ttdef"><b>Definition:</b> <a href="lang_2Bits_8h_source.html#l00130">Bits.h:130</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae72b3eb729386b56bdedad539a461836"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">folly::detail::ConcurrentHashMapSegment::buckets_</a></div><div class="ttdeci">Atom&lt; Buckets * &gt; buckets_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00818">ConcurrentHashMap-detail.h:818</a></div></div>
<div class="ttc" id="namespacefolly_html_a2cf0e35381650449b689518c5e885f44"><div class="ttname"><a href="namespacefolly.html#a2cf0e35381650449b689518c5e885f44">folly::nextPowTwo</a></div><div class="ttdeci">constexpr T nextPowTwo(T const v)</div><div class="ttdef"><b>Definition:</b> <a href="lang_2Bits_8h_source.html#l00149">Bits.h:149</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets_html_a42cab962c80a4a717c941153126e80bf"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html#a42cab962c80a4a717c941153126e80bf">folly::detail::ConcurrentHashMapSegment::Buckets::create</a></div><div class="ttdeci">static Buckets * create(size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00660">ConcurrentHashMap-detail.h:660</a></div></div>
<div class="ttc" id="namespacefolly_html_ac12bcf8aef57014c42c168fa89bd79d6"><div class="ttname"><a href="namespacefolly.html#ac12bcf8aef57014c42c168fa89bd79d6">folly::isPowTwo</a></div><div class="ttdeci">constexpr bool isPowTwo(T const v)</div><div class="ttdef"><b>Definition:</b> <a href="lang_2Bits_8h_source.html#l00161">Bits.h:161</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a6f3b884f4e29324cd48ad36f605d77f1"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">folly::detail::ConcurrentHashMapSegment::max_size_</a></div><div class="ttdeci">size_t const max_size_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00815">ConcurrentHashMap-detail.h:815</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a3c896ef5717bcc8a801f4e07f8ac5d92"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">folly::detail::ConcurrentHashMapSegment::load_factor_</a></div><div class="ttdeci">float load_factor_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00812">ConcurrentHashMap-detail.h:812</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a3bea8ee9b90ab6e67872f6dfc03c3f06"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">folly::detail::ConcurrentHashMapSegment::load_factor_nodes_</a></div><div class="ttdeci">size_t load_factor_nodes_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00813">ConcurrentHashMap-detail.h:813</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25f65b5096b4093a8368557559961745"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::~<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">ConcurrentHashMapSegment</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00243">243</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                              {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">auto</span> buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// We can delete and not retire() here, since users must have</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// their own synchronization around destruction.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keyword">auto</span> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a> = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    buckets-&gt;unlink_and_reclaim_nodes(<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    buckets-&gt;destroy(<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae72b3eb729386b56bdedad539a461836"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">folly::detail::ConcurrentHashMapSegment::buckets_</a></div><div class="ttdeci">Atom&lt; Buckets * &gt; buckets_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00818">ConcurrentHashMap-detail.h:818</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a604529af7a597562c5b74260798af800"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::assign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key &amp;&amp;&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Value &amp;&amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00326">326</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00178">uint8_t</a>, and <a class="el" href="ParallelBenchmark_8cpp_source.html#l00084">v</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                                {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">auto</span> node = (<a class="code" href="classNode.html">Node</a>*)Allocator().allocate(<span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keyword">new</span> (node) <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a>(std::forward&lt;Key&gt;(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>), std::forward&lt;Value&gt;(<a class="code" href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a>));</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">auto</span> res = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">insert_internal</a>(</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        it,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        node-&gt;getItem().first,</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda85b994981aeffc767fa872902fa6acf8">InsertType::MUST_EXIST</a>,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        [](<span class="keyword">const</span> ValueType&amp;) { <span class="keywordflow">return</span> <span class="keyword">false</span>; },</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        node,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        node);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      node-&gt;~Node();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      Allocator().deallocate((<a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)node, <span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div><div class="ttc" id="ParallelBenchmark_8cpp_html_a62448945ba9492b4ac991254a7d267bb"><div class="ttname"><a href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a></div><div class="ttdeci">auto v</div><div class="ttdef"><b>Definition:</b> <a href="ParallelBenchmark_8cpp_source.html#l00084">ParallelBenchmark.cpp:84</a></div></div>
<div class="ttc" id="classNode_html"><div class="ttname"><a href="classNode.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00098">HazptrTest.cpp:98</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0713d1421bc7c0207ff462e8ce9f75cd"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">folly::detail::ConcurrentHashMapSegment::Node</a></div><div class="ttdeci">concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt; Node</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00224">ConcurrentHashMap-detail.h:224</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a659501d418087555f9631b49466c6053"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">folly::detail::ConcurrentHashMapSegment::insert_internal</a></div><div class="ttdeci">bool insert_internal(Iterator &amp;it, const KeyType &amp;k, InsertType type, MatchFunc match, Node *cur, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00366">ConcurrentHashMap-detail.h:366</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda85b994981aeffc767fa872902fa6acf8"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda85b994981aeffc767fa872902fa6acf8">folly::detail::ConcurrentHashMapSegment::InsertType::MUST_EXIST</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab750daa40f29017a0f7642a4b1d83d22"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::assign_if_equal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key &amp;&amp;&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ValueType &amp;&#160;</td>
          <td class="paramname"><em>expected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Value &amp;&amp;&#160;</td>
          <td class="paramname"><em>desired</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00344">344</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-generated-matchers_8h_source.html#l00481">testing::Args()</a>, <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00178">uint8_t</a>, and <a class="el" href="ParallelBenchmark_8cpp_source.html#l00084">v</a>.</p>
<div class="fragment"><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                       {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">auto</span> node = (<a class="code" href="classNode.html">Node</a>*)Allocator().allocate(<span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">new</span> (node) <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a>(std::forward&lt;Key&gt;(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>), std::forward&lt;Value&gt;(desired));</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">auto</span> res = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">insert_internal</a>(</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        it,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        node-&gt;getItem().first,</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a">InsertType::MATCH</a>,</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        [&amp;expected](<span class="keyword">const</span> ValueType&amp; <a class="code" href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a>) { <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1pushmi.html">v</a> == expected; },</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        node,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        node);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      node-&gt;~Node();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      Allocator().deallocate((<a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)node, <span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1pushmi_html"><div class="ttname"><a href="namespacefolly_1_1pushmi.html">folly::pushmi</a></div><div class="ttdef"><b>Definition:</b> <a href="boosters_8h_source.html#l00030">boosters.h:30</a></div></div>
<div class="ttc" id="ParallelBenchmark_8cpp_html_a62448945ba9492b4ac991254a7d267bb"><div class="ttname"><a href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a></div><div class="ttdeci">auto v</div><div class="ttdef"><b>Definition:</b> <a href="ParallelBenchmark_8cpp_source.html#l00084">ParallelBenchmark.cpp:84</a></div></div>
<div class="ttc" id="classNode_html"><div class="ttname"><a href="classNode.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00098">HazptrTest.cpp:98</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0713d1421bc7c0207ff462e8ce9f75cd"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">folly::detail::ConcurrentHashMapSegment::Node</a></div><div class="ttdeci">concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt; Node</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00224">ConcurrentHashMap-detail.h:224</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a">folly::detail::ConcurrentHashMapSegment::InsertType::MATCH</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a659501d418087555f9631b49466c6053"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">folly::detail::ConcurrentHashMapSegment::insert_internal</a></div><div class="ttdeci">bool insert_internal(Iterator &amp;it, const KeyType &amp;k, InsertType type, MatchFunc match, Node *cur, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00366">ConcurrentHashMap-detail.h:366</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aafd223d1ade7f13d0a1db1176f4e1ddb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::cbegin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00634">634</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00780">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::hazptrs_</a>, <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00735">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::next()</a>, and <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00707">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::setNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    Iterator res;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordtype">size_t</span> bcount;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    Buckets* buckets;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a13b1f470721c6ccaf3da39f94cbdee78">getBucketsAndCount</a>(bcount, buckets, res.hazptrs_[0]);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    res.setNode(<span class="keyword">nullptr</span>, buckets, bcount, 0);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    res.next();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a13b1f470721c6ccaf3da39f94cbdee78"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a13b1f470721c6ccaf3da39f94cbdee78">folly::detail::ConcurrentHashMapSegment::getBucketsAndCount</a></div><div class="ttdeci">void getBucketsAndCount(size_t &amp;bcount, Buckets *&amp;buckets, hazptr_holder&lt; Atom &gt; &amp;hazptr)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00795">ConcurrentHashMap-detail.h:795</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adb3cb9ab11c36bb5daf517db2b3245a1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::cend </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00644">644</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>Referenced by <a class="el" href="ConcurrentHashMap_8h_source.html#l00455">folly::ConcurrentHashMap&lt; KeyType, ValueType, HashFn, KeyEqual, Allocator, ShardBits, Atom, Mutex &gt;::ConstIterator::next()</a>.</p>
<div class="fragment"><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                  {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> Iterator(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9cd8f9baac219226311f4c019736d62"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00614">614</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>, and <a class="el" href="HazptrObj_8h_source.html#l00229">folly::hazptr_obj_base&lt; T, Atom, D &gt;::retire()</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;               {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordtype">size_t</span> bcount = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    Buckets* buckets;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keyword">auto</span> newbuckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html#a42cab962c80a4a717c941153126e80bf">Buckets::create</a>(bcount);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      std::lock_guard&lt;Mutex&gt; <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">m_</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.store(newbuckets, std::memory_order_release);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a> = 0;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    buckets-&gt;retire(concurrenthashmap::HazptrBucketDeleter&lt;Allocator&gt;(bcount));</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae72b3eb729386b56bdedad539a461836"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">folly::detail::ConcurrentHashMapSegment::buckets_</a></div><div class="ttdeci">Atom&lt; Buckets * &gt; buckets_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00818">ConcurrentHashMap-detail.h:818</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a678f0f51614ae4a2dfd88f2db0e60797"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">folly::detail::ConcurrentHashMapSegment::m_</a></div><div class="ttdeci">Mutex m_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00811">ConcurrentHashMap-detail.h:811</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets_html_a42cab962c80a4a717c941153126e80bf"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html#a42cab962c80a4a717c941153126e80bf">folly::detail::ConcurrentHashMapSegment::Buckets::create</a></div><div class="ttdeci">static Buckets * create(size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00660">ConcurrentHashMap-detail.h:660</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0964bfec1475bd7459935d89888d787b"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">folly::detail::ConcurrentHashMapSegment::size_</a></div><div class="ttdeci">size_t size_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00814">ConcurrentHashMap-detail.h:814</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adbbe747aa639a859c9178d7c5d15a100"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<div class="memtemplate">
template&lt;typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::emplace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const KeyType &amp;&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00297">297</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>Referenced by <a class="el" href="ConcurrentHashMap_8h_source.html#l00245">folly::ConcurrentHashMap&lt; KeyType, ValueType, HashFn, KeyEqual, Allocator, ShardBits, Atom, Mutex &gt;::emplace()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                                           {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">insert_internal</a>(</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        it,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a>,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        [](<span class="keyword">const</span> ValueType&amp;) { <span class="keywordflow">return</span> <span class="keyword">false</span>; },</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        node,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        node);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a659501d418087555f9631b49466c6053"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">folly::detail::ConcurrentHashMapSegment::insert_internal</a></div><div class="ttdeci">bool insert_internal(Iterator &amp;it, const KeyType &amp;k, InsertType type, MatchFunc match, Node *cur, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00366">ConcurrentHashMap-detail.h:366</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">folly::detail::ConcurrentHashMapSegment::InsertType::DOES_NOT_EXIST</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1f72808f8a39327ca7e0844f50cf97f1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00256">256</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="Access_8h_source.html#l00045">folly::size()</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;               {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a1b7935876950e798ceb39ff16238b2ab">size</a>() == 0;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a1b7935876950e798ceb39ff16238b2ab"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a1b7935876950e798ceb39ff16238b2ab">folly::detail::ConcurrentHashMapSegment::size</a></div><div class="ttdeci">size_t size()</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00252">ConcurrentHashMap-detail.h:252</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a33c98e2909fe40871765eb0e74931964"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab10eb86ae86fd90d724e7d96d9eb59e6">size_type</a> <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::erase </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00548">548</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>Referenced by <a class="el" href="ConcurrentHashMap_8h_source.html#l00342">folly::ConcurrentHashMap&lt; KeyType, ValueType, HashFn, KeyEqual, Allocator, ShardBits, Atom, Mutex &gt;::erase()</a>.</p>
<div class="fragment"><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                       {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a057531a07983cb860a432d4a21d202fb">erase_internal</a>(key, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a057531a07983cb860a432d4a21d202fb"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a057531a07983cb860a432d4a21d202fb">folly::detail::ConcurrentHashMapSegment::erase_internal</a></div><div class="ttdeci">size_type erase_internal(const key_type &amp;key, Iterator *iter)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00552">ConcurrentHashMap-detail.h:552</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a03fe4ce338e976cecf6c9b987f91e4f3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00608">608</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="Padded_8h_source.html#l00324">folly::padded::cend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                           {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a057531a07983cb860a432d4a21d202fb">erase_internal</a>(pos-&gt;first, &amp;res);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// Invalidate the iterator.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    pos = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#adb3cb9ab11c36bb5daf517db2b3245a1">cend</a>();</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a057531a07983cb860a432d4a21d202fb"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a057531a07983cb860a432d4a21d202fb">folly::detail::ConcurrentHashMapSegment::erase_internal</a></div><div class="ttdeci">size_type erase_internal(const key_type &amp;key, Iterator *iter)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00552">ConcurrentHashMap-detail.h:552</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_adb3cb9ab11c36bb5daf517db2b3245a1"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#adb3cb9ab11c36bb5daf517db2b3245a1">folly::detail::ConcurrentHashMapSegment::cend</a></div><div class="ttdeci">Iterator cend()</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00644">ConcurrentHashMap-detail.h:644</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a057531a07983cb860a432d4a21d202fb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ab10eb86ae86fd90d724e7d96d9eb59e6">size_type</a> <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::erase_internal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> *&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00552">552</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>, <a class="el" href="Hazptr_8h_source.html#l00116">h</a>, <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00780">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::hazptrs_</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2generator_2cpp_2ast_8py_source.html#l00058">cpp.ast::next()</a>, <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00735">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::next()</a>, <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00168">folly::detail::concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt;::next_</a>, and <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00707">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::setNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                                                {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classNode.html">Node</a>* node{<span class="keyword">nullptr</span>};</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keyword">auto</span> <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a> = HashFn()(key);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      std::lock_guard&lt;Mutex&gt; <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">m_</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordtype">size_t</span> bcount = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keyword">auto</span> buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keyword">auto</span> idx = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a>(bcount, <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keyword">auto</span> head = &amp;buckets-&gt;buckets_[idx]();</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      node = head-&gt;load(std::memory_order_relaxed);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="classNode.html">Node</a>* prev = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">while</span> (node) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (KeyEqual()(key, node-&gt;getItem().first)) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;          <span class="keyword">auto</span> <a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a> = node-&gt;next_.load(std::memory_order_relaxed);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a>) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a>-&gt;acquire_link(); <span class="comment">// defined in hazptr_obj_base_linked</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;          }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          <span class="keywordflow">if</span> (prev) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            prev-&gt;<a class="code" href="classNode.html#aa0563ea4851b68cf7f69d529ee31cca5">next_</a>.store(<a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a>, std::memory_order_release);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="comment">// Must be head of list.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            head-&gt;store(<a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a>, std::memory_order_release);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;          }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;          <span class="keywordflow">if</span> (iter) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            iter-&gt;hazptrs_[0].reset(buckets);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            iter-&gt;setNode(</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                node-&gt;next_.load(std::memory_order_acquire),</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                buckets,</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                bcount,</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                idx);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            iter-&gt;next();</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;          }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;          <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a>--;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        prev = node;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        node = node-&gt;<a class="code" href="classNode.html#aa0563ea4851b68cf7f69d529ee31cca5">next_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// Delete the node while not under the lock.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (node) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      node-&gt;release();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div><div class="ttc" id="Hazptr_8h_html_ab25155a2370ac096e61dc7e39e2816df"><div class="ttname"><a href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a></div><div class="ttdeci">*than *hazptr_holder h</div><div class="ttdef"><b>Definition:</b> <a href="Hazptr_8h_source.html#l00116">Hazptr.h:116</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae72b3eb729386b56bdedad539a461836"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">folly::detail::ConcurrentHashMapSegment::buckets_</a></div><div class="ttdeci">Atom&lt; Buckets * &gt; buckets_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00818">ConcurrentHashMap-detail.h:818</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a678f0f51614ae4a2dfd88f2db0e60797"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">folly::detail::ConcurrentHashMapSegment::m_</a></div><div class="ttdeci">Mutex m_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00811">ConcurrentHashMap-detail.h:811</a></div></div>
<div class="ttc" id="classNode_html"><div class="ttname"><a href="classNode.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00098">HazptrTest.cpp:98</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0964bfec1475bd7459935d89888d787b"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">folly::detail::ConcurrentHashMapSegment::size_</a></div><div class="ttdeci">size_t size_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00814">ConcurrentHashMap-detail.h:814</a></div></div>
<div class="ttc" id="classNode_html_aa0563ea4851b68cf7f69d529ee31cca5"><div class="ttname"><a href="classNode.html#aa0563ea4851b68cf7f69d529ee31cca5">Node::next_</a></div><div class="ttdeci">Atom&lt; Node&lt; Atom &gt; * &gt; next_</div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00100">HazptrTest.cpp:100</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_aba4dd99bef700c906fded7afe7777f15"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">folly::detail::ConcurrentHashMapSegment::getIdx</a></div><div class="ttdeci">uint64_t getIdx(size_t bucket_count, size_t hash)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00792">ConcurrentHashMap-detail.h:792</a></div></div>
<div class="ttc" id="namespacecpp_1_1ast_html_a25bc7c34a56f66f8e68856ab63c7e990"><div class="ttname"><a href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">cpp.ast.next</a></div><div class="ttdeci">def next(obj)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2generator_2cpp_2ast_8py_source.html#l00058">ast.py:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3debefc07b2260cb06b226f3f320fff8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const KeyType &amp;&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00525">525</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00696">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Buckets::buckets_</a>, <a class="el" href="Hazptr_8h_source.html#l00116">h</a>, <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00780">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::hazptrs_</a>, <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>, and <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00707">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::setNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                             {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keyword">auto</span>&amp; hazcurr = res.hazptrs_[1];</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keyword">auto</span>&amp; haznext = res.hazptrs_[2];</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keyword">auto</span> <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a> = HashFn()(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordtype">size_t</span> bcount;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    Buckets* buckets;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a13b1f470721c6ccaf3da39f94cbdee78">getBucketsAndCount</a>(bcount, buckets, res.hazptrs_[0]);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keyword">auto</span> idx = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a>(bcount, <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keyword">auto</span> prev = &amp;buckets-&gt;buckets_[idx]();</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keyword">auto</span> node = hazcurr.get_protected(*prev);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">while</span> (node) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">if</span> (KeyEqual()(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, node-&gt;getItem().first)) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        res.setNode(node, buckets, bcount, idx);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      node = haznext.get_protected(node-&gt;next_);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      hazcurr.swap(haznext);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div><div class="ttc" id="Hazptr_8h_html_ab25155a2370ac096e61dc7e39e2816df"><div class="ttname"><a href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a></div><div class="ttdeci">*than *hazptr_holder h</div><div class="ttdef"><b>Definition:</b> <a href="Hazptr_8h_source.html#l00116">Hazptr.h:116</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a13b1f470721c6ccaf3da39f94cbdee78"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a13b1f470721c6ccaf3da39f94cbdee78">folly::detail::ConcurrentHashMapSegment::getBucketsAndCount</a></div><div class="ttdeci">void getBucketsAndCount(size_t &amp;bcount, Buckets *&amp;buckets, hazptr_holder&lt; Atom &gt; &amp;hazptr)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00795">ConcurrentHashMap-detail.h:795</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_aba4dd99bef700c906fded7afe7777f15"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">folly::detail::ConcurrentHashMapSegment::getIdx</a></div><div class="ttdeci">uint64_t getIdx(size_t bucket_count, size_t hash)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00792">ConcurrentHashMap-detail.h:792</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a13b1f470721c6ccaf3da39f94cbdee78"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::getBucketsAndCount </td>
          <td>(</td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>bcount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html">Buckets</a> *&amp;&#160;</td>
          <td class="paramname"><em>buckets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1hazptr__holder.html">hazptr_holder</a>&lt; <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>hazptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00795">795</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="HazptrHolder_8h_source.html#l00138">folly::hazptr_holder&lt; Atom &gt;::get_protected()</a>.</p>
<div class="fragment"><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                                   {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keyword">auto</span> seqlock = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ade1fbc7ac5aa4f52b0fe38343c32e4ff">seqlock_</a>.load(std::memory_order_acquire);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      bcount = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_acquire);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      buckets = hazptr.get_protected(<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keyword">auto</span> seqlock2 = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ade1fbc7ac5aa4f52b0fe38343c32e4ff">seqlock_</a>.load(std::memory_order_acquire);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">if</span> (!(seqlock &amp; 1) &amp;&amp; (seqlock == seqlock2)) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    DCHECK(buckets);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae72b3eb729386b56bdedad539a461836"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">folly::detail::ConcurrentHashMapSegment::buckets_</a></div><div class="ttdeci">Atom&lt; Buckets * &gt; buckets_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00818">ConcurrentHashMap-detail.h:818</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ade1fbc7ac5aa4f52b0fe38343c32e4ff"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ade1fbc7ac5aa4f52b0fe38343c32e4ff">folly::detail::ConcurrentHashMapSegment::seqlock_</a></div><div class="ttdeci">std::atomic&lt; uint64_t &gt; seqlock_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00819">ConcurrentHashMap-detail.h:819</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba4dd99bef700c906fded7afe7777f15"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::getIdx </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bucket_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>hash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00792">792</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                                                    {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">return</span> (hash &gt;&gt; ShardBits) &amp; (bucket_count - 1);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae2fa4f5b0713ecde408a6672b3cbde31"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::pair&lt; <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afdaacd96bfa76170cbaf610f9155c700">key_type</a>, <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a517ea22f18749fe6ec0a1049f3b95ab9">mapped_type</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>foo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00260">260</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>

<p>Referenced by <a class="el" href="ConcurrentHashMap_8h_source.html#l00209">folly::ConcurrentHashMap&lt; KeyType, ValueType, HashFn, KeyEqual, Allocator, ShardBits, Atom, Mutex &gt;::insert()</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                                                  {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae2fa4f5b0713ecde408a6672b3cbde31">insert</a>(it, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="namespacefoo.html">foo</a>.first), <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="namespacefoo.html">foo</a>.second));</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="namespacefoo_html"><div class="ttname"><a href="namespacefoo.html">foo</a></div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest-printers__test_8cc_source.html#l00126">gtest-printers_test.cc:126</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae2fa4f5b0713ecde408a6672b3cbde31"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae2fa4f5b0713ecde408a6672b3cbde31">folly::detail::ConcurrentHashMapSegment::insert</a></div><div class="ttdeci">bool insert(Iterator &amp;it, std::pair&lt; key_type, mapped_type &gt; &amp;&amp;foo)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00260">ConcurrentHashMap-detail.h:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a237c12949d6af9277f3be829909658db"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key &amp;&amp;&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Value &amp;&amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00265">265</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-generated-matchers_8h_source.html#l00481">testing::Args()</a>, <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-matchers_8h_source.html#l04322">testing::Key()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00178">uint8_t</a>, and <a class="el" href="ParallelBenchmark_8cpp_source.html#l00084">v</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                                {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">auto</span> node = (<a class="code" href="classNode.html">Node</a>*)Allocator().allocate(<span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">new</span> (node) <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a>(std::forward&lt;Key&gt;(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>), std::forward&lt;Value&gt;(<a class="code" href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a>));</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keyword">auto</span> res = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">insert_internal</a>(</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        it,</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        node-&gt;getItem().first,</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a>,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        [](<span class="keyword">const</span> ValueType&amp;) { <span class="keywordflow">return</span> <span class="keyword">false</span>; },</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        node,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        node);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      node-&gt;~Node();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      Allocator().deallocate((<a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)node, <span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  }</div><div class="ttc" id="ParallelBenchmark_8cpp_html_a62448945ba9492b4ac991254a7d267bb"><div class="ttname"><a href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a></div><div class="ttdeci">auto v</div><div class="ttdef"><b>Definition:</b> <a href="ParallelBenchmark_8cpp_source.html#l00084">ParallelBenchmark.cpp:84</a></div></div>
<div class="ttc" id="classNode_html"><div class="ttname"><a href="classNode.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00098">HazptrTest.cpp:98</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0713d1421bc7c0207ff462e8ce9f75cd"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">folly::detail::ConcurrentHashMapSegment::Node</a></div><div class="ttdeci">concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt; Node</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00224">ConcurrentHashMap-detail.h:224</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a659501d418087555f9631b49466c6053"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">folly::detail::ConcurrentHashMapSegment::insert_internal</a></div><div class="ttdeci">bool insert_internal(Iterator &amp;it, const KeyType &amp;k, InsertType type, MatchFunc match, Node *cur, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00366">ConcurrentHashMap-detail.h:366</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">folly::detail::ConcurrentHashMapSegment::InsertType::DOES_NOT_EXIST</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a659501d418087555f9631b49466c6053"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<div class="memtemplate">
template&lt;typename MatchFunc , typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::insert_internal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const KeyType &amp;&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbd">InsertType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MatchFunc&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a> *&#160;</td>
          <td class="paramname"><em>cur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00366">366</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>, <a class="el" href="Hazptr_8h_source.html#l00116">h</a>, <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00780">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::hazptrs_</a>, <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2generator_2cpp_2ast_8py_source.html#l00058">cpp.ast::next()</a>, <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00168">folly::detail::concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt;::next_</a>, and <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00707">folly::detail::ConcurrentHashMapSegment&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, Atom, Mutex &gt;::Iterator::setNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                      {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keyword">auto</span> <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a> = HashFn()(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    std::unique_lock&lt;Mutex&gt; <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">m_</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">size_t</span> bcount = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">auto</span> buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Check for rehash needed for DOES_NOT_EXIST</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a> &gt;= <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">load_factor_nodes_</a> &amp;&amp; <a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> == <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a>) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a> &amp;&amp; <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a> &lt;&lt; 1 &gt; <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a>) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="comment">// Would exceed max size.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">throw</span> std::bad_alloc();</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a271c7c743b45119530240c6137c36a3f">rehash</a>(bcount &lt;&lt; 1);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      bcount = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">auto</span> idx = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a>(bcount, <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keyword">auto</span> head = &amp;buckets-&gt;buckets_[idx]();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">auto</span> node = head-&gt;load(std::memory_order_relaxed);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">auto</span> headnode = node;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">auto</span> prev = head;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">auto</span>&amp; hazbuckets = it.hazptrs_[0];</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">auto</span>&amp; haznode = it.hazptrs_[1];</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    hazbuckets.reset(buckets);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">while</span> (node) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="comment">// Is the key found?</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (KeyEqual()(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>, node-&gt;getItem().first)) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        it.setNode(node, buckets, bcount, idx);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        haznode.reset(node);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> == <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a">InsertType::MATCH</a>) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          <span class="keywordflow">if</span> (!match(node-&gt;getItem().second)) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> == <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a>) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;          <span class="keywordflow">if</span> (!cur) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            cur = (<a class="code" href="classNode.html">Node</a>*)Allocator().allocate(<span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keyword">new</span> (cur) <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a>(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;          }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          <span class="keyword">auto</span> <a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a> = node-&gt;next_.load(std::memory_order_relaxed);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          cur-&gt;<a class="code" href="classNode.html#aa0563ea4851b68cf7f69d529ee31cca5">next_</a>.store(<a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a>, std::memory_order_relaxed);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a>) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">next</a>-&gt;acquire_link(); <span class="comment">// defined in hazptr_obj_base_linked</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;          }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          prev-&gt;store(cur, std::memory_order_release);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;          <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>.unlock();</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          <span class="comment">// Release not under lock.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;          node-&gt;release();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      prev = &amp;node-&gt;next_;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      node = node-&gt;next_.load(std::memory_order_relaxed);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> != <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a> &amp;&amp; <a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> != <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f">InsertType::ANY</a>) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      haznode.reset();</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      hazbuckets.reset();</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Node not found, check for rehash on ANY</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a> &gt;= <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">load_factor_nodes_</a> &amp;&amp; <a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> == <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f">InsertType::ANY</a>) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a> &amp;&amp; <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a> &lt;&lt; 1 &gt; <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">max_size_</a>) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="comment">// Would exceed max size.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">throw</span> std::bad_alloc();</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a271c7c743b45119530240c6137c36a3f">rehash</a>(bcount &lt;&lt; 1);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="comment">// Reload correct bucket.</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      bcount &lt;&lt;= 1;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      hazbuckets.reset(buckets);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      idx = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a>(bcount, <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      head = &amp;buckets-&gt;buckets_[idx]();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      headnode = head-&gt;load(std::memory_order_relaxed);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// We found a slot to put the node.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a>++;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (!cur) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="comment">// InsertType::ANY</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="comment">// OR DOES_NOT_EXIST, but only in the try_emplace case</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      DCHECK(<a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> == <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f">InsertType::ANY</a> || <a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> == <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a>);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      cur = (<a class="code" href="classNode.html">Node</a>*)Allocator().allocate(<span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keyword">new</span> (cur) <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a>(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    cur-&gt;<a class="code" href="classNode.html#aa0563ea4851b68cf7f69d529ee31cca5">next_</a>.store(headnode, std::memory_order_relaxed);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    head-&gt;store(cur, std::memory_order_release);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    it.setNode(cur, buckets, bcount, idx);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div><div class="ttc" id="Hazptr_8h_html_ab25155a2370ac096e61dc7e39e2816df"><div class="ttname"><a href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a></div><div class="ttdeci">*than *hazptr_holder h</div><div class="ttdef"><b>Definition:</b> <a href="Hazptr_8h_source.html#l00116">Hazptr.h:116</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae72b3eb729386b56bdedad539a461836"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">folly::detail::ConcurrentHashMapSegment::buckets_</a></div><div class="ttdeci">Atom&lt; Buckets * &gt; buckets_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00818">ConcurrentHashMap-detail.h:818</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a678f0f51614ae4a2dfd88f2db0e60797"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">folly::detail::ConcurrentHashMapSegment::m_</a></div><div class="ttdeci">Mutex m_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00811">ConcurrentHashMap-detail.h:811</a></div></div>
<div class="ttc" id="classNode_html"><div class="ttname"><a href="classNode.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00098">HazptrTest.cpp:98</a></div></div>
<div class="ttc" id="ClientProtocol_8cpp_html_afb6f25e8ca4d7adb175ad413430bbb90"><div class="ttname"><a href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a></div><div class="ttdeci">PskType type</div><div class="ttdef"><b>Definition:</b> <a href="ClientProtocol_8cpp_source.html#l00777">ClientProtocol.cpp:777</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0713d1421bc7c0207ff462e8ce9f75cd"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">folly::detail::ConcurrentHashMapSegment::Node</a></div><div class="ttdeci">concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt; Node</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00224">ConcurrentHashMap-detail.h:224</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda6ac3227c311790fb4c3ebbe16920f93a">folly::detail::ConcurrentHashMapSegment::InsertType::MATCH</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0964bfec1475bd7459935d89888d787b"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">folly::detail::ConcurrentHashMapSegment::size_</a></div><div class="ttdeci">size_t size_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00814">ConcurrentHashMap-detail.h:814</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f">folly::detail::ConcurrentHashMapSegment::InsertType::ANY</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a271c7c743b45119530240c6137c36a3f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a271c7c743b45119530240c6137c36a3f">folly::detail::ConcurrentHashMapSegment::rehash</a></div><div class="ttdeci">void rehash(size_t bucket_count)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00468">ConcurrentHashMap-detail.h:468</a></div></div>
<div class="ttc" id="classNode_html_aa0563ea4851b68cf7f69d529ee31cca5"><div class="ttname"><a href="classNode.html#aa0563ea4851b68cf7f69d529ee31cca5">Node::next_</a></div><div class="ttdeci">Atom&lt; Node&lt; Atom &gt; * &gt; next_</div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00100">HazptrTest.cpp:100</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a6f3b884f4e29324cd48ad36f605d77f1"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a6f3b884f4e29324cd48ad36f605d77f1">folly::detail::ConcurrentHashMapSegment::max_size_</a></div><div class="ttdeci">size_t const max_size_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00815">ConcurrentHashMap-detail.h:815</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">folly::detail::ConcurrentHashMapSegment::InsertType::DOES_NOT_EXIST</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_aba4dd99bef700c906fded7afe7777f15"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">folly::detail::ConcurrentHashMapSegment::getIdx</a></div><div class="ttdeci">uint64_t getIdx(size_t bucket_count, size_t hash)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00792">ConcurrentHashMap-detail.h:792</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a3bea8ee9b90ab6e67872f6dfc03c3f06"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">folly::detail::ConcurrentHashMapSegment::load_factor_nodes_</a></div><div class="ttdeci">size_t load_factor_nodes_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00813">ConcurrentHashMap-detail.h:813</a></div></div>
<div class="ttc" id="namespacecpp_1_1ast_html_a25bc7c34a56f66f8e68856ab63c7e990"><div class="ttname"><a href="namespacecpp_1_1ast.html#a25bc7c34a56f66f8e68856ab63c7e990">cpp.ast.next</a></div><div class="ttdeci">def next(obj)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2generator_2cpp_2ast_8py_source.html#l00058">ast.py:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab66ba0ff8a3029028078ce48044eb012"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::insert_or_assign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key &amp;&amp;&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Value &amp;&amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00308">308</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00178">uint8_t</a>, and <a class="el" href="ParallelBenchmark_8cpp_source.html#l00084">v</a>.</p>

<p>Referenced by <a class="el" href="ConcurrentHashMap_8h_source.html#l00264">folly::ConcurrentHashMap&lt; KeyType, ValueType, HashFn, KeyEqual, Allocator, ShardBits, Atom, Mutex &gt;::insert_or_assign()</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                                          {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keyword">auto</span> node = (<a class="code" href="classNode.html">Node</a>*)Allocator().allocate(<span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keyword">new</span> (node) <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a>(std::forward&lt;Key&gt;(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>), std::forward&lt;Value&gt;(<a class="code" href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a>));</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keyword">auto</span> res = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">insert_internal</a>(</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        it,</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        node-&gt;getItem().first,</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f">InsertType::ANY</a>,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        [](<span class="keyword">const</span> ValueType&amp;) { <span class="keywordflow">return</span> <span class="keyword">false</span>; },</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        node,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        node);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      node-&gt;~Node();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      Allocator().deallocate((<a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)node, <span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div><div class="ttc" id="ParallelBenchmark_8cpp_html_a62448945ba9492b4ac991254a7d267bb"><div class="ttname"><a href="ParallelBenchmark_8cpp.html#a62448945ba9492b4ac991254a7d267bb">v</a></div><div class="ttdeci">auto v</div><div class="ttdef"><b>Definition:</b> <a href="ParallelBenchmark_8cpp_source.html#l00084">ParallelBenchmark.cpp:84</a></div></div>
<div class="ttc" id="classNode_html"><div class="ttname"><a href="classNode.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00098">HazptrTest.cpp:98</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0713d1421bc7c0207ff462e8ce9f75cd"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">folly::detail::ConcurrentHashMapSegment::Node</a></div><div class="ttdeci">concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt; Node</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00224">ConcurrentHashMap-detail.h:224</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda8e1bde3c3d303163521522cf1d62f21f">folly::detail::ConcurrentHashMapSegment::InsertType::ANY</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a659501d418087555f9631b49466c6053"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">folly::detail::ConcurrentHashMapSegment::insert_internal</a></div><div class="ttdeci">bool insert_internal(Iterator &amp;it, const KeyType &amp;k, InsertType type, MatchFunc match, Node *cur, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00366">ConcurrentHashMap-detail.h:366</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4e146c5a04cb24802cfe07ecaab8bf44"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::max_load_factor </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>factor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00627">627</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>.</p>
<div class="fragment"><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                                     {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    std::lock_guard&lt;Mutex&gt; <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">m_</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">load_factor_</a> = factor;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">load_factor_nodes_</a> =</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_relaxed) * <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">load_factor_</a>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a678f0f51614ae4a2dfd88f2db0e60797"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a678f0f51614ae4a2dfd88f2db0e60797">folly::detail::ConcurrentHashMapSegment::m_</a></div><div class="ttdeci">Mutex m_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00811">ConcurrentHashMap-detail.h:811</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a3c896ef5717bcc8a801f4e07f8ac5d92"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">folly::detail::ConcurrentHashMapSegment::load_factor_</a></div><div class="ttdeci">float load_factor_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00812">ConcurrentHashMap-detail.h:812</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a3bea8ee9b90ab6e67872f6dfc03c3f06"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">folly::detail::ConcurrentHashMapSegment::load_factor_nodes_</a></div><div class="ttdeci">size_t load_factor_nodes_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00813">ConcurrentHashMap-detail.h:813</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a271c7c743b45119530240c6137c36a3f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::rehash </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bucket_count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00468">468</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="Hazptr_8h_source.html#l00116">h</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">i</a>, and <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>.</p>
<div class="fragment"><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                   {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">auto</span> buckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keyword">auto</span> newbuckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html#a42cab962c80a4a717c941153126e80bf">Buckets::create</a>(bucket_count);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">load_factor_nodes_</a> = bucket_count * <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">load_factor_</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">auto</span> oldcount = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = 0; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> &lt; oldcount; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>++) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keyword">auto</span> bucket = &amp;buckets-&gt;buckets_[<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>]();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keyword">auto</span> node = bucket-&gt;load(std::memory_order_relaxed);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> (!node) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keyword">auto</span> <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a> = HashFn()(node-&gt;getItem().first);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keyword">auto</span> idx = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a>(bucket_count, <a class="code" href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="comment">// Reuse as long a chain as possible from the end.  Since the</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="comment">// nodes don&#39;t have previous pointers, the longest last chain</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment">// will be the same for both the previous hashmap and the new one,</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="comment">// assuming all the nodes hash to the same bucket.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keyword">auto</span> lastrun = node;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keyword">auto</span> lastidx = idx;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keyword">auto</span> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a> = 0;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keyword">auto</span> last = node-&gt;next_.load(std::memory_order_relaxed);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">for</span> (; last != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;           last = last-&gt;next_.load(std::memory_order_relaxed)) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keyword">auto</span> <a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a> = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a>(bucket_count, HashFn()(last-&gt;getItem().first));</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a> != lastidx) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          lastidx = <a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          lastrun = last;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a> = 0;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>++;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">// Set longest last run in new bucket, incrementing the refcount.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      lastrun-&gt;acquire_link(); <span class="comment">// defined in hazptr_obj_base_linked</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      newbuckets-&gt;buckets_[lastidx]().store(lastrun, std::memory_order_relaxed);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">// Clone remaining nodes</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">for</span> (; node != lastrun;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;           node = node-&gt;next_.load(std::memory_order_relaxed)) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keyword">auto</span> newnode = (<a class="code" href="classNode.html">Node</a>*)Allocator().allocate(<span class="keyword">sizeof</span>(<a class="code" href="classNode.html">Node</a>));</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keyword">new</span> (newnode) <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">Node</a>(node);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keyword">auto</span> <a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a> = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">getIdx</a>(bucket_count, HashFn()(node-&gt;getItem().first));</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keyword">auto</span> prevhead = &amp;newbuckets-&gt;buckets_[<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>]();</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        newnode-&gt;next_.store(prevhead-&gt;load(std::memory_order_relaxed));</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        prevhead-&gt;store(newnode, std::memory_order_relaxed);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keyword">auto</span> oldbuckets = <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.load(std::memory_order_relaxed);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ade1fbc7ac5aa4f52b0fe38343c32e4ff">seqlock_</a>.fetch_add(1, std::memory_order_release);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">bucket_count_</a>.store(bucket_count, std::memory_order_release);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">buckets_</a>.store(newbuckets, std::memory_order_release);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ade1fbc7ac5aa4f52b0fe38343c32e4ff">seqlock_</a>.fetch_add(1, std::memory_order_release);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    oldbuckets-&gt;retire(</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        concurrenthashmap::HazptrBucketDeleter&lt;Allocator&gt;(oldcount));</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  }</div><div class="ttc" id="Hazptr_8h_html_ab25155a2370ac096e61dc7e39e2816df"><div class="ttname"><a href="Hazptr_8h.html#ab25155a2370ac096e61dc7e39e2816df">h</a></div><div class="ttdeci">*than *hazptr_holder h</div><div class="ttdef"><b>Definition:</b> <a href="Hazptr_8h_source.html#l00116">Hazptr.h:116</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ae72b3eb729386b56bdedad539a461836"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ae72b3eb729386b56bdedad539a461836">folly::detail::ConcurrentHashMapSegment::buckets_</a></div><div class="ttdeci">Atom&lt; Buckets * &gt; buckets_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00818">ConcurrentHashMap-detail.h:818</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_html_a7e98b8a17c0aad30ba64d47b74e2a6c1"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">gtest_output_test_golden_lin.txt:83</a></div></div>
<div class="ttc" id="classNode_html"><div class="ttname"><a href="classNode.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l00098">HazptrTest.cpp:98</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a025c9ff3b66d0c40b5adc14aa879123f"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a025c9ff3b66d0c40b5adc14aa879123f">folly::detail::ConcurrentHashMapSegment::bucket_count_</a></div><div class="ttdeci">Atom&lt; size_t &gt; bucket_count_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00820">ConcurrentHashMap-detail.h:820</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0713d1421bc7c0207ff462e8ce9f75cd"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0713d1421bc7c0207ff462e8ce9f75cd">folly::detail::ConcurrentHashMapSegment::Node</a></div><div class="ttdeci">concurrenthashmap::NodeT&lt; KeyType, ValueType, Allocator, Atom &gt; Node</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00224">ConcurrentHashMap-detail.h:224</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets_html_a42cab962c80a4a717c941153126e80bf"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html#a42cab962c80a4a717c941153126e80bf">folly::detail::ConcurrentHashMapSegment::Buckets::create</a></div><div class="ttdeci">static Buckets * create(size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00660">ConcurrentHashMap-detail.h:660</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_ade1fbc7ac5aa4f52b0fe38343c32e4ff"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#ade1fbc7ac5aa4f52b0fe38343c32e4ff">folly::detail::ConcurrentHashMapSegment::seqlock_</a></div><div class="ttdeci">std::atomic&lt; uint64_t &gt; seqlock_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00819">ConcurrentHashMap-detail.h:819</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a3c896ef5717bcc8a801f4e07f8ac5d92"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3c896ef5717bcc8a801f4e07f8ac5d92">folly::detail::ConcurrentHashMapSegment::load_factor_</a></div><div class="ttdeci">float load_factor_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00812">ConcurrentHashMap-detail.h:812</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_aba4dd99bef700c906fded7afe7777f15"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#aba4dd99bef700c906fded7afe7777f15">folly::detail::ConcurrentHashMapSegment::getIdx</a></div><div class="ttdeci">uint64_t getIdx(size_t bucket_count, size_t hash)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00792">ConcurrentHashMap-detail.h:792</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a3bea8ee9b90ab6e67872f6dfc03c3f06"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a3bea8ee9b90ab6e67872f6dfc03c3f06">folly::detail::ConcurrentHashMapSegment::load_factor_nodes_</a></div><div class="ttdeci">size_t load_factor_nodes_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00813">ConcurrentHashMap-detail.h:813</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1b7935876950e798ceb39ff16238b2ab"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00252">252</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">size_</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a0964bfec1475bd7459935d89888d787b"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a0964bfec1475bd7459935d89888d787b">folly::detail::ConcurrentHashMapSegment::size_</a></div><div class="ttdeci">size_t size_</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00814">ConcurrentHashMap-detail.h:814</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad0505b7a28b3c219336cc2e1109e3ac2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<div class="memtemplate">
template&lt;typename Key , typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::try_emplace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Iterator.html">Iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key &amp;&amp;&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00283">283</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-generated-matchers_8h_source.html#l00481">testing::Args()</a>, and <a class="el" href="AtomicHashMapTest_8cpp_source.html#l01010">k</a>.</p>

<p>Referenced by <a class="el" href="ConcurrentHashMap_8h_source.html#l00233">folly::ConcurrentHashMap&lt; KeyType, ValueType, HashFn, KeyEqual, Allocator, ShardBits, Atom, Mutex &gt;::try_emplace()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                                          {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Note: first key is only ever compared.  Second is moved in to</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// create the node, and the first key is never touched again.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">insert_internal</a>(</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        it,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        std::forward&lt;Key&gt;(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>),</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">InsertType::DOES_NOT_EXIST</a>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        [](<span class="keyword">const</span> ValueType&amp;) { <span class="keywordflow">return</span> <span class="keyword">false</span>; },</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        std::forward&lt;Key&gt;(<a class="code" href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a>),</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div><div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_a659501d418087555f9631b49466c6053"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#a659501d418087555f9631b49466c6053">folly::detail::ConcurrentHashMapSegment::insert_internal</a></div><div class="ttdeci">bool insert_internal(Iterator &amp;it, const KeyType &amp;k, InsertType type, MatchFunc match, Node *cur, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="ConcurrentHashMap-detail_8h_source.html#l00366">ConcurrentHashMap-detail.h:366</a></div></div>
<div class="ttc" id="classfolly_1_1detail_1_1ConcurrentHashMapSegment_html_afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2"><div class="ttname"><a href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html#afbcd1f30a41154a8ee8c72447599fdbda82befd8630c8d32a8cce13e4373e1ad2">folly::detail::ConcurrentHashMapSegment::InsertType::DOES_NOT_EXIST</a></div></div>
<div class="ttc" id="AtomicHashMapTest_8cpp_html_a1c8561ac024f374e63fed90f2097f9ec"><div class="ttname"><a href="AtomicHashMapTest_8cpp.html#a1c8561ac024f374e63fed90f2097f9ec">k</a></div><div class="ttdeci">KeyT k</div><div class="ttdef"><b>Definition:</b> <a href="AtomicHashMapTest_8cpp_source.html#l01010">AtomicHashMapTest.cpp:1010</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a025c9ff3b66d0c40b5adc14aa879123f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt;size_t&gt; <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::bucket_count_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00820">820</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae72b3eb729386b56bdedad539a461836"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt;<a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment_1_1Buckets.html">Buckets</a>*&gt; <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::buckets_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00818">818</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3c896ef5717bcc8a801f4e07f8ac5d92"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::load_factor_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00812">812</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3bea8ee9b90ab6e67872f6dfc03c3f06"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::load_factor_nodes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00813">813</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a678f0f51614ae4a2dfd88f2db0e60797"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::m_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00811">811</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6f3b884f4e29324cd48ad36f605d77f1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t const <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::max_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00815">815</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="ade1fbc7ac5aa4f52b0fe38343c32e4ff"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&gt; <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::seqlock_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00819">819</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0964bfec1475bd7459935d89888d787b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , uint8_t ShardBits = 0, typename HashFn  = std::hash&lt;KeyType&gt;, typename KeyEqual  = std::equal_to&lt;KeyType&gt;, typename Allocator  = std::allocator&lt;uint8_t&gt;, template&lt; typename &gt; class Atom = std::atomic, class Mutex  = std::mutex&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">folly::detail::ConcurrentHashMapSegment</a>&lt; KeyType, ValueType, ShardBits, HashFn, KeyEqual, Allocator, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a832ae5992b50e77608e406df4be3e7e2">Mutex</a> &gt;::size_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ConcurrentHashMap-detail_8h_source.html#l00814">814</a> of file <a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>proxygen/folly/folly/concurrency/detail/<a class="el" href="ConcurrentHashMap-detail_8h_source.html">ConcurrentHashMap-detail.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="namespacefolly_1_1detail.html">detail</a></li><li class="navelem"><a class="el" href="classfolly_1_1detail_1_1ConcurrentHashMapSegment.html">ConcurrentHashMapSegment</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
