<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::MPMCPipeline&lt; In, Stages &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1MPMCPipeline.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classfolly_1_1MPMCPipeline-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::MPMCPipeline&lt; In, Stages &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="MPMCPipelineDetail_8h_source.html">MPMCPipelineDetail.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline_1_1Ticket.html">Ticket</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline_1_1TicketBaseDebug.html">TicketBaseDebug</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline_1_1TicketBaseNDebug.html">TicketBaseNDebug</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abdf65d98db1a0206c752f8d5efb2ac26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#abdf65d98db1a0206c752f8d5efb2ac26">MPMCPipeline</a> ()=default</td></tr>
<tr class="separator:abdf65d98db1a0206c752f8d5efb2ac26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63c9f78125f203d71ab84fd5803b7d5f"><td class="memTemplParams" colspan="2">template&lt;class... Sizes&gt; </td></tr>
<tr class="memitem:a63c9f78125f203d71ab84fd5803b7d5f"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a63c9f78125f203d71ab84fd5803b7d5f">MPMCPipeline</a> (<a class="el" href="HazptrTest_8cpp.html#aeb4e41c74661c1b2666649ace519701f">Sizes...sizes</a>)</td></tr>
<tr class="separator:a63c9f78125f203d71ab84fd5803b7d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9114c4db091433d61980a587b6ecc594"><td class="memTemplParams" colspan="2">template&lt;class... Args&gt; </td></tr>
<tr class="memitem:a9114c4db091433d61980a587b6ecc594"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a9114c4db091433d61980a587b6ecc594">blockingWrite</a> (Args &amp;&amp;...args)</td></tr>
<tr class="separator:a9114c4db091433d61980a587b6ecc594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad34258a73525925c496ccdfebad03de"><td class="memTemplParams" colspan="2">template&lt;class... Args&gt; </td></tr>
<tr class="memitem:aad34258a73525925c496ccdfebad03de"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#aad34258a73525925c496ccdfebad03de">write</a> (Args &amp;&amp;...args)</td></tr>
<tr class="separator:aad34258a73525925c496ccdfebad03de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97c1ff99e9a075dca8498bc14d8b2b23"><td class="memTemplParams" colspan="2">template&lt;size_t Stage&gt; </td></tr>
<tr class="memitem:a97c1ff99e9a075dca8498bc14d8b2b23"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1MPMCPipeline_1_1Ticket.html">Ticket</a>&lt; Stage &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a97c1ff99e9a075dca8498bc14d8b2b23">blockingReadStage</a> (typename std::tuple_element&lt; Stage, <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;elem)</td></tr>
<tr class="separator:a97c1ff99e9a075dca8498bc14d8b2b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a5d7a3ea603aa905c11a8d79e8dc37"><td class="memTemplParams" colspan="2">template&lt;size_t Stage&gt; </td></tr>
<tr class="memitem:a51a5d7a3ea603aa905c11a8d79e8dc37"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a51a5d7a3ea603aa905c11a8d79e8dc37">readStage</a> (<a class="el" href="classfolly_1_1MPMCPipeline_1_1Ticket.html">Ticket</a>&lt; Stage &gt; &amp;<a class="el" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a>, typename std::tuple_element&lt; Stage, <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;elem)</td></tr>
<tr class="separator:a51a5d7a3ea603aa905c11a8d79e8dc37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d2a44ff1aa50bb7ac00141a711a08d"><td class="memTemplParams" colspan="2">template&lt;size_t Stage, class... Args&gt; </td></tr>
<tr class="memitem:a17d2a44ff1aa50bb7ac00141a711a08d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a17d2a44ff1aa50bb7ac00141a711a08d">blockingWriteStage</a> (<a class="el" href="classfolly_1_1MPMCPipeline_1_1Ticket.html">Ticket</a>&lt; Stage &gt; &amp;<a class="el" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a>, Args &amp;&amp;...args)</td></tr>
<tr class="separator:a17d2a44ff1aa50bb7ac00141a711a08d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa636f25e5df8348aad524e2e3f71ee20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#aa636f25e5df8348aad524e2e3f71ee20">blockingRead</a> (typename std::tuple_element&lt; sizeof...(Stages), <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;elem)</td></tr>
<tr class="separator:aa636f25e5df8348aad524e2e3f71ee20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c500a54c66d17804f0b8f0de33f599"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a99c500a54c66d17804f0b8f0de33f599">read</a> (typename std::tuple_element&lt; sizeof...(Stages), <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;elem)</td></tr>
<tr class="separator:a99c500a54c66d17804f0b8f0de33f599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a824e3e6ec956619796a73a496031be79"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a824e3e6ec956619796a73a496031be79">sizeGuess</a> () const noexcept</td></tr>
<tr class="separator:a824e3e6ec956619796a73a496031be79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:aa2b46dd74f7d2d33e2bc7578c05a1a48"><td class="memItemLeft" align="right" valign="top">typedef std::tuple&lt; <a class="el" href="structfolly_1_1detail_1_1PipelineStageInfo.html">detail::PipelineStageInfo</a>&lt; Stages &gt;... &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#aa2b46dd74f7d2d33e2bc7578c05a1a48">StageInfos</a></td></tr>
<tr class="separator:aa2b46dd74f7d2d33e2bc7578c05a1a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6651ae276d148ce649011ffb26e8e5df"><td class="memItemLeft" align="right" valign="top">typedef std::tuple&lt; <a class="el" href="classfolly_1_1detail_1_1MPMCPipelineStageImpl.html">detail::MPMCPipelineStageImpl</a>&lt; In &gt;, <a class="el" href="classfolly_1_1detail_1_1MPMCPipelineStageImpl.html">detail::MPMCPipelineStageImpl</a>&lt; typename <a class="el" href="structfolly_1_1detail_1_1PipelineStageInfo.html">detail::PipelineStageInfo</a>&lt; Stages &gt;::value_type &gt;... &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a></td></tr>
<tr class="separator:a6651ae276d148ce649011ffb26e8e5df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7f27e9770bd8bea22b125a8bd8cfa44"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#ab7f27e9770bd8bea22b125a8bd8cfa44">TicketBase</a> = std::conditional_t&lt; <a class="el" href="namespacefolly.html#ad90d44cfcb05efe4de38be67048437f6">kIsDebug</a>, <a class="el" href="classfolly_1_1MPMCPipeline_1_1TicketBaseDebug.html">TicketBaseDebug</a>, <a class="el" href="classfolly_1_1MPMCPipeline_1_1TicketBaseNDebug.html">TicketBaseNDebug</a> &gt;</td></tr>
<tr class="separator:ab7f27e9770bd8bea22b125a8bd8cfa44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae9b7bb5a394803725be2848569e3f2f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a></td></tr>
<tr class="separator:ae9b7bb5a394803725be2848569e3f2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ab17ac7483ec19bbfcbba40b6d3d49071"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MPMCPipeline.html#ab17ac7483ec19bbfcbba40b6d3d49071">kAmplification</a></td></tr>
<tr class="separator:ab17ac7483ec19bbfcbba40b6d3d49071"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class In, class... Stages&gt;<br />
class folly::MPMCPipeline&lt; In, Stages &gt;</h3>

<p>Multi-Producer, Multi-Consumer pipeline.</p>
<p><a class="el" href="structA.html">A</a> N-stage pipeline is a combination of N+1 <a class="el" href="classMPMC.html">MPMC</a> queues (see MPMCQueue.h).</p>
<p>At each stage, you may dequeue the results from the previous stage (possibly from multiple threads) and enqueue results to the next stage. Regardless of the order of completion, data is delivered to the next stage in the original order. Each input is matched with a "ticket" which must be produced when enqueueing to the next stage.</p>
<p><a class="el" href="structA.html">A</a> given stage must produce exactly K ("amplification factor", default K=1) results for every input. This is enforced by requiring that each ticket is used exactly K times.</p>
<p>Usage:</p>
<p>// arguments are queue sizes <a class="el" href="classfolly_1_1MPMCPipeline.html#abdf65d98db1a0206c752f8d5efb2ac26">MPMCPipeline&lt;int, std::string, int&gt;</a> pipeline(10, 10, 10);</p>
<p>pipeline.blockingWrite(42);</p>
<p>{ int val; auto ticket = pipeline.blockingReadStage&lt;0&gt;(val); pipeline.blockingWriteStage&lt;0&gt;(ticket, folly::to&lt;std::string&gt;(val)); }</p>
<p>{ std::string val; auto ticket = pipeline.blockingReadStage&lt;1&gt;(val); int ival = 0; try { ival = folly::to&lt;int&gt;(val); } catch (...) { // We must produce exactly 1 output even on exception! } pipeline.blockingWriteStage&lt;1&gt;(ticket, ival); }</p>
<p>int result; pipeline.blockingRead(result); // result == 42</p>
<p>To specify amplification factors greater than 1, use MPMCPipelineStage&lt;T, amplification&gt; instead of T in the declaration:</p>
<p><a class="el" href="classfolly_1_1MPMCPipeline.html">MPMCPipeline</a>&lt;int, MPMCPipelineStage&lt;std::string, 2&gt;, MPMCPipelineStage&lt;int, 4&gt;&gt;</p>
<p>declares a two-stage pipeline: the first stage produces 2 strings for each input int, the second stage produces 4 ints for each input string, so, overall, the pipeline produces 2*4 = 8 ints for each input int.</p>
<p>Implementation details: we use N+1 <a class="el" href="classfolly_1_1MPMCQueue.html">MPMCQueue</a> objects; each intermediate queue connects two adjacent stages. The <a class="el" href="classfolly_1_1MPMCQueue.html">MPMCQueue</a> implementation is abused; instead of using it as a queue, we insert in the output queue at the position determined by the input queue's popTicket_. We guarantee that all slots are filled (and therefore the queue doesn't freeze) because we require that each step produces exactly K outputs for every input. </p>

<p>Definition at line <a class="el" href="MPMCPipelineDetail_8h_source.html#l00024">24</a> of file <a class="el" href="MPMCPipelineDetail_8h_source.html">MPMCPipelineDetail.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aa2b46dd74f7d2d33e2bc7578c05a1a48"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::tuple&lt;<a class="el" href="structfolly_1_1detail_1_1PipelineStageInfo.html">detail::PipelineStageInfo</a>&lt;Stages&gt;...&gt; <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::<a class="el" href="classfolly_1_1MPMCPipeline.html#aa2b46dd74f7d2d33e2bc7578c05a1a48">StageInfos</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00098">98</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6651ae276d148ce649011ffb26e8e5df"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::tuple&lt; <a class="el" href="classfolly_1_1detail_1_1MPMCPipelineStageImpl.html">detail::MPMCPipelineStageImpl</a>&lt;In&gt;, <a class="el" href="classfolly_1_1detail_1_1MPMCPipelineStageImpl.html">detail::MPMCPipelineStageImpl</a>&lt; typename <a class="el" href="structfolly_1_1detail_1_1PipelineStageInfo.html">detail::PipelineStageInfo</a>&lt;Stages&gt;::value_type&gt;...&gt; <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::<a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00103">103</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab7f27e9770bd8bea22b125a8bd8cfa44"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::<a class="el" href="classfolly_1_1MPMCPipeline.html#ab7f27e9770bd8bea22b125a8bd8cfa44">TicketBase</a> =  std::conditional_t&lt;<a class="el" href="namespacefolly.html#ad90d44cfcb05efe4de38be67048437f6">kIsDebug</a>, <a class="el" href="classfolly_1_1MPMCPipeline_1_1TicketBaseDebug.html">TicketBaseDebug</a>, <a class="el" href="classfolly_1_1MPMCPipeline_1_1TicketBaseNDebug.html">TicketBaseNDebug</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00135">135</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abdf65d98db1a0206c752f8d5efb2ac26"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::<a class="el" href="classfolly_1_1MPMCPipeline.html">MPMCPipeline</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default-construct pipeline. Useful to move-assign later, just like <a class="el" href="classfolly_1_1MPMCQueue.html">MPMCQueue</a>, see MPMCQueue.h for more details. </p>

<p>Referenced by <a class="el" href="MPMCPipeline_8h_source.html#l00171">folly::MPMCPipeline&lt; In, Stages &gt;::Ticket&lt; Stage &gt;::use()</a>.</p>

</div>
</div>
<a class="anchor" id="a63c9f78125f203d71ab84fd5803b7d5f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<div class="memtemplate">
template&lt;class... Sizes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::<a class="el" href="classfolly_1_1MPMCPipeline.html">MPMCPipeline</a> </td>
          <td>(</td>
          <td class="paramtype">Sizes...&#160;</td>
          <td class="paramname"><em>sizes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Construct a pipeline with N+1 queue sizes. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00188">188</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;: <a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>(<a class="code" href="HazptrTest_8cpp.html#aeb4e41c74661c1b2666649ace519701f">sizes</a>...) {}</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="HazptrTest_8cpp_html_aeb4e41c74661c1b2666649ace519701f"><div class="ttname"><a href="HazptrTest_8cpp.html#aeb4e41c74661c1b2666649ace519701f">sizes</a></div><div class="ttdeci">const int sizes[]</div><div class="ttdef"><b>Definition:</b> <a href="HazptrTest_8cpp_source.html#l01306">HazptrTest.cpp:1306</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa636f25e5df8348aad524e2e3f71ee20"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::blockingRead </td>
          <td>(</td>
          <td class="paramtype">typename std::tuple_element&lt; sizeof...(Stages), <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;&#160;</td>
          <td class="paramname"><em>elem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pop an element from (the final stage of) the pipeline. Blocking. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00251">251</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="ParallelMap-inl_8h_source.html#l00116">folly::gen::detail::PMap&lt; Predicate &gt;::Generator&lt; Value, Source, Input, Output &gt;::ExecutionPipeline::blockingRead()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00211">folly::MPMCPipeline&lt; Input, Output &gt;::blockingReadStage()</a>, and <a class="el" href="MPMCPipelineTest_8cpp_source.html#l00030">folly::test::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                              {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">std::get</a>&lt;<span class="keyword">sizeof</span>...(Stages)&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).blockingRead(elem);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_1_1operators_html_a3fb4b634ea259cf94b63687a25b3f505"><div class="ttname"><a href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">folly::pushmi::operators::get</a></div><div class="ttdeci">PUSHMI_INLINE_VAR constexpr detail::get_fn&lt; T &gt; get</div><div class="ttdef"><b>Definition:</b> <a href="submit_8h_source.html#l00391">submit.h:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a97c1ff99e9a075dca8498bc14d8b2b23"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<div class="memtemplate">
template&lt;size_t Stage&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1MPMCPipeline_1_1Ticket.html">Ticket</a>&lt;Stage&gt; <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::blockingReadStage </td>
          <td>(</td>
          <td class="paramtype">typename std::tuple_element&lt; Stage, <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;&#160;</td>
          <td class="paramname"><em>elem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read an element for stage Stage and obtain a ticket. Blocking. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00211">211</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="MPMCPipelineTest_8cpp_source.html#l00030">folly::test::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                                                        {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> Ticket&lt;Stage&gt;(</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keyword">this</span>,</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        std::tuple_element&lt;Stage, StageInfos&gt;::type::kAmplification,</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        std::get&lt;Stage&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).<a class="code" href="classfolly_1_1MPMCPipeline.html#aa636f25e5df8348aad524e2e3f71ee20">blockingRead</a>(elem));</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="classfolly_1_1MPMCPipeline_html_aa636f25e5df8348aad524e2e3f71ee20"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#aa636f25e5df8348aad524e2e3f71ee20">folly::MPMCPipeline::blockingRead</a></div><div class="ttdeci">void blockingRead(typename std::tuple_element&lt; sizeof...(Stages), StageTuple &gt;::type::value_type &amp;elem)</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00251">MPMCPipeline.h:251</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9114c4db091433d61980a587b6ecc594"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<div class="memtemplate">
template&lt;class... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::blockingWrite </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Push an element into (the first stage of) the pipeline. Blocking. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00194">194</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="ParallelMap-inl_8h_source.html#l00107">folly::gen::detail::PMap&lt; Predicate &gt;::Generator&lt; Value, Source, Input, Output &gt;::ExecutionPipeline::blockingWrite()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00194">folly::MPMCPipeline&lt; Input, Output &gt;::blockingWrite()</a>, and <a class="el" href="MPMCPipelineTest_8cpp_source.html#l00030">folly::test::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                     {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    std::get&lt;0&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).<a class="code" href="classfolly_1_1MPMCPipeline.html#a9114c4db091433d61980a587b6ecc594">blockingWrite</a>(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_a9114c4db091433d61980a587b6ecc594"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#a9114c4db091433d61980a587b6ecc594">folly::MPMCPipeline::blockingWrite</a></div><div class="ttdeci">void blockingWrite(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00194">MPMCPipeline.h:194</a></div></div>
<div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a17d2a44ff1aa50bb7ac00141a711a08d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<div class="memtemplate">
template&lt;size_t Stage, class... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::blockingWriteStage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1MPMCPipeline_1_1Ticket.html">Ticket</a>&lt; Stage &gt; &amp;&#160;</td>
          <td class="paramname"><em>ticket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Complete an element in stage Stage (pushing it for stage Stage+1). Blocking. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00243">243</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="MPMCPipelineTest_8cpp_source.html#l00030">folly::test::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                                                 {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    std::get&lt;Stage + 1&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).blockingWriteWithTicket(</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a>.use(<span class="keyword">this</span>), std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="TicketCodecTest_8cpp_html_a7093cc9e41a6fdad6b2f2aa9211604c6"><div class="ttname"><a href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a></div><div class="ttdeci">static constexpr StringPiece ticket</div><div class="ttdef"><b>Definition:</b> <a href="TicketCodecTest_8cpp_source.html#l00021">TicketCodecTest.cpp:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a99c500a54c66d17804f0b8f0de33f599"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::read </td>
          <td>(</td>
          <td class="paramtype">typename std::tuple_element&lt; sizeof...(Stages), <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;&#160;</td>
          <td class="paramname"><em>elem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1Try.html">Try</a> to pop an element from (the final stage of) the pipeline. Non-blocking. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00260">260</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="ParallelMap-inl_8h_source.html#l00112">folly::gen::detail::PMap&lt; Predicate &gt;::Generator&lt; Value, Source, Input, Output &gt;::ExecutionPipeline::read()</a>, and <a class="el" href="MPMCPipelineTest_8cpp_source.html#l00078">folly::test::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                  {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">std::get</a>&lt;<span class="keyword">sizeof</span>...(Stages)&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).read(elem);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_1_1operators_html_a3fb4b634ea259cf94b63687a25b3f505"><div class="ttname"><a href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">folly::pushmi::operators::get</a></div><div class="ttdeci">PUSHMI_INLINE_VAR constexpr detail::get_fn&lt; T &gt; get</div><div class="ttdef"><b>Definition:</b> <a href="submit_8h_source.html#l00391">submit.h:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51a5d7a3ea603aa905c11a8d79e8dc37"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<div class="memtemplate">
template&lt;size_t Stage&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::readStage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1MPMCPipeline_1_1Ticket.html">Ticket</a>&lt; Stage &gt; &amp;&#160;</td>
          <td class="paramname"><em>ticket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename std::tuple_element&lt; Stage, <a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> &gt;::type::value_type &amp;&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1Try.html">Try</a> to read an element for stage Stage and obtain a ticket. Non-blocking. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00224">224</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                                                        {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> tval;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> (!std::get&lt;Stage&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).readAndGetTicket(tval, elem)) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a> = Ticket&lt;Stage&gt;(</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keyword">this</span>,</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        std::tuple_element&lt;Stage, StageInfos&gt;::type::kAmplification,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        tval);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="TicketCodecTest_8cpp_html_a7093cc9e41a6fdad6b2f2aa9211604c6"><div class="ttname"><a href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a></div><div class="ttdeci">static constexpr StringPiece ticket</div><div class="ttdef"><b>Definition:</b> <a href="TicketCodecTest_8cpp_source.html#l00021">TicketCodecTest.cpp:21</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a824e3e6ec956619796a73a496031be79"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::sizeGuess </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Estimate queue size, measured as values from the last stage. (so if the pipeline has an amplification factor &gt; 1, pushing an element into the first stage will cause <a class="el" href="classfolly_1_1MPMCPipeline.html#a824e3e6ec956619796a73a496031be79">sizeGuess()</a> to be == amplification factor) Elements "in flight" (currently processed as part of a stage, so not in any queue) are also counted. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00272">272</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="MPMCPipelineTest_8cpp_source.html#l00030">folly::test::TEST()</a>, and <a class="el" href="ParallelMap-inl_8h_source.html#l00085">folly::gen::detail::PMap&lt; Predicate &gt;::Generator&lt; Value, Source, Input, Output &gt;::ExecutionPipeline::~ExecutionPipeline()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                     {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> ssize_t(</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        std::get&lt;0&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).writeCount() * <a class="code" href="classfolly_1_1MPMCPipeline.html#ab17ac7483ec19bbfcbba40b6d3d49071">kAmplification</a> -</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">std::get</a>&lt;<span class="keyword">sizeof</span>...(Stages)&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).readCount());</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ab17ac7483ec19bbfcbba40b6d3d49071"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ab17ac7483ec19bbfcbba40b6d3d49071">folly::MPMCPipeline::kAmplification</a></div><div class="ttdeci">static constexpr size_t kAmplification</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00104">MPMCPipeline.h:104</a></div></div>
<div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_1_1operators_html_a3fb4b634ea259cf94b63687a25b3f505"><div class="ttname"><a href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">folly::pushmi::operators::get</a></div><div class="ttdeci">PUSHMI_INLINE_VAR constexpr detail::get_fn&lt; T &gt; get</div><div class="ttdef"><b>Definition:</b> <a href="submit_8h_source.html#l00391">submit.h:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aad34258a73525925c496ccdfebad03de"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<div class="memtemplate">
template&lt;class... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::write </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classfolly_1_1Try.html">Try</a> to push an element into (the first stage of) the pipeline. Non-blocking. </p>

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00203">203</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="ParallelMap-inl_8h_source.html#l00099">folly::gen::detail::PMap&lt; Predicate &gt;::Generator&lt; Value, Source, Input, Output &gt;::ExecutionPipeline::write()</a>, and <a class="el" href="MPMCPipeline_8h_source.html#l00203">folly::MPMCPipeline&lt; Input, Output &gt;::write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                             {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> std::get&lt;0&gt;(<a class="code" href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">stages_</a>).<a class="code" href="classfolly_1_1MPMCPipeline.html#aad34258a73525925c496ccdfebad03de">write</a>(std::forward&lt;Args&gt;(args)...);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MPMCPipeline_html_ae9b7bb5a394803725be2848569e3f2f4"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#ae9b7bb5a394803725be2848569e3f2f4">folly::MPMCPipeline::stages_</a></div><div class="ttdeci">StageTuple stages_</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00279">MPMCPipeline.h:279</a></div></div>
<div class="ttc" id="classfolly_1_1MPMCPipeline_html_aad34258a73525925c496ccdfebad03de"><div class="ttname"><a href="classfolly_1_1MPMCPipeline.html#aad34258a73525925c496ccdfebad03de">folly::MPMCPipeline::write</a></div><div class="ttdeci">bool write(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="MPMCPipeline_8h_source.html#l00203">MPMCPipeline.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab17ac7483ec19bbfcbba40b6d3d49071"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::kAmplification</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">      <a class="code" href="Conv_8cpp.html#a2f6ac1714c34743067351b0d2a64162b">detail::AmplificationProduct&lt;StageInfos&gt;::value</a></div></div><!-- fragment -->
<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00104">104</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae9b7bb5a394803725be2848569e3f2f4"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class In, class... Stages&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1MPMCPipeline.html#a6651ae276d148ce649011ffb26e8e5df">StageTuple</a> <a class="el" href="classfolly_1_1MPMCPipeline.html">folly::MPMCPipeline</a>&lt; In, Stages &gt;::stages_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MPMCPipeline_8h_source.html#l00279">279</a> of file <a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a>.</p>

<p>Referenced by <a class="el" href="MPMCPipeline_8h_source.html#l00251">folly::MPMCPipeline&lt; Input, Output &gt;::blockingRead()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00211">folly::MPMCPipeline&lt; Input, Output &gt;::blockingReadStage()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00194">folly::MPMCPipeline&lt; Input, Output &gt;::blockingWrite()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00243">folly::MPMCPipeline&lt; Input, Output &gt;::blockingWriteStage()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00260">folly::MPMCPipeline&lt; Input, Output &gt;::read()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00224">folly::MPMCPipeline&lt; Input, Output &gt;::readStage()</a>, <a class="el" href="MPMCPipeline_8h_source.html#l00272">folly::MPMCPipeline&lt; Input, Output &gt;::sizeGuess()</a>, and <a class="el" href="MPMCPipeline_8h_source.html#l00203">folly::MPMCPipeline&lt; Input, Output &gt;::write()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/detail/<a class="el" href="MPMCPipelineDetail_8h_source.html">MPMCPipelineDetail.h</a></li>
<li>proxygen/folly/folly/<a class="el" href="MPMCPipeline_8h_source.html">MPMCPipeline.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1MPMCPipeline.html">MPMCPipeline</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
