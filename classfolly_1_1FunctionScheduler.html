<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::FunctionScheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1FunctionScheduler.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1FunctionScheduler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::FunctionScheduler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1FunctionScheduler_1_1LatencyDistribution.html">LatencyDistribution</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1FunctionScheduler_1_1RunTimeOrder.html">RunTimeOrder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:afbc7bc2be36fe0459a2beb1a55b4cb0a"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#afbc7bc2be36fe0459a2beb1a55b4cb0a">IntervalDistributionFunc</a> = <a class="el" href="classfolly_1_1Function.html">Function</a>&lt; std::chrono::milliseconds()&gt;</td></tr>
<tr class="separator:afbc7bc2be36fe0459a2beb1a55b4cb0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00487d442d4ae4ae06e68ae10a0b4936"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a00487d442d4ae4ae06e68ae10a0b4936">NextRunTimeFunc</a> = <a class="el" href="classfolly_1_1Function.html">Function</a>&lt; std::chrono::steady_clock::time_point(std::chrono::steady_clock::time_point, std::chrono::steady_clock::time_point)&gt;</td></tr>
<tr class="separator:a00487d442d4ae4ae06e68ae10a0b4936"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aec3ddc9b29edc06987d2a215e46ccd64"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#aec3ddc9b29edc06987d2a215e46ccd64">FunctionScheduler</a> ()</td></tr>
<tr class="separator:aec3ddc9b29edc06987d2a215e46ccd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b7c013dadbf546b4b441897b3a148f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a0b7c013dadbf546b4b441897b3a148f9">~FunctionScheduler</a> ()</td></tr>
<tr class="separator:a0b7c013dadbf546b4b441897b3a148f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e0f36695482952e7a891955f2d9aef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ad5e0f36695482952e7a891955f2d9aef">setSteady</a> (bool steady)</td></tr>
<tr class="separator:ad5e0f36695482952e7a891955f2d9aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a2d108a44edff8bb91ccd3f7d5f59d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a0a2d108a44edff8bb91ccd3f7d5f59d9">addFunction</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, std::chrono::milliseconds interval, <a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID=<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>(), std::chrono::milliseconds startDelay=std::chrono::milliseconds(0))</td></tr>
<tr class="separator:a0a2d108a44edff8bb91ccd3f7d5f59d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf82bed977772e52160675c9130f71bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#acf82bed977772e52160675c9130f71bc">addFunction</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, std::chrono::milliseconds interval, const <a class="el" href="structfolly_1_1FunctionScheduler_1_1LatencyDistribution.html">LatencyDistribution</a> &amp;latencyDistr, <a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID=<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>(), std::chrono::milliseconds startDelay=std::chrono::milliseconds(0))</td></tr>
<tr class="separator:acf82bed977772e52160675c9130f71bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c0875297ea44393a20ba493c57e150"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a88c0875297ea44393a20ba493c57e150">addFunctionOnce</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, <a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID=<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>(), std::chrono::milliseconds startDelay=std::chrono::milliseconds(0))</td></tr>
<tr class="separator:a88c0875297ea44393a20ba493c57e150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39cc8aeca3c681bf521b3f7550dffa9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a39cc8aeca3c681bf521b3f7550dffa9f">addFunctionUniformDistribution</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, std::chrono::milliseconds minInterval, std::chrono::milliseconds maxInterval, <a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID, std::chrono::milliseconds startDelay)</td></tr>
<tr class="separator:a39cc8aeca3c681bf521b3f7550dffa9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab630eac15e9192b974ae8937c27b286a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ab630eac15e9192b974ae8937c27b286a">addFunctionConsistentDelay</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, std::chrono::milliseconds interval, <a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID=<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>(), std::chrono::milliseconds startDelay=std::chrono::milliseconds(0))</td></tr>
<tr class="separator:ab630eac15e9192b974ae8937c27b286a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2814fd75935740f126e93c96d553b55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ab2814fd75935740f126e93c96d553b55">addFunctionGenericDistribution</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, <a class="el" href="classfolly_1_1FunctionScheduler.html#afbc7bc2be36fe0459a2beb1a55b4cb0a">IntervalDistributionFunc</a> &amp;&amp;intervalFunc, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nameID, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;intervalDescr, std::chrono::milliseconds startDelay)</td></tr>
<tr class="separator:ab2814fd75935740f126e93c96d553b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a32aa83533d512162cd061c5c35a193"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a7a32aa83533d512162cd061c5c35a193">addFunctionGenericNextRunTimeFunctor</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, <a class="el" href="classfolly_1_1FunctionScheduler.html#a00487d442d4ae4ae06e68ae10a0b4936">NextRunTimeFunc</a> &amp;&amp;fn, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nameID, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;intervalDescr, std::chrono::milliseconds startDelay)</td></tr>
<tr class="separator:a7a32aa83533d512162cd061c5c35a193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f2581ba1fc54f52a333791d42400d7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a47f2581ba1fc54f52a333791d42400d7">cancelFunction</a> (<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID)</td></tr>
<tr class="separator:a47f2581ba1fc54f52a333791d42400d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a636b01a3c72fff6a2e4cca26b0c5a15e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a636b01a3c72fff6a2e4cca26b0c5a15e">cancelFunctionAndWait</a> (<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID)</td></tr>
<tr class="separator:a636b01a3c72fff6a2e4cca26b0c5a15e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b1c537374e11c9af545e56c7d47a2fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a8b1c537374e11c9af545e56c7d47a2fc">cancelAllFunctions</a> ()</td></tr>
<tr class="separator:a8b1c537374e11c9af545e56c7d47a2fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59df437d8f30b7288f9a17c4ad1d4399"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a59df437d8f30b7288f9a17c4ad1d4399">cancelAllFunctionsAndWait</a> ()</td></tr>
<tr class="separator:a59df437d8f30b7288f9a17c4ad1d4399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683d63af70a568eae4bfac812285da7a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a683d63af70a568eae4bfac812285da7a">resetFunctionTimer</a> (<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID)</td></tr>
<tr class="separator:a683d63af70a568eae4bfac812285da7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc4d1a3c8ca217e2c4703ae20459b0d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a9fc4d1a3c8ca217e2c4703ae20459b0d">start</a> ()</td></tr>
<tr class="separator:a9fc4d1a3c8ca217e2c4703ae20459b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102ab98df131ab3eafa14c5d75449ca0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a102ab98df131ab3eafa14c5d75449ca0">shutdown</a> ()</td></tr>
<tr class="separator:a102ab98df131ab3eafa14c5d75449ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad637d4ecfb9cf5be85bcf32ebd2764b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ad637d4ecfb9cf5be85bcf32ebd2764b3">setThreadName</a> (<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> threadName)</td></tr>
<tr class="separator:ad637d4ecfb9cf5be85bcf32ebd2764b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a099e3ec208bb4834e311e8565fe949bb"><td class="memTemplParams" colspan="2">template&lt;typename RepeatFuncNextRunTimeFunc &gt; </td></tr>
<tr class="memitem:a099e3ec208bb4834e311e8565fe949bb"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a099e3ec208bb4834e311e8565fe949bb">addFunctionToHeapChecked</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, RepeatFuncNextRunTimeFunc &amp;&amp;fn, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nameID, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;intervalDescr, milliseconds startDelay, bool runOnce)</td></tr>
<tr class="separator:a099e3ec208bb4834e311e8565fe949bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ac51179b09c1a8609ed2a9d3afc85a701"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; std::unique_ptr&lt; <a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ac51179b09c1a8609ed2a9d3afc85a701">FunctionHeap</a></td></tr>
<tr class="separator:ac51179b09c1a8609ed2a9d3afc85a701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e995efa920fb2c6322b14f4d69bd8a4"><td class="memItemLeft" align="right" valign="top">typedef std::unordered_map&lt; <a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>, <a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a> *, <a class="el" href="structfolly_1_1Hash.html">Hash</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a3e995efa920fb2c6322b14f4d69bd8a4">FunctionMap</a></td></tr>
<tr class="separator:a3e995efa920fb2c6322b14f4d69bd8a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a932bf717b760f8e9c28309c1996d7fdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a932bf717b760f8e9c28309c1996d7fdd">run</a> ()</td></tr>
<tr class="separator:a932bf717b760f8e9c28309c1996d7fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c2a7d808477e1243ed9a27a58529352"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a7c2a7d808477e1243ed9a27a58529352">runOneFunction</a> (std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;<a class="el" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>, std::chrono::steady_clock::time_point <a class="el" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a>)</td></tr>
<tr class="separator:a7c2a7d808477e1243ed9a27a58529352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487bcca441d22bb86cbe44efe0229078"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a487bcca441d22bb86cbe44efe0229078">cancelFunction</a> (const std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;<a class="el" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>, <a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a> *it)</td></tr>
<tr class="separator:a487bcca441d22bb86cbe44efe0229078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce4296e24476a0f9eb16cedbbb45f66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a5ce4296e24476a0f9eb16cedbbb45f66">addFunctionToHeap</a> (const std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;<a class="el" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>, std::unique_ptr&lt; <a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a> &gt; func)</td></tr>
<tr class="separator:a5ce4296e24476a0f9eb16cedbbb45f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25ae4d3fa42a1851006a4b02a37e1cc"><td class="memTemplParams" colspan="2">template&lt;typename RepeatFuncNextRunTimeFunc &gt; </td></tr>
<tr class="memitem:ab25ae4d3fa42a1851006a4b02a37e1cc"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ab25ae4d3fa42a1851006a4b02a37e1cc">addFunctionToHeapChecked</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, RepeatFuncNextRunTimeFunc &amp;&amp;fn, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nameID, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</td></tr>
<tr class="separator:ab25ae4d3fa42a1851006a4b02a37e1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f4553b61a009028770294bfcdb2353"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">addFunctionInternal</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, <a class="el" href="classfolly_1_1FunctionScheduler.html#a00487d442d4ae4ae06e68ae10a0b4936">NextRunTimeFunc</a> &amp;&amp;fn, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nameID, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</td></tr>
<tr class="separator:a38f4553b61a009028770294bfcdb2353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0401a6d300edeec1b57bf192407d99c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#aa0401a6d300edeec1b57bf192407d99c">addFunctionInternal</a> (<a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;cb, <a class="el" href="classfolly_1_1FunctionScheduler.html#afbc7bc2be36fe0459a2beb1a55b4cb0a">IntervalDistributionFunc</a> &amp;&amp;fn, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nameID, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</td></tr>
<tr class="separator:aa0401a6d300edeec1b57bf192407d99c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a048a2842553d5a59ec455cb3d839da43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a048a2842553d5a59ec455cb3d839da43">cancelAllFunctionsWithLock</a> (std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;<a class="el" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>)</td></tr>
<tr class="separator:a048a2842553d5a59ec455cb3d839da43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99596607f31c01df058aea8db3acc8bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a99596607f31c01df058aea8db3acc8bf">cancelFunctionWithLock</a> (std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;<a class="el" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>, <a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> nameID)</td></tr>
<tr class="separator:a99596607f31c01df058aea8db3acc8bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae907774bb66df6bc842bff7d28a39768"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ae907774bb66df6bc842bff7d28a39768">thread_</a></td></tr>
<tr class="separator:ae907774bb66df6bc842bff7d28a39768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16ac30a29ba7e29135412b9af633793e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a></td></tr>
<tr class="separator:a16ac30a29ba7e29135412b9af633793e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c21f3e9a445b20e3c0c69487f85129b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a> {false}</td></tr>
<tr class="separator:a9c21f3e9a445b20e3c0c69487f85129b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0c270369beae58f0a631ae5d57f0961"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1FunctionScheduler.html#ac51179b09c1a8609ed2a9d3afc85a701">FunctionHeap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a></td></tr>
<tr class="separator:ae0c270369beae58f0a631ae5d57f0961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ca92a848f5ad6403e5211365c766ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1FunctionScheduler.html#a3e995efa920fb2c6322b14f4d69bd8a4">FunctionMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a></td></tr>
<tr class="separator:a38ca92a848f5ad6403e5211365c766ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe245eead05299dc452a64064aaf6ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1FunctionScheduler_1_1RunTimeOrder.html">RunTimeOrder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">fnCmp_</a></td></tr>
<tr class="separator:a5fe245eead05299dc452a64064aaf6ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee5a733bd0cbdabf777341af75491f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:aeee5a733bd0cbdabf777341af75491f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a636f9589b97a68a9169cae8fe7e06"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a></td></tr>
<tr class="separator:a26a636f9589b97a68a9169cae8fe7e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7246aeb6dddb0d3d6a164bb5b1dec5b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a7246aeb6dddb0d3d6a164bb5b1dec5b1">threadName_</a></td></tr>
<tr class="separator:a7246aeb6dddb0d3d6a164bb5b1dec5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe9fab4221fc732dc10e7df3c2f5fe43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#afe9fab4221fc732dc10e7df3c2f5fe43">steady_</a> {false}</td></tr>
<tr class="separator:afe9fab4221fc732dc10e7df3c2f5fe43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad523c40c9f60f24fb6110a30457868"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a> {false}</td></tr>
<tr class="separator:a6ad523c40c9f60f24fb6110a30457868"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Schedules any number of functions to run at various intervals. E.g.,</p>
<p><a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a> fs;</p>
<p>fs.addFunction([&amp;] { LOG(INFO) &lt;&lt; "tick..."; }, seconds(1), "ticker"); fs.addFunction(std::bind(&amp;TestClass::doStuff, this), minutes(5), "stuff"); fs.start(); ........ fs.cancelFunction("ticker"); fs.addFunction([&amp;] { LOG(INFO) &lt;&lt; "tock..."; }, minutes(3), "tocker"); ........ <a class="el" href="namespacefolly.html#a89e6d5d07a92c88cf24c7a3f9a02f94e">fs.shutdown()</a>;</p>
<p>Note: the class uses only one thread - if you want to use more than one thread, either use multiple <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a> objects, or check out ThreadedRepeatingFunctionRunner.h for a much simpler contract of "run each function periodically in its own thread".</p>
<p><a class="el" href="classfolly_1_1FunctionScheduler.html#a9fc4d1a3c8ca217e2c4703ae20459b0d">start()</a> schedules the functions, while <a class="el" href="classfolly_1_1FunctionScheduler.html#a102ab98df131ab3eafa14c5d75449ca0">shutdown()</a> terminates further scheduling. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00054">54</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ac51179b09c1a8609ed2a9d3afc85a701"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;std::unique_ptr&lt;<a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a>&gt; &gt; <a class="el" href="classfolly_1_1FunctionScheduler.html#ac51179b09c1a8609ed2a9d3afc85a701">folly::FunctionScheduler::FunctionHeap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00314">314</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3e995efa920fb2c6322b14f4d69bd8a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unordered_map&lt;<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>, <a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a>*, <a class="el" href="structfolly_1_1Hash.html">Hash</a>&gt; <a class="el" href="classfolly_1_1FunctionScheduler.html#a3e995efa920fb2c6322b14f4d69bd8a4">folly::FunctionScheduler::FunctionMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00315">315</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="afbc7bc2be36fe0459a2beb1a55b4cb0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classfolly_1_1FunctionScheduler.html#afbc7bc2be36fe0459a2beb1a55b4cb0a">folly::FunctionScheduler::IntervalDistributionFunc</a> =  <a class="el" href="classfolly_1_1Function.html">Function</a>&lt;std::chrono::milliseconds()&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="structA.html">A</a> type alias for function that is called to determine the time interval for the next scheduled run. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00154">154</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a00487d442d4ae4ae06e68ae10a0b4936"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classfolly_1_1FunctionScheduler.html#a00487d442d4ae4ae06e68ae10a0b4936">folly::FunctionScheduler::NextRunTimeFunc</a> =  <a class="el" href="classfolly_1_1Function.html">Function</a>&lt;std::chrono::steady_clock::time_point( std::chrono::steady_clock::time_point, std::chrono::steady_clock::time_point)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="structA.html">A</a> type alias for function that returns the next run time, given the current run time and the current start time. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00161">161</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aec3ddc9b29edc06987d2a215e46ccd64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::FunctionScheduler::FunctionScheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00114">114</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b7c013dadbf546b4b441897b3a148f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::FunctionScheduler::~FunctionScheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00116">116</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1FunctionScheduler.html#a0a2d108a44edff8bb91ccd3f7d5f59d9">addFunction()</a>, <a class="el" href="FunctionScheduler_8h_source.html#l00082">folly::FunctionScheduler::LatencyDistribution::isPoisson</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="FunctionScheduler_8h_source.html#l00083">folly::FunctionScheduler::LatencyDistribution::poissonMean</a>, <a class="el" href="RefCountBenchmark_8cpp_source.html#l00024">folly::shutdown()</a>, and <a class="el" href="Range_8h_source.html#l00591">folly::Range&lt; Iter &gt;::str()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                      {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// make sure to stop the thread (if running)</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a102ab98df131ab3eafa14c5d75449ca0">shutdown</a>();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a102ab98df131ab3eafa14c5d75449ca0"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a102ab98df131ab3eafa14c5d75449ca0">folly::FunctionScheduler::shutdown</a></div><div class="ttdeci">bool shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00424">FunctionScheduler.cpp:424</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0a2d108a44edff8bb91ccd3f7d5f59d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em> = <code><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em> = <code>std::chrono::milliseconds(0)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a new function to the <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a>.</p>
<p>Functions will not be run until <a class="el" href="classfolly_1_1FunctionScheduler.html#a9fc4d1a3c8ca217e2c4703ae20459b0d">start()</a> is called. When <a class="el" href="classfolly_1_1FunctionScheduler.html#a9fc4d1a3c8ca217e2c4703ae20459b0d">start()</a> is called, each function will be run after its specified startDelay. Functions may also be added after <a class="el" href="classfolly_1_1FunctionScheduler.html#a9fc4d1a3c8ca217e2c4703ae20459b0d">start()</a> has been called, in which case startDelay is still honored.</p>
<p>Throws an exception on error. In particular, each function must have a unique name&ndash;two functions cannot be added with the same name. </p>

<p>Referenced by <a class="el" href="FunctionScheduler_8h_source.html#l00085">folly::FunctionScheduler::LatencyDistribution::LatencyDistribution()</a>, <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00080">TEST()</a>, and <a class="el" href="FunctionScheduler_8cpp_source.html#l00116">~FunctionScheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="acf82bed977772e52160675c9130f71bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1FunctionScheduler_1_1LatencyDistribution.html">LatencyDistribution</a> &amp;&#160;</td>
          <td class="paramname"><em>latencyDistr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em> = <code><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em> = <code>std::chrono::milliseconds(0)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab630eac15e9192b974ae8937c27b286a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionConsistentDelay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em> = <code><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em> = <code>std::chrono::milliseconds(0)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a new function to the <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a> whose start times are attempted to be scheduled so that they are congruent modulo the interval. Note: The scheduling of the next run time happens right before the function invocation, so the first time a function takes more time than the interval, it will be reinvoked immediately. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00183">183</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="Range_8h_source.html#l00591">folly::Range&lt; Iter &gt;::str()</a>.</p>

<p>Referenced by <a class="el" href="FunctionScheduler_8h_source.html#l00085">folly::FunctionScheduler::LatencyDistribution::LatencyDistribution()</a>, and <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00475">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                             {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">addFunctionInternal</a>(</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cb),</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      ConsistentDelayFunctor(interval),</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      nameID.str(),</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      to&lt;std::string&gt;(interval.count(), <span class="stringliteral">&quot;ms&quot;</span>),</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      startDelay,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keyword">false</span> <span class="comment">/*runOnce*/</span>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38f4553b61a009028770294bfcdb2353"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">folly::FunctionScheduler::addFunctionInternal</a></div><div class="ttdeci">void addFunctionInternal(Function&lt; void()&gt; &amp;&amp;cb, NextRunTimeFunc &amp;&amp;fn, const std::string &amp;nameID, const std::string &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab2814fd75935740f126e93c96d553b55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionGenericDistribution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1FunctionScheduler.html#afbc7bc2be36fe0459a2beb1a55b4cb0a">IntervalDistributionFunc</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>intervalFunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nameID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>intervalDescr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a new function to the <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a>. The scheduling interval is determined by the interval distribution functor, which is called every time the next function execution is scheduled. This allows for supporting custom interval distribution algorithms in addition to built in constant interval; and Poisson and jitter distributions (</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classfolly_1_1FunctionScheduler.html#a0a2d108a44edff8bb91ccd3f7d5f59d9">FunctionScheduler::addFunction</a> and </dd>
<dd>
FunctionScheduler::addFunctionJitterInterval). </dd></dl>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00197">197</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00510">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                             {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">addFunctionInternal</a>(</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cb),</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(intervalFunc),</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      nameID,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      intervalDescr,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      startDelay,</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keyword">false</span> <span class="comment">/*runOnce*/</span>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38f4553b61a009028770294bfcdb2353"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">folly::FunctionScheduler::addFunctionInternal</a></div><div class="ttdeci">void addFunctionInternal(Function&lt; void()&gt; &amp;&amp;cb, NextRunTimeFunc &amp;&amp;fn, const std::string &amp;nameID, const std::string &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a32aa83533d512162cd061c5c35a193"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionGenericNextRunTimeFunctor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1FunctionScheduler.html#a00487d442d4ae4ae06e68ae10a0b4936">NextRunTimeFunc</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nameID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>intervalDescr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Like addFunctionGenericDistribution, adds a new function to the <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a>, but the next run time is determined directly by the given functor, rather than by adding an interval. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00212">212</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                             {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">addFunctionInternal</a>(</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cb),</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(fn),</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      nameID,</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      intervalDescr,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      startDelay,</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keyword">false</span> <span class="comment">/*runOnce*/</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38f4553b61a009028770294bfcdb2353"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">folly::FunctionScheduler::addFunctionInternal</a></div><div class="ttdeci">void addFunctionInternal(Function&lt; void()&gt; &amp;&amp;cb, NextRunTimeFunc &amp;&amp;fn, const std::string &amp;nameID, const std::string &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a38f4553b61a009028770294bfcdb2353"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1FunctionScheduler.html#a00487d442d4ae4ae06e68ae10a0b4936">NextRunTimeFunc</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nameID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>intervalDescr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>runOnce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="FunctionScheduler_8cpp_source.html#l00228">addFunctionToHeapChecked()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0401a6d300edeec1b57bf192407d99c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1FunctionScheduler.html#afbc7bc2be36fe0459a2beb1a55b4cb0a">IntervalDistributionFunc</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nameID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>intervalDescr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>runOnce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a88c0875297ea44393a20ba493c57e150"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionOnce </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em> = <code><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em> = <code>std::chrono::milliseconds(0)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a new function to the <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a> to run only once. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00154">154</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="Range_8h_source.html#l00591">folly::Range&lt; Iter &gt;::str()</a>.</p>

<p>Referenced by <a class="el" href="FunctionScheduler_8h_source.html#l00085">folly::FunctionScheduler::LatencyDistribution::LatencyDistribution()</a>, and <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00265">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                             {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">addFunctionInternal</a>(</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cb),</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      ConstIntervalFunctor(milliseconds::zero()),</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      nameID.str(),</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="stringliteral">&quot;once&quot;</span>,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      startDelay,</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keyword">true</span> <span class="comment">/*runOnce*/</span>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38f4553b61a009028770294bfcdb2353"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">folly::FunctionScheduler::addFunctionInternal</a></div><div class="ttdeci">void addFunctionInternal(Function&lt; void()&gt; &amp;&amp;cb, NextRunTimeFunc &amp;&amp;fn, const std::string &amp;nameID, const std::string &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5ce4296e24476a0f9eb16cedbbb45f66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionToHeap </td>
          <td>(</td>
          <td class="paramtype">const std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a> &gt;&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00551">551</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>, and <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                    {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// This function should only be called with mutex_ already locked.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  DCHECK(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.mutex() == &amp;<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  DCHECK(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.owns_lock());</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.push_back(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(func));</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>[<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.back()-&gt;name] = <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.back().get();</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a>) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.back()-&gt;resetNextRunTime(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">steady_clock::now</a>());</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    std::push_heap(<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.begin(), <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.end(), <a class="code" href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">fnCmp_</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// Signal the running thread to wake up and see if it needs to change</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// its current scheduling decision.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.notify_one();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a9c21f3e9a445b20e3c0c69487f85129b"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">folly::FunctionScheduler::running_</a></div><div class="ttdeci">bool running_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00360">FunctionScheduler.h:360</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a26a636f9589b97a68a9169cae8fe7e06"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">folly::FunctionScheduler::runningCondvar_</a></div><div class="ttdeci">std::condition_variable runningCondvar_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00374">FunctionScheduler.h:374</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae0c270369beae58f0a631ae5d57f0961"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">folly::FunctionScheduler::functions_</a></div><div class="ttdeci">FunctionHeap functions_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00364">FunctionScheduler.h:364</a></div></div>
<div class="ttc" id="namespacefolly_html_a1c5ca040692d2c4c2b1b7ab9e517a61c"><div class="ttname"><a href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">folly::lock</a></div><div class="ttdeci">auto lock(Synchronized&lt; D, M &gt; &amp;synchronized, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="Synchronized_8h_source.html#l01531">Synchronized.h:1531</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a5fe245eead05299dc452a64064aaf6ad"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">folly::FunctionScheduler::fnCmp_</a></div><div class="ttdeci">RunTimeOrder fnCmp_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00366">FunctionScheduler.h:366</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a099e3ec208bb4834e311e8565fe949bb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RepeatFuncNextRunTimeFunc &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionToHeapChecked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RepeatFuncNextRunTimeFunc &amp;&amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nameID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>intervalDescr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>runOnce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00228">228</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">addFunctionInternal()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>, and <a class="el" href="Conv_8cpp_source.html#l00212">string</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                  {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (!cb) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="stringliteral">&quot;FunctionScheduler: Scheduled function must be set&quot;</span>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (!fn) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="stringliteral">&quot;FunctionScheduler: &quot;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="stringliteral">&quot;interval distribution or next run time function must be set&quot;</span>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (startDelay &lt; milliseconds::zero()) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="stringliteral">&quot;FunctionScheduler: start delay must be non-negative&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.find(nameID);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// check if the nameID is unique</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">if</span> (it != <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.end() &amp;&amp; it-&gt;second-&gt;isValid()) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(to&lt;std::string&gt;(</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="stringliteral">&quot;FunctionScheduler: a function named \&quot;&quot;</span>, nameID, <span class="stringliteral">&quot;\&quot; already exists&quot;</span>));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> &amp;&amp; <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">name</a> == nameID) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(to&lt;std::string&gt;(</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="stringliteral">&quot;FunctionScheduler: a function named \&quot;&quot;</span>, nameID, <span class="stringliteral">&quot;\&quot; already exists&quot;</span>));</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a5ce4296e24476a0f9eb16cedbbb45f66">addFunctionToHeap</a>(</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      l,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      std::make_unique&lt;RepeatFunc&gt;(</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cb),</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          std::forward&lt;RepeatFuncNextRunTimeFunc&gt;(fn),</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;          nameID,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          intervalDescr,</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          startDelay,</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          runOnce));</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_aeee5a733bd0cbdabf777341af75491f9"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">folly::FunctionScheduler::currentFunction_</a></div><div class="ttdeci">RepeatFunc * currentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00370">FunctionScheduler.h:370</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a5ce4296e24476a0f9eb16cedbbb45f66"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a5ce4296e24476a0f9eb16cedbbb45f66">folly::FunctionScheduler::addFunctionToHeap</a></div><div class="ttdeci">void addFunctionToHeap(const std::unique_lock&lt; std::mutex &gt; &amp;lock, std::unique_ptr&lt; RepeatFunc &gt; func)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00551">FunctionScheduler.cpp:551</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_afd2f4cbebf4e72d16aa519c93ac97e81"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">folly::FunctionScheduler::RepeatFunc::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00241">FunctionScheduler.h:241</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab25ae4d3fa42a1851006a4b02a37e1cc"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RepeatFuncNextRunTimeFunc &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionToHeapChecked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RepeatFuncNextRunTimeFunc &amp;&amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nameID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>intervalDescr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>runOnce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a39cc8aeca3c681bf521b3f7550dffa9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::addFunctionUniformDistribution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Function.html">Function</a>&lt; void()&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>minInterval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>maxInterval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>startDelay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a new function to the <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a> with the time interval being distributed uniformly within the given interval [minInterval, maxInterval]. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00167">167</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="Range_8h_source.html#l00591">folly::Range&lt; Iter &gt;::str()</a>.</p>

<p>Referenced by <a class="el" href="FunctionScheduler_8h_source.html#l00085">folly::FunctionScheduler::LatencyDistribution::LatencyDistribution()</a>, and <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00449">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                             {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">addFunctionInternal</a>(</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(cb),</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      UniformDistributionFunctor(minInterval, maxInterval),</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      nameID.str(),</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      to&lt;std::string&gt;(</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          <span class="stringliteral">&quot;[&quot;</span>, minInterval.count(), <span class="stringliteral">&quot; , &quot;</span>, maxInterval.count(), <span class="stringliteral">&quot;] ms&quot;</span>),</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      startDelay,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="keyword">false</span> <span class="comment">/*runOnce*/</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38f4553b61a009028770294bfcdb2353"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38f4553b61a009028770294bfcdb2353">folly::FunctionScheduler::addFunctionInternal</a></div><div class="ttdeci">void addFunctionInternal(Function&lt; void()&gt; &amp;&amp;cb, NextRunTimeFunc &amp;&amp;fn, const std::string &amp;nameID, const std::string &amp;intervalDescr, std::chrono::milliseconds startDelay, bool runOnce)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b1c537374e11c9af545e56c7d47a2fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::cancelAllFunctions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>All functions registered will be canceled. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00362">362</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                           {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a048a2842553d5a59ec455cb3d839da43">cancelAllFunctionsWithLock</a>(l);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a048a2842553d5a59ec455cb3d839da43"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a048a2842553d5a59ec455cb3d839da43">folly::FunctionScheduler::cancelAllFunctionsWithLock</a></div><div class="ttdeci">bool cancelAllFunctionsWithLock(std::unique_lock&lt; std::mutex &gt; &amp;lock)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00350">FunctionScheduler.cpp:350</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a59df437d8f30b7288f9a17c4ad1d4399"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::cancelAllFunctionsAndWait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00367">367</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00664">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                                                  {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a048a2842553d5a59ec455cb3d839da43">cancelAllFunctionsWithLock</a>(l)) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.wait(l, [<span class="keyword">this</span>]() { <span class="keywordflow">return</span> !<a class="code" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a>; });</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a26a636f9589b97a68a9169cae8fe7e06"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">folly::FunctionScheduler::runningCondvar_</a></div><div class="ttdeci">std::condition_variable runningCondvar_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00374">FunctionScheduler.h:374</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a048a2842553d5a59ec455cb3d839da43"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a048a2842553d5a59ec455cb3d839da43">folly::FunctionScheduler::cancelAllFunctionsWithLock</a></div><div class="ttdeci">bool cancelAllFunctionsWithLock(std::unique_lock&lt; std::mutex &gt; &amp;lock)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00350">FunctionScheduler.cpp:350</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a6ad523c40c9f60f24fb6110a30457868"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">folly::FunctionScheduler::cancellingCurrentFunction_</a></div><div class="ttdeci">bool cancellingCurrentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00378">FunctionScheduler.h:378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a048a2842553d5a59ec455cb3d839da43"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::cancelAllFunctionsWithLock </td>
          <td>(</td>
          <td class="paramtype">std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00350">350</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                    {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  CHECK_EQ(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.owns_lock(), <span class="keyword">true</span>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.clear();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.clear();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_aeee5a733bd0cbdabf777341af75491f9"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">folly::FunctionScheduler::currentFunction_</a></div><div class="ttdeci">RepeatFunc * currentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00370">FunctionScheduler.h:370</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae0c270369beae58f0a631ae5d57f0961"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">folly::FunctionScheduler::functions_</a></div><div class="ttdeci">FunctionHeap functions_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00364">FunctionScheduler.h:364</a></div></div>
<div class="ttc" id="namespacefolly_html_a1c5ca040692d2c4c2b1b7ab9e517a61c"><div class="ttname"><a href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">folly::lock</a></div><div class="ttdeci">auto lock(Synchronized&lt; D, M &gt; &amp;synchronized, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="Synchronized_8h_source.html#l01531">Synchronized.h:1531</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a6ad523c40c9f60f24fb6110a30457868"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">folly::FunctionScheduler::cancellingCurrentFunction_</a></div><div class="ttdeci">bool cancellingCurrentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00378">FunctionScheduler.h:378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47f2581ba1fc54f52a333791d42400d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::cancelFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancels the function with the specified name, so it will no longer be run.</p>
<p>Returns false if no function exists with the specified name. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00310">310</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00092">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                                         {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a99596607f31c01df058aea8db3acc8bf">cancelFunctionWithLock</a>(l, nameID)) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.find(nameID);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (it != <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.end() &amp;&amp; it-&gt;second-&gt;isValid()) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a47f2581ba1fc54f52a333791d42400d7">cancelFunction</a>(l, it-&gt;second);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a99596607f31c01df058aea8db3acc8bf"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a99596607f31c01df058aea8db3acc8bf">folly::FunctionScheduler::cancelFunctionWithLock</a></div><div class="ttdeci">bool cancelFunctionWithLock(std::unique_lock&lt; std::mutex &gt; &amp;lock, StringPiece nameID)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00295">FunctionScheduler.cpp:295</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a47f2581ba1fc54f52a333791d42400d7"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a47f2581ba1fc54f52a333791d42400d7">folly::FunctionScheduler::cancelFunction</a></div><div class="ttdeci">bool cancelFunction(StringPiece nameID)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00310">FunctionScheduler.cpp:310</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a487bcca441d22bb86cbe44efe0229078"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::cancelFunction </td>
          <td>(</td>
          <td class="paramtype">const std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a> *&#160;</td>
          <td class="paramname"><em>it</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00340">340</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="FunctionScheduler_8h_source.html#l00297">folly::FunctionScheduler::RepeatFunc::cancel()</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>, and <a class="el" href="FunctionScheduler_8h_source.html#l00241">folly::FunctionScheduler::RepeatFunc::name</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">// This function should only be called with mutex_ already locked.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  DCHECK(l.mutex() == &amp;<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  DCHECK(l.owns_lock());</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.erase(it-&gt;name);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  it-&gt;cancel();</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a636b01a3c72fff6a2e4cca26b0c5a15e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::cancelFunctionAndWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00324">324</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00588">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                                                {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a99596607f31c01df058aea8db3acc8bf">cancelFunctionWithLock</a>(l, nameID)) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.wait(l, [<span class="keyword">this</span>]() { <span class="keywordflow">return</span> !<a class="code" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a>; });</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.find(nameID);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (it != <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.end() &amp;&amp; it-&gt;second-&gt;isValid()) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a47f2581ba1fc54f52a333791d42400d7">cancelFunction</a>(l, it-&gt;second);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a99596607f31c01df058aea8db3acc8bf"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a99596607f31c01df058aea8db3acc8bf">folly::FunctionScheduler::cancelFunctionWithLock</a></div><div class="ttdeci">bool cancelFunctionWithLock(std::unique_lock&lt; std::mutex &gt; &amp;lock, StringPiece nameID)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00295">FunctionScheduler.cpp:295</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a26a636f9589b97a68a9169cae8fe7e06"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">folly::FunctionScheduler::runningCondvar_</a></div><div class="ttdeci">std::condition_variable runningCondvar_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00374">FunctionScheduler.h:374</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a47f2581ba1fc54f52a333791d42400d7"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a47f2581ba1fc54f52a333791d42400d7">folly::FunctionScheduler::cancelFunction</a></div><div class="ttdeci">bool cancelFunction(StringPiece nameID)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00310">FunctionScheduler.cpp:310</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a6ad523c40c9f60f24fb6110a30457868"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">folly::FunctionScheduler::cancellingCurrentFunction_</a></div><div class="ttdeci">bool cancellingCurrentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00378">FunctionScheduler.h:378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a99596607f31c01df058aea8db3acc8bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::cancelFunctionWithLock </td>
          <td>(</td>
          <td class="paramtype">std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00295">295</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  CHECK_EQ(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.owns_lock(), <span class="keyword">true</span>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> &amp;&amp; <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">name</a> == nameID) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.erase(<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">name</a>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// This function is currently being run. Clear currentFunction_</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// The running thread will see this and won&#39;t reschedule the function.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_aeee5a733bd0cbdabf777341af75491f9"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">folly::FunctionScheduler::currentFunction_</a></div><div class="ttdeci">RepeatFunc * currentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00370">FunctionScheduler.h:370</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="namespacefolly_html_a1c5ca040692d2c4c2b1b7ab9e517a61c"><div class="ttname"><a href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">folly::lock</a></div><div class="ttdeci">auto lock(Synchronized&lt; D, M &gt; &amp;synchronized, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="Synchronized_8h_source.html#l01531">Synchronized.h:1531</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_afd2f4cbebf4e72d16aa519c93ac97e81"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">folly::FunctionScheduler::RepeatFunc::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00241">FunctionScheduler.h:241</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a6ad523c40c9f60f24fb6110a30457868"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">folly::FunctionScheduler::cancellingCurrentFunction_</a></div><div class="ttdeci">bool cancellingCurrentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00378">FunctionScheduler.h:378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a683d63af70a568eae4bfac812285da7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::resetFunctionTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>nameID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resets the specified function's timer. When resetFunctionTimer is called, the specified function's timer will be reset with the same parameters it was passed initially, including its startDelay. If the startDelay was 0, the function will be invoked immediately.</p>
<p>Returns false if no function exists with the specified name. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00374">374</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>, and <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00244">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                                             {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> &amp;&amp; <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">name</a> == nameID) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a> || <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#a150043f15baab8a94e2aab5ddaa9de2a">runOnce</a>) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#acc6950ac71335a8fca9b2c84647ddcce">resetNextRunTime</a>(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">steady_clock::now</a>());</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// Since __adjust_heap() isn&#39;t a part of the standard API, there&#39;s no way to</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// fix the heap ordering if we adjust the key (nextRunTime) for the existing</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// RepeatFunc. Instead, we just cancel it and add an identical object.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.find(nameID);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">if</span> (it != <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.end() &amp;&amp; it-&gt;second-&gt;isValid()) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a>) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      it-&gt;second-&gt;resetNextRunTime(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">steady_clock::now</a>());</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      std::make_heap(<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.begin(), <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.end(), <a class="code" href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">fnCmp_</a>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.notify_one();</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_aeee5a733bd0cbdabf777341af75491f9"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">folly::FunctionScheduler::currentFunction_</a></div><div class="ttdeci">RepeatFunc * currentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00370">FunctionScheduler.h:370</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a9c21f3e9a445b20e3c0c69487f85129b"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">folly::FunctionScheduler::running_</a></div><div class="ttdeci">bool running_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00360">FunctionScheduler.h:360</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a26a636f9589b97a68a9169cae8fe7e06"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">folly::FunctionScheduler::runningCondvar_</a></div><div class="ttdeci">std::condition_variable runningCondvar_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00374">FunctionScheduler.h:374</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae0c270369beae58f0a631ae5d57f0961"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">folly::FunctionScheduler::functions_</a></div><div class="ttdeci">FunctionHeap functions_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00364">FunctionScheduler.h:364</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_acc6950ac71335a8fca9b2c84647ddcce"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#acc6950ac71335a8fca9b2c84647ddcce">folly::FunctionScheduler::RepeatFunc::resetNextRunTime</a></div><div class="ttdeci">void resetNextRunTime(std::chrono::steady_clock::time_point curTime)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00294">FunctionScheduler.h:294</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_afd2f4cbebf4e72d16aa519c93ac97e81"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">folly::FunctionScheduler::RepeatFunc::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00241">FunctionScheduler.h:241</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a6ad523c40c9f60f24fb6110a30457868"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">folly::FunctionScheduler::cancellingCurrentFunction_</a></div><div class="ttdeci">bool cancellingCurrentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00378">FunctionScheduler.h:378</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_a150043f15baab8a94e2aab5ddaa9de2a"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#a150043f15baab8a94e2aab5ddaa9de2a">folly::FunctionScheduler::RepeatFunc::runOnce</a></div><div class="ttdeci">bool runOnce</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00244">FunctionScheduler.h:244</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a5fe245eead05299dc452a64064aaf6ad"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">folly::FunctionScheduler::fnCmp_</a></div><div class="ttdeci">RunTimeOrder fnCmp_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00366">FunctionScheduler.h:366</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a932bf717b760f8e9c28309c1996d7fdd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00438">438</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="Synchronized_8h_source.html#l01531">folly::lock()</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, and <a class="el" href="ThreadName_8cpp_source.html#l00109">folly::setThreadName()</a>.</p>
<div class="fragment"><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                            {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  std::unique_lock&lt;std::mutex&gt; <a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1FunctionScheduler.html#a7246aeb6dddb0d3d6a164bb5b1dec5b1">threadName_</a>.empty()) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="namespacefolly.html#a2e933f76070b83ef7519c9c2ac8a1117">folly::setThreadName</a>(<a class="code" href="classfolly_1_1FunctionScheduler.html#a7246aeb6dddb0d3d6a164bb5b1dec5b1">threadName_</a>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a>) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// If we have nothing to run, wait until a function is added or until we</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// are stopped.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.empty()) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.wait(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keyword">auto</span> <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">steady_clock::now</a>();</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Move the next function to run to the end of functions_</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    std::pop_heap(<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.begin(), <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.end(), <a class="code" href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">fnCmp_</a>);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// Check to see if the function was cancelled.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// If so, just remove it and continue around the loop.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.back()-&gt;isValid()) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.pop_back();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">auto</span> sleepTime = <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.back()-&gt;getNextRunTime() - <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> (sleepTime &lt; milliseconds::zero()) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="comment">// We need to run this function now</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="classfolly_1_1FunctionScheduler.html#a7c2a7d808477e1243ed9a27a58529352">runOneFunction</a>(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>, <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.notify_all();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="comment">// Re-add the function to the heap, and wait until we actually</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="comment">// need to run it.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      std::push_heap(<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.begin(), <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.end(), <a class="code" href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">fnCmp_</a>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.wait_for(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>, sleepTime);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a9c21f3e9a445b20e3c0c69487f85129b"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">folly::FunctionScheduler::running_</a></div><div class="ttdeci">bool running_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00360">FunctionScheduler.h:360</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a26a636f9589b97a68a9169cae8fe7e06"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">folly::FunctionScheduler::runningCondvar_</a></div><div class="ttdeci">std::condition_variable runningCondvar_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00374">FunctionScheduler.h:374</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a7c2a7d808477e1243ed9a27a58529352"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a7c2a7d808477e1243ed9a27a58529352">folly::FunctionScheduler::runOneFunction</a></div><div class="ttdeci">void runOneFunction(std::unique_lock&lt; std::mutex &gt; &amp;lock, std::chrono::steady_clock::time_point now)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00479">FunctionScheduler.cpp:479</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae0c270369beae58f0a631ae5d57f0961"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">folly::FunctionScheduler::functions_</a></div><div class="ttdeci">FunctionHeap functions_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00364">FunctionScheduler.h:364</a></div></div>
<div class="ttc" id="namespacefolly_html_a1c5ca040692d2c4c2b1b7ab9e517a61c"><div class="ttname"><a href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">folly::lock</a></div><div class="ttdeci">auto lock(Synchronized&lt; D, M &gt; &amp;synchronized, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="Synchronized_8h_source.html#l01531">Synchronized.h:1531</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a7246aeb6dddb0d3d6a164bb5b1dec5b1"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a7246aeb6dddb0d3d6a164bb5b1dec5b1">folly::FunctionScheduler::threadName_</a></div><div class="ttdeci">std::string threadName_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00376">FunctionScheduler.h:376</a></div></div>
<div class="ttc" id="namespacefolly_html_a2e933f76070b83ef7519c9c2ac8a1117"><div class="ttname"><a href="namespacefolly.html#a2e933f76070b83ef7519c9c2ac8a1117">folly::setThreadName</a></div><div class="ttdeci">bool setThreadName(std::thread::id tid, StringPiece name)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadName_8cpp_source.html#l00109">ThreadName.cpp:109</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a5fe245eead05299dc452a64064aaf6ad"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">folly::FunctionScheduler::fnCmp_</a></div><div class="ttdeci">RunTimeOrder fnCmp_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00366">FunctionScheduler.h:366</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c2a7d808477e1243ed9a27a58529352"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::runOneFunction </td>
          <td>(</td>
          <td class="paramtype">std::unique_lock&lt; <a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::steady_clock::time_point&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00479">479</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="ExceptionString_8h_source.html#l00033">folly::exceptionStr()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>.</p>
<div class="fragment"><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  DCHECK(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.mutex() == &amp;<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  DCHECK(<a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.owns_lock());</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="comment">// The function to run will be at the end of functions_ already.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// Fully remove it from functions_ now.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// We need to release mutex_ while we invoke this function, and we need to</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// maintain the heap property on functions_ while mutex_ is unlocked.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keyword">auto</span> func = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.back());</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.pop_back();</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordflow">if</span> (!func-&gt;cb) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    VLOG(5) &lt;&lt; func-&gt;name &lt;&lt; <span class="stringliteral">&quot;function has been canceled while waiting&quot;</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> = func.get();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// Update the function&#39;s next run time.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#afe9fab4221fc732dc10e7df3c2f5fe43">steady_</a>) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// This allows scheduler to catch up</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    func-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#a27935a44e24f6933548322ffccaa9c74">setNextRunTimeSteady</a>();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Note that we set nextRunTime based on the current time where we started</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// the function call, rather than the time when the function finishes.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// This ensures that we call the function once every time interval, as</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// opposed to waiting time interval seconds between calls.  (These can be</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// different if the function takes a significant amount of time to run.)</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    func-&gt;setNextRunTimeStrict(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// Release the lock while we invoke the user&#39;s function</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.unlock();</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// Invoke the function</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    VLOG(5) &lt;&lt; <span class="stringliteral">&quot;Now running &quot;</span> &lt;&lt; func-&gt;name;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    func-&gt;cb();</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; ex) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Error running the scheduled function &lt;&quot;</span> &lt;&lt; func-&gt;name</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;&gt;: &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#acb103e15fafef3561273c07f9f9d705d">exceptionStr</a>(ex);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// Re-acquire the lock</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>.lock();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// The function was cancelled while we were running it.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// We shouldn&#39;t reschedule it;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">cancellingCurrentFunction_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#a150043f15baab8a94e2aab5ddaa9de2a">runOnce</a>) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// Don&#39;t reschedule if the function only needed to run once.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">functionsMap_</a>.erase(<a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a>-&gt;<a class="code" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">name</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// Re-insert the function into our functions_ heap.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// We only maintain the heap property while running_ is set.  (running_ may</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// have been cleared while we were invoking the user&#39;s function.)</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.push_back(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(func));</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// Clear currentFunction_</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">currentFunction_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a>) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    std::push_heap(<a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.begin(), <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.end(), <a class="code" href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">fnCmp_</a>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_aeee5a733bd0cbdabf777341af75491f9"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#aeee5a733bd0cbdabf777341af75491f9">folly::FunctionScheduler::currentFunction_</a></div><div class="ttdeci">RepeatFunc * currentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00370">FunctionScheduler.h:370</a></div></div>
<div class="ttc" id="namespacefolly_html_acb103e15fafef3561273c07f9f9d705d"><div class="ttname"><a href="namespacefolly.html#acb103e15fafef3561273c07f9f9d705d">folly::exceptionStr</a></div><div class="ttdeci">fbstring exceptionStr(const std::exception &amp;e)</div><div class="ttdef"><b>Definition:</b> <a href="ExceptionString_8h_source.html#l00033">ExceptionString.h:33</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a9c21f3e9a445b20e3c0c69487f85129b"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">folly::FunctionScheduler::running_</a></div><div class="ttdeci">bool running_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00360">FunctionScheduler.h:360</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a38ca92a848f5ad6403e5211365c766ec"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a38ca92a848f5ad6403e5211365c766ec">folly::FunctionScheduler::functionsMap_</a></div><div class="ttdeci">FunctionMap functionsMap_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00365">FunctionScheduler.h:365</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae0c270369beae58f0a631ae5d57f0961"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">folly::FunctionScheduler::functions_</a></div><div class="ttdeci">FunctionHeap functions_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00364">FunctionScheduler.h:364</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_a27935a44e24f6933548322ffccaa9c74"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#a27935a44e24f6933548322ffccaa9c74">folly::FunctionScheduler::RepeatFunc::setNextRunTimeSteady</a></div><div class="ttdeci">void setNextRunTimeSteady()</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00291">FunctionScheduler.h:291</a></div></div>
<div class="ttc" id="namespacefolly_html_a1c5ca040692d2c4c2b1b7ab9e517a61c"><div class="ttname"><a href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">folly::lock</a></div><div class="ttdeci">auto lock(Synchronized&lt; D, M &gt; &amp;synchronized, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="Synchronized_8h_source.html#l01531">Synchronized.h:1531</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_afd2f4cbebf4e72d16aa519c93ac97e81"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#afd2f4cbebf4e72d16aa519c93ac97e81">folly::FunctionScheduler::RepeatFunc::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00241">FunctionScheduler.h:241</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a6ad523c40c9f60f24fb6110a30457868"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a6ad523c40c9f60f24fb6110a30457868">folly::FunctionScheduler::cancellingCurrentFunction_</a></div><div class="ttdeci">bool cancellingCurrentFunction_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00378">FunctionScheduler.h:378</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_afe9fab4221fc732dc10e7df3c2f5fe43"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#afe9fab4221fc732dc10e7df3c2f5fe43">folly::FunctionScheduler::steady_</a></div><div class="ttdeci">bool steady_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00377">FunctionScheduler.h:377</a></div></div>
<div class="ttc" id="structfolly_1_1FunctionScheduler_1_1RepeatFunc_html_a150043f15baab8a94e2aab5ddaa9de2a"><div class="ttname"><a href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html#a150043f15baab8a94e2aab5ddaa9de2a">folly::FunctionScheduler::RepeatFunc::runOnce</a></div><div class="ttdeci">bool runOnce</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00244">FunctionScheduler.h:244</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a5fe245eead05299dc452a64064aaf6ad"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">folly::FunctionScheduler::fnCmp_</a></div><div class="ttdeci">RunTimeOrder fnCmp_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00366">FunctionScheduler.h:366</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5e0f36695482952e7a891955f2d9aef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::setSteady </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>steady</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>By default steady is false, meaning schedules may lag behind overtime. This could be due to long running tasks or time drift because of randomness in thread wakeup time. By setting steady to true, <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a> will attempt to catch up. i.e. more like a cronjob</p>
<p>NOTE: it's only safe to set this before calling <a class="el" href="classfolly_1_1FunctionScheduler.html#a9fc4d1a3c8ca217e2c4703ae20459b0d">start()</a> </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00068">68</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

<p>References <a class="el" href="FunctionScheduler_8h_source.html#l00377">steady_</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00429">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                              {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#afe9fab4221fc732dc10e7df3c2f5fe43">steady_</a> = steady;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_afe9fab4221fc732dc10e7df3c2f5fe43"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#afe9fab4221fc732dc10e7df3c2f5fe43">folly::FunctionScheduler::steady_</a></div><div class="ttdeci">bool steady_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00377">FunctionScheduler.h:377</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad637d4ecfb9cf5be85bcf32ebd2764b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::FunctionScheduler::setThreadName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>threadName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the name of the worker thread. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00569">569</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>, and <a class="el" href="Range_8h_source.html#l00591">folly::Range&lt; Iter &gt;::str()</a>.</p>
<div class="fragment"><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                                            {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a7246aeb6dddb0d3d6a164bb5b1dec5b1">threadName_</a> = threadName.str();</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a7246aeb6dddb0d3d6a164bb5b1dec5b1"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a7246aeb6dddb0d3d6a164bb5b1dec5b1">folly::FunctionScheduler::threadName_</a></div><div class="ttdeci">std::string threadName_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00376">FunctionScheduler.h:376</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a102ab98df131ab3eafa14c5d75449ca0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops the <a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a>.</p>
<p>It may be restarted later by calling <a class="el" href="classfolly_1_1FunctionScheduler.html#a9fc4d1a3c8ca217e2c4703ae20459b0d">start()</a> again. Returns false if the scheduler was not running. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00424">424</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="composition__2_8cpp_source.html#l00034">g()</a>, and <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00067">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                 {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    std::lock_guard&lt;std::mutex&gt; <a class="code" href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a>(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a>) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">runningCondvar_</a>.notify_one();</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#ae907774bb66df6bc842bff7d28a39768">thread_</a>.join();</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div><div class="ttc" id="classfolly_1_1FunctionScheduler_html_a9c21f3e9a445b20e3c0c69487f85129b"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">folly::FunctionScheduler::running_</a></div><div class="ttdeci">bool running_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00360">FunctionScheduler.h:360</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a26a636f9589b97a68a9169cae8fe7e06"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a26a636f9589b97a68a9169cae8fe7e06">folly::FunctionScheduler::runningCondvar_</a></div><div class="ttdeci">std::condition_variable runningCondvar_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00374">FunctionScheduler.h:374</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae907774bb66df6bc842bff7d28a39768"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae907774bb66df6bc842bff7d28a39768">folly::FunctionScheduler::thread_</a></div><div class="ttdeci">std::thread thread_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00356">FunctionScheduler.h:356</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="composition__2_8cpp_html_afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe"><div class="ttname"><a href="composition__2_8cpp.html#afb3bcbfaaa4d6a3b4ab3e3c4c2cbcfbe">g</a></div><div class="ttdeci">g_t g(f_t)</div><div class="ttdef"><b>Definition:</b> <a href="composition__2_8cpp_source.html#l00034">composition_2.cpp:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9fc4d1a3c8ca217e2c4703ae20459b0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the scheduler.</p>
<p>Returns false if the scheduler was already running. </p>

<p>Definition at line <a class="el" href="FunctionScheduler_8cpp_source.html#l00399">399</a> of file <a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a>.</p>

<p>References <a class="el" href="PushmiBenchmarks_8cpp_source.html#l00515">f</a>, <a class="el" href="StaticSingletonManager_8cpp_source.html#l00049">mutex_</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, and <a class="el" href="ScopedEventBaseThread_8cpp_source.html#l00030">folly::run()</a>.</p>

<p>Referenced by <a class="el" href="FunctionSchedulerTest_8cpp_source.html#l00067">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                              {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  std::unique_lock&lt;std::mutex&gt; l(<a class="code" href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">mutex_</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a>) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  VLOG(1) &lt;&lt; <span class="stringliteral">&quot;Starting FunctionScheduler with &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>.size()</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; functions.&quot;</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keyword">auto</span> <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">steady_clock::now</a>();</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// Reset the next run time. for all functions.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// note: this is needed since one can shutdown() and start() again</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a> : <a class="code" href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">functions_</a>) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>-&gt;resetNextRunTime(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    VLOG(1) &lt;&lt; <span class="stringliteral">&quot;   - func: &quot;</span> &lt;&lt; (<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>-&gt;name.empty() ? <span class="stringliteral">&quot;(anon)&quot;</span> : <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>-&gt;name.c_str())</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;, period = &quot;</span> &lt;&lt; <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>-&gt;intervalDescr</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;, delay = &quot;</span> &lt;&lt; <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>-&gt;startDelay.count() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  std::make_heap(functions_.begin(), functions_.end(), <a class="code" href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">fnCmp_</a>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#ae907774bb66df6bc842bff7d28a39768">thread_</a> = std::thread([&amp;] { this-&gt;<a class="code" href="classfolly_1_1FunctionScheduler.html#a932bf717b760f8e9c28309c1996d7fdd">run</a>(); });</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">running_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div><div class="ttc" id="PushmiBenchmarks_8cpp_html_ad94c2c2f9fd35a12cc099962b7540071"><div class="ttname"><a href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a></div><div class="ttdeci">auto f</div><div class="ttdef"><b>Definition:</b> <a href="PushmiBenchmarks_8cpp_source.html#l00515">PushmiBenchmarks.cpp:515</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a932bf717b760f8e9c28309c1996d7fdd"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a932bf717b760f8e9c28309c1996d7fdd">folly::FunctionScheduler::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00438">FunctionScheduler.cpp:438</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a9c21f3e9a445b20e3c0c69487f85129b"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a9c21f3e9a445b20e3c0c69487f85129b">folly::FunctionScheduler::running_</a></div><div class="ttdeci">bool running_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00360">FunctionScheduler.h:360</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae0c270369beae58f0a631ae5d57f0961"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae0c270369beae58f0a631ae5d57f0961">folly::FunctionScheduler::functions_</a></div><div class="ttdeci">FunctionHeap functions_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00364">FunctionScheduler.h:364</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_ae907774bb66df6bc842bff7d28a39768"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#ae907774bb66df6bc842bff7d28a39768">folly::FunctionScheduler::thread_</a></div><div class="ttdeci">std::thread thread_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00356">FunctionScheduler.h:356</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a16ac30a29ba7e29135412b9af633793e"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a16ac30a29ba7e29135412b9af633793e">folly::FunctionScheduler::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00359">FunctionScheduler.h:359</a></div></div>
<div class="ttc" id="classfolly_1_1FunctionScheduler_html_a5fe245eead05299dc452a64064aaf6ad"><div class="ttname"><a href="classfolly_1_1FunctionScheduler.html#a5fe245eead05299dc452a64064aaf6ad">folly::FunctionScheduler::fnCmp_</a></div><div class="ttdeci">RunTimeOrder fnCmp_</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8h_source.html#l00366">FunctionScheduler.h:366</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a6ad523c40c9f60f24fb6110a30457868"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::cancellingCurrentFunction_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00378">378</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="aeee5a733bd0cbdabf777341af75491f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1FunctionScheduler_1_1RepeatFunc.html">RepeatFunc</a>* folly::FunctionScheduler::currentFunction_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00370">370</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5fe245eead05299dc452a64064aaf6ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1FunctionScheduler_1_1RunTimeOrder.html">RunTimeOrder</a> folly::FunctionScheduler::fnCmp_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00366">366</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae0c270369beae58f0a631ae5d57f0961"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1FunctionScheduler.html#ac51179b09c1a8609ed2a9d3afc85a701">FunctionHeap</a> folly::FunctionScheduler::functions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00364">364</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a38ca92a848f5ad6403e5211365c766ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1FunctionScheduler.html#a3e995efa920fb2c6322b14f4d69bd8a4">FunctionMap</a> folly::FunctionScheduler::functionsMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00365">365</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a16ac30a29ba7e29135412b9af633793e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> folly::FunctionScheduler::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00359">359</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9c21f3e9a445b20e3c0c69487f85129b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::running_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00360">360</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a26a636f9589b97a68a9169cae8fe7e06"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable folly::FunctionScheduler::runningCondvar_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00374">374</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="afe9fab4221fc732dc10e7df3c2f5fe43"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::FunctionScheduler::steady_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00377">377</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

<p>Referenced by <a class="el" href="FunctionScheduler_8h_source.html#l00068">setSteady()</a>.</p>

</div>
</div>
<a class="anchor" id="ae907774bb66df6bc842bff7d28a39768"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread folly::FunctionScheduler::thread_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00356">356</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7246aeb6dddb0d3d6a164bb5b1dec5b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> folly::FunctionScheduler::threadName_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FunctionScheduler_8h_source.html#l00376">376</a> of file <a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/experimental/<a class="el" href="FunctionScheduler_8h_source.html">FunctionScheduler.h</a></li>
<li>proxygen/folly/folly/experimental/<a class="el" href="FunctionScheduler_8cpp_source.html">FunctionScheduler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1FunctionScheduler.html">FunctionScheduler</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
