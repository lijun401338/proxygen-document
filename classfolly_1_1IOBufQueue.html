<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::IOBufQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1IOBufQueue.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classfolly_1_1IOBufQueue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::IOBufQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue_1_1WritableRangeCache.html">WritableRangeCache</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac673048dda61fbb73359a600ccf10860"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ac673048dda61fbb73359a600ccf10860">IOBufQueue</a> (const <a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a> &amp;<a class="el" href="classfolly_1_1IOBufQueue.html#a4c0c7acba70f83db668854ff764bd7f9">options</a>=<a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a>())</td></tr>
<tr class="separator:ac673048dda61fbb73359a600ccf10860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a477ef194730447e68be275f210d8d7a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a477ef194730447e68be275f210d8d7a0">~IOBufQueue</a> ()</td></tr>
<tr class="separator:a477ef194730447e68be275f210d8d7a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aaea02909199f7c3aeb6e39face44fd"><td class="memItemLeft" align="right" valign="top">std::pair&lt; void *, std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a5aaea02909199f7c3aeb6e39face44fd">headroom</a> ()</td></tr>
<tr class="separator:a5aaea02909199f7c3aeb6e39face44fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae42f8ff241cc9c69d18b59ae20067512"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ae42f8ff241cc9c69d18b59ae20067512">markPrepended</a> (std::size_t n)</td></tr>
<tr class="separator:ae42f8ff241cc9c69d18b59ae20067512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cef0505ab3ad3ddb8ac3bf22f4b20c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a6cef0505ab3ad3ddb8ac3bf22f4b20c4">prepend</a> (const void *buf, std::size_t n)</td></tr>
<tr class="separator:a6cef0505ab3ad3ddb8ac3bf22f4b20c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef867d2fff4accd214a5467e8de62a0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">append</a> (std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;buf, bool pack=false)</td></tr>
<tr class="separator:aef867d2fff4accd214a5467e8de62a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d5c19a96b7ee10095667676fe7aaaa9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a8d5c19a96b7ee10095667676fe7aaaa9">append</a> (<a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;other, bool pack=false)</td></tr>
<tr class="separator:a8d5c19a96b7ee10095667676fe7aaaa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d265d177330bb0e307b97285c1b3199"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a4d265d177330bb0e307b97285c1b3199">append</a> (<a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&amp;other, bool pack=false)</td></tr>
<tr class="separator:a4d265d177330bb0e307b97285c1b3199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155d684b2241f98118bc3e6d2545328b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a155d684b2241f98118bc3e6d2545328b">append</a> (const void *buf, size_t len)</td></tr>
<tr class="separator:a155d684b2241f98118bc3e6d2545328b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af75e4967feeccaf59e2dedb2146dd5ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#af75e4967feeccaf59e2dedb2146dd5ee">append</a> (<a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a> sp)</td></tr>
<tr class="separator:af75e4967feeccaf59e2dedb2146dd5ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13f71d22fe3d3cec18388c46a6d87c35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a13f71d22fe3d3cec18388c46a6d87c35">wrapBuffer</a> (const void *buf, size_t len, std::size_t blockSize=(1U&lt;&lt; 31))</td></tr>
<tr class="separator:a13f71d22fe3d3cec18388c46a6d87c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af23707049e443808298500aab6c4432a"><td class="memItemLeft" align="right" valign="top">std::pair&lt; void *, std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#af23707049e443808298500aab6c4432a">preallocate</a> (std::size_t <a class="el" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a>, std::size_t newAllocationSize, std::size_t <a class="el" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>=std::numeric_limits&lt; std::size_t &gt;::<a class="el" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>())</td></tr>
<tr class="separator:af23707049e443808298500aab6c4432a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02b66dddaea67d4462bd4e3f6069fbfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a02b66dddaea67d4462bd4e3f6069fbfb">postallocate</a> (std::size_t n)</td></tr>
<tr class="separator:a02b66dddaea67d4462bd4e3f6069fbfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00eab5a456ea24ad2fe3c649bc7ba792"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a00eab5a456ea24ad2fe3c649bc7ba792">allocate</a> (std::size_t n)</td></tr>
<tr class="separator:a00eab5a456ea24ad2fe3c649bc7ba792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25cf2884ce53ac6e7139aff6a5466ae5"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a25cf2884ce53ac6e7139aff6a5466ae5">writableTail</a> () const </td></tr>
<tr class="separator:a25cf2884ce53ac6e7139aff6a5466ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0b2930ef255af286aceffd73f99058"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a3e0b2930ef255af286aceffd73f99058">tailroom</a> () const </td></tr>
<tr class="separator:a3e0b2930ef255af286aceffd73f99058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3184799f5145a867a3d2c3c54b932a6"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aa3184799f5145a867a3d2c3c54b932a6">split</a> (size_t n)</td></tr>
<tr class="separator:aa3184799f5145a867a3d2c3c54b932a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac66df9034ced7d6681047a4ebba28897"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ac66df9034ced7d6681047a4ebba28897">splitAtMost</a> (size_t n)</td></tr>
<tr class="separator:ac66df9034ced7d6681047a4ebba28897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ff475209dcae92725212d15dac4991"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aa6ff475209dcae92725212d15dac4991">trimStart</a> (size_t amount)</td></tr>
<tr class="separator:aa6ff475209dcae92725212d15dac4991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65ed1aabeae4b43328f34422c985f5a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ac65ed1aabeae4b43328f34422c985f5a">trimStartAtMost</a> (size_t amount)</td></tr>
<tr class="separator:ac65ed1aabeae4b43328f34422c985f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabd9c70719b02309bddd4a8d79c9cd06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aabd9c70719b02309bddd4a8d79c9cd06">trimEnd</a> (size_t amount)</td></tr>
<tr class="separator:aabd9c70719b02309bddd4a8d79c9cd06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c27d9a05776fcb12b9fc618ce066e55"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a8c27d9a05776fcb12b9fc618ce066e55">trimEndAtMost</a> (size_t amount)</td></tr>
<tr class="separator:a8c27d9a05776fcb12b9fc618ce066e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe07433cfe5aec692b1cd37a284189c9"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#afe07433cfe5aec692b1cd37a284189c9">move</a> ()</td></tr>
<tr class="separator:afe07433cfe5aec692b1cd37a284189c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af757a2eb1a1ae342243e6a722148dcb0"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#af757a2eb1a1ae342243e6a722148dcb0">front</a> () const </td></tr>
<tr class="separator:af757a2eb1a1ae342243e6a722148dcb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b78ad5361ca299111fceedb273e0a8b"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a9b78ad5361ca299111fceedb273e0a8b">pop_front</a> ()</td></tr>
<tr class="separator:a9b78ad5361ca299111fceedb273e0a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab900669d05341eb2d9ba80ed3a99b946"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ab900669d05341eb2d9ba80ed3a99b946">chainLength</a> () const </td></tr>
<tr class="separator:ab900669d05341eb2d9ba80ed3a99b946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9720c78bfe50787d7a7828ee8117b92c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a9720c78bfe50787d7a7828ee8117b92c">empty</a> () const </td></tr>
<tr class="separator:a9720c78bfe50787d7a7828ee8117b92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0c7acba70f83db668854ff764bd7f9"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a4c0c7acba70f83db668854ff764bd7f9">options</a> () const </td></tr>
<tr class="separator:a4c0c7acba70f83db668854ff764bd7f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27627435afc053384722cecbdbad757"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aa27627435afc053384722cecbdbad757">clear</a> ()</td></tr>
<tr class="separator:aa27627435afc053384722cecbdbad757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5eeccd6cddcae17d7440744f9f245e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ae5eeccd6cddcae17d7440744f9f245e4">appendToString</a> (<a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;out) const </td></tr>
<tr class="separator:ae5eeccd6cddcae17d7440744f9f245e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a8ad9585cdb42f89adb860a853f309"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a49a8ad9585cdb42f89adb860a853f309">gather</a> (std::size_t maxLength)</td></tr>
<tr class="separator:a49a8ad9585cdb42f89adb860a853f309"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4138d32fb761090fef72f89ef5ccdf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ad4138d32fb761090fef72f89ef5ccdf2">IOBufQueue</a> (<a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&amp;) noexcept</td></tr>
<tr class="separator:ad4138d32fb761090fef72f89ef5ccdf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1744ec665649bbeaa846f15531519b4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a1744ec665649bbeaa846f15531519b4f">operator=</a> (<a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&amp;)</td></tr>
<tr class="separator:a1744ec665649bbeaa846f15531519b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5c33b90ce5e034f00043394564f295da"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a5c33b90ce5e034f00043394564f295da">cacheChainLength</a> ()</td></tr>
<tr class="separator:a5c33b90ce5e034f00043394564f295da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a64273e33eb79844ad4d461d4a9bf52b5"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a> ()</td></tr>
<tr class="separator:a64273e33eb79844ad4d461d4a9bf52b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c17f8c54315ae2c1dcbb8f29e489967"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a8c17f8c54315ae2c1dcbb8f29e489967">split</a> (size_t n, bool throwOnUnderflow)</td></tr>
<tr class="separator:a8c17f8c54315ae2c1dcbb8f29e489967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cbdf91ac46797e6de8d3401c6f70735"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a4cbdf91ac46797e6de8d3401c6f70735">IOBufQueue</a> (const <a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;)=delete</td></tr>
<tr class="separator:a4cbdf91ac46797e6de8d3401c6f70735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c436c4951e2d87d1f30cafb3bea8b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#af4c436c4951e2d87d1f30cafb3bea8b3">operator=</a> (const <a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;)=delete</td></tr>
<tr class="separator:af4c436c4951e2d87d1f30cafb3bea8b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78393dc2b742b5b418636b80479866e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a> () const </td></tr>
<tr class="separator:a78393dc2b742b5b418636b80479866e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa18e3732dc674ae2a72446a28e7eb3ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aa18e3732dc674ae2a72446a28e7eb3ec">fillWritableRangeCache</a> (<a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a> &amp;dest)</td></tr>
<tr class="separator:aa18e3732dc674ae2a72446a28e7eb3ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72ed7f1fae78ea9ccced812f6ded1579"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a72ed7f1fae78ea9ccced812f6ded1579">clearWritableRangeCache</a> ()</td></tr>
<tr class="separator:a72ed7f1fae78ea9ccced812f6ded1579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28d6a7696d8a088f1afc2e746069e2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">flushCache</a> () const </td></tr>
<tr class="separator:aa28d6a7696d8a088f1afc2e746069e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8fb8988d7b49c9a5d7bc7668dbd5a5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#aa8fb8988d7b49c9a5d7bc7668dbd5a5e">updateCacheRef</a> (<a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a> &amp;newRef)</td></tr>
<tr class="separator:aa8fb8988d7b49c9a5d7bc7668dbd5a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e6a8da7f37c19487bb8427672803513"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a0e6a8da7f37c19487bb8427672803513">updateWritableTailCache</a> ()</td></tr>
<tr class="separator:a0e6a8da7f37c19487bb8427672803513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc25d268338dbc79fc94b6df17140f4b"><td class="memItemLeft" align="right" valign="top">std::pair&lt; void *, std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#abc25d268338dbc79fc94b6df17140f4b">preallocateSlow</a> (std::size_t <a class="el" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a>, std::size_t newAllocationSize, std::size_t <a class="el" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>)</td></tr>
<tr class="separator:abc25d268338dbc79fc94b6df17140f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a67cf5a92b23dd08d9665bc2bd7fd7f2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a></td></tr>
<tr class="separator:a67cf5a92b23dd08d9665bc2bd7fd7f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94479a4306c1ac8ad326e2f745315237"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> {0}</td></tr>
<tr class="separator:a94479a4306c1ac8ad326e2f745315237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad534dc6ee08f1c34eefab5f1095a8f15"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a></td></tr>
<tr class="separator:ad534dc6ee08f1c34eefab5f1095a8f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc6961876ddeb2b54fa0b3219ef1869f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:abc6961876ddeb2b54fa0b3219ef1869f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac67202901305a48d7744fee256e5fc86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:ac67202901305a48d7744fee256e5fc86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a040b56c77d7266187633664cffb0fea9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a></td></tr>
<tr class="separator:a040b56c77d7266187633664cffb0fea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a2be011d5d3f983eea367994e09a5d65e"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1IOBufQueue.html#a2be011d5d3f983eea367994e09a5d65e">kChainLengthNotCached</a> = (size_t)-1</td></tr>
<tr class="separator:a2be011d5d3f983eea367994e09a5d65e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An <a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> encapsulates a chain of IOBufs and provides convenience functions to append data to the back of the chain and remove data from the front.</p>
<p>You may also prepend data into the headroom of the first buffer in the chain, if any. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00035">35</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac673048dda61fbb73359a600ccf10860"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::IOBufQueue::IOBufQueue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a>()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00067">67</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00050">folly::IOBufQueue::WritableRangeCacheData::attached</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00557">localCache_</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00509">options()</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    : <a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a>(<a class="code" href="classfolly_1_1IOBufQueue.html#a4c0c7acba70f83db668854ff764bd7f9">options</a>), <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>(&amp;<a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">attached</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a4c0c7acba70f83db668854ff764bd7f9"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a4c0c7acba70f83db668854ff764bd7f9">folly::IOBufQueue::options</a></div><div class="ttdeci">const Options &amp; options() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00509">IOBufQueue.h:509</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a040b56c77d7266187633664cffb0fea9"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">folly::IOBufQueue::localCache_</a></div><div class="ttdeci">WritableRangeCacheData localCache_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00557">IOBufQueue.h:557</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_a31fec451bf819c31bd89577b1310bbd2"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">folly::IOBufQueue::WritableRangeCacheData::attached</a></div><div class="ttdeci">bool attached</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00050">IOBufQueue.h:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a477ef194730447e68be275f210d8d7a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::IOBufQueue::~IOBufQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00072">72</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00596">clearWritableRangeCache()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                        {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a72ed7f1fae78ea9ccced812f6ded1579">clearWritableRangeCache</a>();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_a72ed7f1fae78ea9ccced812f6ded1579"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a72ed7f1fae78ea9ccced812f6ded1579">folly::IOBufQueue::clearWritableRangeCache</a></div><div class="ttdeci">void clearWritableRangeCache()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00596">IOBufQueue.h:596</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad4138d32fb761090fef72f89ef5ccdf2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::IOBufQueue::IOBufQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="structMovable.html">Movable</a> </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00076">76</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    : <a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a>(other.options_), <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>(&amp;<a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  other.clearWritableRangeCache();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(other.head_);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> = other.chainLength_;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> = other.tailStart_;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a> = other.localCache_.cachedRange;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">attached</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  other.chainLength_ = 0;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  other.tailStart_ = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  other.localCache_.cachedRange = {<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>};</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a040b56c77d7266187633664cffb0fea9"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">folly::IOBufQueue::localCache_</a></div><div class="ttdeci">WritableRangeCacheData localCache_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00557">IOBufQueue.h:557</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_a31fec451bf819c31bd89577b1310bbd2"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">folly::IOBufQueue::WritableRangeCacheData::attached</a></div><div class="ttdeci">bool attached</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00050">IOBufQueue.h:50</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4cbdf91ac46797e6de8d3401c6f70735"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::IOBufQueue::IOBufQueue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Not copyable </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a00eab5a456ea24ad2fe3c649bc7ba792"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* folly::IOBufQueue::allocate </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Obtain a writable block of n contiguous bytes, allocating more space if necessary, and mark it as used. The caller can fill it later. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00392">392</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00380">postallocate()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00356">preallocate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                              {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">void</span>* p = <a class="code" href="classfolly_1_1IOBufQueue.html#af23707049e443808298500aab6c4432a">preallocate</a>(n, n).first;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a02b66dddaea67d4462bd4e3f6069fbfb">postallocate</a>(n);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_af23707049e443808298500aab6c4432a"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#af23707049e443808298500aab6c4432a">folly::IOBufQueue::preallocate</a></div><div class="ttdeci">std::pair&lt; void *, std::size_t &gt; preallocate(std::size_t min, std::size_t newAllocationSize, std::size_t max=std::numeric_limits&lt; std::size_t &gt;::max())</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00356">IOBufQueue.h:356</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a02b66dddaea67d4462bd4e3f6069fbfb"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a02b66dddaea67d4462bd4e3f6069fbfb">folly::IOBufQueue::postallocate</a></div><div class="ttdeci">void postallocate(std::size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00380">IOBufQueue.h:380</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef867d2fff4accd214a5467e8de62a0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::append </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pack</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a buffer or buffer chain to the end of this queue. The queue takes ownership of buf.</p>
<p>If pack is true, we try to reduce wastage at the end of this queue by copying some data from the first buffers in the buf chain (and releasing the buffers), if possible. If pack is false, we leave the chain topology unchanged. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00143">143</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00076">folly::IOBufQueue::Options::cacheChainLength</a>, <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="IOBufQueue_8h_source.html#l00542">options_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>

<p>Referenced by <a class="el" href="HPACKEncodeBuffer_8cpp_source.html#l00038">proxygen::HPACKEncodeBuffer::addHeadroom()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00301">append()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01751">folly::AsyncSSLSocket::bioRead()</a>, <a class="el" href="CompressionTest_8cpp_source.html#l00819">folly::io::test::compressSome()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>, <a class="el" href="QPACKScheme_8h_source.html#l00115">proxygen::compress::QPACKScheme::decode()</a>, <a class="el" href="QPACKEncoder_8cpp_source.html#l00277">proxygen::QPACKEncoder::decodeDecoderStream()</a>, <a class="el" href="QPACKDecoder_8cpp_source.html#l00141">proxygen::QPACKDecoder::decodeEncoderStream()</a>, <a class="el" href="QPACKDecoder_8cpp_source.html#l00025">proxygen::QPACKDecoder::decodeStreaming()</a>, <a class="el" href="ClientProtocol_8cpp_source.html#l00452">fizz::sm::encodeAndAddBinders()</a>, <a class="el" href="codec_2test_2TestUtils_8cpp_source.html#l00173">proxygen::fakeMockCodec()</a>, <a class="el" href="HTTP1xCodec_8cpp_source.html#l00657">proxygen::HTTP1xCodec::generateBody()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01257">proxygen::HTTP2Codec::generateBody()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01579">proxygen::HTTP2Codec::generateCertificate()</a>, <a class="el" href="HTTP1xCodec_8cpp_source.html#l00697">proxygen::HTTP1xCodec::generateChunkHeader()</a>, <a class="el" href="HTTP1xCodec_8cpp_source.html#l00721">proxygen::HTTP1xCodec::generateChunkTerminator()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01001">proxygen::HTTP2Codec::generateConnectionPreface()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l01031">proxygen::SPDYCodec::generateDataFrame()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00724">proxygen::SPDYCodec::generateSynReply()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00665">proxygen::SPDYCodec::generateSynStream()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01309">proxygen::HTTP2Codec::generateTrailers()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00953">fizz::sm::getCertificateRequest()</a>, <a class="el" href="MockCodecDownstreamTest_8cpp_source.html#l00054">MockCodecDownstreamTest::MockCodecDownstreamTest()</a>, <a class="el" href="ScopedHTTPServer_8h_source.html#l00030">proxygen::ScopedHandler&lt; HandlerType &gt;::onBody()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00134">proxygen::FakeHTTPCodecCallback::onBody()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00234">proxygen::FakeHTTPCodecCallback::onCertificate()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00227">proxygen::FakeHTTPCodecCallback::onCertificateRequest()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00185">proxygen::FakeHTTPCodecCallback::onGoaway()</a>, <a class="el" href="RFC1867_8cpp_source.html#l00061">proxygen::RFC1867Codec::onIngress()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01010">proxygen::HTTP2Codec::onIngressUpgradeMessage()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">proxygen::HTTPSession::onPingRequest()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00028">proxygen::parse()</a>, <a class="el" href="RFC1867Test_8cpp_source.html#l00126">proxygen::RFC1867Base::parse()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00945">proxygen::HTTP2Codec::parseCertificate()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00424">proxygen::HTTP2Codec::parseHeadersImpl()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00067">proxygen::parseUnidirectional()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01764">folly::AsyncSocket::performRead()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00098">fizz::EncryptedReadRecordLayer::read()</a>, <a class="el" href="AsyncFizzBase_8cpp_source.html#l00196">fizz::AsyncFizzBase::readBufferAvailable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00557">proxygen::HTTPSession::readBufferAvailable()</a>, <a class="el" href="RecordLayer_8cpp_source.html#l00018">fizz::ReadRecordLayer::readEvent()</a>, <a class="el" href="LocalTransport_8h_source.html#l00036">fizz::test::LocalTransport::receiveData()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00784">proxygen::HTTPTransaction::sendBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01576">proxygen::HTTPSession::sendHeaders()</a>, <a class="el" href="FilterTests_8cpp_source.html#l00062">FlowControlFilterTest&lt; initSize &gt;::SetUp()</a>, <a class="el" href="HTTPUpstreamSessionTest_8cpp_source.html#l01740">MockHTTPUpstreamTest::SetUp()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00536">fizz::sm::setupSchedulerAndContext()</a>, <a class="el" href="CompressionTest_8cpp_source.html#l00261">folly::io::test::CompressionTest::split()</a>, <a class="el" href="BserTest_8cpp_source.html#l00121">TEST()</a>, <a class="el" href="HTTPUpstreamSessionTest_8cpp_source.html#l01887">TEST_F()</a>, <a class="el" href="MockCodecDownstreamTest_8cpp_source.html#l00968">MockCodecDownstreamTest::testConnFlowControlBlocked()</a>, <a class="el" href="Dump_8cpp_source.html#l00191">folly::bser::toBserIOBuf()</a>, <a class="el" href="CompressionTest_8cpp_source.html#l00840">folly::io::test::uncompressSome()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00194">wrapBuffer()</a>, <a class="el" href="CodecTestUtils_8h_source.html#l00049">wangle::test::BytesReflector::write()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00147">fizz::EncryptedWriteRecordLayer::write()</a>, <a class="el" href="AsyncPipe_8cpp_source.html#l00145">folly::AsyncPipeWriter::write()</a>, <a class="el" href="HTTP2Framer_8cpp_source.html#l00936">proxygen::http2::writeCertificate()</a>, and <a class="el" href="HTTP2Framer_8cpp_source.html#l00915">proxygen::http2::writeCertificateRequest()</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                                          {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">cacheChainLength</a>) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> += buf-&gt;<a class="code" href="classfolly_1_1IOBuf.html#ac4c405fd5fa405c8d814b4cc86309a34">computeChainDataLength</a>();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  appendToChain(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(buf), pack);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="ttc" id="structfolly_1_1IOBufQueue_1_1Options_html_a363eb23dc4c20673344c5643accbdb3f"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">folly::IOBufQueue::Options::cacheChainLength</a></div><div class="ttdeci">bool cacheChainLength</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00076">IOBufQueue.h:76</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBuf_html_ac4c405fd5fa405c8d814b4cc86309a34"><div class="ttname"><a href="classfolly_1_1IOBuf.html#ac4c405fd5fa405c8d814b4cc86309a34">folly::IOBuf::computeChainDataLength</a></div><div class="ttdeci">std::size_t computeChainDataLength() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8cpp_source.html#l00501">IOBuf.cpp:501</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d5c19a96b7ee10095667676fe7aaaa9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::append </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pack</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a queue to the end of this queue. The queue takes ownership of all buffers from the other queue. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00154">154</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00076">folly::IOBufQueue::Options::cacheChainLength</a>, <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="IOBufQueue_8h_source.html#l00542">options_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                                    {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (!other.head_) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// We&#39;re going to chain other, thus we need to grab both guards.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">auto</span> otherGuard = other.updateGuard();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">cacheChainLength</a>) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (other.options_.cacheChainLength) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> += other.chainLength_;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> += other.head_-&gt;computeChainDataLength();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  appendToChain(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(other.head_), pack);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  other.chainLength_ = 0;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div><div class="ttc" id="structfolly_1_1IOBufQueue_1_1Options_html_a363eb23dc4c20673344c5643accbdb3f"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">folly::IOBufQueue::Options::cacheChainLength</a></div><div class="ttdeci">bool cacheChainLength</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00076">IOBufQueue.h:76</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d265d177330bb0e307b97285c1b3199"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::append </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pack</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00301">301</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8cpp_source.html#l00143">append()</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                                     {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">append</a>(other, pack); <span class="comment">// call lvalue reference overload, above</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_aef867d2fff4accd214a5467e8de62a0d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">folly::IOBufQueue::append</a></div><div class="ttdeci">void append(std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, bool pack=false)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8cpp_source.html#l00143">IOBufQueue.cpp:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a155d684b2241f98118bc3e6d2545328b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::append </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy len bytes, starting at buf, to the end of this queue. The caller retains ownership of the source data. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00172">172</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBuf_8h_source.html#l00689">folly::IOBuf::append()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBuf_8cpp_source.html#l00229">folly::IOBuf::create()</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="LogLevel_8cpp_source.html#l00031">max</a>, <a class="el" href="LogLevel_8cpp_source.html#l00030">min</a>, <a class="el" href="IOBuf_8h_source.html#l00551">folly::IOBuf::tailroom()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00178">uint8_t</a>, <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>, and <a class="el" href="IOBuf_8h_source.html#l00526">folly::IOBuf::writableTail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                                   {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keyword">auto</span> src = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*<span class="keyword">&gt;</span>(buf);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">while</span> (len != 0) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> == <span class="keyword">nullptr</span>) || <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;isSharedOne() ||</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;tailroom() == 0)) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      appendToChain(</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <a class="code" href="classfolly_1_1IOBuf.html#a744f20ec9d0829fe17cf78fb48b7785e">IOBuf::create</a>(</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;              <a class="code" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">std::max</a>(MIN_ALLOC_SIZE, <a class="code" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">std::min</a>(len, MAX_ALLOC_SIZE))),</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keyword">false</span>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    IOBuf* last = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev();</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    std::size_t copyLen = <a class="code" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">std::min</a>(len, (<span class="keywordtype">size_t</span>)last-&gt;tailroom());</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    memcpy(last-&gt;writableTail(), src, copyLen);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    src += copyLen;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    last-&gt;append(copyLen);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> += copyLen;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    len -= copyLen;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBuf_html_a744f20ec9d0829fe17cf78fb48b7785e"><div class="ttname"><a href="classfolly_1_1IOBuf.html#a744f20ec9d0829fe17cf78fb48b7785e">folly::IOBuf::create</a></div><div class="ttdeci">static std::unique_ptr&lt; IOBuf &gt; create(std::size_t capacity)</div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8cpp_source.html#l00229">IOBuf.cpp:229</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a15c8b90f03cae068a6979f32590642e2"><div class="ttname"><a href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a></div><div class="ttdeci">LogLevel max</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00031">LogLevel.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a7361901234703a521a82885405734c53"><div class="ttname"><a href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a></div><div class="ttdeci">LogLevel min</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00030">LogLevel.cpp:30</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af75e4967feeccaf59e2dedb2146dd5ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::append </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#af8d3e3eb9accef5470823e6353f60140">StringPiece</a>&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copy a string to the end of this queue. The caller retains ownership of the source data. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00315">315</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8cpp_source.html#l00143">append()</a>, <a class="el" href="Range_8h_source.html#l00446">folly::Range&lt; Iter &gt;::data()</a>, <a class="el" href="Range_8h_source.html#l00431">folly::Range&lt; Iter &gt;::size()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00194">wrapBuffer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                              {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">append</a>(sp.data(), sp.size());</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_aef867d2fff4accd214a5467e8de62a0d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">folly::IOBufQueue::append</a></div><div class="ttdeci">void append(std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, bool pack=false)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8cpp_source.html#l00143">IOBufQueue.cpp:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae5eeccd6cddcae17d7440744f9f245e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::appendToString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Append the queue to a std::string. Non-destructive. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00340">340</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00076">folly::IOBufQueue::Options::cacheChainLength</a>, <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00542">options_</a>, <a class="el" href="Range_8h_source.html#l01114">folly::range()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00509">options()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00458">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                                    {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keyword">auto</span> len = <a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">cacheChainLength</a></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      ? <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> + (<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first - <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      : <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;computeChainDataLength() +</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          (<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first - <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  out.reserve(out.size() + len);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="namespacefolly.html#a79a54cd1a19a22878c86be5f90a33643">range</a> : *<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    out.append(reinterpret_cast&lt;const char*&gt;(<a class="code" href="namespacefolly.html#a79a54cd1a19a22878c86be5f90a33643">range</a>.data()), <a class="code" href="namespacefolly.html#a79a54cd1a19a22878c86be5f90a33643">range</a>.size());</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> != <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    out.append(</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        reinterpret_cast&lt;const char*&gt;(<a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>),</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first - <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1Options_html_a363eb23dc4c20673344c5643accbdb3f"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">folly::IOBufQueue::Options::cacheChainLength</a></div><div class="ttdeci">bool cacheChainLength</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00076">IOBufQueue.h:76</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
<div class="ttc" id="namespacefolly_html_a79a54cd1a19a22878c86be5f90a33643"><div class="ttname"><a href="namespacefolly.html#a79a54cd1a19a22878c86be5f90a33643">folly::range</a></div><div class="ttdeci">constexpr Range&lt; Iter &gt; range(Iter first, Iter last)</div><div class="ttdef"><b>Definition:</b> <a href="Range_8h_source.html#l01114">Range.h:1114</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5c33b90ce5e034f00043394564f295da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a> folly::IOBufQueue::cacheChainLength </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Commonly used <a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a>, currently the only possible value other than the default. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00083">83</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00076">folly::IOBufQueue::Options::cacheChainLength</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00509">options()</a>.</p>

<p>Referenced by <a class="el" href="SecondaryAuthManager_8cpp_source.html#l00027">proxygen::SecondaryAuthManager::createAuthRequest()</a>, <a class="el" href="HTTPUpstreamSessionTest_8cpp_source.html#l00077">TestPriorityMapBuilder::createVirtualStreams()</a>, <a class="el" href="Compression_8cpp_source.html#l00494">folly::io::StreamCodec::doUncompress()</a>, <a class="el" href="HTTPUpstreamSessionTest_8cpp_source.html#l00237">HTTPUpstreamTest&lt; SPDY3CodecPair &gt;::enableExHeader()</a>, <a class="el" href="ClientProtocol_8cpp_source.html#l00452">fizz::sm::encodeAndAddBinders()</a>, <a class="el" href="ExportedAuthenticator_8cpp_source.html#l00063">fizz::ExportedAuthenticator::getAuthenticatorContext()</a>, <a class="el" href="SPDYCodecTest_8cpp_source.html#l00345">getSynStream()</a>, <a class="el" href="AeadCookieCipher-inl_8h_source.html#l00064">fizz::server::AeadCookieCipher&lt; AeadType, HkdfType &gt;::getTokenOrRetry()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">proxygen::HTTPSession::onPingRequest()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00028">proxygen::parse()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00067">proxygen::parseUnidirectional()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00536">fizz::sm::setupSchedulerAndContext()</a>, <a class="el" href="HTTP1xCodecTest_8cpp_source.html#l00148">TEST()</a>, <a class="el" href="SPDYCodecTest_8cpp_source.html#l01460">TEST_F()</a>, <a class="el" href="HTTP1xCodecTest_8cpp_source.html#l00645">TEST_P()</a>, <a class="el" href="Dump_8cpp_source.html#l00191">folly::bser::toBserIOBuf()</a>, <a class="el" href="ExportedAuthenticator_8cpp_source.html#l00155">fizz::ExportedAuthenticator::validate()</a>, and <a class="el" href="CodecTestUtils_8h_source.html#l00049">wangle::test::BytesReflector::write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                    {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    Options <a class="code" href="classfolly_1_1IOBufQueue.html#a4c0c7acba70f83db668854ff764bd7f9">options</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    options.<a class="code" href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">cacheChainLength</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#a4c0c7acba70f83db668854ff764bd7f9">options</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="ttc" id="structfolly_1_1IOBufQueue_1_1Options_html_a363eb23dc4c20673344c5643accbdb3f"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">folly::IOBufQueue::Options::cacheChainLength</a></div><div class="ttdeci">bool cacheChainLength</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00076">IOBufQueue.h:76</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a4c0c7acba70f83db668854ff764bd7f9"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a4c0c7acba70f83db668854ff764bd7f9">folly::IOBufQueue::options</a></div><div class="ttdeci">const Options &amp; options() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00509">IOBufQueue.h:509</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab900669d05341eb2d9ba80ed3a99b946"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::IOBufQueue::chainLength </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Total chain length, only valid if cacheLength was specified in the constructor. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00492">492</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00076">folly::IOBufQueue::Options::cacheChainLength</a>, <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00542">options_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>, and <a class="el" href="Likely_8h_source.html#l00048">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="AsyncFizzBase_8cpp_source.html#l00222">fizz::AsyncFizzBase::checkBufLen()</a>, <a class="el" href="LineBasedFrameDecoder_8cpp_source.html#l00032">wangle::LineBasedFrameDecoder::decode()</a>, <a class="el" href="FixedLengthFrameDecoder_8h_source.html#l00044">wangle::FixedLengthFrameDecoder::decode()</a>, <a class="el" href="BroadcastProxy_8cpp_source.html#l00071">ByteToStringDecoder::decode()</a>, <a class="el" href="LengthFieldBasedFrameDecoder_8cpp_source.html#l00042">wangle::LengthFieldBasedFrameDecoder::decode()</a>, <a class="el" href="QPACKEncoder_8cpp_source.html#l00277">proxygen::QPACKEncoder::decodeDecoderStream()</a>, <a class="el" href="QPACKDecoder_8cpp_source.html#l00141">proxygen::QPACKDecoder::decodeEncoderStream()</a>, <a class="el" href="RecordLayer_8cpp_source.html#l00093">fizz::ReadRecordLayer::decodeHandshakeMessage()</a>, <a class="el" href="Compression_8cpp_source.html#l00494">folly::io::StreamCodec::doUncompress()</a>, <a class="el" href="ClientProtocol_8cpp_source.html#l00452">fizz::sm::encodeAndAddBinders()</a>, <a class="el" href="LineBasedFrameDecoder_8cpp_source.html#l00094">wangle::LineBasedFrameDecoder::findEndOfLine()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01257">proxygen::HTTP2Codec::generateBody()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01579">proxygen::HTTP2Codec::generateCertificate()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01200">proxygen::HTTP2Codec::generateContinuation()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00856">proxygen::SPDYCodec::generateGoaway()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00929">proxygen::SPDYCodec::generatePingCommon()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00824">proxygen::SPDYCodec::generateRstStream()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00941">proxygen::SPDYCodec::generateSettings()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01309">proxygen::HTTP2Codec::generateTrailers()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00981">proxygen::SPDYCodec::generateWindowUpdate()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00025">fizz::EncryptedReadRecordLayer::getDecryptedBuf()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02043">proxygen::HTTPSession::getNextToSend()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00503">proxygen::HTTPTransaction::markEgressComplete()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01181">proxygen::HTTPTransaction::notifyTransportPendingEgress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">proxygen::HTTPSession::onPingRequest()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00028">proxygen::parse()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00945">proxygen::HTTP2Codec::parseCertificate()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00163">proxygen::HTTP2Codec::parseFrame()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00507">proxygen::HTTP2Codec::parseHeadersDecodeFrames()</a>, <a class="el" href="accept__steering__server_8cpp_source.html#l00040">NaiveRoutingDataHandler::parseRoutingData()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00067">proxygen::parseUnidirectional()</a>, <a class="el" href="PlaintextRecordLayer_8cpp_source.html#l00023">fizz::PlaintextReadRecordLayer::read()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00814">proxygen::HTTPTransaction::sendDeferredBody()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01003">proxygen::HTTPTransaction::sendEOM()</a>, <a class="el" href="HTTPSession_8h_source.html#l00511">proxygen::HTTPSession::sessionByteOffset()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00536">fizz::sm::setupSchedulerAndContext()</a>, <a class="el" href="IOBufQueueTest_8cpp_source.html#l00278">TEST()</a>, <a class="el" href="Dump_8cpp_source.html#l00191">folly::bser::toBserIOBuf()</a>, and <a class="el" href="HTTPTransaction_8cpp_source.html#l01205">proxygen::HTTPTransaction::updateHandlerPauseState()</a>.</p>
<div class="fragment"><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                             {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(!<a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">cacheChainLength</a>)) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;IOBufQueue: chain length not cached&quot;</span>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> + (<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first - <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1Options_html_a363eb23dc4c20673344c5643accbdb3f"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1Options.html#a363eb23dc4c20673344c5643accbdb3f">folly::IOBufQueue::Options::cacheChainLength</a></div><div class="ttdeci">bool cacheChainLength</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00076">IOBufQueue.h:76</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="Likely_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00048">Likely.h:48</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa27627435afc053384722cecbdbad757"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the queue. Note that this does not release the buffers, it just sets their length to zero; useful if you want to reuse the same queue without reallocating. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00327">327</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBuf_8h_source.html#l00728">folly::IOBuf::clear()</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="IOBuf_8h_source.html#l00600">folly::IOBuf::next()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>

<p>Referenced by <a class="el" href="HPACKEncodeBuffer_8h_source.html#l00038">proxygen::HPACKEncodeBuffer::clear()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00509">options()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00945">proxygen::HTTP2Codec::parseCertificate()</a>, <a class="el" href="HTTP1xCodecTest_8cpp_source.html#l00498">TEST()</a>, and <a class="el" href="BroadcastHandlerTest_8cpp_source.html#l00074">TEST_F()</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                       {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  IOBuf* buf = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>.get();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    buf-&gt;clear();</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    buf = buf-&gt;next();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  } <span class="keywordflow">while</span> (buf != <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>.get());</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> = 0;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a72ed7f1fae78ea9ccced812f6ded1579"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::clearWritableRangeCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Clear current writable tail cache and reset it to localCache_ </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00596">596</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00050">folly::IOBufQueue::WritableRangeCacheData::attached</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00557">localCache_</a>, and <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8cpp_source.html#l00091">operator=()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00072">~IOBufQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                 {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">flushCache</a>();</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a> != &amp;<a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(*<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a> = &amp;<a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    DCHECK(<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a> == &amp;<a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a> &amp;&amp; <a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">attached</a>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a040b56c77d7266187633664cffb0fea9"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">folly::IOBufQueue::localCache_</a></div><div class="ttdeci">WritableRangeCacheData localCache_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00557">IOBufQueue.h:557</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_aa28d6a7696d8a088f1afc2e746069e2e"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">folly::IOBufQueue::flushCache</a></div><div class="ttdeci">void flushCache() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00610">IOBufQueue.h:610</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_a31fec451bf819c31bd89577b1310bbd2"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">folly::IOBufQueue::WritableRangeCacheData::attached</a></div><div class="ttdeci">bool attached</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00050">IOBufQueue.h:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a78393dc2b742b5b418636b80479866e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::dcheckCacheIntegrity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00559">559</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00050">folly::IOBufQueue::WritableRangeCacheData::attached</a>, <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBuf_8h_source.html#l00610">folly::IOBuf::prev()</a>, <a class="el" href="IOBuf_8h_source.html#l00551">folly::IOBuf::tailroom()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>, and <a class="el" href="IOBuf_8h_source.html#l00526">folly::IOBuf::writableTail()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00492">chainLength()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00503">empty()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00585">fillWritableRangeCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00380">postallocate()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00356">preallocate()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00403">tailroom()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00398">writableTail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                    {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// Tail start should always be less than tail end.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    DCHECK_LE((<span class="keywordtype">void</span>*)<a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>, (<span class="keywordtype">void</span>*)<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    DCHECK_LE(</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        (<span class="keywordtype">void</span>*)<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first,</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        (<span class="keywordtype">void</span>*)<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.second);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    DCHECK(</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first != <span class="keyword">nullptr</span> ||</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.second == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// There is always an attached cache instance.</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    DCHECK(<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">attached</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// Either cache is empty or it coincides with the tail.</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    DCHECK(</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first == <span class="keyword">nullptr</span> ||</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> == <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;writableTail() &amp;&amp;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;         <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> &lt;= <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first &amp;&amp;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;         <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first &gt;= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;writableTail() &amp;&amp;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;         <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.second ==</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;             <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;writableTail() + <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;tailroom()));</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_a31fec451bf819c31bd89577b1310bbd2"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">folly::IOBufQueue::WritableRangeCacheData::attached</a></div><div class="ttdeci">bool attached</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00050">IOBufQueue.h:50</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9720c78bfe50787d7a7828ee8117b92c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::IOBufQueue::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true iff the <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> chain length is 0. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00503">503</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>.</p>

<p>Referenced by <a class="el" href="Subprocess_8cpp_source.html#l00763">folly::Subprocess::communicateIOBuf()</a>, <a class="el" href="LocalTransport_8h_source.html#l00156">fizz::test::LocalTransport::deliverData()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00953">fizz::sm::getCertificateRequest()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00025">fizz::EncryptedReadRecordLayer::getDecryptedBuf()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02043">proxygen::HTTPSession::getNextToSend()</a>, <a class="el" href="AsyncPipe_8cpp_source.html#l00223">folly::AsyncPipeWriter::handleWrite()</a>, <a class="el" href="RecordLayer_8cpp_source.html#l00151">fizz::ReadRecordLayer::hasUnparsedHandshakeData()</a>, <a class="el" href="FizzServer_8cpp_source.html#l00014">fizz::server::looksLikeV2ClientHello()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00945">proxygen::HTTP2Codec::parseCertificate()</a>, <a class="el" href="PlaintextRecordLayer_8cpp_source.html#l00023">fizz::PlaintextReadRecordLayer::read()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00606">proxygen::HTTPSession::readEOF()</a>, <a class="el" href="RecordLayer_8cpp_source.html#l00018">fizz::ReadRecordLayer::readEvent()</a>, <a class="el" href="IOBufQueueTest_8cpp_source.html#l00161">TEST()</a>, and <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00147">fizz::EncryptedWriteRecordLayer::write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                     {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> ||</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;empty() &amp;&amp; <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first == <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa18e3732dc674ae2a72446a28e7eb3ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::fillWritableRangeCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Populate dest with writable tail range cache. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00585">585</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2upload_8py_source.html#l00394">upload::dest</a>, and <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>
<div class="fragment"><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                                            {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a> != &amp;<a class="code" href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">dest</a>) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <a class="code" href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">dest</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(*<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a> = &amp;<a class="code" href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">dest</a>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="namespaceupload_html_a770d9c7b49b1fede80de6078d5e49af7"><div class="ttname"><a href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">upload.dest</a></div><div class="ttdeci">dest</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2upload_8py_source.html#l00394">upload.py:394</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa28d6a7696d8a088f1afc2e746069e2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::flushCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Commit any pending changes to the tail of the queue. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00610">610</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>, <a class="el" href="IOBuf_8h_source.html#l00610">folly::IOBuf::prev()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00596">clearWritableRangeCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00476">front()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                          {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> != <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keyword">auto</span> buf = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev();</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      DCHECK_EQ(</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;          (<span class="keywordtype">void</span>*)(buf-&gt;writableTail() + buf-&gt;tailroom()),</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;          (<span class="keywordtype">void</span>*)<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;cachedRange.second);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      auto len = <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;cachedRange.<a class="code" href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">first</a> - <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      buf-&gt;<a class="code" href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">append</a>(len);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> += len;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      tailStart_ += len;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_aef867d2fff4accd214a5467e8de62a0d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">folly::IOBufQueue::append</a></div><div class="ttdeci">void append(std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, bool pack=false)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8cpp_source.html#l00143">IOBufQueue.cpp:143</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_af220ef9930b641e74fa9588a0bcffb8c"><div class="ttname"><a href="namespacefolly_1_1gen.html#af220ef9930b641e74fa9588a0bcffb8c">folly::gen::first</a></div><div class="ttdeci">constexpr detail::First first</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02553">Base-inl.h:2553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af757a2eb1a1ae342243e6a722148dcb0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>* folly::IOBufQueue::front </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Access the front <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a>.</p>
<p>Note: caller will see the current state of the chain, but may not see future updates immediately, due to the presence of a tail cache. Note: the caller may potentially clone the chain, thus marking all buffers as shared. We may still continue writing to the tail of the last <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> without checking if it's shared, but this is fine, since the cloned IOBufs won't reference that data. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00476">476</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00316">pop_front()</a>.</p>

<p>Referenced by <a class="el" href="HPACKEncodeBuffer_8cpp_source.html#l00038">proxygen::HPACKEncodeBuffer::addHeadroom()</a>, <a class="el" href="LineBasedFrameDecoder_8cpp_source.html#l00032">wangle::LineBasedFrameDecoder::decode()</a>, <a class="el" href="QPACKEncoder_8cpp_source.html#l00277">proxygen::QPACKEncoder::decodeDecoderStream()</a>, <a class="el" href="QPACKDecoder_8cpp_source.html#l00141">proxygen::QPACKDecoder::decodeEncoderStream()</a>, <a class="el" href="RecordLayer_8cpp_source.html#l00093">fizz::ReadRecordLayer::decodeHandshakeMessage()</a>, <a class="el" href="HTTPParallelCodecTest_8h_source.html#l00068">HTTPParallelCodecTest::dumpToFile()</a>, <a class="el" href="LineBasedFrameDecoder_8cpp_source.html#l00094">wangle::LineBasedFrameDecoder::findEndOfLine()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00222">fizz::EncryptedWriteRecordLayer::getBufToEncrypt()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00025">fizz::EncryptedReadRecordLayer::getDecryptedBuf()</a>, <a class="el" href="LengthFieldBasedFrameDecoder_8cpp_source.html#l00088">wangle::LengthFieldBasedFrameDecoder::getUnadjustedFrameLength()</a>, <a class="el" href="AsyncPipe_8cpp_source.html#l00223">folly::AsyncPipeWriter::handleWrite()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02800">proxygen::HTTPSession::hasMoreWrites()</a>, <a class="el" href="FizzServer_8cpp_source.html#l00014">fizz::server::looksLikeV2ClientHello()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00028">proxygen::parse()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00507">proxygen::HTTP2Codec::parseHeadersDecodeFrames()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00067">proxygen::parseUnidirectional()</a>, <a class="el" href="Subprocess_8cpp_source.html#l00674">folly::Subprocess::pid()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">proxygen::HTTPSession::processReadData()</a>, <a class="el" href="PlaintextRecordLayer_8cpp_source.html#l00023">fizz::PlaintextReadRecordLayer::read()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00098">fizz::EncryptedReadRecordLayer::read()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02223">proxygen::HTTPSession::scheduleWrite()</a>, <a class="el" href="BserTest_8cpp_source.html#l00121">TEST()</a>, <a class="el" href="HuffmanTests_8cpp_source.html#l00056">TEST_F()</a>, <a class="el" href="HTTP1xCodecTest_8cpp_source.html#l00645">TEST_P()</a>, and <a class="el" href="HPACKEncodeBuffer_8cpp_source.html#l00141">proxygen::HPACKEncodeBuffer::toBin()</a>.</p>
<div class="fragment"><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                  {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">flushCache</a>();</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>.get();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_aa28d6a7696d8a088f1afc2e746069e2e"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">folly::IOBufQueue::flushCache</a></div><div class="ttdeci">void flushCache() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00610">IOBufQueue.h:610</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49a8ad9585cdb42f89adb860a853f309"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::gather </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>maxLength</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calls <a class="el" href="classfolly_1_1IOBuf.html#a39c461f26d2626ab9199e2b643fb4811">IOBuf::gather()</a> on the head of the queue, if it exists. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00361">361</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00509">options()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00467">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                           {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;gather(maxLength);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5aaea02909199f7c3aeb6e39face44fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; void *, std::size_t &gt; folly::IOBufQueue::headroom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a space to prepend bytes and the amount of headroom available. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00111">111</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                               {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Note, headroom is independent from the tail, so we don&#39;t need to flush the</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// cache.</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> std::make_pair(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;writableBuffer(), <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;headroom());</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> std::make_pair(<span class="keyword">nullptr</span>, 0);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae42f8ff241cc9c69d18b59ae20067512"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::markPrepended </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indicate that n bytes from the headroom have been used. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00121">121</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                          {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">if</span> (n == 0) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Note, headroom is independent from the tail, so we don&#39;t need to flush the</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// cache.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  assert(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prepend(n);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> += n;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe07433cfe5aec692b1cd37a284189c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>&gt; folly::IOBufQueue::move </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Transfer ownership of the queue's entire <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> chain to the caller. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00459">459</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>

<p>Referenced by <a class="el" href="QueueAppenderBenchmark_8cpp_source.html#l00081">BENCHMARK()</a>, <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01751">folly::AsyncSSLSocket::bioRead()</a>, <a class="el" href="CompressionTest_8cpp_source.html#l00819">folly::io::test::compressSome()</a>, <a class="el" href="ServiceTest_8cpp_source.html#l00036">wangle::SimpleDecode::decode()</a>, <a class="el" href="LineBasedFrameDecoder_8cpp_source.html#l00032">wangle::LineBasedFrameDecoder::decode()</a>, <a class="el" href="BroadcastProxy_8cpp_source.html#l00071">ByteToStringDecoder::decode()</a>, <a class="el" href="QPACKDecoder_8cpp_source.html#l00025">proxygen::QPACKDecoder::decodeStreaming()</a>, <a class="el" href="LocalTransport_8h_source.html#l00156">fizz::test::LocalTransport::deliverData()</a>, <a class="el" href="Compression_8cpp_source.html#l00494">folly::io::StreamCodec::doUncompress()</a>, <a class="el" href="QPACKScheme_8h_source.html#l00081">proxygen::compress::QPACKScheme::encode()</a>, <a class="el" href="ClientProtocol_8cpp_source.html#l00452">fizz::sm::encodeAndAddBinders()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01257">proxygen::HTTP2Codec::generateBody()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01579">proxygen::HTTP2Codec::generateCertificate()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00953">fizz::sm::getCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02043">proxygen::HTTPSession::getNextToSend()</a>, <a class="el" href="SPDYCodecTest_8cpp_source.html#l00345">getSynStream()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00503">proxygen::HTTPTransaction::markEgressComplete()</a>, <a class="el" href="ScopedHTTPServer_8h_source.html#l00036">proxygen::ScopedHandler&lt; HandlerType &gt;::onEOM()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">proxygen::HTTPSession::onPingRequest()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00945">proxygen::HTTP2Codec::parseCertificate()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l00507">proxygen::HTTP2Codec::parseHeadersDecodeFrames()</a>, <a class="el" href="HTTPParallelCodecTest_8h_source.html#l00051">HTTPParallelCodecTest::parseImpl()</a>, <a class="el" href="accept__steering__server_8cpp_source.html#l00040">NaiveRoutingDataHandler::parseRoutingData()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00067">proxygen::parseUnidirectional()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01764">folly::AsyncSocket::performRead()</a>, <a class="el" href="QueueAppenderBenchmark_8cpp_source.html#l00100">preallocate_postallocate_bench()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00098">fizz::EncryptedReadRecordLayer::read()</a>, <a class="el" href="Proxy_8cpp_source.html#l00036">ProxyBackendHandler::read()</a>, <a class="el" href="ProxyHandler_8cpp_source.html#l00253">ProxyService::ProxyHandler::readDataAvailable()</a>, <a class="el" href="StaticHandler_8cpp_source.html#l00059">StaticService::StaticHandler::readFile()</a>, <a class="el" href="HPACKEncodeBuffer_8h_source.html#l00034">proxygen::HPACKEncodeBuffer::release()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00299">proxygen::FakeHTTPCodecCallback::reset()</a>, <a class="el" href="QueueAppenderBenchmark_8cpp_source.html#l00030">runArithmeticBench()</a>, <a class="el" href="QueueAppenderBenchmark_8cpp_source.html#l00053">runPushBenchmark()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01576">proxygen::HTTPSession::sendHeaders()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00536">fizz::sm::setupSchedulerAndContext()</a>, <a class="el" href="HTTPParallelCodecTest_8h_source.html#l00031">HTTPParallelCodecTest::SetUpUpstreamTest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02391">proxygen::HTTPSession::shutdownTransportWithReset()</a>, <a class="el" href="CompressionTest_8cpp_source.html#l00261">folly::io::test::CompressionTest::split()</a>, <a class="el" href="IOBufQueueTest_8cpp_source.html#l00074">TEST()</a>, <a class="el" href="HTTPUpstreamSessionTest_8cpp_source.html#l00407">TEST_F()</a>, <a class="el" href="Dump_8cpp_source.html#l00191">folly::bser::toBserIOBuf()</a>, and <a class="el" href="CompressionTest_8cpp_source.html#l00840">folly::io::test::uncompressSome()</a>.</p>
<div class="fragment"><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                   {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    std::unique_ptr&lt;folly::IOBuf&gt; res = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> = 0;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  }</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1744ec665649bbeaa846f15531519b4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp; folly::IOBufQueue::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00091">91</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00050">folly::IOBufQueue::WritableRangeCacheData::attached</a>, <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00596">clearWritableRangeCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00557">localCache_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="IOBufQueue_8h_source.html#l00542">options_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                                    {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">if</span> (&amp;other != <span class="keyword">this</span>) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    other.clearWritableRangeCache();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a72ed7f1fae78ea9ccced812f6ded1579">clearWritableRangeCache</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a> = other.options_;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(other.head_);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> = other.chainLength_;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> = other.tailStart_;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a> = other.localCache_.cachedRange;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">localCache_</a>.<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">attached</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    other.chainLength_ = 0;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    other.tailStart_ = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    other.localCache_.cachedRange = {<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>};</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a72ed7f1fae78ea9ccced812f6ded1579"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a72ed7f1fae78ea9ccced812f6ded1579">folly::IOBufQueue::clearWritableRangeCache</a></div><div class="ttdeci">void clearWritableRangeCache()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00596">IOBufQueue.h:596</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a040b56c77d7266187633664cffb0fea9"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a040b56c77d7266187633664cffb0fea9">folly::IOBufQueue::localCache_</a></div><div class="ttdeci">WritableRangeCacheData localCache_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00557">IOBufQueue.h:557</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_a31fec451bf819c31bd89577b1310bbd2"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#a31fec451bf819c31bd89577b1310bbd2">folly::IOBufQueue::WritableRangeCacheData::attached</a></div><div class="ttdeci">bool attached</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00050">IOBufQueue.h:50</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af4c436c4951e2d87d1f30cafb3bea8b3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a>&amp; folly::IOBufQueue::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4c0c7acba70f83db668854ff764bd7f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a>&amp; folly::IOBufQueue::options </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00509">509</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8cpp_source.html#l00340">appendToString()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00327">clear()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00361">gather()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00067">IOBufQueue()</a>, <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00059">folly::IOBufQueue::WritableRangeCacheData::operator=()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00542">options_</a>, <a class="el" href="IOBufQueue_8h_source.html#l00420">split()</a>, and <a class="el" href="Conv_8cpp_source.html#l00212">string</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00083">cacheChainLength()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                 {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">options_</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_a67cf5a92b23dd08d9665bc2bd7fd7f2d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a67cf5a92b23dd08d9665bc2bd7fd7f2d">folly::IOBufQueue::options_</a></div><div class="ttdeci">Options options_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00542">IOBufQueue.h:542</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9b78ad5361ca299111fceedb273e0a8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt; folly::IOBufQueue::pop_front </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>returns the first <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> in the chain and removes it from the chain</p>
<dl class="section return"><dt>Returns</dt><dd>first <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> in the chain or nullptr if none. </dd></dl>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00316">316</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="IOBuf_8h_source.html#l00859">folly::IOBuf::pop()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>

<p>Referenced by <a class="el" href="TestAsyncTransport_8cpp_source.html#l00426">TestAsyncTransport::addReadEvent()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00476">front()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00222">fizz::EncryptedWriteRecordLayer::getBufToEncrypt()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">proxygen::HTTPSession::processReadData()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00425">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                                {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> -= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;length();</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  std::unique_ptr&lt;folly::IOBuf&gt; retBuf = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> = retBuf-&gt;<a class="code" href="classfolly_1_1IOBuf.html#a02aa5128684998e66a1dffcfce2bbd17">pop</a>();</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">return</span> retBuf;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="classfolly_1_1IOBuf_html_a02aa5128684998e66a1dffcfce2bbd17"><div class="ttname"><a href="classfolly_1_1IOBuf.html#a02aa5128684998e66a1dffcfce2bbd17">folly::IOBuf::pop</a></div><div class="ttdeci">std::unique_ptr&lt; IOBuf &gt; pop()</div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8h_source.html#l00859">IOBuf.h:859</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a02b66dddaea67d4462bd4e3f6069fbfb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::postallocate </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tell the queue that the caller has written data into the first n bytes provided by the previous <a class="el" href="classfolly_1_1IOBufQueue.html#af23707049e443808298500aab6c4432a">preallocate()</a> call.</p>
<dl class="section note"><dt>Note</dt><dd>n should be less than or equal to the size returned by <a class="el" href="classfolly_1_1IOBufQueue.html#af23707049e443808298500aab6c4432a">preallocate()</a>. If n is zero, the caller may skip the call to <a class="el" href="classfolly_1_1IOBufQueue.html#a02b66dddaea67d4462bd4e3f6069fbfb">postallocate()</a>. If n is nonzero, the caller must not invoke any other non-const methods on this <a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> between the call to preallocate and the call to <a class="el" href="classfolly_1_1IOBufQueue.html#a02b66dddaea67d4462bd4e3f6069fbfb">postallocate()</a>. </dd></dl>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00380">380</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00392">allocate()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00233">folly::IOBufQueue::WritableRangeCache::appendSlow()</a>, <a class="el" href="Compression_8cpp_source.html#l00494">folly::io::StreamCodec::doUncompress()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l01031">proxygen::SPDYCodec::generateDataFrame()</a>, <a class="el" href="HTTP1xCodec_8cpp_source.html#l00364">proxygen::HTTP1xCodec::generateHeader()</a>, <a class="el" href="AsyncUDPServerSocket_8h_source.html#l00183">folly::AsyncUDPServerSocket::onDataAvailable()</a>, <a class="el" href="Subprocess_8cpp_source.html#l00674">folly::Subprocess::pid()</a>, <a class="el" href="QueueAppenderBenchmark_8cpp_source.html#l00100">preallocate_postallocate_bench()</a>, <a class="el" href="ProxyHandler_8cpp_source.html#l00253">ProxyService::ProxyHandler::readDataAvailable()</a>, <a class="el" href="AsyncSocketHandler_8h_source.html#l00151">wangle::AsyncSocketHandler::readDataAvailable()</a>, <a class="el" href="AsyncFizzBase_8cpp_source.html#l00184">fizz::AsyncFizzBase::readDataAvailable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00535">proxygen::HTTPSession::readDataAvailable()</a>, <a class="el" href="StaticHandler_8cpp_source.html#l00059">StaticService::StaticHandler::readFile()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00177">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                 {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    DCHECK_LE(</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        (<span class="keywordtype">void</span>*)(<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first + n),</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        (<span class="keywordtype">void</span>*)<a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.second);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first += n;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af23707049e443808298500aab6c4432a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;void*, std::size_t&gt; folly::IOBufQueue::preallocate </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>newAllocationSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>max</em> = <code>std::numeric_limits&lt;std::size_t&gt;::<a class="el" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Obtain a writable block of contiguous bytes at the end of this queue, allocating more space if necessary. The amount of space reserved will be at least min. If min contiguous space is not available at the end of the queue, and <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> with size newAllocationSize is appended to the chain and returned. The actual available space may be larger than newAllocationSize, but will be truncated to max, if specified.</p>
<p>If the caller subsequently writes anything into the returned space, it must call the <a class="el" href="classfolly_1_1IOBufQueue.html#a02b66dddaea67d4462bd4e3f6069fbfb">postallocate()</a> method.</p>
<dl class="section return"><dt>Returns</dt><dd>The starting address of the block and the length in bytes.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The point of the <a class="el" href="classfolly_1_1IOBufQueue.html#af23707049e443808298500aab6c4432a">preallocate()</a>/postallocate() mechanism is to support I/O APIs such as Thrift's TAsyncSocket::ReadCallback that request a buffer from the application and then, in a later callback, tell the application how much of the buffer they've filled with data. </dd></dl>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00356">356</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>, <a class="el" href="Likely_8h_source.html#l00047">LIKELY</a>, <a class="el" href="LogLevel_8cpp_source.html#l00031">max</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00403">tailroom()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00398">writableTail()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00392">allocate()</a>, <a class="el" href="Compression_8cpp_source.html#l00494">folly::io::StreamCodec::doUncompress()</a>, <a class="el" href="HTTP1xCodec_8cpp_source.html#l00364">proxygen::HTTP1xCodec::generateHeader()</a>, <a class="el" href="ProxyHandler_8cpp_source.html#l00246">ProxyService::ProxyHandler::getReadBuffer()</a>, <a class="el" href="AsyncSocketHandler_8h_source.html#l00142">wangle::AsyncSocketHandler::getReadBuffer()</a>, <a class="el" href="AsyncUDPServerSocket_8h_source.html#l00179">folly::AsyncUDPServerSocket::getReadBuffer()</a>, <a class="el" href="AsyncFizzBase_8cpp_source.html#l00177">fizz::AsyncFizzBase::getReadBuffer()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00526">proxygen::HTTPSession::getReadBuffer()</a>, <a class="el" href="Subprocess_8cpp_source.html#l00674">folly::Subprocess::pid()</a>, <a class="el" href="QueueAppenderBenchmark_8cpp_source.html#l00100">preallocate_postallocate_bench()</a>, <a class="el" href="StaticHandler_8cpp_source.html#l00059">StaticService::StaticHandler::readFile()</a>, <a class="el" href="IOBufQueueTest_8cpp_source.html#l00177">TEST()</a>, and <a class="el" href="AsyncUDPSocketTest_8cpp_source.html#l00584">TEST_F()</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                                         {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a>(<a class="code" href="classfolly_1_1IOBufQueue.html#a25cf2884ce53ac6e7139aff6a5466ae5">writableTail</a>() != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classfolly_1_1IOBufQueue.html#a3e0b2930ef255af286aceffd73f99058">tailroom</a>() &gt;= <a class="code" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a>)) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keywordflow">return</span> std::make_pair(</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          <a class="code" href="classfolly_1_1IOBufQueue.html#a25cf2884ce53ac6e7139aff6a5466ae5">writableTail</a>(), std::min&lt;std::size_t&gt;(<a class="code" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>, <a class="code" href="classfolly_1_1IOBufQueue.html#a3e0b2930ef255af286aceffd73f99058">tailroom</a>()));</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#abc25d268338dbc79fc94b6df17140f4b">preallocateSlow</a>(<a class="code" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a>, newAllocationSize, <a class="code" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_abc25d268338dbc79fc94b6df17140f4b"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc25d268338dbc79fc94b6df17140f4b">folly::IOBufQueue::preallocateSlow</a></div><div class="ttdeci">std::pair&lt; void *, std::size_t &gt; preallocateSlow(std::size_t min, std::size_t newAllocationSize, std::size_t max)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8cpp_source.html#l00207">IOBufQueue.cpp:207</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a15c8b90f03cae068a6979f32590642e2"><div class="ttname"><a href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a></div><div class="ttdeci">LogLevel max</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00031">LogLevel.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="Likely_8h_html_affde14445f49f65ff4f5b592e44ee71a"><div class="ttname"><a href="Likely_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a></div><div class="ttdeci">#define LIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00047">Likely.h:47</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a3e0b2930ef255af286aceffd73f99058"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a3e0b2930ef255af286aceffd73f99058">folly::IOBufQueue::tailroom</a></div><div class="ttdeci">size_t tailroom() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00403">IOBufQueue.h:403</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a25cf2884ce53ac6e7139aff6a5466ae5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a25cf2884ce53ac6e7139aff6a5466ae5">folly::IOBufQueue::writableTail</a></div><div class="ttdeci">void * writableTail() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00398">IOBufQueue.h:398</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a7361901234703a521a82885405734c53"><div class="ttname"><a href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a></div><div class="ttdeci">LogLevel min</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00030">LogLevel.cpp:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abc25d268338dbc79fc94b6df17140f4b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpair.html">pair</a>&lt; void *, std::size_t &gt; folly::IOBufQueue::preallocateSlow </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>newAllocationSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00207">207</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBuf_8cpp_source.html#l00229">folly::IOBuf::create()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="LogLevel_8cpp_source.html#l00031">max</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="IOBufQueue_8h_source.html#l00403">tailroom()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00398">writableTail()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00356">preallocate()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00633">updateWritableTailCache()</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                   {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">// Avoid grabbing update guard, since we&#39;re manually setting the cache ptrs.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">flushCache</a>();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Allocate a new buffer of the requested max size.</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  unique_ptr&lt;IOBuf&gt; newBuf(<a class="code" href="classfolly_1_1IOBuf.html#a744f20ec9d0829fe17cf78fb48b7785e">IOBuf::create</a>(<a class="code" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">std::max</a>(<a class="code" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a>, newAllocationSize)));</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> = newBuf-&gt;writableTail();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a> = std::pair&lt;uint8_t*, uint8_t*&gt;(</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>, tailStart_ + newBuf-&gt;tailroom());</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  appendToChain(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(newBuf), <span class="keyword">false</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">return</span> make_pair(<a class="code" href="classfolly_1_1IOBufQueue.html#a25cf2884ce53ac6e7139aff6a5466ae5">writableTail</a>(), std::min&lt;std::size_t&gt;(<a class="code" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>, <a class="code" href="classfolly_1_1IOBufQueue.html#a3e0b2930ef255af286aceffd73f99058">tailroom</a>()));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBuf_html_a744f20ec9d0829fe17cf78fb48b7785e"><div class="ttname"><a href="classfolly_1_1IOBuf.html#a744f20ec9d0829fe17cf78fb48b7785e">folly::IOBuf::create</a></div><div class="ttdeci">static std::unique_ptr&lt; IOBuf &gt; create(std::size_t capacity)</div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8cpp_source.html#l00229">IOBuf.cpp:229</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a15c8b90f03cae068a6979f32590642e2"><div class="ttname"><a href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a></div><div class="ttdeci">LogLevel max</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00031">LogLevel.cpp:31</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a3e0b2930ef255af286aceffd73f99058"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a3e0b2930ef255af286aceffd73f99058">folly::IOBufQueue::tailroom</a></div><div class="ttdeci">size_t tailroom() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00403">IOBufQueue.h:403</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a25cf2884ce53ac6e7139aff6a5466ae5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a25cf2884ce53ac6e7139aff6a5466ae5">folly::IOBufQueue::writableTail</a></div><div class="ttdeci">void * writableTail() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00398">IOBufQueue.h:398</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a7361901234703a521a82885405734c53"><div class="ttname"><a href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a></div><div class="ttdeci">LogLevel min</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00030">LogLevel.cpp:30</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_aa28d6a7696d8a088f1afc2e746069e2e"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">folly::IOBufQueue::flushCache</a></div><div class="ttdeci">void flushCache() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00610">IOBufQueue.h:610</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6cef0505ab3ad3ddb8ac3bf22f4b20c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::prepend </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepend an existing range; throws std::overflow_error if not enough room. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00132">132</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>, <a class="el" href="IOBufQueueTest_8cpp_source.html#l00406">TEST()</a>, and <a class="el" href="Dump_8cpp_source.html#l00191">folly::bser::toBserIOBuf()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                                     {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// We&#39;re not touching the tail, so we don&#39;t need to flush the cache.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keyword">auto</span> hroom = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;headroom();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> || hroom &lt; n) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">throw</span> std::overflow_error(<span class="stringliteral">&quot;Not enough room to prepend&quot;</span>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  memcpy(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;writableBuffer() + hroom - n, buf, n);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prepend(n);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> += n;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa3184799f5145a867a3d2c3c54b932a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>&gt; folly::IOBufQueue::split </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Split off the first n bytes of the queue into a separate <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> chain, and transfer ownership of the new chain to the caller. The <a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a> retains ownership of everything after the split point.</p>
<dl class="section warning"><dt>Warning</dt><dd>If the split point lies in the middle of some <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> within the chain, this function may, as an implementation detail, clone that <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a>.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::underflow_error</td><td>if n exceeds the number of bytes in the queue. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00420">420</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>Referenced by <a class="el" href="LineBasedFrameDecoder_8cpp_source.html#l00032">wangle::LineBasedFrameDecoder::decode()</a>, <a class="el" href="FixedLengthFrameDecoder_8h_source.html#l00044">wangle::FixedLengthFrameDecoder::decode()</a>, <a class="el" href="LengthFieldBasedFrameDecoder_8cpp_source.html#l00042">wangle::LengthFieldBasedFrameDecoder::decode()</a>, <a class="el" href="RecordLayer_8cpp_source.html#l00093">fizz::ReadRecordLayer::decodeHandshakeMessage()</a>, <a class="el" href="LocalTransport_8h_source.html#l00156">fizz::test::LocalTransport::deliverData()</a>, <a class="el" href="ClientProtocol_8cpp_source.html#l00452">fizz::sm::encodeAndAddBinders()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01257">proxygen::HTTP2Codec::generateBody()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01200">proxygen::HTTP2Codec::generateContinuation()</a>, <a class="el" href="HTTP2Codec_8cpp_source.html#l01309">proxygen::HTTP2Codec::generateTrailers()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02043">proxygen::HTTPSession::getNextToSend()</a>, <a class="el" href="AsyncUDPServerSocket_8h_source.html#l00183">folly::AsyncUDPServerSocket::onDataAvailable()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00509">options()</a>, <a class="el" href="lib_2http_2codec_2test_2TestUtils_8h_source.html#l00028">proxygen::parse()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00814">proxygen::HTTPTransaction::sendDeferredBody()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00536">fizz::sm::setupSchedulerAndContext()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00428">splitAtMost()</a>, and <a class="el" href="BserTest_8cpp_source.html#l00121">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                            {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#aa3184799f5145a867a3d2c3c54b932a6">split</a>(n, <span class="keyword">true</span>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_aa3184799f5145a867a3d2c3c54b932a6"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aa3184799f5145a867a3d2c3c54b932a6">folly::IOBufQueue::split</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; split(size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00420">IOBufQueue.h:420</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8c17f8c54315ae2c1dcbb8f29e489967"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> &gt; folly::IOBufQueue::split </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>throwOnUnderflow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00223">223</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="IOBuf_8cpp_source.html#l00229">folly::IOBuf::create()</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="Likely_8h_source.html#l00048">UNLIKELY</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                                                   {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  unique_ptr&lt;IOBuf&gt; result;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">while</span> (n != 0) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">if</span> (throwOnUnderflow) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">throw</span> std::underflow_error(</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="stringliteral">&quot;Attempt to remove more bytes than are present in IOBufQueue&quot;</span>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;length() &lt;= n) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      n -= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;length();</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> -= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;length();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      unique_ptr&lt;IOBuf&gt; remainder = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;pop();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      appendToChain(result, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>), <span class="keyword">false</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> = <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(remainder);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      unique_ptr&lt;IOBuf&gt; clone = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;cloneOne();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      clone-&gt;trimEnd(clone-&gt;length() - n);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      appendToChain(result, <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(clone), <span class="keyword">false</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;trimStart(n);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> -= n;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(result == <span class="keyword">nullptr</span>)) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBuf.html#a744f20ec9d0829fe17cf78fb48b7785e">IOBuf::create</a>(0);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBuf_html_a744f20ec9d0829fe17cf78fb48b7785e"><div class="ttname"><a href="classfolly_1_1IOBuf.html#a744f20ec9d0829fe17cf78fb48b7785e">folly::IOBuf::create</a></div><div class="ttdeci">static std::unique_ptr&lt; IOBuf &gt; create(std::size_t capacity)</div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8cpp_source.html#l00229">IOBuf.cpp:229</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
<div class="ttc" id="Likely_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00048">Likely.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac66df9034ced7d6681047a4ebba28897"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>&gt; folly::IOBufQueue::splitAtMost </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Similar to split, but will return the entire queue instead of throwing if n exceeds the number of bytes in the queue. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00428">428</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00420">split()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00283">trimEnd()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00291">trimEndAtMost()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00255">trimStart()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00263">trimStartAtMost()</a>.</p>

<p>Referenced by <a class="el" href="HTTP2Codec_8cpp_source.html#l01579">proxygen::HTTP2Codec::generateCertificate()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00222">fizz::EncryptedWriteRecordLayer::getBufToEncrypt()</a>, <a class="el" href="ServerProtocol_8cpp_source.html#l00953">fizz::sm::getCertificateRequest()</a>, <a class="el" href="PlaintextRecordLayer_8cpp_source.html#l00023">fizz::PlaintextReadRecordLayer::read()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00161">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                                                  {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#aa3184799f5145a867a3d2c3c54b932a6">split</a>(n, <span class="keyword">false</span>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_aa3184799f5145a867a3d2c3c54b932a6"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aa3184799f5145a867a3d2c3c54b932a6">folly::IOBufQueue::split</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; split(size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00420">IOBufQueue.h:420</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e0b2930ef255af286aceffd73f99058"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::IOBufQueue::tailroom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00403">403</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>.</p>

<p>Referenced by <a class="el" href="SPDYCodec_8cpp_source.html#l01031">proxygen::SPDYCodec::generateDataFrame()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00356">preallocate()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>, and <a class="el" href="CompressionTest_8cpp_source.html#l00840">folly::io::test::uncompressSome()</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                          {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.second - <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aabd9c70719b02309bddd4a8d79c9cd06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::trimEnd </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Similar to <a class="el" href="classfolly_1_1IOBuf.html#ad12ac938bdd0cb4db5ecf8dd10e47e46">IOBuf::trimEnd</a>, but works on the whole queue. Will pop off buffers that have been completely trimmed. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00283">283</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8cpp_source.html#l00291">trimEndAtMost()</a>.</p>

<p>Referenced by <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00098">fizz::EncryptedReadRecordLayer::read()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00428">splitAtMost()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00220">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                      {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keyword">auto</span> trimmed = <a class="code" href="classfolly_1_1IOBufQueue.html#a8c27d9a05776fcb12b9fc618ce066e55">trimEndAtMost</a>(amount);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">if</span> (trimmed != amount) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">throw</span> std::underflow_error(</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="stringliteral">&quot;Attempt to trim more bytes than are present in IOBufQueue&quot;</span>);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_a8c27d9a05776fcb12b9fc618ce066e55"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a8c27d9a05776fcb12b9fc618ce066e55">folly::IOBufQueue::trimEndAtMost</a></div><div class="ttdeci">size_t trimEndAtMost(size_t amount)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8cpp_source.html#l00291">IOBufQueue.cpp:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8c27d9a05776fcb12b9fc618ce066e55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::IOBufQueue::trimEndAtMost </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Similar to trimEnd, but will trim at most amount bytes and returns the number of bytes trimmed. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00291">291</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00428">splitAtMost()</a>, <a class="el" href="IOBufQueueTest_8cpp_source.html#l00313">TEST()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00283">trimEnd()</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                              {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keyword">auto</span> original = amount;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">while</span> (amount &gt; 0) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;length() &gt; amount) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;trimEnd(amount);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> -= amount;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      amount = 0;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    amount -= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;length();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> -= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;length();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;isChained()) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev()-&gt;unlink();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>.reset();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">return</span> original - amount;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6ff475209dcae92725212d15dac4991"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::trimStart </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Similar to <a class="el" href="classfolly_1_1IOBuf.html#a88ae3810ecc01b9f130da1156d5ff244">IOBuf::trimStart</a>, but works on the whole queue. Will pop off buffers that have been completely trimmed. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00255">255</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8cpp_source.html#l00263">trimStartAtMost()</a>.</p>

<p>Referenced by <a class="el" href="AsyncSSLSocket_8cpp_source.html#l01751">folly::AsyncSSLSocket::bioRead()</a>, <a class="el" href="LineBasedFrameDecoder_8cpp_source.html#l00032">wangle::LineBasedFrameDecoder::decode()</a>, <a class="el" href="LengthFieldBasedFrameDecoder_8cpp_source.html#l00042">wangle::LengthFieldBasedFrameDecoder::decode()</a>, <a class="el" href="QPACKEncoder_8cpp_source.html#l00277">proxygen::QPACKEncoder::decodeDecoderStream()</a>, <a class="el" href="QPACKDecoder_8cpp_source.html#l00141">proxygen::QPACKDecoder::decodeEncoderStream()</a>, <a class="el" href="QPACKDecoder_8cpp_source.html#l00025">proxygen::QPACKDecoder::decodeStreaming()</a>, <a class="el" href="EncryptedRecordLayer_8cpp_source.html#l00025">fizz::EncryptedReadRecordLayer::getDecryptedBuf()</a>, <a class="el" href="AsyncPipe_8cpp_source.html#l00223">folly::AsyncPipeWriter::handleWrite()</a>, <a class="el" href="AsyncSocket_8cpp_source.html#l01764">folly::AsyncSocket::performRead()</a>, <a class="el" href="Subprocess_8cpp_source.html#l00674">folly::Subprocess::pid()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">proxygen::HTTPSession::processReadData()</a>, <a class="el" href="PlaintextRecordLayer_8cpp_source.html#l00023">fizz::PlaintextReadRecordLayer::read()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00428">splitAtMost()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00220">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                        {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keyword">auto</span> trimmed = <a class="code" href="classfolly_1_1IOBufQueue.html#ac65ed1aabeae4b43328f34422c985f5a">trimStartAtMost</a>(amount);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (trimmed != amount) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">throw</span> std::underflow_error(</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="stringliteral">&quot;Attempt to trim more bytes than are present in IOBufQueue&quot;</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac65ed1aabeae4b43328f34422c985f5a"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac65ed1aabeae4b43328f34422c985f5a">folly::IOBufQueue::trimStartAtMost</a></div><div class="ttdeci">size_t trimStartAtMost(size_t amount)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8cpp_source.html#l00263">IOBufQueue.cpp:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac65ed1aabeae4b43328f34422c985f5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::IOBufQueue::trimStartAtMost </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Similar to trimStart, but will trim at most amount bytes and returns the number of bytes trimmed. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00263">263</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00547">chainLength_</a>, <a class="el" href="Base_8h_source.html#l00840">folly::gen::guard()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00553">head_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>

<p>Referenced by <a class="el" href="LengthFieldBasedFrameDecoder_8cpp_source.html#l00042">wangle::LengthFieldBasedFrameDecoder::decode()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00428">splitAtMost()</a>, <a class="el" href="IOBufQueueTest_8cpp_source.html#l00278">TEST()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00255">trimStart()</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                                {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">guard</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard</a>();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keyword">auto</span> original = amount;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">while</span> (amount &gt; 0) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;length() &gt; amount) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;trimStart(amount);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> -= amount;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      amount = 0;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    amount -= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;length();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">chainLength_</a> -= <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;length();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;pop();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">return</span> original - amount;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_a64273e33eb79844ad4d461d4a9bf52b5"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">folly::IOBufQueue::updateGuard</a></div><div class="ttdeci">auto updateGuard()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00043">IOBufQueue.h:43</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_a4be5af98480886ba055c3d7accd62062"><div class="ttname"><a href="namespacefolly_1_1gen.html#a4be5af98480886ba055c3d7accd62062">folly::gen::guard</a></div><div class="ttdeci">GuardImpl guard(ErrorHandler &amp;&amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="Base_8h_source.html#l00840">Base.h:840</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a94479a4306c1ac8ad326e2f745315237"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a94479a4306c1ac8ad326e2f745315237">folly::IOBufQueue::chainLength_</a></div><div class="ttdeci">size_t chainLength_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00547">IOBufQueue.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8fb8988d7b49c9a5d7bc7668dbd5a5e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::updateCacheRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a> &amp;&#160;</td>
          <td class="paramname"><em>newRef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00626">626</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>.</p>
<div class="fragment"><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                                      {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a> = &amp;newRef;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64273e33eb79844ad4d461d4a9bf52b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto folly::IOBufQueue::updateGuard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This guard should be taken by any method that intends to do any changes to in data_ (e.g. appending to it).</p>
<p>It flushes the writable tail cache and refills it on destruction. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00043">43</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="ScopeGuard_8h_source.html#l00184">folly::makeGuard()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00633">updateWritableTailCache()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8cpp_source.html#l00143">append()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00327">clear()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00361">gather()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00459">move()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00316">pop_front()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00223">split()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00291">trimEndAtMost()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00263">trimStartAtMost()</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                     {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">flushCache</a>();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefolly.html#a507704cb8cb20963bc6ef5a2f871ab2a">folly::makeGuard</a>([<span class="keyword">this</span>] { <a class="code" href="classfolly_1_1IOBufQueue.html#a0e6a8da7f37c19487bb8427672803513">updateWritableTailCache</a>(); });</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_aa28d6a7696d8a088f1afc2e746069e2e"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">folly::IOBufQueue::flushCache</a></div><div class="ttdeci">void flushCache() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00610">IOBufQueue.h:610</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a0e6a8da7f37c19487bb8427672803513"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a0e6a8da7f37c19487bb8427672803513">folly::IOBufQueue::updateWritableTailCache</a></div><div class="ttdeci">void updateWritableTailCache()</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00633">IOBufQueue.h:633</a></div></div>
<div class="ttc" id="namespacefolly_html_a507704cb8cb20963bc6ef5a2f871ab2a"><div class="ttname"><a href="namespacefolly.html#a507704cb8cb20963bc6ef5a2f871ab2a">folly::makeGuard</a></div><div class="ttdeci">FOLLY_NODISCARD detail::ScopeGuardImplDecay&lt; F, true &gt; makeGuard(F &amp;&amp;f) noexcept(noexcept(detail::ScopeGuardImplDecay&lt; F, true &gt;(static_cast&lt; F &amp;&amp; &gt;(f))))</div><div class="ttdef"><b>Definition:</b> <a href="ScopeGuard_8h_source.html#l00184">ScopeGuard.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e6a8da7f37c19487bb8427672803513"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::updateWritableTailCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update cached writable tail range. Called by <a class="el" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard()</a> </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00633">633</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, <a class="el" href="IOBuf_8h_source.html#l00952">folly::IOBuf::isSharedOne()</a>, <a class="el" href="Likely_8h_source.html#l00047">LIKELY</a>, <a class="el" href="LogLevel_8cpp_source.html#l00031">max</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>, <a class="el" href="IOBuf_8h_source.html#l00610">folly::IOBuf::prev()</a>, <a class="el" href="IOBuf_8h_source.html#l00551">folly::IOBuf::tailroom()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00555">tailStart_</a>, and <a class="el" href="IOBuf_8h_source.html#l00526">folly::IOBuf::writableTail()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00043">updateGuard()</a>.</p>
<div class="fragment"><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                 {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a>(<a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a> != <span class="keyword">nullptr</span>)) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      IOBuf* buf = <a class="code" href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">head_</a>-&gt;prev();</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a>(!buf-&gt;isSharedOne())) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> = buf-&gt;writableTail();</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a> = std::pair&lt;uint8_t*, uint8_t*&gt;(</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a>, tailStart_ + buf-&gt;tailroom());</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">tailStart_</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a> = std::pair&lt;uint8_t*, uint8_t*&gt;();</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="Likely_8h_html_affde14445f49f65ff4f5b592e44ee71a"><div class="ttname"><a href="Likely_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a></div><div class="ttdeci">#define LIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00047">Likely.h:47</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_ad534dc6ee08f1c34eefab5f1095a8f15"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ad534dc6ee08f1c34eefab5f1095a8f15">folly::IOBufQueue::head_</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; head_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00553">IOBufQueue.h:553</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_abc6961876ddeb2b54fa0b3219ef1869f"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#abc6961876ddeb2b54fa0b3219ef1869f">folly::IOBufQueue::tailStart_</a></div><div class="ttdeci">uint8_t * tailStart_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00555">IOBufQueue.h:555</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a13f71d22fe3d3cec18388c46a6d87c35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::IOBufQueue::wrapBuffer </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>blockSize</em> = <code>(1U&#160;&lt;&lt;&#160;31)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Append a chain of <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> objects that point to consecutive regions within buf.</p>
<p>Just like <a class="el" href="classfolly_1_1IOBuf.html#a354ecb1fb5f80e8d0006cf0e74307b63">IOBuf::wrapBuffer</a>, this should only be used when the caller knows ahead of time and can ensure that all <a class="el" href="classfolly_1_1IOBuf.html">IOBuf</a> objects that will point to this buffer will be destroyed before the buffer itself is destroyed; all other caveats from wrapBuffer also apply.</p>
<p>Every buffer except for the last will wrap exactly blockSize bytes. Importantly, this method may be used to wrap buffers larger than 4GB. </p>

<p>Definition at line <a class="el" href="IOBufQueue_8cpp_source.html#l00194">194</a> of file <a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a>.</p>

<p>References <a class="el" href="IOBufQueue_8cpp_source.html#l00143">append()</a>, <a class="el" href="LogLevel_8cpp_source.html#l00030">min</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00178">uint8_t</a>, and <a class="el" href="IOBuf_8cpp_source.html#l00353">folly::IOBuf::wrapBuffer()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00315">append()</a>, <a class="el" href="Subprocess_8cpp_source.html#l00740">folly::Subprocess::communicate()</a>, and <a class="el" href="IOBufQueueTest_8cpp_source.html#l00206">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                         {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keyword">auto</span> src = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*<span class="keyword">&gt;</span>(buf);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">while</span> (len != 0) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">size_t</span> n = <a class="code" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">std::min</a>(len, <span class="keywordtype">size_t</span>(blockSize));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">append</a>(<a class="code" href="classfolly_1_1IOBuf.html#a354ecb1fb5f80e8d0006cf0e74307b63">IOBuf::wrapBuffer</a>(src, n));</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    src += n;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    len -= n;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_aef867d2fff4accd214a5467e8de62a0d"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#aef867d2fff4accd214a5467e8de62a0d">folly::IOBufQueue::append</a></div><div class="ttdeci">void append(std::unique_ptr&lt; folly::IOBuf &gt; &amp;&amp;buf, bool pack=false)</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8cpp_source.html#l00143">IOBufQueue.cpp:143</a></div></div>
<div class="ttc" id="classfolly_1_1IOBuf_html_a354ecb1fb5f80e8d0006cf0e74307b63"><div class="ttname"><a href="classfolly_1_1IOBuf.html#a354ecb1fb5f80e8d0006cf0e74307b63">folly::IOBuf::wrapBuffer</a></div><div class="ttdeci">static std::unique_ptr&lt; IOBuf &gt; wrapBuffer(const void *buf, std::size_t capacity)</div><div class="ttdef"><b>Definition:</b> <a href="IOBuf_8cpp_source.html#l00353">IOBuf.cpp:353</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a7361901234703a521a82885405734c53"><div class="ttname"><a href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a></div><div class="ttdeci">LogLevel min</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00030">LogLevel.cpp:30</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00178">ConstexprMathBenchmark.cpp:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25cf2884ce53ac6e7139aff6a5466ae5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* folly::IOBufQueue::writableTail </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00398">398</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>References <a class="el" href="IOBufQueue_8h_source.html#l00049">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a>, <a class="el" href="IOBufQueue_8h_source.html#l00556">cachePtr_</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00356">preallocate()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>.</p>
<div class="fragment"><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                             {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">dcheckCacheIntegrity</a>();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">cachePtr_</a>-&gt;<a class="code" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">cachedRange</a>.first;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  }</div><div class="ttc" id="classfolly_1_1IOBufQueue_html_ac67202901305a48d7744fee256e5fc86"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#ac67202901305a48d7744fee256e5fc86">folly::IOBufQueue::cachePtr_</a></div><div class="ttdeci">WritableRangeCacheData * cachePtr_</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00556">IOBufQueue.h:556</a></div></div>
<div class="ttc" id="classfolly_1_1IOBufQueue_html_a78393dc2b742b5b418636b80479866e7"><div class="ttname"><a href="classfolly_1_1IOBufQueue.html#a78393dc2b742b5b418636b80479866e7">folly::IOBufQueue::dcheckCacheIntegrity</a></div><div class="ttdeci">void dcheckCacheIntegrity() const </div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00559">IOBufQueue.h:559</a></div></div>
<div class="ttc" id="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData_html_ab48068288bb6248ac0f4c6407880bc3a"><div class="ttname"><a href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html#ab48068288bb6248ac0f4c6407880bc3a">folly::IOBufQueue::WritableRangeCacheData::cachedRange</a></div><div class="ttdeci">std::pair&lt; uint8_t *, uint8_t * &gt; cachedRange</div><div class="ttdef"><b>Definition:</b> <a href="IOBufQueue_8h_source.html#l00049">IOBufQueue.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ac67202901305a48d7744fee256e5fc86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a>* folly::IOBufQueue::cachePtr_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00556">556</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8cpp_source.html#l00340">appendToString()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00492">chainLength()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00596">clearWritableRangeCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00503">empty()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00585">fillWritableRangeCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00380">postallocate()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00403">tailroom()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00626">updateCacheRef()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00633">updateWritableTailCache()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00398">writableTail()</a>.</p>

</div>
</div>
<a class="anchor" id="a94479a4306c1ac8ad326e2f745315237"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::IOBufQueue::chainLength_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00547">547</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8cpp_source.html#l00143">append()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00340">appendToString()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00492">chainLength()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00327">clear()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00076">IOBufQueue()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00121">markPrepended()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00459">move()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00091">operator=()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00316">pop_front()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00132">prepend()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00223">split()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00291">trimEndAtMost()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00263">trimStartAtMost()</a>.</p>

</div>
</div>
<a class="anchor" id="ad534dc6ee08f1c34eefab5f1095a8f15"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a>&gt; folly::IOBufQueue::head_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Everything that has been appended but not yet discarded or moved out Note: anything that needs to operate on a tail should either call <a class="el" href="classfolly_1_1IOBufQueue.html#aa28d6a7696d8a088f1afc2e746069e2e">flushCache()</a> or grab <a class="el" href="classfolly_1_1IOBufQueue.html#a64273e33eb79844ad4d461d4a9bf52b5">updateGuard()</a> (it will flush the cache itself). </p>

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00553">553</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8cpp_source.html#l00143">append()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00340">appendToString()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00327">clear()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00237">folly::IOBufQueue::WritableRangeCache::dcheckIntegrity()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00503">empty()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00476">front()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00361">gather()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00111">headroom()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00076">IOBufQueue()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00121">markPrepended()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00459">move()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00091">operator=()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00316">pop_front()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00132">prepend()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00223">split()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00291">trimEndAtMost()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00263">trimStartAtMost()</a>.</p>

</div>
</div>
<a class="anchor" id="a2be011d5d3f983eea367994e09a5d65e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t folly::IOBufQueue::kChainLengthNotCached = (size_t)-1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00537">537</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a040b56c77d7266187633664cffb0fea9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1IOBufQueue_1_1WritableRangeCacheData.html">WritableRangeCacheData</a> folly::IOBufQueue::localCache_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00557">557</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8h_source.html#l00596">clearWritableRangeCache()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00067">IOBufQueue()</a>, and <a class="el" href="IOBufQueue_8cpp_source.html#l00091">operator=()</a>.</p>

</div>
</div>
<a class="anchor" id="a67cf5a92b23dd08d9665bc2bd7fd7f2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1IOBufQueue_1_1Options.html">Options</a> folly::IOBufQueue::options_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00542">542</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8cpp_source.html#l00143">append()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00340">appendToString()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00492">chainLength()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00091">operator=()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00509">options()</a>.</p>

</div>
</div>
<a class="anchor" id="abc6961876ddeb2b54fa0b3219ef1869f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* folly::IOBufQueue::tailStart_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IOBufQueue_8h_source.html#l00555">555</a> of file <a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a>.</p>

<p>Referenced by <a class="el" href="IOBufQueue_8cpp_source.html#l00340">appendToString()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00492">chainLength()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00559">dcheckCacheIntegrity()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00503">empty()</a>, <a class="el" href="IOBufQueue_8h_source.html#l00610">flushCache()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00076">IOBufQueue()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00091">operator=()</a>, <a class="el" href="IOBufQueue_8cpp_source.html#l00207">preallocateSlow()</a>, and <a class="el" href="IOBufQueue_8h_source.html#l00633">updateWritableTailCache()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/io/<a class="el" href="IOBufQueue_8h_source.html">IOBufQueue.h</a></li>
<li>proxygen/folly/folly/io/<a class="el" href="IOBufQueue_8cpp_source.html">IOBufQueue.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1IOBufQueue.html">IOBufQueue</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
