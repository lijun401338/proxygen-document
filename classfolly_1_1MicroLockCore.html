<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::MicroLockCore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1MicroLockCore.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classfolly_1_1MicroLockCore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::MicroLockCore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::MicroLockCore:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1MicroLockCore.png" usemap="#folly::MicroLockCore_map" alt=""/>
  <map id="folly::MicroLockCore_map" name="folly::MicroLockCore_map">
<area href="classfolly_1_1MicroLockBase.html" alt="folly::MicroLockBase&lt; MaxSpins, MaxYields &gt;" shape="rect" coords="0,56,277,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9cf7b1aa7101d67be42498d746e1b016"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#a9cf7b1aa7101d67be42498d746e1b016">unlock</a> (unsigned slot)</td></tr>
<tr class="separator:a9cf7b1aa7101d67be42498d746e1b016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd9d7efc6118975de60db897a127eac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#acbd9d7efc6118975de60db897a127eac">unlock</a> ()</td></tr>
<tr class="separator:acbd9d7efc6118975de60db897a127eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6253b8f99628c0ae6cc48a5cb1ec2cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#aa6253b8f99628c0ae6cc48a5cb1ec2cc">init</a> ()</td></tr>
<tr class="separator:aa6253b8f99628c0ae6cc48a5cb1ec2cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a74246f2e8eacd1f0e1e1620d1b5599dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">detail::Futex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#a74246f2e8eacd1f0e1e1620d1b5599dd">word</a> () const </td></tr>
<tr class="separator:a74246f2e8eacd1f0e1e1620d1b5599dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae24187437f1d1e78fcfc0dd9636d61dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#ae24187437f1d1e78fcfc0dd9636d61dd">baseShift</a> (unsigned slot) const </td></tr>
<tr class="separator:ae24187437f1d1e78fcfc0dd9636d61dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ed38cd97444ce8d283fb218853f2ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#ab8ed38cd97444ce8d283fb218853f2ee">heldBit</a> (unsigned slot) const </td></tr>
<tr class="separator:ab8ed38cd97444ce8d283fb218853f2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6049d635b992c2e41ce68c0924d3324e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#a6049d635b992c2e41ce68c0924d3324e">waitBit</a> (unsigned slot) const </td></tr>
<tr class="separator:a6049d635b992c2e41ce68c0924d3324e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a7d10117d0a4ddf06ee8fe16d254bb924"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#a7d10117d0a4ddf06ee8fe16d254bb924">lockSlowPath</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> oldWord, <a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">detail::Futex</a>&lt;&gt; *wordPtr, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> slotHeldBit, unsigned maxSpins, unsigned maxYields)</td></tr>
<tr class="separator:a7d10117d0a4ddf06ee8fe16d254bb924"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:abc42df8bd8a2c2c2a4f0e1d165d01720"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1MicroLockCore.html#abc42df8bd8a2c2c2a4f0e1d165d01720">lock_</a></td></tr>
<tr class="separator:abc42df8bd8a2c2c2a4f0e1d165d01720"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Tiny exclusive lock that packs four lock slots into a single byte. Each slot is an independent real, sleeping lock. The default lock and unlock functions operate on slot zero, which modifies only the low two bits of the host byte.</p>
<p>You should zero-initialize the bits of a MicroLock that you intend to use.</p>
<p>If you're not space-constrained, prefer std::mutex, which will likely be faster, since it has more than two bits of information to work with.</p>
<p>You are free to put a MicroLock in a union with some other object. If, for example, you want to use the bottom two bits of a pointer as a lock, you can put a MicroLock in a union with the pointer and limit yourself to MicroLock slot zero, which will use the two least-significant bits in the bottom byte.</p>
<p>(Note that such a union is safe only because MicroLock is based on a character type, and even under a strict interpretation of C++'s aliasing rules, character types may alias anything.)</p>
<p>MicroLock uses a dirty trick: it actually operates on the full 32-bit, four-byte-aligned bit of memory into which it is embedded. It never modifies bits outside the ones it's defined to modify, but it <em>accesses</em> all the bits in the 32-bit memory location for purposes of futex management.</p>
<p>The MaxSpins template parameter controls the number of times we spin trying to acquire the lock. MaxYields controls the number of times we call sched_yield; once we've tried to acquire the lock MaxSpins + MaxYields times, we sleep on the lock futex. By adjusting these parameters, you can make MicroLock behave as much or as little like a conventional spinlock as you'd like.</p>
<h2>Performance </h2>
<p>With the default template options, the timings for uncontended acquire-then-release come out as follows on Intel(R) Xeon(R) CPU E5-2660 0 @ 2.20GHz, in /opt, as of the master tree at Tue, 01 Mar 2016 19:48:15. </p><hr/>
 <h1>folly/test/SmallLocksBenchmark.cpp relative time/iter iters/s </h1>
<p>MicroSpinLockUncontendedBenchmark 13.46ns 74.28M PicoSpinLockUncontendedBenchmark 14.99ns 66.71M MicroLockUncontendedBenchmark 27.06ns 36.96M StdMutexUncontendedBenchmark 25.18ns 39.72M </p><h1>VirtualFunctionCall 1.72ns 579.78M </h1>
<p>(The virtual dispatch benchmark is provided for scale.)</p>
<p>While the uncontended case for MicroLock is competitive with the glibc 2.2.0 implementation of std::mutex, std::mutex is likely to be faster in the contended case, because we need to wake up all waiters when we release.</p>
<p>Make sure to benchmark your particular workload. </p>

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00099">99</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae24187437f1d1e78fcfc0dd9636d61dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned folly::MicroLockCore::baseShift </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00135">135</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>

<p>References <a class="el" href="Portability_8h_source.html#l00278">folly::kIsLittleEndian</a>, <a class="el" href="MicroLock_8h_source.html#l00105">lock_</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, and <a class="el" href="MicroLock_8h_source.html#l00129">word()</a>.</p>

<p>Referenced by <a class="el" href="MicroLock_8h_source.html#l00144">heldBit()</a>, and <a class="el" href="MicroLock_8h_source.html#l00148">waitBit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                                            {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  assert(slot &lt; CHAR_BIT / 2);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">unsigned</span> offset_bytes = (unsigned)((uintptr_t)&amp;<a class="code" href="classfolly_1_1MicroLockCore.html#abc42df8bd8a2c2c2a4f0e1d165d01720">lock_</a> - (uintptr_t)<a class="code" href="classfolly_1_1MicroLockCore.html#a74246f2e8eacd1f0e1e1620d1b5599dd">word</a>());</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">return</span> (</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordtype">unsigned</span>)(<a class="code" href="namespacefolly.html#a030c360b36c7ab96953178a977dce9f2">kIsLittleEndian</a> ? offset_bytes * CHAR_BIT + slot * 2 : CHAR_BIT * (<span class="keyword">sizeof</span>(<a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>) - offset_bytes - 1) + slot * 2);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="ttc" id="namespacefolly_html_a030c360b36c7ab96953178a977dce9f2"><div class="ttname"><a href="namespacefolly.html#a030c360b36c7ab96953178a977dce9f2">folly::kIsLittleEndian</a></div><div class="ttdeci">constexpr auto kIsLittleEndian</div><div class="ttdef"><b>Definition:</b> <a href="Portability_8h_source.html#l00278">Portability.h:278</a></div></div>
<div class="ttc" id="classfolly_1_1MicroLockCore_html_abc42df8bd8a2c2c2a4f0e1d165d01720"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#abc42df8bd8a2c2c2a4f0e1d165d01720">folly::MicroLockCore::lock_</a></div><div class="ttdeci">uint8_t lock_</div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00105">MicroLock.h:105</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1MicroLockCore_html_a74246f2e8eacd1f0e1e1620d1b5599dd"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#a74246f2e8eacd1f0e1e1620d1b5599dd">folly::MicroLockCore::word</a></div><div class="ttdeci">detail::Futex * word() const </div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00129">MicroLock.h:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab8ed38cd97444ce8d283fb218853f2ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> folly::MicroLockCore::heldBit </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00144">144</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>

<p>References <a class="el" href="MicroLock_8h_source.html#l00135">baseShift()</a>.</p>

<p>Referenced by <a class="el" href="MicroLock_8h_source.html#l00210">folly::MicroLockBase&lt; MaxSpins, MaxYields &gt;::lock()</a>, <a class="el" href="MicroLock_8h_source.html#l00183">folly::MicroLockBase&lt; MaxSpins, MaxYields &gt;::try_lock()</a>, and <a class="el" href="MicroLock_8h_source.html#l00152">unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                          {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">return</span> 1U &lt;&lt; (<a class="code" href="classfolly_1_1MicroLockCore.html#ae24187437f1d1e78fcfc0dd9636d61dd">baseShift</a>(slot) + 0);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="ttc" id="classfolly_1_1MicroLockCore_html_ae24187437f1d1e78fcfc0dd9636d61dd"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#ae24187437f1d1e78fcfc0dd9636d61dd">folly::MicroLockCore::baseShift</a></div><div class="ttdeci">uint32_t baseShift(unsigned slot) const </div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00135">MicroLock.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6253b8f99628c0ae6cc48a5cb1ec2cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::MicroLockCore::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00124">124</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                     {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="classfolly_1_1MicroLockCore.html#abc42df8bd8a2c2c2a4f0e1d165d01720">lock_</a> = 0;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MicroLockCore_html_abc42df8bd8a2c2c2a4f0e1d165d01720"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#abc42df8bd8a2c2c2a4f0e1d165d01720">folly::MicroLockCore::lock_</a></div><div class="ttdeci">uint8_t lock_</div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00105">MicroLock.h:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d10117d0a4ddf06ee8fe16d254bb924"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::MicroLockCore::lockSlowPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>oldWord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">detail::Futex</a>&lt;&gt; *&#160;</td>
          <td class="paramname"><em>wordPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>slotHeldBit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>maxSpins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>maxYields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8cpp_source.html#l00024">24</a> of file <a class="el" href="MicroLock_8cpp_source.html">MicroLock.cpp</a>.</p>

<p>References <a class="el" href="Asm_8h_source.html#l00037">folly::asm_volatile_pause()</a>, <a class="el" href="Futex-inl_8h_source.html#l00100">folly::detail::futexWait()</a>, <a class="el" href="AeadCookieCipherTest_8cpp_source.html#l00024">retry</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, and <a class="el" href="FiberManagerInternal_8h_source.html#l00592">folly::fibers::yield()</a>.</p>

<p>Referenced by <a class="el" href="MicroLock_8h_source.html#l00210">folly::MicroLockBase&lt; MaxSpins, MaxYields &gt;::lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                        {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> newWord;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keywordtype">unsigned</span> spins = 0;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> slotWaitBit = slotHeldBit &lt;&lt; 1;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> needWaitBit = 0;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<a class="code" href="AeadCookieCipherTest_8cpp.html#a230eaef0210d00afd6402f10d2019a60">retry</a>:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">if</span> ((oldWord &amp; slotHeldBit) != 0) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    ++spins;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">if</span> (spins &gt; maxSpins + maxYields) {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="comment">// Somebody appears to have the lock.  Block waiting for the</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="comment">// holder to unlock the lock.  We set heldbit(slot) so that the</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <span class="comment">// lock holder knows to FUTEX_WAKE us.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      newWord = oldWord | slotWaitBit;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <span class="keywordflow">if</span> (newWord != oldWord) {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">if</span> (!wordPtr-&gt;compare_exchange_weak(</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                oldWord,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                newWord,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                std::memory_order_relaxed,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                std::memory_order_relaxed)) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;          <span class="keywordflow">goto</span> <a class="code" href="AeadCookieCipherTest_8cpp.html#a230eaef0210d00afd6402f10d2019a60">retry</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <a class="code" href="namespacefolly_1_1detail.html#ac38f887dc2a632a181b751b11ebae575">detail::futexWait</a>(wordPtr, newWord, slotHeldBit);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      needWaitBit = slotWaitBit;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spins &gt; maxSpins) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <span class="comment">// sched_yield(), but more portable</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <a class="code" href="namespacefolly_1_1fibers.html#ad9af2bea32bcaa0b71686fc62475c2a8">std::this_thread::yield</a>();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <a class="code" href="namespacefolly.html#aaf13bc11e412f3e0899525ee0eef1443">folly::asm_volatile_pause</a>();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    oldWord = wordPtr-&gt;load(std::memory_order_relaxed);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">goto</span> <a class="code" href="AeadCookieCipherTest_8cpp.html#a230eaef0210d00afd6402f10d2019a60">retry</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  newWord = oldWord | slotHeldBit | needWaitBit;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span> (!wordPtr-&gt;compare_exchange_weak(</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;          oldWord,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;          newWord,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;          std::memory_order_acquire,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;          std::memory_order_relaxed)) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">goto</span> <a class="code" href="AeadCookieCipherTest_8cpp.html#a230eaef0210d00afd6402f10d2019a60">retry</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="ttc" id="AeadCookieCipherTest_8cpp_html_a230eaef0210d00afd6402f10d2019a60"><div class="ttname"><a href="AeadCookieCipherTest_8cpp.html#a230eaef0210d00afd6402f10d2019a60">retry</a></div><div class="ttdeci">static constexpr StringPiece retry</div><div class="ttdef"><b>Definition:</b> <a href="AeadCookieCipherTest_8cpp_source.html#l00024">AeadCookieCipherTest.cpp:24</a></div></div>
<div class="ttc" id="namespacefolly_1_1fibers_html_ad9af2bea32bcaa0b71686fc62475c2a8"><div class="ttname"><a href="namespacefolly_1_1fibers.html#ad9af2bea32bcaa0b71686fc62475c2a8">folly::fibers::yield</a></div><div class="ttdeci">void yield()</div><div class="ttdef"><b>Definition:</b> <a href="FiberManagerInternal_8h_source.html#l00592">FiberManagerInternal.h:592</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_ac38f887dc2a632a181b751b11ebae575"><div class="ttname"><a href="namespacefolly_1_1detail.html#ac38f887dc2a632a181b751b11ebae575">folly::detail::futexWait</a></div><div class="ttdeci">FutexResult futexWait(const Futex *futex, uint32_t expected, uint32_t waitMask)</div><div class="ttdef"><b>Definition:</b> <a href="Futex-inl_8h_source.html#l00100">Futex-inl.h:100</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="namespacefolly_html_aaf13bc11e412f3e0899525ee0eef1443"><div class="ttname"><a href="namespacefolly.html#aaf13bc11e412f3e0899525ee0eef1443">folly::asm_volatile_pause</a></div><div class="ttdeci">void asm_volatile_pause()</div><div class="ttdef"><b>Definition:</b> <a href="Asm_8h_source.html#l00037">Asm.h:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9cf7b1aa7101d67be42498d746e1b016"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::MicroLockCore::unlock </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00152">152</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>

<p>References <a class="el" href="Futex-inl_8h_source.html#l00107">folly::detail::futexWake()</a>, <a class="el" href="MicroLock_8h_source.html#l00144">heldBit()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>, <a class="el" href="MicroLock_8h_source.html#l00148">waitBit()</a>, and <a class="el" href="MicroLock_8h_source.html#l00129">word()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                        {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  detail::Futex&lt;&gt;* wordPtr = <a class="code" href="classfolly_1_1MicroLockCore.html#a74246f2e8eacd1f0e1e1620d1b5599dd">word</a>();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> oldWord;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> newWord;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  oldWord = wordPtr-&gt;load(std::memory_order_relaxed);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    assert(oldWord &amp; <a class="code" href="classfolly_1_1MicroLockCore.html#ab8ed38cd97444ce8d283fb218853f2ee">heldBit</a>(slot));</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    newWord = oldWord &amp; ~(<a class="code" href="classfolly_1_1MicroLockCore.html#ab8ed38cd97444ce8d283fb218853f2ee">heldBit</a>(slot) | <a class="code" href="classfolly_1_1MicroLockCore.html#a6049d635b992c2e41ce68c0924d3324e">waitBit</a>(slot));</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  } <span class="keywordflow">while</span> (!wordPtr-&gt;compare_exchange_weak(</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      oldWord, newWord, std::memory_order_release, std::memory_order_relaxed));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (oldWord &amp; <a class="code" href="classfolly_1_1MicroLockCore.html#a6049d635b992c2e41ce68c0924d3324e">waitBit</a>(slot)) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">detail::futexWake</a>(wordPtr, 1, <a class="code" href="classfolly_1_1MicroLockCore.html#ab8ed38cd97444ce8d283fb218853f2ee">heldBit</a>(slot));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div><div class="ttc" id="classfolly_1_1MicroLockCore_html_ab8ed38cd97444ce8d283fb218853f2ee"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#ab8ed38cd97444ce8d283fb218853f2ee">folly::MicroLockCore::heldBit</a></div><div class="ttdeci">uint32_t heldBit(unsigned slot) const </div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00144">MicroLock.h:144</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
<div class="ttc" id="classfolly_1_1MicroLockCore_html_a74246f2e8eacd1f0e1e1620d1b5599dd"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#a74246f2e8eacd1f0e1e1620d1b5599dd">folly::MicroLockCore::word</a></div><div class="ttdeci">detail::Futex * word() const </div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00129">MicroLock.h:129</a></div></div>
<div class="ttc" id="classfolly_1_1MicroLockCore_html_a6049d635b992c2e41ce68c0924d3324e"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#a6049d635b992c2e41ce68c0924d3324e">folly::MicroLockCore::waitBit</a></div><div class="ttdeci">uint32_t waitBit(unsigned slot) const </div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00148">MicroLock.h:148</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_aeba3f67ff8fb877e9e460b417afdf82f"><div class="ttname"><a href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">folly::detail::futexWake</a></div><div class="ttdeci">int futexWake(const Futex *futex, int count, uint32_t wakeMask)</div><div class="ttdef"><b>Definition:</b> <a href="Futex-inl_8h_source.html#l00107">Futex-inl.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acbd9d7efc6118975de60db897a127eac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::MicroLockCore::unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00120">120</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                       {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="classfolly_1_1MicroLockCore.html#acbd9d7efc6118975de60db897a127eac">unlock</a>(0);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div><div class="ttc" id="classfolly_1_1MicroLockCore_html_acbd9d7efc6118975de60db897a127eac"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#acbd9d7efc6118975de60db897a127eac">folly::MicroLockCore::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00120">MicroLock.h:120</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6049d635b992c2e41ce68c0924d3324e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> folly::MicroLockCore::waitBit </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00148">148</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>

<p>References <a class="el" href="MicroLock_8h_source.html#l00135">baseShift()</a>.</p>

<p>Referenced by <a class="el" href="MicroLock_8h_source.html#l00210">folly::MicroLockBase&lt; MaxSpins, MaxYields &gt;::lock()</a>, and <a class="el" href="MicroLock_8h_source.html#l00152">unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                                          {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">return</span> 1U &lt;&lt; (<a class="code" href="classfolly_1_1MicroLockCore.html#ae24187437f1d1e78fcfc0dd9636d61dd">baseShift</a>(slot) + 1);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div><div class="ttc" id="classfolly_1_1MicroLockCore_html_ae24187437f1d1e78fcfc0dd9636d61dd"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#ae24187437f1d1e78fcfc0dd9636d61dd">folly::MicroLockCore::baseShift</a></div><div class="ttdeci">uint32_t baseShift(unsigned slot) const </div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00135">MicroLock.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a74246f2e8eacd1f0e1e1620d1b5599dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">detail::Futex</a> * folly::MicroLockCore::word </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00129">129</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>

<p>References <a class="el" href="MicroLock_8h_source.html#l00105">lock_</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>.</p>

<p>Referenced by <a class="el" href="MicroLock_8h_source.html#l00135">baseShift()</a>, <a class="el" href="MicroLock_8h_source.html#l00210">folly::MicroLockBase&lt; MaxSpins, MaxYields &gt;::lock()</a>, <a class="el" href="MicroLock_8h_source.html#l00183">folly::MicroLockBase&lt; MaxSpins, MaxYields &gt;::try_lock()</a>, and <a class="el" href="MicroLock_8h_source.html#l00152">unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                                {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  uintptr_t lockptr = (uintptr_t)&amp;<a class="code" href="classfolly_1_1MicroLockCore.html#abc42df8bd8a2c2c2a4f0e1d165d01720">lock_</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  lockptr &amp;= ~(<span class="keyword">sizeof</span>(<a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>) - 1);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">return</span> (detail::Futex&lt;&gt;*)lockptr;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="ttc" id="classfolly_1_1MicroLockCore_html_abc42df8bd8a2c2c2a4f0e1d165d01720"><div class="ttname"><a href="classfolly_1_1MicroLockCore.html#abc42df8bd8a2c2c2a4f0e1d165d01720">folly::MicroLockCore::lock_</a></div><div class="ttdeci">uint8_t lock_</div><div class="ttdef"><b>Definition:</b> <a href="MicroLock_8h_source.html#l00105">MicroLock.h:105</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="abc42df8bd8a2c2c2a4f0e1d165d01720"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> folly::MicroLockCore::lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MicroLock_8h_source.html#l00105">105</a> of file <a class="el" href="MicroLock_8h_source.html">MicroLock.h</a>.</p>

<p>Referenced by <a class="el" href="MicroLock_8h_source.html#l00135">baseShift()</a>, and <a class="el" href="MicroLock_8h_source.html#l00129">word()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/<a class="el" href="MicroLock_8h_source.html">MicroLock.h</a></li>
<li>proxygen/folly/folly/<a class="el" href="MicroLock_8cpp_source.html">MicroLock.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1MicroLockCore.html">MicroLockCore</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
