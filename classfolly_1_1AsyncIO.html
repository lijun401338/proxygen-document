<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::AsyncIO Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1AsyncIO.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1AsyncIO-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::AsyncIO Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::AsyncIO:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1AsyncIO.png" usemap="#folly::AsyncIO_map" alt=""/>
  <map id="folly::AsyncIO_map" name="folly::AsyncIO_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1c4850a2b480f4b088e672e6959b7e10"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10">PollMode</a> { <a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10a4df0e1c716f5530f7a6184e5f3525f5b">NOT_POLLABLE</a>, 
<a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca">POLLABLE</a>
 }</td></tr>
<tr class="separator:a1c4850a2b480f4b088e672e6959b7e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19334f4d5dc3ab3b006a617f7652f564"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfolly_1_1AsyncIOOp.html">AsyncIOOp</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a></td></tr>
<tr class="separator:a19334f4d5dc3ab3b006a617f7652f564"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a97efb3d5c90b06cde50e7ba3daf1ab9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a97efb3d5c90b06cde50e7ba3daf1ab9a">AsyncIO</a> (size_t <a class="el" href="classfolly_1_1AsyncIO.html#a019f1c010c8614618c2be70aa2ac8bb9">capacity</a>, <a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10">PollMode</a> pollMode=<a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10a4df0e1c716f5530f7a6184e5f3525f5b">NOT_POLLABLE</a>)</td></tr>
<tr class="separator:a97efb3d5c90b06cde50e7ba3daf1ab9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6dac454605413b80e6d6b7c221f349"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a6a6dac454605413b80e6d6b7c221f349">~AsyncIO</a> ()</td></tr>
<tr class="separator:a6a6dac454605413b80e6d6b7c221f349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e81f5ba04805efc40808ae3411a412"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> ** &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#ae5e81f5ba04805efc40808ae3411a412">wait</a> (size_t minRequests)</td></tr>
<tr class="separator:ae5e81f5ba04805efc40808ae3411a412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5028c3a158d947d27d2f2f9a93b7ed8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> ** &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a5028c3a158d947d27d2f2f9a93b7ed8a">cancel</a> ()</td></tr>
<tr class="separator:a5028c3a158d947d27d2f2f9a93b7ed8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a959cf916a3fa064bbc261dd5d261f3"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a9a959cf916a3fa064bbc261dd5d261f3">pending</a> () const </td></tr>
<tr class="separator:a9a959cf916a3fa064bbc261dd5d261f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a019f1c010c8614618c2be70aa2ac8bb9"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a019f1c010c8614618c2be70aa2ac8bb9">capacity</a> () const </td></tr>
<tr class="separator:a019f1c010c8614618c2be70aa2ac8bb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a282414f23bdf563859125ecd778c39bc"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a282414f23bdf563859125ecd778c39bc">totalSubmits</a> () const </td></tr>
<tr class="separator:a282414f23bdf563859125ecd778c39bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9bfd559c4f9e4590785838d01aa2115"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#ab9bfd559c4f9e4590785838d01aa2115">pollFd</a> () const </td></tr>
<tr class="separator:ab9bfd559c4f9e4590785838d01aa2115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa347b45604067906da3a9dbbbb2ce3e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> ** &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#aa347b45604067906da3a9dbbbb2ce3e4">pollCompleted</a> ()</td></tr>
<tr class="separator:aa347b45604067906da3a9dbbbb2ce3e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7422fac8a604012bedb2a0d340cf724b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a7422fac8a604012bedb2a0d340cf724b">submit</a> (<a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> *op)</td></tr>
<tr class="separator:a7422fac8a604012bedb2a0d340cf724b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ac2434b5248a40b143a7963c5f55cef34"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34">WaitType</a> { <a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">WaitType::COMPLETE</a>, 
<a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36">WaitType::CANCEL</a>
 }</td></tr>
<tr class="separator:ac2434b5248a40b143a7963c5f55cef34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af022b826b6794d20084c6e8ad6edb398"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#af022b826b6794d20084c6e8ad6edb398">decrementPending</a> ()</td></tr>
<tr class="separator:af022b826b6794d20084c6e8ad6edb398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaf8c429f0285c5db7de1dd58127505f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#acaf8c429f0285c5db7de1dd58127505f">initializeContext</a> ()</td></tr>
<tr class="separator:acaf8c429f0285c5db7de1dd58127505f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac166190fef41f923a4afbe77e7c93849"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">AsyncIO::Op</a> ** &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#ac166190fef41f923a4afbe77e7c93849">doWait</a> (<a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34">WaitType</a> <a class="el" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a>, size_t minRequests, size_t maxRequests, std::vector&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> * &gt; &amp;result)</td></tr>
<tr class="separator:ac166190fef41f923a4afbe77e7c93849"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a30b66878779c1ac74c71b737fb58461e"><td class="memItemLeft" align="right" valign="top">io_context_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a30b66878779c1ac74c71b737fb58461e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7db31fc2976933500ac43df299a78c23"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a7db31fc2976933500ac43df299a78c23">ctxSet_</a> {false}</td></tr>
<tr class="separator:a7db31fc2976933500ac43df299a78c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a0f103e5bce00de60dfbd2132cc275"><td class="memItemLeft" align="right" valign="top"><a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a44a0f103e5bce00de60dfbd2132cc275">initMutex_</a></td></tr>
<tr class="separator:a44a0f103e5bce00de60dfbd2132cc275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30eb4b2bfee87705e3da77c8a6c3f521"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a> {0}</td></tr>
<tr class="separator:a30eb4b2bfee87705e3da77c8a6c3f521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8041e0e5c1db092eb0fdd77863088e6"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#ab8041e0e5c1db092eb0fdd77863088e6">submitted_</a> {0}</td></tr>
<tr class="separator:ab8041e0e5c1db092eb0fdd77863088e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2b43fc8d34dbdde5c4774413d82e28b"><td class="memItemLeft" align="right" valign="top">const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a></td></tr>
<tr class="separator:aa2b43fc8d34dbdde5c4774413d82e28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad956b57e2d3b5d7d5061b47cb0eee8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a> {-1}</td></tr>
<tr class="separator:aaad956b57e2d3b5d7d5061b47cb0eee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a104cbc1e6b5b5a42d9bbdb09be3f63d7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a104cbc1e6b5b5a42d9bbdb09be3f63d7">completed_</a></td></tr>
<tr class="separator:a104cbc1e6b5b5a42d9bbdb09be3f63d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c03a3d644dd2acb22b3a1c660cd08cf"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncIO.html#a3c03a3d644dd2acb22b3a1c660cd08cf">canceled_</a></td></tr>
<tr class="separator:a3c03a3d644dd2acb22b3a1c660cd08cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>C++ interface around Linux Async IO. </p>

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00125">125</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a19334f4d5dc3ab3b006a617f7652f564"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfolly_1_1AsyncIOOp.html">AsyncIOOp</a> <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">folly::AsyncIO::Op</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00127">127</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a1c4850a2b480f4b088e672e6959b7e10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10">folly::AsyncIO::PollMode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a1c4850a2b480f4b088e672e6959b7e10a4df0e1c716f5530f7a6184e5f3525f5b"></a>NOT_POLLABLE&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca"></a>POLLABLE&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00129">129</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10a4df0e1c716f5530f7a6184e5f3525f5b">NOT_POLLABLE</a>,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca">POLLABLE</a>,</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  };</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca">folly::AsyncIO::POLLABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00131">AsyncIO.h:131</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a1c4850a2b480f4b088e672e6959b7e10a4df0e1c716f5530f7a6184e5f3525f5b"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10a4df0e1c716f5530f7a6184e5f3525f5b">folly::AsyncIO::NOT_POLLABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00130">AsyncIO.h:130</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac2434b5248a40b143a7963c5f55cef34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34">folly::AsyncIO::WaitType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba"></a>COMPLETE&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36"></a>CANCEL&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00218">218</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{ COMPLETE, <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba2027c027133e22c8929e2874dc44dd36">CANCEL</a> };</div><div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9ba2027c027133e22c8929e2874dc44dd36"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba2027c027133e22c8929e2874dc44dd36">proxygen::ErrorCode::CANCEL</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a97efb3d5c90b06cde50e7ba3daf1ab9a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncIO::AsyncIO </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10">PollMode</a>&#160;</td>
          <td class="paramname"><em>pollMode</em> = <code><a class="el" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10a4df0e1c716f5530f7a6184e5f3525f5b">NOT_POLLABLE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create an <a class="el" href="classfolly_1_1AsyncIO.html">AsyncIO</a> context capable of holding at most 'capacity' pending requests at the same time. As requests complete, others can be scheduled, as long as this limit is not exceeded.</p>
<p>Note: the maximum number of allowed concurrent requests is controlled by the fs.aio-max-nr sysctl, the default value is usually 64K.</p>
<p>If pollMode is POLLABLE, <a class="el" href="classfolly_1_1AsyncIO.html#ab9bfd559c4f9e4590785838d01aa2115">pollFd()</a> will return a file descriptor that can be passed to poll / epoll / select and will become readable when any IOs on this <a class="el" href="classfolly_1_1AsyncIO.html">AsyncIO</a> have completed. If you do this, you must use <a class="el" href="classfolly_1_1AsyncIO.html#aa347b45604067906da3a9dbbbb2ce3e4">pollCompleted()</a> instead of <a class="el" href="classfolly_1_1AsyncIO.html#ae5e81f5ba04805efc40808ae3411a412">wait()</a> &ndash; do not read from the <a class="el" href="classfolly_1_1AsyncIO.html#ab9bfd559c4f9e4590785838d01aa2115">pollFd()</a> file descriptor directly.</p>
<p>You may use the same <a class="el" href="classfolly_1_1AsyncIO.html">AsyncIO</a> object from multiple threads, as long as there is only one concurrent caller of <a class="el" href="classfolly_1_1AsyncIO.html#ae5e81f5ba04805efc40808ae3411a412">wait()</a> / <a class="el" href="classfolly_1_1AsyncIO.html#aa347b45604067906da3a9dbbbb2ce3e4">pollCompleted()</a> / <a class="el" href="classfolly_1_1AsyncIO.html#a5028c3a158d947d27d2f2f9a93b7ed8a">cancel()</a> (perhaps by always calling it from the same thread, or by providing appropriate mutual exclusion). In this case, <a class="el" href="classfolly_1_1AsyncIO.html#a9a959cf916a3fa064bbc261dd5d261f3">pending()</a> returns a snapshot of the current number of pending requests. </p>

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00110">110</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="AsyncIO_8h_source.html#l00231">capacity_</a>, <a class="el" href="folly_2folly_2Exception_8h_source.html#l00101">folly::checkUnixError()</a>, <a class="el" href="AsyncIO_8h_source.html#l00233">completed_</a>, <a class="el" href="EventFDWrapper_8h_source.html#l00067">EFD_NONBLOCK</a>, <a class="el" href="EventFDWrapper_8h_source.html#l00074">eventfd</a>, <a class="el" href="AsyncIO_8h_source.html#l00131">POLLABLE</a>, and <a class="el" href="AsyncIO_8h_source.html#l00232">pollFd_</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                                   : <a class="code" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a>(<a class="code" href="classfolly_1_1AsyncIO.html#a019f1c010c8614618c2be70aa2ac8bb9">capacity</a>) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  CHECK_GT(<a class="code" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a>, 0);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classfolly_1_1AsyncIO.html#a104cbc1e6b5b5a42d9bbdb09be3f63d7">completed_</a>.reserve(<a class="code" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">if</span> (pollMode == <a class="code" href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca">POLLABLE</a>) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a> = <a class="code" href="EventFDWrapper_8h.html#a3d97a6048e1ab7d407c1936ecf3cadc8">eventfd</a>(0, <a class="code" href="EventFDWrapper_8h.html#a9e93d8eae633734dfeb29e24a1f3a7c0a06cd6c7f9a990f31d639e77d116deae6">EFD_NONBLOCK</a>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="namespacefolly.html#af6244d72aa4bdeb215d938ff5f56a6e5">checkUnixError</a>(<a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a>, <span class="stringliteral">&quot;AsyncIO: eventfd creation failed&quot;</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a1c4850a2b480f4b088e672e6959b7e10ae73a543b84a099c019b62b1de439e1ca">folly::AsyncIO::POLLABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00131">AsyncIO.h:131</a></div></div>
<div class="ttc" id="EventFDWrapper_8h_html_a3d97a6048e1ab7d407c1936ecf3cadc8"><div class="ttname"><a href="EventFDWrapper_8h.html#a3d97a6048e1ab7d407c1936ecf3cadc8">eventfd</a></div><div class="ttdeci">#define eventfd(initval, flags)</div><div class="ttdef"><b>Definition:</b> <a href="EventFDWrapper_8h_source.html#l00074">EventFDWrapper.h:74</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a104cbc1e6b5b5a42d9bbdb09be3f63d7"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a104cbc1e6b5b5a42d9bbdb09be3f63d7">folly::AsyncIO::completed_</a></div><div class="ttdeci">std::vector&lt; Op * &gt; completed_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00233">AsyncIO.h:233</a></div></div>
<div class="ttc" id="namespacefolly_html_af6244d72aa4bdeb215d938ff5f56a6e5"><div class="ttname"><a href="namespacefolly.html#af6244d72aa4bdeb215d938ff5f56a6e5">folly::checkUnixError</a></div><div class="ttdeci">void checkUnixError(ssize_t ret, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="folly_2folly_2Exception_8h_source.html#l00101">Exception.h:101</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aa2b43fc8d34dbdde5c4774413d82e28b"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">folly::AsyncIO::capacity_</a></div><div class="ttdeci">const size_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00231">AsyncIO.h:231</a></div></div>
<div class="ttc" id="EventFDWrapper_8h_html_a9e93d8eae633734dfeb29e24a1f3a7c0a06cd6c7f9a990f31d639e77d116deae6"><div class="ttname"><a href="EventFDWrapper_8h.html#a9e93d8eae633734dfeb29e24a1f3a7c0a06cd6c7f9a990f31d639e77d116deae6">EFD_NONBLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="EventFDWrapper_8h_source.html#l00067">EventFDWrapper.h:67</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aaad956b57e2d3b5d7d5061b47cb0eee8"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">folly::AsyncIO::pollFd_</a></div><div class="ttdeci">int pollFd_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00232">AsyncIO.h:232</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a019f1c010c8614618c2be70aa2ac8bb9"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a019f1c010c8614618c2be70aa2ac8bb9">folly::AsyncIO::capacity</a></div><div class="ttdeci">size_t capacity() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00181">AsyncIO.h:181</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6a6dac454605413b80e6d6b7c221f349"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncIO::~AsyncIO </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00119">119</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="NetOps_8cpp_source.html#l00090">folly::netops::close()</a>, <a class="el" href="AsyncIO_8h_source.html#l00225">ctx_</a>, <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="AsyncIO_8h_source.html#l00229">pending_</a>, and <a class="el" href="AsyncIO_8h_source.html#l00232">pollFd_</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                  {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  CHECK_EQ(<a class="code" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a>, 0);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">int</span> rc = io_queue_release(<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    CHECK_EQ(rc, 0) &lt;&lt; <span class="stringliteral">&quot;io_queue_release: &quot;</span> &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(-rc);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a> != -1) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    CHECK_ERR(<a class="code" href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">close</a>(<a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a>));</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a30eb4b2bfee87705e3da77c8a6c3f521"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">folly::AsyncIO::pending_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00229">AsyncIO.h:229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30b66878779c1ac74c71b737fb58461e"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">folly::AsyncIO::ctx_</a></div><div class="ttdeci">io_context_t ctx_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00225">AsyncIO.h:225</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aaad956b57e2d3b5d7d5061b47cb0eee8"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">folly::AsyncIO::pollFd_</a></div><div class="ttdeci">int pollFd_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00232">AsyncIO.h:232</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a27d9201e6386937ffded3bfd86f995aa"><div class="ttname"><a href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">folly::netops::close</a></div><div class="ttdeci">int close(NetworkSocket s)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00090">NetOps.cpp:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a5028c3a158d947d27d2f2f9a93b7ed8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">AsyncIO::Op</a> ** &gt; folly::AsyncIO::cancel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel all pending requests and return them; the returned range is valid until the next call to <a class="el" href="classfolly_1_1AsyncIO.html#a5028c3a158d947d27d2f2f9a93b7ed8a">cancel()</a>. </p>

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00197">197</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36">CANCEL</a>, <a class="el" href="AsyncIO_8h_source.html#l00234">canceled_</a>, <a class="el" href="AsyncIO_8h_source.html#l00225">ctx_</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00226">doWait()</a>, and <a class="el" href="AsyncIO_8h_source.html#l00229">pending_</a>.</p>

<p>Referenced by <a class="el" href="AsyncIOTest_8cpp_source.html#l00400">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                   {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  CHECK(<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keyword">auto</span> p = <a class="code" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a>.load(std::memory_order_acquire);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncIO.html#ac166190fef41f923a4afbe77e7c93849">doWait</a>(<a class="code" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36">WaitType::CANCEL</a>, p, p, <a class="code" href="classfolly_1_1AsyncIO.html#a3c03a3d644dd2acb22b3a1c660cd08cf">canceled_</a>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a30eb4b2bfee87705e3da77c8a6c3f521"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">folly::AsyncIO::pending_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00229">AsyncIO.h:229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a3c03a3d644dd2acb22b3a1c660cd08cf"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a3c03a3d644dd2acb22b3a1c660cd08cf">folly::AsyncIO::canceled_</a></div><div class="ttdeci">std::vector&lt; Op * &gt; canceled_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00234">AsyncIO.h:234</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30b66878779c1ac74c71b737fb58461e"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">folly::AsyncIO::ctx_</a></div><div class="ttdeci">io_context_t ctx_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00225">AsyncIO.h:225</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac166190fef41f923a4afbe77e7c93849"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac166190fef41f923a4afbe77e7c93849">folly::AsyncIO::doWait</a></div><div class="ttdeci">Range&lt; AsyncIO::Op ** &gt; doWait(WaitType type, size_t minRequests, size_t maxRequests, std::vector&lt; Op * &gt; &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8cpp_source.html#l00226">AsyncIO.cpp:226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36">folly::AsyncIO::WaitType::CANCEL</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a019f1c010c8614618c2be70aa2ac8bb9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncIO::capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the maximum number of requests that can be kept outstanding at any one time. </p>

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00181">181</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00295">folly::AsyncIOQueue::maybeDequeue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                          {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncIO_html_aa2b43fc8d34dbdde5c4774413d82e28b"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">folly::AsyncIO::capacity_</a></div><div class="ttdeci">const size_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00231">AsyncIO.h:231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af022b826b6794d20084c6e8ad6edb398"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncIO::decrementPending </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00130">130</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="AsyncIO_8h_source.html#l00229">pending_</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00226">doWait()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00164">submit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                               {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keyword">auto</span> p = <a class="code" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a>.fetch_add(-1, std::memory_order_acq_rel);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  DCHECK_GE(p, 1);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a30eb4b2bfee87705e3da77c8a6c3f521"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">folly::AsyncIO::pending_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00229">AsyncIO.h:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac166190fef41f923a4afbe77e7c93849"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">AsyncIO::Op</a> ** &gt; folly::AsyncIO::doWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34">WaitType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>minRequests</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxRequests</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00226">226</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="AsyncIO_8cpp_source.html#l00067">folly::AsyncIOOp::cancel()</a>, <a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36">CANCEL</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00058">folly::AsyncIOOp::complete()</a>, <a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">COMPLETE</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="AsyncIO_8h_source.html#l00225">ctx_</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00130">decrementPending()</a>, <a class="el" href="String_8cpp_source.html#l00463">folly::errnoStr()</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">i</a>, <a class="el" href="AsyncIO_8h_source.html#l00114">folly::AsyncIOOp::iocb_</a>, and <a class="el" href="Range_8h_source.html#l01114">folly::range()</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00197">cancel()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00203">pollCompleted()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00189">wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                            {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  io_event events[maxRequests];</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// Unfortunately, Linux AIO doesn&#39;t implement io_cancel, so even for</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// WaitType::CANCEL we have to wait for IO completion.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a> = 0;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="comment">// GOTCHA: io_getevents() may returns less than min_nr results if</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="comment">// interrupted after some events have been read (if before, -EINTR</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="comment">// is returned).</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      ret = io_getevents(</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;          minRequests - count,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          maxRequests - count,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          events + count,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          <span class="comment">/* timeout */</span> <span class="keyword">nullptr</span>); <span class="comment">// wait forever</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    } <span class="keywordflow">while</span> (ret == -EINTR);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Check as may not be able to recover without leaking events.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    CHECK_GE(ret, 0) &lt;&lt; <span class="stringliteral">&quot;AsyncIO: io_getevents failed with error &quot;</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                     &lt;&lt; <a class="code" href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">errnoStr</a>(-ret);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    count += ret;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  } <span class="keywordflow">while</span> (count &lt; minRequests);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  DCHECK_LE(count, maxRequests);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  result.clear();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = 0; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> &lt; <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>; ++<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    DCHECK(events[<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>].obj);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a>* <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html">op</a> = boost::intrusive::get_parent_from_member(</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        events[<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>].obj, &amp;<a class="code" href="classfolly_1_1AsyncIOOp.html#a797543cac989ed05425beb41825276f5">AsyncIOOp::iocb_</a>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="classfolly_1_1AsyncIO.html#af022b826b6794d20084c6e8ad6edb398">decrementPending</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a>) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">WaitType::COMPLETE</a>:</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        op-&gt;complete(events[<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>].res);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36">WaitType::CANCEL</a>:</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        op-&gt;cancel();</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    result.push_back(op);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefolly.html#a79a54cd1a19a22878c86be5f90a33643">range</a>(result);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a19334f4d5dc3ab3b006a617f7652f564"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">folly::AsyncIO::Op</a></div><div class="ttdeci">AsyncIOOp Op</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00127">AsyncIO.h:127</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_html_a7e98b8a17c0aad30ba64d47b74e2a6c1"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2test_2gtest__output__test__golden__lin_8txt_source.html#l00083">gtest_output_test_golden_lin.txt:83</a></div></div>
<div class="ttc" id="ClientProtocol_8cpp_html_afb6f25e8ca4d7adb175ad413430bbb90"><div class="ttname"><a href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a></div><div class="ttdeci">PskType type</div><div class="ttdef"><b>Definition:</b> <a href="ClientProtocol_8cpp_source.html#l00777">ClientProtocol.cpp:777</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30b66878779c1ac74c71b737fb58461e"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">folly::AsyncIO::ctx_</a></div><div class="ttdeci">io_context_t ctx_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00225">AsyncIO.h:225</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">folly::AsyncIO::WaitType::COMPLETE</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_1_1operators_html"><div class="ttname"><a href="namespacefolly_1_1pushmi_1_1operators.html">folly::pushmi::operators</a></div><div class="ttdef"><b>Definition:</b> <a href="bulk_8h_source.html#l00023">bulk.h:23</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIOOp_html_a797543cac989ed05425beb41825276f5"><div class="ttname"><a href="classfolly_1_1AsyncIOOp.html#a797543cac989ed05425beb41825276f5">folly::AsyncIOOp::iocb_</a></div><div class="ttdeci">iocb iocb_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00114">AsyncIO.h:114</a></div></div>
<div class="ttc" id="namespacefolly_html_a79a54cd1a19a22878c86be5f90a33643"><div class="ttname"><a href="namespacefolly.html#a79a54cd1a19a22878c86be5f90a33643">folly::range</a></div><div class="ttdeci">constexpr Range&lt; Iter &gt; range(Iter first, Iter last)</div><div class="ttdef"><b>Definition:</b> <a href="Range_8h_source.html#l01114">Range.h:1114</a></div></div>
<div class="ttc" id="namespacefolly_html_ad904a601e206bb84a84f7f68302ac92f"><div class="ttname"><a href="namespacefolly.html#ad904a601e206bb84a84f7f68302ac92f">folly::errnoStr</a></div><div class="ttdeci">fbstring errnoStr(int err)</div><div class="ttdef"><b>Definition:</b> <a href="String_8cpp_source.html#l00463">String.cpp:463</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_af022b826b6794d20084c6e8ad6edb398"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#af022b826b6794d20084c6e8ad6edb398">folly::AsyncIO::decrementPending</a></div><div class="ttdeci">void decrementPending()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8cpp_source.html#l00130">AsyncIO.cpp:130</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a2027c027133e22c8929e2874dc44dd36">folly::AsyncIO::WaitType::CANCEL</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acaf8c429f0285c5db7de1dd58127505f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncIO::initializeContext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00135">135</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="AsyncIO_8h_source.html#l00231">capacity_</a>, <a class="el" href="folly_2folly_2Exception_8h_source.html#l00092">folly::checkKernelError()</a>, <a class="el" href="AsyncIO_8h_source.html#l00225">ctx_</a>, <a class="el" href="AsyncIO_8h_source.html#l00226">ctxSet_</a>, <a class="el" href="AsyncIO_8h_source.html#l00227">initMutex_</a>, and <a class="el" href="Synchronized_8h_source.html#l01531">folly::lock()</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00164">submit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncIO.html#a7db31fc2976933500ac43df299a78c23">ctxSet_</a>.load(std::memory_order_acquire)) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    std::lock_guard&lt;std::mutex&gt; <a class="code" href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">lock</a>(<a class="code" href="classfolly_1_1AsyncIO.html#a44a0f103e5bce00de60dfbd2132cc275">initMutex_</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1AsyncIO.html#a7db31fc2976933500ac43df299a78c23">ctxSet_</a>.load(std::memory_order_relaxed)) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordtype">int</span> rc = io_queue_init(<a class="code" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a>, &amp;<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="comment">// returns negative errno</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">if</span> (rc == -EAGAIN) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordtype">long</span> aio_nr, aio_max;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        std::unique_ptr&lt;FILE, int (*)(FILE*)&gt; fp(</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            fopen(<span class="stringliteral">&quot;/proc/sys/fs/aio-nr&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>), fclose);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        PCHECK(fp);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        CHECK_EQ(fscanf(fp.get(), <span class="stringliteral">&quot;%ld&quot;</span>, &amp;aio_nr), 1);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        std::unique_ptr&lt;FILE, int (*)(FILE*)&gt; aio_max_fp(</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            fopen(<span class="stringliteral">&quot;/proc/sys/fs/aio-max-nr&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>), fclose);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        PCHECK(aio_max_fp);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        CHECK_EQ(fscanf(aio_max_fp.get(), <span class="stringliteral">&quot;%ld&quot;</span>, &amp;aio_max), 1);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;No resources for requested capacity of &quot;</span> &lt;&lt; <a class="code" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;aio_nr &quot;</span> &lt;&lt; aio_nr &lt;&lt; <span class="stringliteral">&quot;, aio_max_nr &quot;</span> &lt;&lt; aio_max;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <a class="code" href="namespacefolly.html#afb68d7241709d4cc7330cd1ba4159041">checkKernelError</a>(rc, <span class="stringliteral">&quot;AsyncIO: io_queue_init failed&quot;</span>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      DCHECK(<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="classfolly_1_1AsyncIO.html#a7db31fc2976933500ac43df299a78c23">ctxSet_</a>.store(<span class="keyword">true</span>, std::memory_order_release);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a7db31fc2976933500ac43df299a78c23"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a7db31fc2976933500ac43df299a78c23">folly::AsyncIO::ctxSet_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; ctxSet_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00226">AsyncIO.h:226</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30b66878779c1ac74c71b737fb58461e"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">folly::AsyncIO::ctx_</a></div><div class="ttdeci">io_context_t ctx_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00225">AsyncIO.h:225</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a44a0f103e5bce00de60dfbd2132cc275"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a44a0f103e5bce00de60dfbd2132cc275">folly::AsyncIO::initMutex_</a></div><div class="ttdeci">std::mutex initMutex_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00227">AsyncIO.h:227</a></div></div>
<div class="ttc" id="namespacefolly_html_afb68d7241709d4cc7330cd1ba4159041"><div class="ttname"><a href="namespacefolly.html#afb68d7241709d4cc7330cd1ba4159041">folly::checkKernelError</a></div><div class="ttdeci">void checkKernelError(ssize_t ret, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="folly_2folly_2Exception_8h_source.html#l00092">Exception.h:92</a></div></div>
<div class="ttc" id="namespacefolly_html_a1c5ca040692d2c4c2b1b7ab9e517a61c"><div class="ttname"><a href="namespacefolly.html#a1c5ca040692d2c4c2b1b7ab9e517a61c">folly::lock</a></div><div class="ttdeci">auto lock(Synchronized&lt; D, M &gt; &amp;synchronized, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="Synchronized_8h_source.html#l01531">Synchronized.h:1531</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aa2b43fc8d34dbdde5c4774413d82e28b"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">folly::AsyncIO::capacity_</a></div><div class="ttdeci">const size_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00231">AsyncIO.h:231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9a959cf916a3fa064bbc261dd5d261f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncIO::pending </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of pending requests. </p>

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00173">173</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00295">folly::AsyncIOQueue::maybeDequeue()</a>, <a class="el" href="AsyncIOTest_8cpp_source.html#l00372">TEST()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00278">folly::AsyncIOQueue::~AsyncIOQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                         {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a30eb4b2bfee87705e3da77c8a6c3f521"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">folly::AsyncIO::pending_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00229">AsyncIO.h:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa347b45604067906da3a9dbbbb2ce3e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">AsyncIO::Op</a> ** &gt; folly::AsyncIO::pollCompleted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If POLLABLE, call instead of wait after the file descriptor returned by <a class="el" href="classfolly_1_1AsyncIO.html#ab9bfd559c4f9e4590785838d01aa2115">pollFd()</a> became readable. The returned range is valid until the next call to <a class="el" href="classfolly_1_1AsyncIO.html#aa347b45604067906da3a9dbbbb2ce3e4">pollCompleted()</a>. </p>

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00203">203</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="folly_2folly_2Exception_8h_source.html#l00101">folly::checkUnixError()</a>, <a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">COMPLETE</a>, <a class="el" href="AsyncIO_8h_source.html#l00233">completed_</a>, <a class="el" href="AsyncIO_8h_source.html#l00225">ctx_</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00226">doWait()</a>, <a class="el" href="AsyncIO_8h_source.html#l00229">pending_</a>, <a class="el" href="AsyncIO_8h_source.html#l00232">pollFd_</a>, <a class="el" href="Types-inl_8h_source.html#l00258">fizz::detail::read()</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>, and <a class="el" href="Likely_8h_source.html#l00048">UNLIKELY</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                          {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  CHECK(<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  CHECK_NE(<a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a>, -1) &lt;&lt; <span class="stringliteral">&quot;pollCompleted() only allowed on pollable object&quot;</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> numEvents;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// This sets the eventFd counter to 0, see</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// http://www.kernel.org/doc/man-pages/online/pages/man2/eventfd.2.html</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  ssize_t rc;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    rc = <a class="code" href="namespacefizz_1_1detail.html#a36dc6280bf4d04bce115a7055a78abac">::read</a>(<a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a>, &amp;numEvents, 8);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  } <span class="keywordflow">while</span> (rc == -1 &amp;&amp; errno == EINTR);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(rc == -1 &amp;&amp; errno == EAGAIN)) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> Range&lt;Op**&gt;(); <span class="comment">// nothing completed</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="namespacefolly.html#af6244d72aa4bdeb215d938ff5f56a6e5">checkUnixError</a>(rc, <span class="stringliteral">&quot;AsyncIO: read from event fd failed&quot;</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  DCHECK_EQ(rc, 8);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  DCHECK_GT(numEvents, 0);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  DCHECK_LE(numEvents, <a class="code" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// Don&#39;t reap more than numEvents, as we&#39;ve just reset the counter to 0.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncIO.html#ac166190fef41f923a4afbe77e7c93849">doWait</a>(<a class="code" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">WaitType::COMPLETE</a>, numEvents, numEvents, <a class="code" href="classfolly_1_1AsyncIO.html#a104cbc1e6b5b5a42d9bbdb09be3f63d7">completed_</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a30eb4b2bfee87705e3da77c8a6c3f521"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">folly::AsyncIO::pending_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00229">AsyncIO.h:229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30b66878779c1ac74c71b737fb58461e"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">folly::AsyncIO::ctx_</a></div><div class="ttdeci">io_context_t ctx_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00225">AsyncIO.h:225</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">folly::AsyncIO::WaitType::COMPLETE</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a104cbc1e6b5b5a42d9bbdb09be3f63d7"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a104cbc1e6b5b5a42d9bbdb09be3f63d7">folly::AsyncIO::completed_</a></div><div class="ttdeci">std::vector&lt; Op * &gt; completed_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00233">AsyncIO.h:233</a></div></div>
<div class="ttc" id="namespacefizz_1_1detail_html_a36dc6280bf4d04bce115a7055a78abac"><div class="ttname"><a href="namespacefizz_1_1detail.html#a36dc6280bf4d04bce115a7055a78abac">fizz::detail::read</a></div><div class="ttdeci">size_t read(T &amp;out, folly::io::Cursor &amp;cursor)</div><div class="ttdef"><b>Definition:</b> <a href="Types-inl_8h_source.html#l00258">Types-inl.h:258</a></div></div>
<div class="ttc" id="namespacefolly_html_af6244d72aa4bdeb215d938ff5f56a6e5"><div class="ttname"><a href="namespacefolly.html#af6244d72aa4bdeb215d938ff5f56a6e5">folly::checkUnixError</a></div><div class="ttdeci">void checkUnixError(ssize_t ret, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="folly_2folly_2Exception_8h_source.html#l00101">Exception.h:101</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="Likely_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="Likely_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="Likely_8h_source.html#l00048">Likely.h:48</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aaad956b57e2d3b5d7d5061b47cb0eee8"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">folly::AsyncIO::pollFd_</a></div><div class="ttdeci">int pollFd_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00232">AsyncIO.h:232</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac166190fef41f923a4afbe77e7c93849"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac166190fef41f923a4afbe77e7c93849">folly::AsyncIO::doWait</a></div><div class="ttdeci">Range&lt; AsyncIO::Op ** &gt; doWait(WaitType type, size_t minRequests, size_t maxRequests, std::vector&lt; Op * &gt; &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8cpp_source.html#l00226">AsyncIO.cpp:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab9bfd559c4f9e4590785838d01aa2115"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncIO::pollFd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If POLLABLE, return a file descriptor that can be passed to poll / epoll and will become readable when any async IO operations have completed. If NOT_POLLABLE, return -1. </p>

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00198">198</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>References <a class="el" href="PushmiBenchmarks_8cpp_source.html#l00540">submit</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                     {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncIO_html_aaad956b57e2d3b5d7d5061b47cb0eee8"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">folly::AsyncIO::pollFd_</a></div><div class="ttdeci">int pollFd_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00232">AsyncIO.h:232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7422fac8a604012bedb2a0d340cf724b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void folly::AsyncIO::submit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a> *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Submit an op for execution. </p>

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00164">164</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="AsyncIO_8h_source.html#l00231">capacity_</a>, <a class="el" href="AsyncIO_8h_source.html#l00225">ctx_</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00130">decrementPending()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00135">initializeContext()</a>, <a class="el" href="classfolly_1_1AsyncIOOp.html#a2e390d2a3d448d35a84a99f699f98c87adee5f03c2c4e73657824e028494b18c0">folly::AsyncIOOp::INITIALIZED</a>, <a class="el" href="AsyncIO_8h_source.html#l00114">folly::AsyncIOOp::iocb_</a>, <a class="el" href="AsyncIO_8h_source.html#l00229">pending_</a>, <a class="el" href="AsyncIO_8h_source.html#l00232">pollFd_</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00053">folly::AsyncIOOp::start()</a>, <a class="el" href="AsyncIO_8h_source.html#l00080">folly::AsyncIOOp::state()</a>, <a class="el" href="AsyncIO_8h_source.html#l00230">submitted_</a>, and <a class="el" href="folly_2folly_2Exception_8h_source.html#l00065">folly::throwSystemErrorExplicit()</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00295">folly::AsyncIOQueue::maybeDequeue()</a>, and <a class="el" href="AsyncIOTest_8cpp_source.html#l00372">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                           {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  CHECK_EQ(<a class="code" href="namespacefolly_1_1pushmi_1_1operators.html">op</a>-&gt;state(), <a class="code" href="classfolly_1_1AsyncIOOp.html#a2e390d2a3d448d35a84a99f699f98c87adee5f03c2c4e73657824e028494b18c0">Op::State::INITIALIZED</a>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classfolly_1_1AsyncIO.html#acaf8c429f0285c5db7de1dd58127505f">initializeContext</a>(); <span class="comment">// on demand</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// We can increment past capacity, but we&#39;ll clean up after ourselves.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">auto</span> p = <a class="code" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a>.fetch_add(1, std::memory_order_acq_rel);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span> (p &gt;= <a class="code" href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">capacity_</a>) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="classfolly_1_1AsyncIO.html#af022b826b6794d20084c6e8ad6edb398">decrementPending</a>();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">throw</span> std::range_error(<span class="stringliteral">&quot;AsyncIO: too many pending requests&quot;</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  iocb* cb = &amp;<a class="code" href="namespacefolly_1_1pushmi_1_1operators.html">op</a>-&gt;iocb_;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  cb-&gt;data = <span class="keyword">nullptr</span>; <span class="comment">// unused</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a> != -1) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    io_set_eventfd(cb, <a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordtype">int</span> rc = io_submit(<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>, 1, &amp;cb);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (rc &lt; 0) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classfolly_1_1AsyncIO.html#af022b826b6794d20084c6e8ad6edb398">decrementPending</a>();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="namespacefolly.html#ae6e69e6415a4ec61aa4fdd29c3c0981b">throwSystemErrorExplicit</a>(-rc, <span class="stringliteral">&quot;AsyncIO: io_submit failed&quot;</span>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="classfolly_1_1AsyncIO.html#ab8041e0e5c1db092eb0fdd77863088e6">submitted_</a>++;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  DCHECK_EQ(rc, 1);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html">op</a>-&gt;start();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_acaf8c429f0285c5db7de1dd58127505f"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#acaf8c429f0285c5db7de1dd58127505f">folly::AsyncIO::initializeContext</a></div><div class="ttdeci">void initializeContext()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8cpp_source.html#l00135">AsyncIO.cpp:135</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30eb4b2bfee87705e3da77c8a6c3f521"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">folly::AsyncIO::pending_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00229">AsyncIO.h:229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ab8041e0e5c1db092eb0fdd77863088e6"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ab8041e0e5c1db092eb0fdd77863088e6">folly::AsyncIO::submitted_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; submitted_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00230">AsyncIO.h:230</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30b66878779c1ac74c71b737fb58461e"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">folly::AsyncIO::ctx_</a></div><div class="ttdeci">io_context_t ctx_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00225">AsyncIO.h:225</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIOOp_html_a2e390d2a3d448d35a84a99f699f98c87adee5f03c2c4e73657824e028494b18c0"><div class="ttname"><a href="classfolly_1_1AsyncIOOp.html#a2e390d2a3d448d35a84a99f699f98c87adee5f03c2c4e73657824e028494b18c0">folly::AsyncIOOp::State::INITIALIZED</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_1_1operators_html"><div class="ttname"><a href="namespacefolly_1_1pushmi_1_1operators.html">folly::pushmi::operators</a></div><div class="ttdef"><b>Definition:</b> <a href="bulk_8h_source.html#l00023">bulk.h:23</a></div></div>
<div class="ttc" id="namespacefolly_html_ae6e69e6415a4ec61aa4fdd29c3c0981b"><div class="ttname"><a href="namespacefolly.html#ae6e69e6415a4ec61aa4fdd29c3c0981b">folly::throwSystemErrorExplicit</a></div><div class="ttdeci">void throwSystemErrorExplicit(int err, const char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="folly_2folly_2Exception_8h_source.html#l00065">Exception.h:65</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aa2b43fc8d34dbdde5c4774413d82e28b"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aa2b43fc8d34dbdde5c4774413d82e28b">folly::AsyncIO::capacity_</a></div><div class="ttdeci">const size_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00231">AsyncIO.h:231</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_af022b826b6794d20084c6e8ad6edb398"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#af022b826b6794d20084c6e8ad6edb398">folly::AsyncIO::decrementPending</a></div><div class="ttdeci">void decrementPending()</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8cpp_source.html#l00130">AsyncIO.cpp:130</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aaad956b57e2d3b5d7d5061b47cb0eee8"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">folly::AsyncIO::pollFd_</a></div><div class="ttdeci">int pollFd_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00232">AsyncIO.h:232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a282414f23bdf563859125ecd778c39bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::AsyncIO::totalSubmits </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the accumulative number of submitted I/O, since this object has been created. </p>

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00189">189</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                              {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncIO.html#ab8041e0e5c1db092eb0fdd77863088e6">submitted_</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncIO_html_ab8041e0e5c1db092eb0fdd77863088e6"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ab8041e0e5c1db092eb0fdd77863088e6">folly::AsyncIO::submitted_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; submitted_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00230">AsyncIO.h:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae5e81f5ba04805efc40808ae3411a412"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1Range.html">Range</a>&lt; <a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">AsyncIO::Op</a> ** &gt; folly::AsyncIO::wait </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>minRequests</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait for at least minRequests to complete. Returns the requests that have completed; the returned range is valid until the next call to <a class="el" href="classfolly_1_1AsyncIO.html#ae5e81f5ba04805efc40808ae3411a412">wait()</a>. minRequests may be 0 to not block. </p>

<p>Definition at line <a class="el" href="AsyncIO_8cpp_source.html#l00189">189</a> of file <a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a>.</p>

<p>References <a class="el" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">COMPLETE</a>, <a class="el" href="AsyncIO_8h_source.html#l00233">completed_</a>, <a class="el" href="AsyncIO_8h_source.html#l00225">ctx_</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00226">doWait()</a>, <a class="el" href="AsyncIO_8h_source.html#l00229">pending_</a>, and <a class="el" href="AsyncIO_8h_source.html#l00232">pollFd_</a>.</p>

<p>Referenced by <a class="el" href="AsyncIOTest_8cpp_source.html#l00372">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                   {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  CHECK(<a class="code" href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">ctx_</a>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  CHECK_EQ(<a class="code" href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">pollFd_</a>, -1) &lt;&lt; <span class="stringliteral">&quot;wait() only allowed on non-pollable object&quot;</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keyword">auto</span> p = <a class="code" href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">pending_</a>.load(std::memory_order_acquire);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  CHECK_LE(minRequests, p);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncIO.html#ac166190fef41f923a4afbe77e7c93849">doWait</a>(<a class="code" href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">WaitType::COMPLETE</a>, minRequests, p, <a class="code" href="classfolly_1_1AsyncIO.html#a104cbc1e6b5b5a42d9bbdb09be3f63d7">completed_</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="ttc" id="classfolly_1_1AsyncIO_html_a30eb4b2bfee87705e3da77c8a6c3f521"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30eb4b2bfee87705e3da77c8a6c3f521">folly::AsyncIO::pending_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00229">AsyncIO.h:229</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a30b66878779c1ac74c71b737fb58461e"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a30b66878779c1ac74c71b737fb58461e">folly::AsyncIO::ctx_</a></div><div class="ttdeci">io_context_t ctx_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00225">AsyncIO.h:225</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac2434b5248a40b143a7963c5f55cef34a3de44296982e58199afc513a715b12ba">folly::AsyncIO::WaitType::COMPLETE</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_a104cbc1e6b5b5a42d9bbdb09be3f63d7"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#a104cbc1e6b5b5a42d9bbdb09be3f63d7">folly::AsyncIO::completed_</a></div><div class="ttdeci">std::vector&lt; Op * &gt; completed_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00233">AsyncIO.h:233</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_aaad956b57e2d3b5d7d5061b47cb0eee8"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#aaad956b57e2d3b5d7d5061b47cb0eee8">folly::AsyncIO::pollFd_</a></div><div class="ttdeci">int pollFd_</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8h_source.html#l00232">AsyncIO.h:232</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncIO_html_ac166190fef41f923a4afbe77e7c93849"><div class="ttname"><a href="classfolly_1_1AsyncIO.html#ac166190fef41f923a4afbe77e7c93849">folly::AsyncIO::doWait</a></div><div class="ttdeci">Range&lt; AsyncIO::Op ** &gt; doWait(WaitType type, size_t minRequests, size_t maxRequests, std::vector&lt; Op * &gt; &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncIO_8cpp_source.html#l00226">AsyncIO.cpp:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3c03a3d644dd2acb22b3a1c660cd08cf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a>*&gt; folly::AsyncIO::canceled_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00234">234</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00197">cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2b43fc8d34dbdde5c4774413d82e28b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t folly::AsyncIO::capacity_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00231">231</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00110">AsyncIO()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00135">initializeContext()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00164">submit()</a>.</p>

</div>
</div>
<a class="anchor" id="a104cbc1e6b5b5a42d9bbdb09be3f63d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classfolly_1_1AsyncIO.html#a19334f4d5dc3ab3b006a617f7652f564">Op</a>*&gt; folly::AsyncIO::completed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00233">233</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00110">AsyncIO()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00203">pollCompleted()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00189">wait()</a>.</p>

</div>
</div>
<a class="anchor" id="a30b66878779c1ac74c71b737fb58461e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">io_context_t folly::AsyncIO::ctx_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00225">225</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00197">cancel()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00226">doWait()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00135">initializeContext()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00203">pollCompleted()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00164">submit()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00189">wait()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00119">~AsyncIO()</a>.</p>

</div>
</div>
<a class="anchor" id="a7db31fc2976933500ac43df299a78c23"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; folly::AsyncIO::ctxSet_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00226">226</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00135">initializeContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a44a0f103e5bce00de60dfbd2132cc275"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="OpenSSLThreading_8cpp.html#a1be3f7fa26e4521098de5f1ec0f865f3">std::mutex</a> folly::AsyncIO::initMutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00227">227</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00135">initializeContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a30eb4b2bfee87705e3da77c8a6c3f521"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; folly::AsyncIO::pending_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00229">229</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00197">cancel()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00130">decrementPending()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00203">pollCompleted()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00164">submit()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00189">wait()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00119">~AsyncIO()</a>.</p>

</div>
</div>
<a class="anchor" id="aaad956b57e2d3b5d7d5061b47cb0eee8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::AsyncIO::pollFd_ {-1}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00232">232</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00110">AsyncIO()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00203">pollCompleted()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00164">submit()</a>, <a class="el" href="AsyncIO_8cpp_source.html#l00189">wait()</a>, and <a class="el" href="AsyncIO_8cpp_source.html#l00119">~AsyncIO()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8041e0e5c1db092eb0fdd77863088e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; folly::AsyncIO::submitted_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AsyncIO_8h_source.html#l00230">230</a> of file <a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a>.</p>

<p>Referenced by <a class="el" href="AsyncIO_8cpp_source.html#l00164">submit()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/experimental/io/<a class="el" href="AsyncIO_8h_source.html">AsyncIO.h</a></li>
<li>proxygen/folly/folly/experimental/io/<a class="el" href="AsyncIO_8cpp_source.html">AsyncIO.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1AsyncIO.html">AsyncIO</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
