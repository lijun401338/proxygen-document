<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: wangle::Acceptor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classwangle_1_1Acceptor.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classwangle_1_1Acceptor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">wangle::Acceptor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for wangle::Acceptor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classwangle_1_1Acceptor.png" usemap="#wangle::Acceptor_map" alt=""/>
  <map id="wangle::Acceptor_map" name="wangle::Acceptor_map">
<area href="classfolly_1_1AsyncServerSocket_1_1AcceptCallback.html" alt="folly::AsyncServerSocket::AcceptCallback" shape="rect" coords="390,0,640,24"/>
<area href="classwangle_1_1ConnectionManager_1_1Callback.html" alt="wangle::ConnectionManager::Callback" shape="rect" coords="650,0,900,24"/>
<area href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html" alt="folly::AsyncUDPServerSocket::Callback" shape="rect" coords="910,0,1160,24"/>
<area href="classproxygen_1_1HTTPAcceptor.html" alt="proxygen::HTTPAcceptor" shape="rect" coords="130,112,380,136"/>
<area href="classTestAcceptor.html" alt="TestAcceptor" shape="rect" coords="390,112,640,136"/>
<area href="classTestAcceptor.html" alt="TestAcceptor" shape="rect" coords="650,112,900,136"/>
<area href="classwangle_1_1ServerAcceptor.html" alt="wangle::ServerAcceptor&lt; Pipeline &gt;" shape="rect" coords="910,112,1160,136"/>
<area href="classwangle_1_1TestableAcceptor.html" alt="wangle::TestableAcceptor" shape="rect" coords="1170,112,1420,136"/>
<area href="classproxygen_1_1HTTPSessionAcceptor.html" alt="proxygen::HTTPSessionAcceptor" shape="rect" coords="130,168,380,192"/>
<area href="classHTTPTargetSessionAcceptor.html" alt="HTTPTargetSessionAcceptor" shape="rect" coords="0,224,250,248"/>
<area href="classproxygen_1_1HTTPServerAcceptor.html" alt="proxygen::HTTPServerAcceptor" shape="rect" coords="260,224,510,248"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a01decb025c474000e3399147242e1528"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528">State</a> : uint32_t { <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528ab217b1cb58a6ee4ef35a6c84cf367659">State::kInit</a>, 
<a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a2fc7fbf0d19294f85dd3880460dd3c0a">State::kRunning</a>, 
<a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">State::kDraining</a>, 
<a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">State::kDone</a>
 }</td></tr>
<tr class="separator:a01decb025c474000e3399147242e1528"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9b9ad1daaad3f4e78e29286544663aa3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a9b9ad1daaad3f4e78e29286544663aa3">Acceptor</a> (const <a class="el" href="structwangle_1_1ServerSocketConfig.html">ServerSocketConfig</a> &amp;accConfig)</td></tr>
<tr class="separator:a9b9ad1daaad3f4e78e29286544663aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86d32e8358a0eeed380bb8f5ba0d42ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a86d32e8358a0eeed380bb8f5ba0d42ef">~Acceptor</a> () override</td></tr>
<tr class="separator:a86d32e8358a0eeed380bb8f5ba0d42ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f669fbf082acdfb8b0e0a54d8efd5aa"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a1f669fbf082acdfb8b0e0a54d8efd5aa">setSSLCacheProvider</a> (const std::shared_ptr&lt; <a class="el" href="classwangle_1_1SSLCacheProvider.html">SSLCacheProvider</a> &gt; &amp;cacheProvider)</td></tr>
<tr class="separator:a1f669fbf082acdfb8b0e0a54d8efd5aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79adc87826c8f1e6ea5699f95a6bb062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a79adc87826c8f1e6ea5699f95a6bb062">init</a> (<a class="el" href="classfolly_1_1AsyncServerSocket.html">folly::AsyncServerSocket</a> *serverSocket, <a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *eventBase, <a class="el" href="classwangle_1_1SSLStats.html">SSLStats</a> *stats=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>)</td></tr>
<tr class="separator:a79adc87826c8f1e6ea5699f95a6bb062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843ffaea71186c3739c0b2a9b2627354"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a843ffaea71186c3739c0b2a9b2627354">resetSSLContextConfigs</a> ()</td></tr>
<tr class="separator:a843ffaea71186c3739c0b2a9b2627354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01cb013749abd98b16a3d7e5df945342"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a01cb013749abd98b16a3d7e5df945342">addSSLContextConfig</a> (const <a class="el" href="structwangle_1_1SSLContextConfig.html">SSLContextConfig</a> &amp;sslCtxConfig)</td></tr>
<tr class="separator:a01cb013749abd98b16a3d7e5df945342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896dd4c7bfd01691754faa760c71f755"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1SSLContextManager.html">SSLContextManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a896dd4c7bfd01691754faa760c71f755">getSSLContextManager</a> () const </td></tr>
<tr class="separator:a896dd4c7bfd01691754faa760c71f755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea78da3c9c030895f5cf0c9fa4377402"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aea78da3c9c030895f5cf0c9fa4377402">setTLSTicketSecrets</a> (const std::vector&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt; &amp;oldSecrets, const std::vector&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt; &amp;currentSecrets, const std::vector&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt; &amp;newSecrets)</td></tr>
<tr class="separator:aea78da3c9c030895f5cf0c9fa4377402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5dcca4729fdd32872687bd3f0b27cf3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#af5dcca4729fdd32872687bd3f0b27cf3">getNumConnections</a> () const </td></tr>
<tr class="separator:af5dcca4729fdd32872687bd3f0b27cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b260ef0aae4594ce3a5de6f18a6c93"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a62b260ef0aae4594ce3a5de6f18a6c93">getEventBase</a> () const </td></tr>
<tr class="separator:a62b260ef0aae4594ce3a5de6f18a6c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58dc66eefbacabffbe286e1beb5bde6"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classwangle_1_1ConnectionManager.html">wangle::ConnectionManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aa58dc66eefbacabffbe286e1beb5bde6">getConnectionManager</a> ()</td></tr>
<tr class="separator:aa58dc66eefbacabffbe286e1beb5bde6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaa0e88d7e98be1006366b41412990e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aaaa0e88d7e98be1006366b41412990e6">addConnection</a> (<a class="el" href="classwangle_1_1ManagedConnection.html">wangle::ManagedConnection</a> *connection)</td></tr>
<tr class="separator:aaaa0e88d7e98be1006366b41412990e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76bee1656ddbe9c02f0817968d418668"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a76bee1656ddbe9c02f0817968d418668">getState</a> () const </td></tr>
<tr class="separator:a76bee1656ddbe9c02f0817968d418668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af12e4a8ab4c1d6f78367968990d9cf5c"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#af12e4a8ab4c1d6f78367968990d9cf5c">getConnTimeout</a> () const </td></tr>
<tr class="separator:af12e4a8ab4c1d6f78367968990d9cf5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae2883de07f8f6093d8e61ce872109ad"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aae2883de07f8f6093d8e61ce872109ad">getName</a> () const </td></tr>
<tr class="separator:aae2883de07f8f6093d8e61ce872109ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8312adc9173d67cb94c275646c9035ce"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a8312adc9173d67cb94c275646c9035ce">getSSLHandshakeTimeout</a> () const </td></tr>
<tr class="separator:a8312adc9173d67cb94c275646c9035ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a400ce78ba8456a7a2fb134a13aa986b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a400ce78ba8456a7a2fb134a13aa986b7">setGracefulShutdownTimeout</a> (std::chrono::milliseconds gracefulShutdown)</td></tr>
<tr class="separator:a400ce78ba8456a7a2fb134a13aa986b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed88bf0dee3ff2ac34151789a470ee7b"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aed88bf0dee3ff2ac34151789a470ee7b">getGracefulShutdownTimeout</a> () const </td></tr>
<tr class="separator:aed88bf0dee3ff2ac34151789a470ee7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85da2c52eb3fd76eb1b320617d0c9636"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a85da2c52eb3fd76eb1b320617d0c9636">forceStop</a> ()</td></tr>
<tr class="separator:a85da2c52eb3fd76eb1b320617d0c9636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cbd4be5927983a1f1ef75b16aebd25b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a5cbd4be5927983a1f1ef75b16aebd25b">isSSL</a> () const </td></tr>
<tr class="separator:a5cbd4be5927983a1f1ef75b16aebd25b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703d0880c229ff6d7e2b743f64b21ea0"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structwangle_1_1ServerSocketConfig.html">ServerSocketConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a703d0880c229ff6d7e2b743f64b21ea0">getConfig</a> () const </td></tr>
<tr class="separator:a703d0880c229ff6d7e2b743f64b21ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a104b5a101057e9d94e4be71d7f9ad461"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a104b5a101057e9d94e4be71d7f9ad461">onDoneAcceptingConnection</a> (int fd, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;clientAddr, std::chrono::steady_clock::time_point acceptTime) noexcept</td></tr>
<tr class="separator:a104b5a101057e9d94e4be71d7f9ad461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38e9adf74e724e4e2941d72f5fdfc1fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a38e9adf74e724e4e2941d72f5fdfc1fd">processEstablishedConnection</a> (int fd, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;clientAddr, std::chrono::steady_clock::time_point acceptTime, <a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;tinfo) noexcept</td></tr>
<tr class="separator:a38e9adf74e724e4e2941d72f5fdfc1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a16fd8e4971f8e9317bd2e3d0530d2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a49a16fd8e4971f8e9317bd2e3d0530d2">startHandshakeManager</a> (<a class="el" href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">folly::AsyncSSLSocket::UniquePtr</a> sslSock, <a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> *acceptor, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;clientAddr, std::chrono::steady_clock::time_point acceptTime, <a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;tinfo) noexcept</td></tr>
<tr class="separator:a49a16fd8e4971f8e9317bd2e3d0530d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a573829b01cc031375810b0252591f7d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a573829b01cc031375810b0252591f7d8">drainAllConnections</a> ()</td></tr>
<tr class="separator:a573829b01cc031375810b0252591f7d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a012c29afef7247c649d18d40437cf68c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a012c29afef7247c649d18d40437cf68c">drainConnections</a> (double pctToDrain)</td></tr>
<tr class="separator:a012c29afef7247c649d18d40437cf68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa26f441d30a6451be81cfa1d9c28a10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aaa26f441d30a6451be81cfa1d9c28a10">dropAllConnections</a> ()</td></tr>
<tr class="separator:aaa26f441d30a6451be81cfa1d9c28a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d901ede8d5f241e8671cb07bd5f6a6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ad9d901ede8d5f241e8671cb07bd5f6a6">dropConnections</a> (double pctToDrop)</td></tr>
<tr class="separator:ad9d901ede8d5f241e8671cb07bd5f6a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae34f3a72423db9a7def47b0d7ebd8fb5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ae34f3a72423db9a7def47b0d7ebd8fb5">plaintextConnectionReady</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a> sock, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;clientAddr, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nextProtocolName, <a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a> secureTransportType, <a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;tinfo)</td></tr>
<tr class="separator:ae34f3a72423db9a7def47b0d7ebd8fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac68a49a083e3d6bdcf7bb44b8e347910"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ac68a49a083e3d6bdcf7bb44b8e347910">connectionReady</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a> sock, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;clientAddr, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nextProtocolName, <a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a> secureTransportType, <a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;tinfo)</td></tr>
<tr class="separator:ac68a49a083e3d6bdcf7bb44b8e347910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fc8c2611dd2fe00dd6618d344bce152"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a8fc8c2611dd2fe00dd6618d344bce152">sslConnectionReady</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a> sock, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;clientAddr, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;nextProtocol, <a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a> secureTransportType, <a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;tinfo)</td></tr>
<tr class="separator:a8fc8c2611dd2fe00dd6618d344bce152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed8c24dc9946363368fb04e441c5c25"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a6ed8c24dc9946363368fb04e441c5c25">sslConnectionError</a> (const <a class="el" href="classfolly_1_1exception__wrapper.html">folly::exception_wrapper</a> &amp;ex)</td></tr>
<tr class="separator:a6ed8c24dc9946363368fb04e441c5c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9810128f2ba5dc9ea048fc1d116926"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a2f9810128f2ba5dc9ea048fc1d116926">updateSSLStats</a> (const <a class="el" href="classfolly_1_1AsyncTransportWrapper.html">folly::AsyncTransportWrapper</a> *, std::chrono::milliseconds, <a class="el" href="namespacewangle.html#ad43937b0c168611d07ea6d5448a9d61c">SSLErrorEnum</a>) noexcept</td></tr>
<tr class="separator:a2f9810128f2ba5dc9ea048fc1d116926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1AsyncServerSocket_1_1AcceptCallback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1AsyncServerSocket_1_1AcceptCallback')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1AsyncServerSocket_1_1AcceptCallback.html">folly::AsyncServerSocket::AcceptCallback</a></td></tr>
<tr class="memitem:a896afa0a618799d1fa09e255fa0c6027 inherit pub_methods_classfolly_1_1AsyncServerSocket_1_1AcceptCallback"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncServerSocket_1_1AcceptCallback.html#a896afa0a618799d1fa09e255fa0c6027">~AcceptCallback</a> ()=default</td></tr>
<tr class="separator:a896afa0a618799d1fa09e255fa0c6027 inherit pub_methods_classfolly_1_1AsyncServerSocket_1_1AcceptCallback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c53b1718a80a18f2fc0f789af1bc5b6 inherit pub_methods_classfolly_1_1AsyncServerSocket_1_1AcceptCallback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncServerSocket_1_1AcceptCallback.html#a3c53b1718a80a18f2fc0f789af1bc5b6">acceptStarted</a> () noexcept</td></tr>
<tr class="separator:a3c53b1718a80a18f2fc0f789af1bc5b6 inherit pub_methods_classfolly_1_1AsyncServerSocket_1_1AcceptCallback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classwangle_1_1ConnectionManager_1_1Callback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classwangle_1_1ConnectionManager_1_1Callback')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classwangle_1_1ConnectionManager_1_1Callback.html">wangle::ConnectionManager::Callback</a></td></tr>
<tr class="memitem:ab88c6f00157fcc47a4c601e4772380aa inherit pub_methods_classwangle_1_1ConnectionManager_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1ConnectionManager_1_1Callback.html#ab88c6f00157fcc47a4c601e4772380aa">~Callback</a> ()=default</td></tr>
<tr class="separator:ab88c6f00157fcc47a4c601e4772380aa inherit pub_methods_classwangle_1_1ConnectionManager_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html">folly::AsyncUDPServerSocket::Callback</a></td></tr>
<tr class="memitem:af4c09957af0dd0fed9524cb5c2d5fc6c inherit pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html#af4c09957af0dd0fed9524cb5c2d5fc6c">onListenPaused</a> () noexcept</td></tr>
<tr class="separator:af4c09957af0dd0fed9524cb5c2d5fc6c inherit pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ad7df79786639cea3c4516f26e797db inherit pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html#a4ad7df79786639cea3c4516f26e797db">onListenResumed</a> () noexcept</td></tr>
<tr class="separator:a4ad7df79786639cea3c4516f26e797db inherit pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd15ec008e4bdaf80379a444a73ad9a9 inherit pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html#afd15ec008e4bdaf80379a444a73ad9a9">~Callback</a> ()=default</td></tr>
<tr class="separator:afd15ec008e4bdaf80379a444a73ad9a9 inherit pub_methods_classfolly_1_1AsyncUDPServerSocket_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:abfce5bfa94ea300cd9f4f2d2bcdc560e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#abfce5bfa94ea300cd9f4f2d2bcdc560e">getTotalNumPendingSSLConns</a> ()</td></tr>
<tr class="separator:abfce5bfa94ea300cd9f4f2d2bcdc560e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3626a9bfe8781f358405a92fb1c139b1"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a3626a9bfe8781f358405a92fb1c139b1">getConnectionCountForLoadShedding</a> (void) const </td></tr>
<tr class="separator:a3626a9bfe8781f358405a92fb1c139b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a11f3800f8fdb65b2c8d8c2c07be431"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a2a11f3800f8fdb65b2c8d8c2c07be431">getActiveConnectionCountForLoadShedding</a> () const </td></tr>
<tr class="separator:a2a11f3800f8fdb65b2c8d8c2c07be431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99d0ceaa0b25340b460207ee1af7348"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ad99d0ceaa0b25340b460207ee1af7348">getWorkerMaxConnections</a> () const </td></tr>
<tr class="separator:ad99d0ceaa0b25340b460207ee1af7348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab002c0fe52c42d803356eb02c5529c48"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ab002c0fe52c42d803356eb02c5529c48">canAccept</a> (const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;)</td></tr>
<tr class="separator:ab002c0fe52c42d803356eb02c5529c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5f4fe62eb966586da88ff20c825591"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a1e5f4fe62eb966586da88ff20c825591">onNewConnection</a> (<a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a>, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> *, const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;, <a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a>, const <a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;)</td></tr>
<tr class="separator:a1e5f4fe62eb966586da88ff20c825591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb83064d820581f4be759d7deaad856"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#affb83064d820581f4be759d7deaad856">onListenStarted</a> () noexceptoverride</td></tr>
<tr class="separator:affb83064d820581f4be759d7deaad856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616cadf00094be09036476de366edbc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a616cadf00094be09036476de366edbc4">onListenStopped</a> () noexceptoverride</td></tr>
<tr class="separator:a616cadf00094be09036476de366edbc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24264956b8bf24520ee2754aabb50467"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a24264956b8bf24520ee2754aabb50467">onDataAvailable</a> (std::shared_ptr&lt; <a class="el" href="classfolly_1_1AsyncUDPSocket.html">folly::AsyncUDPSocket</a> &gt;, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;, std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;, bool) noexceptoverride</td></tr>
<tr class="separator:a24264956b8bf24520ee2754aabb50467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b510746d26a7efe2de256ebd5dba340"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">folly::AsyncSocket::UniquePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a0b510746d26a7efe2de256ebd5dba340">makeNewAsyncSocket</a> (<a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *base, int fd)</td></tr>
<tr class="separator:a0b510746d26a7efe2de256ebd5dba340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52accbd191645de6cf1f4e19d36ab6b8"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">folly::AsyncSSLSocket::UniquePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a52accbd191645de6cf1f4e19d36ab6b8">makeNewAsyncSSLSocket</a> (const std::shared_ptr&lt; <a class="el" href="classfolly_1_1SSLContext.html">folly::SSLContext</a> &gt; &amp;ctx, <a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *base, int fd)</td></tr>
<tr class="separator:a52accbd191645de6cf1f4e19d36ab6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b82102690684b556dd8215eadd744ae"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a3b82102690684b556dd8215eadd744ae">onConnectionsDrained</a> ()</td></tr>
<tr class="separator:a3b82102690684b556dd8215eadd744ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a084dc1e09550a11917aba1f93808c706"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a084dc1e09550a11917aba1f93808c706">connectionAccepted</a> (int fd, const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;clientAddr) noexceptoverride</td></tr>
<tr class="separator:a084dc1e09550a11917aba1f93808c706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e7a7f832023b844f0eb290cc59c935"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ab8e7a7f832023b844f0eb290cc59c935">acceptError</a> (const std::exception &amp;ex) noexceptoverride</td></tr>
<tr class="separator:ab8e7a7f832023b844f0eb290cc59c935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64caa6c9683ac822aa613ebebbc12bb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a64caa6c9683ac822aa613ebebbc12bb7">acceptStopped</a> () noexceptoverride</td></tr>
<tr class="separator:a64caa6c9683ac822aa613ebebbc12bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90eb08cbedf427965a9db197f61e1fb3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a90eb08cbedf427965a9db197f61e1fb3">onEmpty</a> (const <a class="el" href="classwangle_1_1ConnectionManager.html">wangle::ConnectionManager</a> &amp;cm) override</td></tr>
<tr class="separator:a90eb08cbedf427965a9db197f61e1fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a951d1e4dc1723736fd7c0aa14a8d55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a0a951d1e4dc1723736fd7c0aa14a8d55">onConnectionAdded</a> (const <a class="el" href="classwangle_1_1ManagedConnection.html">ManagedConnection</a> *) override</td></tr>
<tr class="separator:a0a951d1e4dc1723736fd7c0aa14a8d55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e9a88d12cdd3904bba6d6f64418f004"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a8e9a88d12cdd3904bba6d6f64418f004">onConnectionRemoved</a> (const <a class="el" href="classwangle_1_1ManagedConnection.html">ManagedConnection</a> *) override</td></tr>
<tr class="separator:a8e9a88d12cdd3904bba6d6f64418f004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a83e7c0e998266b4a8334b0e61fb8f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a8a83e7c0e998266b4a8334b0e61fb8f7">setLoadShedConfig</a> (std::shared_ptr&lt; const <a class="el" href="classwangle_1_1LoadShedConfiguration.html">LoadShedConfiguration</a> &gt; loadShedConfig, const <a class="el" href="classwangle_1_1IConnectionCounter.html">IConnectionCounter</a> *<a class="el" href="PushmiBenchmarks_8cpp.html#a9241e9d818c73fbaee99c15606c552c4">counter</a>)</td></tr>
<tr class="separator:a8a83e7c0e998266b4a8334b0e61fb8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893513d1cf1a2a5b7605cf8c736ef514"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a893513d1cf1a2a5b7605cf8c736ef514">initDownstreamConnectionManager</a> (<a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *eventBase)</td></tr>
<tr class="separator:a893513d1cf1a2a5b7605cf8c736ef514"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2f9e97b7e9a2281eb2668b4d2f37dce"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classwangle_1_1DefaultToFizzPeekingCallback.html">DefaultToFizzPeekingCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aa2f9e97b7e9a2281eb2668b4d2f37dce">getFizzPeeker</a> ()</td></tr>
<tr class="separator:aa2f9e97b7e9a2281eb2668b4d2f37dce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd31679915f28e22ef9d2d024df20f3"><td class="memItemLeft" align="right" valign="top">virtual std::shared_ptr&lt; <a class="el" href="classfizz_1_1server_1_1FizzServerContext.html">fizz::server::FizzServerContext</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#adbd31679915f28e22ef9d2d024df20f3">createFizzContext</a> ()</td></tr>
<tr class="separator:adbd31679915f28e22ef9d2d024df20f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4946249a76ea386d460d985e60907edd"><td class="memItemLeft" align="right" valign="top">virtual std::shared_ptr&lt; <a class="el" href="classfizz_1_1server_1_1TicketCipher.html">fizz::server::TicketCipher</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a4946249a76ea386d460d985e60907edd">createFizzTicketCipher</a> (<a class="el" href="classfolly_1_1Optional.html">folly::Optional</a>&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt;=<a class="el" href="namespacefolly.html#ac22c63dbe5af3b0bedb0f21031691537">folly::none</a>)</td></tr>
<tr class="separator:a4946249a76ea386d460d985e60907edd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cca72ea5608c28ee20b5caf42070467"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a9cca72ea5608c28ee20b5caf42070467">updateFizzContext</a> (<a class="el" href="classfizz_1_1server_1_1FizzServerContext.html">fizz::server::FizzServerContext</a> *)</td></tr>
<tr class="separator:a9cca72ea5608c28ee20b5caf42070467"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a33442a8aef7480179d888a9daa7912c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a33442a8aef7480179d888a9daa7912c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a376aa899452d0571bd2f6e6db8aaa561"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structwangle_1_1ServerSocketConfig.html">ServerSocketConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a></td></tr>
<tr class="separator:a376aa899452d0571bd2f6e6db8aaa561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a239e2bc553e858564ee567a8eff028ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">folly::AsyncSocket::OptionMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a239e2bc553e858564ee567a8eff028ba">socketOptions_</a></td></tr>
<tr class="separator:a239e2bc553e858564ee567a8eff028ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d8fcfdb00a9cc17e39641518d2c2738"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classwangle_1_1SSLContextManager.html">SSLContextManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a></td></tr>
<tr class="separator:a0d8fcfdb00a9cc17e39641518d2c2738"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8479eaefe401b585d14a2b9495b23c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1SecurityProtocolContextManager.html">SecurityProtocolContextManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a3a8479eaefe401b585d14a2b9495b23c">securityProtocolCtxManager_</a></td></tr>
<tr class="separator:a3a8479eaefe401b585d14a2b9495b23c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6d223330a96428c799e0d940b6c558"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1TLSPlaintextPeekingCallback.html">TLSPlaintextPeekingCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a6a6d223330a96428c799e0d940b6c558">tlsPlaintextPeekingCallback_</a></td></tr>
<tr class="separator:a6a6d223330a96428c799e0d940b6c558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f047a280b4d0ff49b80fbf5816a444"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1DefaultToSSLPeekingCallback.html">DefaultToSSLPeekingCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a18f047a280b4d0ff49b80fbf5816a444">defaultPeekingCallback_</a></td></tr>
<tr class="separator:a18f047a280b4d0ff49b80fbf5816a444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c81a983de91a7335d9bcf71a6e4f9c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1DefaultToFizzPeekingCallback.html">DefaultToFizzPeekingCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a0c81a983de91a7335d9bcf71a6e4f9c9">defaultFizzPeeker_</a></td></tr>
<tr class="separator:a0c81a983de91a7335d9bcf71a6e4f9c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab94a67c0ffc83f9aa9dd874dbf4865f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1ConnectionManager.html#a6a562d1f774a7678d9a73bbe70c7cdef">wangle::ConnectionManager::UniquePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a></td></tr>
<tr class="separator:ab94a67c0ffc83f9aa9dd874dbf4865f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a32d345ea76a7b4cd6e03fadc61eed1"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classwangle_1_1SSLCacheProvider.html">SSLCacheProvider</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">cacheProvider_</a></td></tr>
<tr class="separator:a9a32d345ea76a7b4cd6e03fadc61eed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86ee92187640afc119196b9c2daac37c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structwangle_1_1TLSTicketKeySeeds.html">wangle::TLSTicketKeySeeds</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">currentSecrets_</a></td></tr>
<tr class="separator:a86ee92187640afc119196b9c2daac37c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad570f4623d8f00b04211c002c0d46927"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ad570f4623d8f00b04211c002c0d46927">Acceptor</a> (<a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> const &amp;)=delete</td></tr>
<tr class="separator:ad570f4623d8f00b04211c002c0d46927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96ea19d091231b1f9e46522ca46a0ddc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a96ea19d091231b1f9e46522ca46a0ddc">operator=</a> (<a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> const &amp;)=delete</td></tr>
<tr class="separator:a96ea19d091231b1f9e46522ca46a0ddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09bdf5d859a9269276da1a6c933257a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">checkDrained</a> ()</td></tr>
<tr class="separator:ac09bdf5d859a9269276da1a6c933257a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0e1fcd22851f2c2104204a83abb72efa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> {<a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528ab217b1cb58a6ee4ef35a6c84cf367659">State::kInit</a>}</td></tr>
<tr class="separator:a0e1fcd22851f2c2104204a83abb72efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadaf76d8da8c6ac2f7d64b219f2bee2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a> {0}</td></tr>
<tr class="separator:aadaf76d8da8c6ac2f7d64b219f2bee2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2e208ae6b6e827196a29baaabd1471c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#ad2e208ae6b6e827196a29baaabd1471c">forceShutdownInProgress_</a> {false}</td></tr>
<tr class="separator:ad2e208ae6b6e827196a29baaabd1471c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cdd849b6e0552bef812e2db488eba1b"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; const <a class="el" href="classwangle_1_1LoadShedConfiguration.html">LoadShedConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a7cdd849b6e0552bef812e2db488eba1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c0227e1dee7e318f940c3fc79f71d7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classwangle_1_1IConnectionCounter.html">IConnectionCounter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">connectionCounter_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a05c0227e1dee7e318f940c3fc79f71d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71476b030050be7e59d1a59da0aeb783"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">gracefulShutdownTimeout_</a> {5000}</td></tr>
<tr class="separator:a71476b030050be7e59d1a59da0aeb783"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a242076537fdb8d99e9165c042b6c05da"><td class="memItemLeft" align="right" valign="top">static std::atomic&lt; <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">totalNumPendingSSLConns_</a> {0}</td></tr>
<tr class="separator:a242076537fdb8d99e9165c042b6c05da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An abstract acceptor for TCP-based network services.</p>
<p>There is one acceptor object per thread for each listening socket. When a new connection arrives on the listening socket, it is accepted by one of the acceptor objects. From that point on the connection will be processed by that acceptor's thread.</p>
<p>The acceptor will call the abstract <a class="el" href="classwangle_1_1Acceptor.html#a1e5f4fe62eb966586da88ff20c825591">onNewConnection()</a> method to create a new <a class="el" href="classwangle_1_1ManagedConnection.html">ManagedConnection</a> object for each accepted socket. The acceptor also tracks all outstanding connections that it has accepted. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00058">58</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a01decb025c474000e3399147242e1528"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528">wangle::Acceptor::State</a> : <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a01decb025c474000e3399147242e1528ab217b1cb58a6ee4ef35a6c84cf367659"></a>kInit&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a01decb025c474000e3399147242e1528a2fc7fbf0d19294f85dd3880460dd3c0a"></a>kRunning&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22"></a>kDraining&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d"></a>kDone&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00064">64</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                   : <a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    kInit,  <span class="comment">// not yet started</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    kRunning, <span class="comment">// processing requests normally</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    kDraining, <span class="comment">// processing outstanding conns, but not accepting new ones</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    kDone,  <span class="comment">// no longer accepting, and all connections finished</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  };</div><div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9b9ad1daaad3f4e78e29286544663aa3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">wangle::Acceptor::Acceptor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structwangle_1_1ServerSocketConfig.html">ServerSocketConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>accConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00054">54</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                                      :</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>(accConfig),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a239e2bc553e858564ee567a8eff028ba">socketOptions_</a>(accConfig.getSocketOptions()) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_a239e2bc553e858564ee567a8eff028ba"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a239e2bc553e858564ee567a8eff028ba">wangle::Acceptor::socketOptions_</a></div><div class="ttdeci">folly::AsyncSocket::OptionMap socketOptions_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00425">Acceptor.h:425</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a86d32e8358a0eeed380bb8f5ba0d42ef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">wangle::Acceptor::~Acceptor </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00184">184</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad570f4623d8f00b04211c002c0d46927"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">wangle::Acceptor::Acceptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab8e7a7f832023b844f0eb290cc59c935"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::acceptError </td>
          <td>(</td>
          <td class="paramtype">const std::exception &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classwangle_1_1Acceptor.html#ab8e7a7f832023b844f0eb290cc59c935">acceptError()</a> is called if an error occurs while accepting.</p>
<p>The AcceptCallback will remain installed even after an accept error, as the errors are typically somewhat transient, such as being out of file descriptors. The server socket must be explicitly stopped if you wish to stop accepting after an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ex</td><td>An exception representing the error. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncServerSocket_1_1AcceptCallback.html#a094d946adcbfba63d0db0fbb43723851">folly::AsyncServerSocket::AcceptCallback</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00432">432</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00392">onConnectionsDrained()</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                                     {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// An error occurred.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// The most likely error is out of FDs.  AsyncServerSocket will back off</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// briefly if we are out of FDs, then continue accepting later.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// Just log a message here.</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;error accepting on acceptor socket: &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64caa6c9683ac822aa613ebebbc12bb7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::acceptStopped </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classwangle_1_1Acceptor.html#a64caa6c9683ac822aa613ebebbc12bb7">acceptStopped()</a> will be called when this AcceptCallback is removed from the AsyncServerSocket, or when the AsyncServerSocket is destroyed, whichever occurs first.</p>
<p>No more calls to <a class="el" href="classwangle_1_1Acceptor.html#a084dc1e09550a11917aba1f93808c706">connectionAccepted()</a> or <a class="el" href="classwangle_1_1Acceptor.html#ab8e7a7f832023b844f0eb290cc59c935">acceptError()</a> will be made after <a class="el" href="classwangle_1_1Acceptor.html#a64caa6c9683ac822aa613ebebbc12bb7">acceptStopped()</a> is invoked. </p>

<p>Reimplemented from <a class="el" href="classfolly_1_1AsyncServerSocket_1_1AcceptCallback.html#a6cc76fc51f835995c7dd5e53a67d3027">folly::AsyncServerSocket::AcceptCallback</a>.</p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#a1711bdf2ebf245877c7b49298eb3db06">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00441">441</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00214">drainAllConnections()</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">kDone</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">kDraining</a>, and <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>.</p>

<p>Referenced by <a class="el" href="ServerBootstrap-inl_8h_source.html#l00185">wangle::ServerAcceptor&lt; Pipeline &gt;::acceptStopped()</a>, and <a class="el" href="Acceptor_8h_source.html#l00392">onConnectionsDrained()</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                 {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Acceptor &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; acceptStopped()&quot;</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// Drain the open client connections</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a573829b01cc031375810b0252591f7d8">drainAllConnections</a>();</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// If we haven&#39;t yet finished draining, begin doing so by marking ourselves</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// as in the draining state. We must be sure to hit checkDrained() here, as</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// if we&#39;re completely idle, we can should consider ourself drained</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// immediately (as there is no outstanding work to complete to cause us to</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// re-evaluate this).</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> != <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">State::kDone</a>) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> = <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">State::kDraining</a>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">checkDrained</a>();</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_ac09bdf5d859a9269276da1a6c933257a"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">wangle::Acceptor::checkDrained</a></div><div class="ttdeci">void checkDrained()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00466">Acceptor.cpp:466</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">wangle::Acceptor::State::kDraining</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">wangle::Acceptor::State::kDone</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a573829b01cc031375810b0252591f7d8"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a573829b01cc031375810b0252591f7d8">wangle::Acceptor::drainAllConnections</a></div><div class="ttdeci">void drainAllConnections()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00214">Acceptor.cpp:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaaa0e88d7e98be1006366b41412990e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::addConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwangle_1_1ManagedConnection.html">wangle::ManagedConnection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invoked when a new <a class="el" href="classwangle_1_1ManagedConnection.html">ManagedConnection</a> is created.</p>
<p>This allows the <a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> to track the outstanding connections, for tracking timeouts and for ensuring that all connections have been drained on shutdown. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00501">501</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00132">getConnectionManager()</a>, and <a class="el" href="ServerBootstrap-inl_8h_source.html#l00141">wangle::ServerAcceptor&lt; Pipeline &gt;::read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                                    {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// Add the socket to the timeout manager so that it can be cleaned</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">// up after being left idle for a long time.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;addConnection(conn, <span class="keyword">true</span>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a01cb013749abd98b16a3d7e5df945342"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::addSSLContextConfig </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structwangle_1_1SSLContextConfig.html">SSLContextConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>sslCtxConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dynamically add a new <a class="el" href="structwangle_1_1SSLContextConfig.html">SSLContextConfig</a> </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00187">187</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00112">wangle::ServerSocketConfig::bindAddress</a>, <a class="el" href="Acceptor_8h_source.html#l00440">cacheProvider_</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00129">wangle::ServerSocketConfig::initialTicketSeeds</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00117">wangle::ServerSocketConfig::sslCacheOptions</a>, and <a class="el" href="Acceptor_8h_source.html#l00427">sslCtxManager_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00078">setSSLCacheProvider()</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                                                       {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;addSSLContextConfig(sslCtxConfig,</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                      <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">sslCacheOptions</a>,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                      &amp;<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a4ac2586a5c3c7feb5c7dc5591adca21a">initialTicketSeeds</a>,</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                      <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#ac8bf983fb991614555ae89c835f43cdc">bindAddress</a>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                      <a class="code" href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">cacheProvider_</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a5a07feaa01ea8e73d0e18c57cb523506"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">wangle::ServerSocketConfig::sslCacheOptions</a></div><div class="ttdeci">SSLCacheOptions sslCacheOptions</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00117">ServerSocketConfig.h:117</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a9a32d345ea76a7b4cd6e03fadc61eed1"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">wangle::Acceptor::cacheProvider_</a></div><div class="ttdeci">std::shared_ptr&lt; SSLCacheProvider &gt; cacheProvider_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00440">Acceptor.h:440</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_ac8bf983fb991614555ae89c835f43cdc"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#ac8bf983fb991614555ae89c835f43cdc">wangle::ServerSocketConfig::bindAddress</a></div><div class="ttdeci">folly::SocketAddress bindAddress</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00112">ServerSocketConfig.h:112</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a4ac2586a5c3c7feb5c7dc5591adca21a"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a4ac2586a5c3c7feb5c7dc5591adca21a">wangle::ServerSocketConfig::initialTicketSeeds</a></div><div class="ttdeci">TLSTicketKeySeeds initialTicketSeeds</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00129">ServerSocketConfig.h:129</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0d8fcfdb00a9cc17e39641518d2c2738"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">wangle::Acceptor::sslCtxManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SSLContextManager &gt; sslCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00427">Acceptor.h:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab002c0fe52c42d803356eb02c5529c48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool wangle::Acceptor::canAccept </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Hook for subclasses to drop newly accepted connections prior to handshaking. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00228">228</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00458">connectionCounter_</a>, <a class="el" href="SocketAddress_8cpp_source.html#l00482">folly::SocketAddress::describe()</a>, <a class="el" href="Acceptor_8h_source.html#l00322">getActiveConnectionCountForLoadShedding()</a>, <a class="el" href="Acceptor_8h_source.html#l00321">getConnectionCountForLoadShedding()</a>, <a class="el" href="classwangle_1_1IConnectionCounter.html#a85a130dfe1a847b56da0dec169ecc9f6">wangle::IConnectionCounter::getNumConnections()</a>, <a class="el" href="Acceptor_8h_source.html#l00323">getWorkerMaxConnections()</a>, <a class="el" href="Acceptor_8h_source.html#l00457">loadShedConfig_</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00277">connectionAccepted()</a>, and <a class="el" href="Acceptor_8h_source.html#l00323">getWorkerMaxConnections()</a>.</p>
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                                     {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">connectionCounter_</a>) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> totalConnLimit =</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a> ? <a class="code" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a>-&gt;getMaxConnections() : 0;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (totalConnLimit == 0) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> currentConnections = <a class="code" href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">connectionCounter_</a>-&gt;<a class="code" href="classwangle_1_1IConnectionCounter.html#a85a130dfe1a847b56da0dec169ecc9f6">getNumConnections</a>();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> maxConnections = <a class="code" href="classwangle_1_1Acceptor.html#ad99d0ceaa0b25340b460207ee1af7348">getWorkerMaxConnections</a>();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">if</span> (currentConnections &lt; maxConnections) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a> &amp;&amp; <a class="code" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a>-&gt;isWhitelisted(address)) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// Take care of the connection counts across all acceptors.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// Expensive since a lock must be taken to get the counter.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// getConnectionCountForLoadShedding() call can be very expensive,</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// don&#39;t call it if you are not going to use the results.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> totalConnExceeded =</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    totalConnLimit &gt; 0 &amp;&amp; <a class="code" href="classwangle_1_1Acceptor.html#a3626a9bfe8781f358405a92fb1c139b1">getConnectionCountForLoadShedding</a>() &gt;= totalConnLimit;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> activeConnLimit =</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a> ? <a class="code" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a>-&gt;getMaxActiveConnections() : 0;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// getActiveConnectionCountForLoadShedding() call can be very expensive,</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// don&#39;t call it if you are not going to use the results.</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> activeConnExceeded =</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    !totalConnExceeded &amp;&amp;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    activeConnLimit &gt; 0 &amp;&amp;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a2a11f3800f8fdb65b2c8d8c2c07be431">getActiveConnectionCountForLoadShedding</a>() &gt;= activeConnLimit;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (!activeConnExceeded &amp;&amp; !totalConnExceeded) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  LOG_EVERY_N(ERROR, 1000) &lt;&lt; <span class="stringliteral">&quot;shedding connection because activeConnExceeded=&quot;</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                           &lt;&lt; activeConnExceeded &lt;&lt; <span class="stringliteral">&quot;totalConnExceeded=&quot;</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                           &lt;&lt; totalConnExceeded;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  VLOG(4) &lt;&lt; address.<a class="code" href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">describe</a>() &lt;&lt; <span class="stringliteral">&quot; not whitelisted&quot;</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_ad99d0ceaa0b25340b460207ee1af7348"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ad99d0ceaa0b25340b460207ee1af7348">wangle::Acceptor::getWorkerMaxConnections</a></div><div class="ttdeci">virtual uint64_t getWorkerMaxConnections() const </div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00323">Acceptor.h:323</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a05c0227e1dee7e318f940c3fc79f71d7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">wangle::Acceptor::connectionCounter_</a></div><div class="ttdeci">const IConnectionCounter * connectionCounter_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00458">Acceptor.h:458</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a7cdd849b6e0552bef812e2db488eba1b"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">wangle::Acceptor::loadShedConfig_</a></div><div class="ttdeci">std::shared_ptr&lt; const LoadShedConfiguration &gt; loadShedConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00457">Acceptor.h:457</a></div></div>
<div class="ttc" id="classfolly_1_1SocketAddress_html_a31205658ec313a5f26fb1558aad5ab60"><div class="ttname"><a href="classfolly_1_1SocketAddress.html#a31205658ec313a5f26fb1558aad5ab60">folly::SocketAddress::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="SocketAddress_8cpp_source.html#l00482">SocketAddress.cpp:482</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a2a11f3800f8fdb65b2c8d8c2c07be431"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a2a11f3800f8fdb65b2c8d8c2c07be431">wangle::Acceptor::getActiveConnectionCountForLoadShedding</a></div><div class="ttdeci">virtual uint64_t getActiveConnectionCountForLoadShedding() const </div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00322">Acceptor.h:322</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a3626a9bfe8781f358405a92fb1c139b1"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a3626a9bfe8781f358405a92fb1c139b1">wangle::Acceptor::getConnectionCountForLoadShedding</a></div><div class="ttdeci">virtual uint64_t getConnectionCountForLoadShedding(void) const </div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00321">Acceptor.h:321</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="classwangle_1_1IConnectionCounter_html_a85a130dfe1a847b56da0dec169ecc9f6"><div class="ttname"><a href="classwangle_1_1IConnectionCounter.html#a85a130dfe1a847b56da0dec169ecc9f6">wangle::IConnectionCounter::getNumConnections</a></div><div class="ttdeci">virtual uint64_t getNumConnections() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac09bdf5d859a9269276da1a6c933257a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::checkDrained </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00466">466</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>, <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>, <a class="el" href="Acceptor_8h_source.html#l00456">forceShutdownInProgress_</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">kDone</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">kDraining</a>, <a class="el" href="Acceptor_8h_source.html#l00452">numPendingSSLConns_</a>, <a class="el" href="Acceptor_8h_source.html#l00392">onConnectionsDrained()</a>, and <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00441">acceptStopped()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00458">onEmpty()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00422">sslConnectionError()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00403">sslConnectionReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                       {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  CHECK(<a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> == <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">State::kDraining</a>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#ad2e208ae6b6e827196a29baaabd1471c">forceShutdownInProgress_</a> ||</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      (<a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;getNumConnections() != 0) ||</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      (<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a> != 0)) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  VLOG(2) &lt;&lt; <span class="stringliteral">&quot;All connections drained from Acceptor=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; in thread &quot;</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          &lt;&lt; <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>.reset();</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> = <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">State::kDone</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a3b82102690684b556dd8215eadd744ae">onConnectionsDrained</a>();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_aadaf76d8da8c6ac2f7d64b219f2bee2e"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">wangle::Acceptor::numPendingSSLConns_</a></div><div class="ttdeci">uint64_t numPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00452">Acceptor.h:452</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ad2e208ae6b6e827196a29baaabd1471c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ad2e208ae6b6e827196a29baaabd1471c">wangle::Acceptor::forceShutdownInProgress_</a></div><div class="ttdeci">bool forceShutdownInProgress_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00456">Acceptor.h:456</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">wangle::Acceptor::State::kDraining</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a3b82102690684b556dd8215eadd744ae"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a3b82102690684b556dd8215eadd744ae">wangle::Acceptor::onConnectionsDrained</a></div><div class="ttdeci">virtual void onConnectionsDrained()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00392">Acceptor.h:392</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">wangle::Acceptor::State::kDone</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a084dc1e09550a11917aba1f93808c706"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::connectionAccepted </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>clientAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classwangle_1_1Acceptor.html#a084dc1e09550a11917aba1f93808c706">connectionAccepted()</a> is called whenever a new client connection is received.</p>
<p>The AcceptCallback will remain installed after <a class="el" href="classwangle_1_1Acceptor.html#a084dc1e09550a11917aba1f93808c706">connectionAccepted()</a> returns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>The newly accepted client socket. The AcceptCallback assumes ownership of this socket, and is responsible for closing it when done. The newly accepted file descriptor will have already been put into non-blocking mode. </td></tr>
    <tr><td class="paramname">clientAddr</td><td><a class="el" href="structA.html">A</a> reference to a SocketAddress struct containing the client's address. This struct is only guaranteed to remain valid until <a class="el" href="classwangle_1_1Acceptor.html#a084dc1e09550a11917aba1f93808c706">connectionAccepted()</a> returns. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfolly_1_1AsyncServerSocket_1_1AcceptCallback.html#a8fc130e1179006e400b57d8f1c9e776e">folly::AsyncServerSocket::AcceptCallback</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00277">277</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00228">canAccept()</a>, <a class="el" href="NetOps_8cpp_source.html#l00090">folly::netops::close()</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00295">onDoneAcceptingConnection()</a>, <a class="el" href="NetOps_8cpp_source.html#l00384">folly::netops::setsockopt()</a>, and <a class="el" href="Acceptor_8h_source.html#l00425">socketOptions_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00392">onConnectionsDrained()</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                                      {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keyword">namespace </span><a class="code" href="namespacefolly_1_1portability_1_1sockets.html">fsp</a> = <a class="code" href="namespacefolly_1_1portability_1_1sockets.html">folly::portability::sockets</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classwangle_1_1Acceptor.html#ab002c0fe52c42d803356eb02c5529c48">canAccept</a>(clientAddr)) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Send a RST to free kernel memory faster</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keyword">struct </span>linger optLinger = {1, 0};</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">fsp::setsockopt</a>(fd, SOL_SOCKET, SO_LINGER, &amp;optLinger, <span class="keyword">sizeof</span>(optLinger));</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">close</a>(fd);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keyword">auto</span> acceptTime = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">std::chrono::steady_clock::now</a>();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; opt: <a class="code" href="classwangle_1_1Acceptor.html#a239e2bc553e858564ee567a8eff028ba">socketOptions_</a>) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    opt.first.apply(fd, opt.second);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a104b5a101057e9d94e4be71d7f9ad461">onDoneAcceptingConnection</a>(fd, clientAddr, acceptTime);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1portability_1_1sockets_html"><div class="ttname"><a href="namespacefolly_1_1portability_1_1sockets.html">folly::portability::sockets</a></div><div class="ttdef"><b>Definition:</b> <a href="Sockets_8h_source.html#l00023">Sockets.h:23</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a5046254be249f288deb01103b5db274d"><div class="ttname"><a href="namespacefolly_1_1netops.html#a5046254be249f288deb01103b5db274d">folly::netops::setsockopt</a></div><div class="ttdeci">int setsockopt(NetworkSocket s, int level, int optname, const void *optval, socklen_t optlen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00384">NetOps.cpp:384</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a104b5a101057e9d94e4be71d7f9ad461"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a104b5a101057e9d94e4be71d7f9ad461">wangle::Acceptor::onDoneAcceptingConnection</a></div><div class="ttdeci">virtual void onDoneAcceptingConnection(int fd, const folly::SocketAddress &amp;clientAddr, std::chrono::steady_clock::time_point acceptTime) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00295">Acceptor.cpp:295</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a239e2bc553e858564ee567a8eff028ba"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a239e2bc553e858564ee567a8eff028ba">wangle::Acceptor::socketOptions_</a></div><div class="ttdeci">folly::AsyncSocket::OptionMap socketOptions_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00425">Acceptor.h:425</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ab002c0fe52c42d803356eb02c5529c48"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab002c0fe52c42d803356eb02c5529c48">wangle::Acceptor::canAccept</a></div><div class="ttdeci">virtual bool canAccept(const folly::SocketAddress &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00228">Acceptor.cpp:228</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a27d9201e6386937ffded3bfd86f995aa"><div class="ttname"><a href="namespacefolly_1_1netops.html#a27d9201e6386937ffded3bfd86f995aa">folly::netops::close</a></div><div class="ttdeci">int close(NetworkSocket s)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00090">NetOps.cpp:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac68a49a083e3d6bdcf7bb44b8e347910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::connectionReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a>&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>clientAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nextProtocolName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a>&#160;</td>
          <td class="paramname"><em>secureTransportType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>tinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process a connection that is to ready to receive L7 traffic. This method is called immediately upon accept for plaintext connections and upon completion of SSL handshaking or resumption for SSL connections. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00365">365</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="TransportInfo_8h_source.html#l00199">wangle::TransportInfo::appProtocol</a>, <a class="el" href="TransportInfo_8cpp_source.html#l00028">wangle::TransportInfo::initWithSocket()</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">kDraining</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="Acceptor_8h_source.html#l00350">onNewConnection()</a>, <a class="el" href="AsyncSocket_8h_source.html#l00451">folly::AsyncSocket::setMaxReadsPerEvent()</a>, and <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSessionAcceptorTest_8cpp_source.html#l00049">HTTPTargetSessionAcceptor::connectionReady()</a>, <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00388">plaintextConnectionReady()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00403">sslConnectionReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                          {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// Limit the number of reads from the socket per poll loop iteration,</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// both to keep memory usage under control and to prevent one fast-</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// writing client from starving other connections.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keyword">auto</span> asyncSocket = sock-&gt;getUnderlyingTransport&lt;<a class="code" href="classfolly_1_1AsyncSocket.html">AsyncSocket</a>&gt;();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  asyncSocket-&gt;<a class="code" href="classfolly_1_1AsyncSocket.html#a754f77101cf9eb0e2cd8c3413c5eeeeb">setMaxReadsPerEvent</a>(16);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  tinfo.initWithSocket(asyncSocket);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  tinfo.appProtocol = std::make_shared&lt;std::string&gt;(nextProtocolName);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> &lt; <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">State::kDraining</a>) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a1e5f4fe62eb966586da88ff20c825591">onNewConnection</a>(</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(sock),</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      &amp;clientAddr,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      nextProtocolName,</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      secureTransportType,</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      tinfo);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">wangle::Acceptor::State::kDraining</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a754f77101cf9eb0e2cd8c3413c5eeeeb"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a754f77101cf9eb0e2cd8c3413c5eeeeb">folly::AsyncSocket::setMaxReadsPerEvent</a></div><div class="ttdeci">void setMaxReadsPerEvent(uint16_t maxReads)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00451">AsyncSocket.h:451</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html">folly::AsyncSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00081">AsyncSocket.h:81</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a1e5f4fe62eb966586da88ff20c825591"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a1e5f4fe62eb966586da88ff20c825591">wangle::Acceptor::onNewConnection</a></div><div class="ttdeci">virtual void onNewConnection(folly::AsyncTransportWrapper::UniquePtr, const folly::SocketAddress *, const std::string &amp;, SecureTransportType, const TransportInfo &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00350">Acceptor.h:350</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adbd31679915f28e22ef9d2d024df20f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classfizz_1_1server_1_1FizzServerContext.html">fizz::server::FizzServerContext</a> &gt; wangle::Acceptor::createFizzContext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00135">135</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, and <a class="el" href="FizzConfigUtil_8cpp_source.html#l00067">wangle::FizzConfigUtil::createFizzContext()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00414">getFizzPeeker()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00162">resetSSLContextConfigs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                                                       {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1FizzConfigUtil.html#a3c32a9caf5c9ad9b4206d1de9ca5dffc">FizzConfigUtil::createFizzContext</a>(<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="ttc" id="classwangle_1_1FizzConfigUtil_html_a3c32a9caf5c9ad9b4206d1de9ca5dffc"><div class="ttname"><a href="classwangle_1_1FizzConfigUtil.html#a3c32a9caf5c9ad9b4206d1de9ca5dffc">wangle::FizzConfigUtil::createFizzContext</a></div><div class="ttdeci">static std::shared_ptr&lt; fizz::server::FizzServerContext &gt; createFizzContext(const wangle::ServerSocketConfig &amp;config, std::unique_ptr&lt; fizz::server::CertManager &gt; certMgr=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="FizzConfigUtil_8cpp_source.html#l00067">FizzConfigUtil.cpp:67</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4946249a76ea386d460d985e60907edd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classfizz_1_1server_1_1TicketCipher.html">fizz::server::TicketCipher</a> &gt; wangle::Acceptor::createFizzTicketCipher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1Optional.html">folly::Optional</a>&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt;&#160;</td>
          <td class="paramname"><em>pskContext</em> = <code><a class="el" href="namespacefolly.html#ac22c63dbe5af3b0bedb0f21031691537">folly::none</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00140">140</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="Acceptor_8h_source.html#l00441">currentSecrets_</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00026">wangle::TLSTicketKeySeeds::currentSeeds</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00027">wangle::TLSTicketKeySeeds::newSeeds</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00025">wangle::TLSTicketKeySeeds::oldSeeds</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00117">wangle::ServerSocketConfig::sslCacheOptions</a>, and <a class="el" href="SSLCacheOptions_8h_source.html#l00024">wangle::SSLCacheOptions::sslCacheTimeout</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00414">getFizzPeeker()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00149">updateFizzContext()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                                                    {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> FizzConfigUtil::createTicketCipher&lt;fizz::server::AES128TicketCipher&gt;(</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">currentSecrets_</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a2765ce856fbe4f7b0802c7d18a42474b">oldSeeds</a>,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">currentSecrets_</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a557d176fb66cc2e5e9487bd76f74c8d2">currentSeeds</a>,</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">currentSecrets_</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a0c11333f0aeaf2cbf044f9191d7826fe">newSeeds</a>,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">sslCacheOptions</a>.<a class="code" href="structwangle_1_1SSLCacheOptions.html#aa261ffb1df6856a4f1c745b5ad4bf283">sslCacheTimeout</a>,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(pskContext));</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a5a07feaa01ea8e73d0e18c57cb523506"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">wangle::ServerSocketConfig::sslCacheOptions</a></div><div class="ttdeci">SSLCacheOptions sslCacheOptions</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00117">ServerSocketConfig.h:117</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a0c11333f0aeaf2cbf044f9191d7826fe"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a0c11333f0aeaf2cbf044f9191d7826fe">wangle::TLSTicketKeySeeds::newSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; newSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00027">TLSTicketKeySeeds.h:27</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a557d176fb66cc2e5e9487bd76f74c8d2"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a557d176fb66cc2e5e9487bd76f74c8d2">wangle::TLSTicketKeySeeds::currentSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; currentSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00026">TLSTicketKeySeeds.h:26</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a86ee92187640afc119196b9c2daac37c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">wangle::Acceptor::currentSecrets_</a></div><div class="ttdeci">wangle::TLSTicketKeySeeds currentSecrets_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00441">Acceptor.h:441</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="structwangle_1_1SSLCacheOptions_html_aa261ffb1df6856a4f1c745b5ad4bf283"><div class="ttname"><a href="structwangle_1_1SSLCacheOptions.html#aa261ffb1df6856a4f1c745b5ad4bf283">wangle::SSLCacheOptions::sslCacheTimeout</a></div><div class="ttdeci">std::chrono::seconds sslCacheTimeout</div><div class="ttdef"><b>Definition:</b> <a href="SSLCacheOptions_8h_source.html#l00024">SSLCacheOptions.h:24</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a2765ce856fbe4f7b0802c7d18a42474b"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a2765ce856fbe4f7b0802c7d18a42474b">wangle::TLSTicketKeySeeds::oldSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; oldSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00025">TLSTicketKeySeeds.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a573829b01cc031375810b0252591f7d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::drainAllConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Drains all open connections of their outstanding transactions. When a connection's transaction count reaches zero, the connection closes. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00214">214</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>, and <a class="el" href="Acceptor_8h_source.html#l00459">gracefulShutdownTimeout_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00441">acceptStopped()</a>, and <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>.</p>
<div class="fragment"><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                              {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;initiateGracefulShutdown(</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">gracefulShutdownTimeout_</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a71476b030050be7e59d1a59da0aeb783"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">wangle::Acceptor::gracefulShutdownTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds gracefulShutdownTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00459">Acceptor.h:459</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a012c29afef7247c649d18d40437cf68c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::drainConnections </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pctToDrain</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drain defined percentage of connections. </p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#a558373144d849ff04fa183b8bbe5110d">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00485">485</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>, <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>, <a class="el" href="Acceptor_8h_source.html#l00119">getNumConnections()</a>, <a class="el" href="Acceptor_8h_source.html#l00459">gracefulShutdownTimeout_</a>, and <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3">folly::INFO</a>.</p>

<p>Referenced by <a class="el" href="ServerBootstrap-inl_8h_source.html#l00194">wangle::ServerAcceptor&lt; Pipeline &gt;::drainConnections()</a>, and <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>.</p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                            {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Draining &quot;</span> &lt;&lt; pctToDrain * 100 &lt;&lt; <span class="stringliteral">&quot;% of &quot;</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;              &lt;&lt; <a class="code" href="classwangle_1_1Acceptor.html#af5dcca4729fdd32872687bd3f0b27cf3">getNumConnections</a>() &lt;&lt; <span class="stringliteral">&quot; connections from Acceptor=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; in thread &quot;</span> &lt;&lt; <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    assert(base_-&gt;isInEventBaseThread());</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a012c29afef7247c649d18d40437cf68c">drainConnections</a>(pctToDrain, <a class="code" href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">gracefulShutdownTimeout_</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_af5dcca4729fdd32872687bd3f0b27cf3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#af5dcca4729fdd32872687bd3f0b27cf3">wangle::Acceptor::getNumConnections</a></div><div class="ttdeci">uint32_t getNumConnections() const </div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00119">Acceptor.h:119</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a012c29afef7247c649d18d40437cf68c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a012c29afef7247c649d18d40437cf68c">wangle::Acceptor::drainConnections</a></div><div class="ttdeci">virtual void drainConnections(double pctToDrain)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00485">Acceptor.cpp:485</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a71476b030050be7e59d1a59da0aeb783"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">wangle::Acceptor::gracefulShutdownTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds gracefulShutdownTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00459">Acceptor.h:459</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa26f441d30a6451be81cfa1d9c28a10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::dropAllConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Drop all connections.</p>
<p><a class="el" href="classwangle_1_1Acceptor.html#a85da2c52eb3fd76eb1b320617d0c9636">forceStop()</a> schedules <a class="el" href="classwangle_1_1Acceptor.html#aaa26f441d30a6451be81cfa1d9c28a10">dropAllConnections()</a> to be called in the acceptor's thread. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00513">513</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>, <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>, <a class="el" href="Acceptor_8h_source.html#l00456">forceShutdownInProgress_</a>, <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3">folly::INFO</a>, <a class="el" href="EventBase_8h_source.html#l00504">folly::EventBase::isInEventBaseThread()</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">kDone</a>, <a class="el" href="Acceptor_8h_source.html#l00452">numPendingSSLConns_</a>, <a class="el" href="Acceptor_8h_source.html#l00392">onConnectionsDrained()</a>, and <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00508">forceStop()</a>, and <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>.</p>
<div class="fragment"><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                             {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Dropping all connections from Acceptor=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; in thread &quot;</span> &lt;&lt; <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    assert(<a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#acb01d21c112777ecf6c7f12c303fe65b">isInEventBaseThread</a>());</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ad2e208ae6b6e827196a29baaabd1471c">forceShutdownInProgress_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;dropAllConnections();</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    CHECK(<a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;getNumConnections() == 0);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>.reset();</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  CHECK(<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a> == 0);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> = <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">State::kDone</a>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a3b82102690684b556dd8215eadd744ae">onConnectionsDrained</a>();</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_aadaf76d8da8c6ac2f7d64b219f2bee2e"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">wangle::Acceptor::numPendingSSLConns_</a></div><div class="ttdeci">uint64_t numPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00452">Acceptor.h:452</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ad2e208ae6b6e827196a29baaabd1471c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ad2e208ae6b6e827196a29baaabd1471c">wangle::Acceptor::forceShutdownInProgress_</a></div><div class="ttdeci">bool forceShutdownInProgress_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00456">Acceptor.h:456</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_acb01d21c112777ecf6c7f12c303fe65b"><div class="ttname"><a href="classfolly_1_1EventBase.html#acb01d21c112777ecf6c7f12c303fe65b">folly::EventBase::isInEventBaseThread</a></div><div class="ttdeci">bool isInEventBaseThread() const </div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00504">EventBase.h:504</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a3b82102690684b556dd8215eadd744ae"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a3b82102690684b556dd8215eadd744ae">wangle::Acceptor::onConnectionsDrained</a></div><div class="ttdeci">virtual void onConnectionsDrained()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00392">Acceptor.h:392</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a9e2024e27d037d51bb46ef86d2e0ea4d">wangle::Acceptor::State::kDone</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad9d901ede8d5f241e8671cb07bd5f6a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::dropConnections </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pctToDrop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Force-drop "pct" (0.0 to 1.0) of remaining client connections, regardless of whether they are busy or idle.</p>
<p>Note: unlike <a class="el" href="classwangle_1_1Acceptor.html#aaa26f441d30a6451be81cfa1d9c28a10">dropAllConnections()</a>, this function can be called from any thread. </p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#a601c11544d77bf5a3345164d909d2ae0">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00530">530</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>, <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>, <a class="el" href="Acceptor_8h_source.html#l00456">forceShutdownInProgress_</a>, <a class="el" href="Acceptor_8h_source.html#l00119">getNumConnections()</a>, <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3">folly::INFO</a>, and <a class="el" href="EventBase_8h_source.html#l00794">folly::EventBase::runInEventBaseThread()</a>.</p>

<p>Referenced by <a class="el" href="ServerBootstrap-inl_8h_source.html#l00203">wangle::ServerAcceptor&lt; Pipeline &gt;::dropConnections()</a>, and <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>.</p>
<div class="fragment"><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                                          {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a064e4b74656102dbb6b9dccc7ffeb8cf">runInEventBaseThread</a>([&amp;, pctToDrop] {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Dropping &quot;</span> &lt;&lt; pctToDrop * 100 &lt;&lt; <span class="stringliteral">&quot;% of &quot;</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                &lt;&lt; <a class="code" href="classwangle_1_1Acceptor.html#af5dcca4729fdd32872687bd3f0b27cf3">getNumConnections</a>() &lt;&lt; <span class="stringliteral">&quot; connections from Acceptor=&quot;</span> &lt;&lt; <span class="keyword">this</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; in thread &quot;</span> &lt;&lt; <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      assert(base_-&gt;isInEventBaseThread());</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#ad2e208ae6b6e827196a29baaabd1471c">forceShutdownInProgress_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;dropConnections(pctToDrop);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  });</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_af5dcca4729fdd32872687bd3f0b27cf3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#af5dcca4729fdd32872687bd3f0b27cf3">wangle::Acceptor::getNumConnections</a></div><div class="ttdeci">uint32_t getNumConnections() const </div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00119">Acceptor.h:119</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ad2e208ae6b6e827196a29baaabd1471c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ad2e208ae6b6e827196a29baaabd1471c">wangle::Acceptor::forceShutdownInProgress_</a></div><div class="ttdeci">bool forceShutdownInProgress_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00456">Acceptor.h:456</a></div></div>
<div class="ttc" id="classfolly_1_1EventBase_html_a064e4b74656102dbb6b9dccc7ffeb8cf"><div class="ttname"><a href="classfolly_1_1EventBase.html#a064e4b74656102dbb6b9dccc7ffeb8cf">folly::EventBase::runInEventBaseThread</a></div><div class="ttdeci">bool runInEventBaseThread(void(*fn)(T *), T *arg)</div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00794">EventBase.h:794</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85da2c52eb3fd76eb1b320617d0c9636"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::forceStop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Force the acceptor to drop all connections and stop processing.</p>
<p>This function may be called from any thread. The acceptor will not necessarily stop before this function returns: the stop will be scheduled to run in the acceptor's thread. </p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#a144b83800f6af67254f1f6806ae2368d">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00508">508</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>, <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>, and <a class="el" href="EventBase_8h_source.html#l00794">folly::EventBase::runInEventBaseThread()</a>.</p>

<p>Referenced by <a class="el" href="ServerBootstrap-inl_8h_source.html#l00212">wangle::ServerAcceptor&lt; Pipeline &gt;::forceStop()</a>, <a class="el" href="Acceptor_8h_source.html#l00182">getGracefulShutdownTimeout()</a>, and <a class="el" href="lib_2services_2test_2AcceptorTest_8cpp_source.html#l00047">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                    {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>-&gt;<a class="code" href="classfolly_1_1EventBase.html#a064e4b74656102dbb6b9dccc7ffeb8cf">runInEventBaseThread</a>([&amp;] { <a class="code" href="classwangle_1_1Acceptor.html#aaa26f441d30a6451be81cfa1d9c28a10">dropAllConnections</a>(); });</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="ttc" id="classfolly_1_1EventBase_html_a064e4b74656102dbb6b9dccc7ffeb8cf"><div class="ttname"><a href="classfolly_1_1EventBase.html#a064e4b74656102dbb6b9dccc7ffeb8cf">folly::EventBase::runInEventBaseThread</a></div><div class="ttdeci">bool runInEventBaseThread(void(*fn)(T *), T *arg)</div><div class="ttdef"><b>Definition:</b> <a href="EventBase_8h_source.html#l00794">EventBase.h:794</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aaa26f441d30a6451be81cfa1d9c28a10"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aaa26f441d30a6451be81cfa1d9c28a10">wangle::Acceptor::dropAllConnections</a></div><div class="ttdeci">void dropAllConnections()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00513">Acceptor.cpp:513</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2a11f3800f8fdb65b2c8d8c2c07be431"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> wangle::Acceptor::getActiveConnectionCountForLoadShedding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classwangle_1_1TestableAcceptor.html#ad617a6b4a5e3a2fddf1b07cc0a93be2e">wangle::TestableAcceptor</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00322">322</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00228">canAccept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{ <span class="keywordflow">return</span> 0; }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a703d0880c229ff6d7e2b743f64b21ea0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structwangle_1_1ServerSocketConfig.html">ServerSocketConfig</a>&amp; wangle::Acceptor::getConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00197">197</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>; }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3626a9bfe8781f358405a92fb1c139b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> wangle::Acceptor::getConnectionCountForLoadShedding </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classwangle_1_1TestableAcceptor.html#aeaa5ada6ae5efee07830c36698c61ffa">wangle::TestableAcceptor</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00321">321</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00228">canAccept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{ <span class="keywordflow">return</span> 0; }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa58dc66eefbacabffbe286e1beb5bde6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classwangle_1_1ConnectionManager.html">wangle::ConnectionManager</a>* wangle::Acceptor::getConnectionManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Access the <a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a>'s downstream (client-side) <a class="el" href="classwangle_1_1ConnectionManager.html">ConnectionManager</a> </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00132">132</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00501">addConnection()</a>, and <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>.</p>

<p>Referenced by <a class="el" href="AcceptorHandshakeManager_8cpp_source.html#l00070">wangle::AcceptorHandshakeManager::startHandshakeTimeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                                          {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>.get();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af12e4a8ab4c1d6f78367968990d9cf5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">milliseconds wangle::Acceptor::getConnTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current connection timeout. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00497">497</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, and <a class="el" href="ServerSocketConfig_8h_source.html#l00102">wangle::ServerSocketConfig::connectionIdleTimeout</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00148">getState()</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                               {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#ac2412ef71d4b4b3a9d576a75a848ad25">connectionIdleTimeout</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_ac2412ef71d4b4b3a9d576a75a848ad25"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#ac2412ef71d4b4b3a9d576a75a848ad25">wangle::ServerSocketConfig::connectionIdleTimeout</a></div><div class="ttdeci">std::chrono::milliseconds connectionIdleTimeout</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00102">ServerSocketConfig.h:102</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62b260ef0aae4594ce3a5de6f18a6c93"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a>* wangle::Acceptor::getEventBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Access the <a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a>'s event base. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00127">127</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>.</p>

<p>Referenced by <a class="el" href="ServerBootstrap_8h_source.html#l00163">wangle::ServerBootstrap&lt; DefaultPipeline &gt;::bind()</a>, <a class="el" href="ServerBootstrap_8h_source.html#l00211">wangle::ServerBootstrap&lt; DefaultPipeline &gt;::bindImpl()</a>, <a class="el" href="HTTPServer_8cpp_source.html#l00262">proxygen::HTTPServer::updateTicketSeeds()</a>, and <a class="el" href="HTTPServer_8cpp_source.html#l00245">proxygen::HTTPServer::updateTLSCredentials()</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>; }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa2f9e97b7e9a2281eb2668b4d2f37dce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classwangle_1_1DefaultToFizzPeekingCallback.html">DefaultToFizzPeekingCallback</a>* wangle::Acceptor::getFizzPeeker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00414">414</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00135">createFizzContext()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00140">createFizzTicketCipher()</a>, <a class="el" href="Acceptor_8h_source.html#l00436">defaultFizzPeeker_</a>, <a class="el" href="Optional_8h_source.html#l00087">folly::none</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00149">updateFizzContext()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00162">resetSSLContextConfigs()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00195">setTLSTicketSecrets()</a>.</p>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                                        {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="classwangle_1_1Acceptor.html#a0c81a983de91a7335d9bcf71a6e4f9c9">defaultFizzPeeker_</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a0c81a983de91a7335d9bcf71a6e4f9c9"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0c81a983de91a7335d9bcf71a6e4f9c9">wangle::Acceptor::defaultFizzPeeker_</a></div><div class="ttdeci">DefaultToFizzPeekingCallback defaultFizzPeeker_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00436">Acceptor.h:436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aed88bf0dee3ff2ac34151789a470ee7b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds wangle::Acceptor::getGracefulShutdownTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00182">182</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00508">forceStop()</a>, and <a class="el" href="Acceptor_8h_source.html#l00459">gracefulShutdownTimeout_</a>.</p>

<p>Referenced by <a class="el" href="SimpleController_8cpp_source.html#l00063">proxygen::SimpleController::getGracefulShutdownTimeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                           {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">gracefulShutdownTimeout_</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a71476b030050be7e59d1a59da0aeb783"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">wangle::Acceptor::gracefulShutdownTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds gracefulShutdownTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00459">Acceptor.h:459</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae2883de07f8f6093d8e61ce872109ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a>&amp; wangle::Acceptor::getName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the name of this VIP.</p>
<p>Will return an empty string if no name has been configured. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00162">162</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, and <a class="el" href="ServerSocketConfig_8h_source.html#l00087">wangle::ServerSocketConfig::name</a>.</p>

<p>Referenced by <a class="el" href="ServiceWorker_8h_source.html#l00062">proxygen::ServiceWorker::addServiceAcceptor()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                   {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a5df8e0d1658f496b28268ca949c0bc92">name</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a5df8e0d1658f496b28268ca949c0bc92"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a5df8e0d1658f496b28268ca949c0bc92">wangle::ServerSocketConfig::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00087">ServerSocketConfig.h:87</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af5dcca4729fdd32872687bd3f0b27cf3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> wangle::Acceptor::getNumConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of outstanding connections in this service instance. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00119">119</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00485">drainConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00530">dropConnections()</a>, and <a class="el" href="lib_2services_2test_2AcceptorTest_8cpp_source.html#l00047">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                     {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a> ?</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      (<a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>)<a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a>-&gt;getNumConnections() : 0;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a896dd4c7bfd01691754faa760c71f755"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1SSLContextManager.html">SSLContextManager</a>* wangle::Acceptor::getSSLContextManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00104">104</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00195">setTLSTicketSecrets()</a>, and <a class="el" href="Acceptor_8h_source.html#l00427">sslCtxManager_</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                                  {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>.get();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a0d8fcfdb00a9cc17e39641518d2c2738"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">wangle::Acceptor::sslCtxManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SSLContextManager &gt; sslCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00427">Acceptor.h:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8312adc9173d67cb94c275646c9035ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds wangle::Acceptor::getSSLHandshakeTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the ssl handshake connection timeout of this VIP </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00169">169</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, and <a class="el" href="ServerSocketConfig_8h_source.html#l00107">wangle::ServerSocketConfig::sslHandshakeTimeout</a>.</p>

<p>Referenced by <a class="el" href="AcceptorHandshakeManager_8cpp_source.html#l00070">wangle::AcceptorHandshakeManager::startHandshakeTimeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                                       {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a9e407445ac9d87d34d99e94c2d752cba">sslHandshakeTimeout</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a9e407445ac9d87d34d99e94c2d752cba"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a9e407445ac9d87d34d99e94c2d752cba">wangle::ServerSocketConfig::sslHandshakeTimeout</a></div><div class="ttdeci">std::chrono::milliseconds sslHandshakeTimeout</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00107">ServerSocketConfig.h:107</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76bee1656ddbe9c02f0817968d418668"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528">State</a> wangle::Acceptor::getState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get this acceptor's current state. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00148">148</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00497">getConnTimeout()</a>, and <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>.</p>

<p>Referenced by <a class="el" href="lib_2services_2test_2AcceptorTest_8cpp_source.html#l00047">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                         {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abfce5bfa94ea300cd9f4f2d2bcdc560e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> wangle::Acceptor::getTotalNumPendingSSLConns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00199">199</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00365">connectionReady()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00214">drainAllConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00485">drainConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00530">dropConnections()</a>, <a class="el" href="extension__points_8h_source.html#l00040">folly::pushmi::__adl::noexcept()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00295">onDoneAcceptingConnection()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00388">plaintextConnectionReady()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00422">sslConnectionError()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00403">sslConnectionReady()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00353">startHandshakeManager()</a>, <a class="el" href="Conv_8cpp_source.html#l00212">string</a>, and <a class="el" href="Acceptor_8h_source.html#l00454">totalNumPendingSSLConns_</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                               {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">totalNumPendingSSLConns_</a>.load();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a242076537fdb8d99e9165c042b6c05da"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">wangle::Acceptor::totalNumPendingSSLConns_</a></div><div class="ttdeci">static std::atomic&lt; uint64_t &gt; totalNumPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00454">Acceptor.h:454</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad99d0ceaa0b25340b460207ee1af7348"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> wangle::Acceptor::getWorkerMaxConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00323">323</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00228">canAccept()</a>, <a class="el" href="Acceptor_8h_source.html#l00458">connectionCounter_</a>, and <a class="el" href="classwangle_1_1IConnectionCounter.html#ac3f92c13a94ca29f42ceb92b69a17226">wangle::IConnectionCounter::getMaxConnections()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00228">canAccept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                                   {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">connectionCounter_</a>-&gt;<a class="code" href="classwangle_1_1IConnectionCounter.html#ac3f92c13a94ca29f42ceb92b69a17226">getMaxConnections</a>();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div><div class="ttc" id="classwangle_1_1IConnectionCounter_html_ac3f92c13a94ca29f42ceb92b69a17226"><div class="ttname"><a href="classwangle_1_1IConnectionCounter.html#ac3f92c13a94ca29f42ceb92b69a17226">wangle::IConnectionCounter::getMaxConnections</a></div><div class="ttdeci">virtual uint64_t getMaxConnections() const =0</div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a05c0227e1dee7e318f940c3fc79f71d7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">wangle::Acceptor::connectionCounter_</a></div><div class="ttdeci">const IConnectionCounter * connectionCounter_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00458">Acceptor.h:458</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a79adc87826c8f1e6ea5699f95a6bb062"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncServerSocket.html">folly::AsyncServerSocket</a> *&#160;</td>
          <td class="paramname"><em>serverSocket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *&#160;</td>
          <td class="paramname"><em>eventBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classwangle_1_1SSLStats.html">SSLStats</a> *&#160;</td>
          <td class="paramname"><em>stats</em> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the <a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> to run in the specified EventBase thread, receiving connections from the specified AsyncServerSocket.</p>
<p>This method will be called from the AsyncServerSocket's primary thread, not the specified EventBase thread. </p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#a6005242d981c9216ea976410d1fc5c46">wangle::ServerAcceptor&lt; Pipeline &gt;</a>, and <a class="el" href="classproxygen_1_1HTTPAcceptor.html#a8419473788e11d528388653f834f8b83">proxygen::HTTPAcceptor</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00060">60</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="AsyncServerSocket_8cpp_source.html#l00586">folly::AsyncServerSocket::addAcceptCallback()</a>, <a class="el" href="SecurityProtocolContextManager_8h_source.html#l00032">wangle::SecurityProtocolContextManager::addPeeker()</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00124">wangle::ServerSocketConfig::allowInsecureConnectionsOnSecureServer</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00112">wangle::ServerSocketConfig::bindAddress</a>, <a class="el" href="Acceptor_8h_source.html#l00440">cacheProvider_</a>, <a class="el" href="Acceptor_8cpp_source.html#l00135">createFizzContext()</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00026">wangle::TLSTicketKeySeeds::currentSeeds</a>, <a class="el" href="Acceptor_8h_source.html#l00435">defaultPeekingCallback_</a>, <a class="el" href="FizzConfig_8h_source.html#l00024">wangle::FizzConfig::enableFizz</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00160">wangle::ServerSocketConfig::fizzConfig</a>, <a class="el" href="Acceptor_8h_source.html#l00414">getFizzPeeker()</a>, <a class="el" href="Acceptor_8h_source.html#l00162">getName()</a>, <a class="el" href="AsyncServerSocket_8h_source.html#l00301">folly::AsyncServerSocket::getSockets()</a>, <a class="el" href="namespacefolly.html#a925db14fdb0096fe395f6acc43118f4aa551b723eafd6a31d444fcb2f5920fbd3">folly::INFO</a>, <a class="el" href="Acceptor_8cpp_source.html#l00126">initDownstreamConnectionManager()</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00129">wangle::ServerSocketConfig::initialTicketSeeds</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00057">wangle::ServerSocketConfig::isSSL()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00027">wangle::TLSTicketKeySeeds::newSeeds</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00025">wangle::TLSTicketKeySeeds::oldSeeds</a>, <a class="el" href="Acceptor_8h_source.html#l00432">securityProtocolCtxManager_</a>, <a class="el" href="Acceptor_8cpp_source.html#l00195">setTLSTicketSecrets()</a>, <a class="el" href="Acceptor_8h_source.html#l00425">socketOptions_</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00117">wangle::ServerSocketConfig::sslCacheOptions</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00134">wangle::ServerSocketConfig::sslContextConfigs</a>, <a class="el" href="Acceptor_8h_source.html#l00427">sslCtxManager_</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00140">wangle::ServerSocketConfig::strictSSL</a>, and <a class="el" href="Acceptor_8h_source.html#l00434">tlsPlaintextPeekingCallback_</a>.</p>

<p>Referenced by <a class="el" href="ServerBootstrap-inl_8h_source.html#l00125">wangle::ServerAcceptor&lt; Pipeline &gt;::init()</a>, <a class="el" href="Acceptor_8h_source.html#l00078">setSSLCacheProvider()</a>, <a class="el" href="lib_2services_2test_2AcceptorTest_8cpp_source.html#l00047">TEST()</a>, and <a class="el" href="BootstrapTest_8cpp_source.html#l00070">TestAcceptor::TestAcceptor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a0e6fd498bd4eb5dd0aad9c7e461a80ec">isSSL</a>()) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#aea16a2329a25b2b6a6c5d593d4feda19">allowInsecureConnectionsOnSecureServer</a>) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a3a8479eaefe401b585d14a2b9495b23c">securityProtocolCtxManager_</a>.<a class="code" href="classwangle_1_1SecurityProtocolContextManager.html#a4096f3935d505fb17b81c0c1db0e6185">addPeeker</a>(&amp;<a class="code" href="classwangle_1_1Acceptor.html#a6a6d223330a96428c799e0d940b6c558">tlsPlaintextPeekingCallback_</a>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a21349236a338f4586dfde3edf1382b03">fizzConfig</a>.<a class="code" href="structwangle_1_1FizzConfig.html#ad45df93c8843ea21a10a4960736517d3">enableFizz</a>) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keyword">auto</span> fizzCtx = <a class="code" href="classwangle_1_1Acceptor.html#adbd31679915f28e22ef9d2d024df20f3">createFizzContext</a>();</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keyword">auto</span>* peeker = <a class="code" href="classwangle_1_1Acceptor.html#aa2f9e97b7e9a2281eb2668b4d2f37dce">getFizzPeeker</a>();</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      peeker-&gt;setContext(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(fizzCtx));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a3a8479eaefe401b585d14a2b9495b23c">securityProtocolCtxManager_</a>.<a class="code" href="classwangle_1_1SecurityProtocolContextManager.html#a4096f3935d505fb17b81c0c1db0e6185">addPeeker</a>(peeker);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#aea78da3c9c030895f5cf0c9fa4377402">setTLSTicketSecrets</a>(</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;          <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a4ac2586a5c3c7feb5c7dc5591adca21a">initialTicketSeeds</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a2765ce856fbe4f7b0802c7d18a42474b">oldSeeds</a>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;          <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a4ac2586a5c3c7feb5c7dc5591adca21a">initialTicketSeeds</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a557d176fb66cc2e5e9487bd76f74c8d2">currentSeeds</a>,</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;          <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a4ac2586a5c3c7feb5c7dc5591adca21a">initialTicketSeeds</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a0c11333f0aeaf2cbf044f9191d7826fe">newSeeds</a>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a3a8479eaefe401b585d14a2b9495b23c">securityProtocolCtxManager_</a>.<a class="code" href="classwangle_1_1SecurityProtocolContextManager.html#a4096f3935d505fb17b81c0c1db0e6185">addPeeker</a>(&amp;<a class="code" href="classwangle_1_1Acceptor.html#a18f047a280b4d0ff49b80fbf5816a444">defaultPeekingCallback_</a>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a> = std::make_unique&lt;SSLContextManager&gt;(</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        eventBase,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="stringliteral">&quot;vip_&quot;</span> + <a class="code" href="classwangle_1_1Acceptor.html#aae2883de07f8f6093d8e61ce872109ad">getName</a>(),</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#ad6ede6f1604c80fb71ea07006fd16d13">strictSSL</a>, stats);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; sslCtxConfig : <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#aa03e9e83b98bb36d457c91618eb83f81">sslContextConfigs</a>) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;addSSLContextConfig(</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;          sslCtxConfig,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;          <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">sslCacheOptions</a>,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          &amp;<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a4ac2586a5c3c7feb5c7dc5591adca21a">initialTicketSeeds</a>,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#ac8bf983fb991614555ae89c835f43cdc">bindAddress</a>,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;          <a class="code" href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">cacheProvider_</a>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      CHECK(<a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;getDefaultSSLCtx());</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::runtime_error&amp; ex) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#ad6ede6f1604c80fb71ea07006fd16d13">strictSSL</a>) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;clear();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="comment">// This is not a Not a fatal error, but useful to know.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Failed to configure TLS. This is not a fatal error. &quot;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                  &lt;&lt; ex.what();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a893513d1cf1a2a5b7605cf8c736ef514">initDownstreamConnectionManager</a>(eventBase);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">if</span> (serverSocket) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    serverSocket-&gt;<a class="code" href="classfolly_1_1AsyncServerSocket.html#a054f650a28760b166f109194ea15cbf1">addAcceptCallback</a>(<span class="keyword">this</span>, eventBase);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; fd : serverSocket-&gt;<a class="code" href="classfolly_1_1AsyncServerSocket.html#a131c614961fbc96a568475bcc82ded1f">getSockets</a>()) {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">if</span> (fd &lt; 0) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; opt: <a class="code" href="classwangle_1_1Acceptor.html#a239e2bc553e858564ee567a8eff028ba">socketOptions_</a>) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        opt.first.apply(fd, opt.second);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a5a07feaa01ea8e73d0e18c57cb523506"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">wangle::ServerSocketConfig::sslCacheOptions</a></div><div class="ttdeci">SSLCacheOptions sslCacheOptions</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00117">ServerSocketConfig.h:117</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a0c11333f0aeaf2cbf044f9191d7826fe"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a0c11333f0aeaf2cbf044f9191d7826fe">wangle::TLSTicketKeySeeds::newSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; newSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00027">TLSTicketKeySeeds.h:27</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a557d176fb66cc2e5e9487bd76f74c8d2"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a557d176fb66cc2e5e9487bd76f74c8d2">wangle::TLSTicketKeySeeds::currentSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; currentSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00026">TLSTicketKeySeeds.h:26</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a21349236a338f4586dfde3edf1382b03"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a21349236a338f4586dfde3edf1382b03">wangle::ServerSocketConfig::fizzConfig</a></div><div class="ttdeci">FizzConfig fizzConfig</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00160">ServerSocketConfig.h:160</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncServerSocket_html_a131c614961fbc96a568475bcc82ded1f"><div class="ttname"><a href="classfolly_1_1AsyncServerSocket.html#a131c614961fbc96a568475bcc82ded1f">folly::AsyncServerSocket::getSockets</a></div><div class="ttdeci">std::vector&lt; int &gt; getSockets() const </div><div class="ttdef"><b>Definition:</b> <a href="AsyncServerSocket_8h_source.html#l00301">AsyncServerSocket.h:301</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aea78da3c9c030895f5cf0c9fa4377402"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aea78da3c9c030895f5cf0c9fa4377402">wangle::Acceptor::setTLSTicketSecrets</a></div><div class="ttdeci">virtual void setTLSTicketSecrets(const std::vector&lt; std::string &gt; &amp;oldSecrets, const std::vector&lt; std::string &gt; &amp;currentSecrets, const std::vector&lt; std::string &gt; &amp;newSecrets)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00195">Acceptor.cpp:195</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a9a32d345ea76a7b4cd6e03fadc61eed1"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">wangle::Acceptor::cacheProvider_</a></div><div class="ttdeci">std::shared_ptr&lt; SSLCacheProvider &gt; cacheProvider_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00440">Acceptor.h:440</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a893513d1cf1a2a5b7605cf8c736ef514"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a893513d1cf1a2a5b7605cf8c736ef514">wangle::Acceptor::initDownstreamConnectionManager</a></div><div class="ttdeci">virtual void initDownstreamConnectionManager(folly::EventBase *eventBase)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00126">Acceptor.cpp:126</a></div></div>
<div class="ttc" id="classwangle_1_1SecurityProtocolContextManager_html_a4096f3935d505fb17b81c0c1db0e6185"><div class="ttname"><a href="classwangle_1_1SecurityProtocolContextManager.html#a4096f3935d505fb17b81c0c1db0e6185">wangle::SecurityProtocolContextManager::addPeeker</a></div><div class="ttdeci">void addPeeker(PeekingCallbackPtr peekingCallback)</div><div class="ttdef"><b>Definition:</b> <a href="SecurityProtocolContextManager_8h_source.html#l00032">SecurityProtocolContextManager.h:32</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a239e2bc553e858564ee567a8eff028ba"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a239e2bc553e858564ee567a8eff028ba">wangle::Acceptor::socketOptions_</a></div><div class="ttdeci">folly::AsyncSocket::OptionMap socketOptions_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00425">Acceptor.h:425</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aae2883de07f8f6093d8e61ce872109ad"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aae2883de07f8f6093d8e61ce872109ad">wangle::Acceptor::getName</a></div><div class="ttdeci">const std::string &amp; getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00162">Acceptor.h:162</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_ac8bf983fb991614555ae89c835f43cdc"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#ac8bf983fb991614555ae89c835f43cdc">wangle::ServerSocketConfig::bindAddress</a></div><div class="ttdeci">folly::SocketAddress bindAddress</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00112">ServerSocketConfig.h:112</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_aea16a2329a25b2b6a6c5d593d4feda19"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#aea16a2329a25b2b6a6c5d593d4feda19">wangle::ServerSocketConfig::allowInsecureConnectionsOnSecureServer</a></div><div class="ttdeci">bool allowInsecureConnectionsOnSecureServer</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00124">ServerSocketConfig.h:124</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aa2f9e97b7e9a2281eb2668b4d2f37dce"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aa2f9e97b7e9a2281eb2668b4d2f37dce">wangle::Acceptor::getFizzPeeker</a></div><div class="ttdeci">virtual DefaultToFizzPeekingCallback * getFizzPeeker()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00414">Acceptor.h:414</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a18f047a280b4d0ff49b80fbf5816a444"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a18f047a280b4d0ff49b80fbf5816a444">wangle::Acceptor::defaultPeekingCallback_</a></div><div class="ttdeci">DefaultToSSLPeekingCallback defaultPeekingCallback_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00435">Acceptor.h:435</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a3a8479eaefe401b585d14a2b9495b23c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a3a8479eaefe401b585d14a2b9495b23c">wangle::Acceptor::securityProtocolCtxManager_</a></div><div class="ttdeci">SecurityProtocolContextManager securityProtocolCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00432">Acceptor.h:432</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_adbd31679915f28e22ef9d2d024df20f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#adbd31679915f28e22ef9d2d024df20f3">wangle::Acceptor::createFizzContext</a></div><div class="ttdeci">virtual std::shared_ptr&lt; fizz::server::FizzServerContext &gt; createFizzContext()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00135">Acceptor.cpp:135</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a4ac2586a5c3c7feb5c7dc5591adca21a"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a4ac2586a5c3c7feb5c7dc5591adca21a">wangle::ServerSocketConfig::initialTicketSeeds</a></div><div class="ttdeci">TLSTicketKeySeeds initialTicketSeeds</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00129">ServerSocketConfig.h:129</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a0e6fd498bd4eb5dd0aad9c7e461a80ec"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a0e6fd498bd4eb5dd0aad9c7e461a80ec">wangle::ServerSocketConfig::isSSL</a></div><div class="ttdeci">bool isSSL() const </div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00057">ServerSocketConfig.h:57</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_ad6ede6f1604c80fb71ea07006fd16d13"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#ad6ede6f1604c80fb71ea07006fd16d13">wangle::ServerSocketConfig::strictSSL</a></div><div class="ttdeci">bool strictSSL</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00140">ServerSocketConfig.h:140</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a2765ce856fbe4f7b0802c7d18a42474b"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a2765ce856fbe4f7b0802c7d18a42474b">wangle::TLSTicketKeySeeds::oldSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; oldSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00025">TLSTicketKeySeeds.h:25</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a6a6d223330a96428c799e0d940b6c558"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a6a6d223330a96428c799e0d940b6c558">wangle::Acceptor::tlsPlaintextPeekingCallback_</a></div><div class="ttdeci">TLSPlaintextPeekingCallback tlsPlaintextPeekingCallback_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00434">Acceptor.h:434</a></div></div>
<div class="ttc" id="structwangle_1_1FizzConfig_html_ad45df93c8843ea21a10a4960736517d3"><div class="ttname"><a href="structwangle_1_1FizzConfig.html#ad45df93c8843ea21a10a4960736517d3">wangle::FizzConfig::enableFizz</a></div><div class="ttdeci">bool enableFizz</div><div class="ttdef"><b>Definition:</b> <a href="FizzConfig_8h_source.html#l00024">FizzConfig.h:24</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_aa03e9e83b98bb36d457c91618eb83f81"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#aa03e9e83b98bb36d457c91618eb83f81">wangle::ServerSocketConfig::sslContextConfigs</a></div><div class="ttdeci">std::vector&lt; SSLContextConfig &gt; sslContextConfigs</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00134">ServerSocketConfig.h:134</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0d8fcfdb00a9cc17e39641518d2c2738"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">wangle::Acceptor::sslCtxManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SSLContextManager &gt; sslCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00427">Acceptor.h:427</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncServerSocket_html_a054f650a28760b166f109194ea15cbf1"><div class="ttname"><a href="classfolly_1_1AsyncServerSocket.html#a054f650a28760b166f109194ea15cbf1">folly::AsyncServerSocket::addAcceptCallback</a></div><div class="ttdeci">virtual void addAcceptCallback(AcceptCallback *callback, EventBase *eventBase, uint32_t maxAtOnce=kDefaultCallbackAcceptAtOnce)</div><div class="ttdef"><b>Definition:</b> <a href="AsyncServerSocket_8cpp_source.html#l00586">AsyncServerSocket.cpp:586</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a893513d1cf1a2a5b7605cf8c736ef514"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::initDownstreamConnectionManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *&#160;</td>
          <td class="paramname"><em>eventBase</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00126">126</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00102">wangle::ServerSocketConfig::connectionIdleTimeout</a>, <a class="el" href="Acceptor_8h_source.html#l00438">downstreamConnectionManager_</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a2fc7fbf0d19294f85dd3880460dd3c0a">kRunning</a>, <a class="el" href="ConnectionManager_8h_source.html#l00071">wangle::ConnectionManager::makeUnique()</a>, and <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                                   {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  CHECK(<span class="keyword">nullptr</span> == this-&gt;<a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a> || eventBase == this-&gt;<a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a> = eventBase;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> = <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a2fc7fbf0d19294f85dd3880460dd3c0a">State::kRunning</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">downstreamConnectionManager_</a> = <a class="code" href="classwangle_1_1ConnectionManager.html#a8fa72870400b6da9079cf7b66f40187e">ConnectionManager::makeUnique</a>(</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    eventBase, <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#ac2412ef71d4b4b3a9d576a75a848ad25">connectionIdleTimeout</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_ac2412ef71d4b4b3a9d576a75a848ad25"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#ac2412ef71d4b4b3a9d576a75a848ad25">wangle::ServerSocketConfig::connectionIdleTimeout</a></div><div class="ttdeci">std::chrono::milliseconds connectionIdleTimeout</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00102">ServerSocketConfig.h:102</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ab94a67c0ffc83f9aa9dd874dbf4865f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ab94a67c0ffc83f9aa9dd874dbf4865f3">wangle::Acceptor::downstreamConnectionManager_</a></div><div class="ttdeci">wangle::ConnectionManager::UniquePtr downstreamConnectionManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00438">Acceptor.h:438</a></div></div>
<div class="ttc" id="classwangle_1_1ConnectionManager_html_a8fa72870400b6da9079cf7b66f40187e"><div class="ttname"><a href="classwangle_1_1ConnectionManager.html#a8fa72870400b6da9079cf7b66f40187e">wangle::ConnectionManager::makeUnique</a></div><div class="ttdeci">static UniquePtr makeUnique(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="ConnectionManager_8h_source.html#l00071">ConnectionManager.h:71</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a2fc7fbf0d19294f85dd3880460dd3c0a"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a2fc7fbf0d19294f85dd3880460dd3c0a">wangle::Acceptor::State::kRunning</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5cbd4be5927983a1f1ef75b16aebd25b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool wangle::Acceptor::isSSL </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00195">195</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, and <a class="el" href="ServerSocketConfig_8h_source.html#l00057">wangle::ServerSocketConfig::isSSL()</a>.</p>

<p>Referenced by <a class="el" href="HTTPServer_8cpp_source.html#l00262">proxygen::HTTPServer::updateTicketSeeds()</a>, and <a class="el" href="HTTPServer_8cpp_source.html#l00245">proxygen::HTTPServer::updateTLSCredentials()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a0e6fd498bd4eb5dd0aad9c7e461a80ec">isSSL</a>(); }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a0e6fd498bd4eb5dd0aad9c7e461a80ec"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a0e6fd498bd4eb5dd0aad9c7e461a80ec">wangle::ServerSocketConfig::isSSL</a></div><div class="ttdeci">bool isSSL() const </div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00057">ServerSocketConfig.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b510746d26a7efe2de256ebd5dba340"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">folly::AsyncSocket::UniquePtr</a> wangle::Acceptor::makeNewAsyncSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classproxygen_1_1HTTPSessionAcceptor.html#aa56e436fec5ae6037da42c441a996e44">proxygen::HTTPSessionAcceptor</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00365">365</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;              {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">folly::AsyncSocket::UniquePtr</a>(</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keyword">new</span> <a class="code" href="classfolly_1_1AsyncSocket.html">folly::AsyncSocket</a>(base, fd));</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSocket_html"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html">folly::AsyncSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00081">AsyncSocket.h:81</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a59188939b6c898468addc2f6d56c6376"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">folly::AsyncSocket::UniquePtr</a></div><div class="ttdeci">std::unique_ptr&lt; AsyncSocket, Destructor &gt; UniquePtr</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00083">AsyncSocket.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a52accbd191645de6cf1f4e19d36ab6b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">folly::AsyncSSLSocket::UniquePtr</a> wangle::Acceptor::makeNewAsyncSSLSocket </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classfolly_1_1SSLContext.html">folly::SSLContext</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a> *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00372">372</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                                                             {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">folly::AsyncSSLSocket::UniquePtr</a>(</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keyword">new</span> <a class="code" href="classfolly_1_1AsyncSSLSocket.html">folly::AsyncSSLSocket</a>(</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;          ctx,</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;          base,</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          fd,</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          <span class="keyword">true</span>, <span class="comment">/* set server */</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          <span class="keyword">true</span> <span class="comment">/* defer the security negotiation until sslAccept */</span>));</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div><div class="ttc" id="classfolly_1_1AsyncSSLSocket_html"><div class="ttname"><a href="classfolly_1_1AsyncSSLSocket.html">folly::AsyncSSLSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="AsyncSSLSocket_8h_source.html#l00070">AsyncSSLSocket.h:70</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSSLSocket_html_a2a774a3b720af22f579b3d66d2d79712"><div class="ttname"><a href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">folly::AsyncSSLSocket::UniquePtr</a></div><div class="ttdeci">std::unique_ptr&lt; AsyncSSLSocket, Destructor &gt; UniquePtr</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSSLSocket_8h_source.html#l00072">AsyncSSLSocket.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a951d1e4dc1723736fd7c0aa14a8d55"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::onConnectionAdded </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwangle_1_1ManagedConnection.html">ManagedConnection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when a connection is added to the <a class="el" href="classwangle_1_1ConnectionManager.html">ConnectionManager</a>. </p>

<p>Implements <a class="el" href="classwangle_1_1ConnectionManager_1_1Callback.html#af5271d8ed9ecd42e8b9fefb231d47552">wangle::ConnectionManager::Callback</a>.</p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#ae74f1fa86e1eafeefb87c5944af385f2">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00403">403</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8e9a88d12cdd3904bba6d6f64418f004"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::onConnectionRemoved </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwangle_1_1ManagedConnection.html">ManagedConnection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when a connection is removed from the <a class="el" href="classwangle_1_1ConnectionManager.html">ConnectionManager</a>. </p>

<p>Implements <a class="el" href="classwangle_1_1ConnectionManager_1_1Callback.html#aa9bb16b38f0ae697ac474922e4a83186">wangle::ConnectionManager::Callback</a>.</p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#ae8564df0a9e48660a4d4847b84fcb843">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00404">404</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b82102690684b556dd8215eadd744ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void wangle::Acceptor::onConnectionsDrained </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classwangle_1_1Acceptor.html#a3b82102690684b556dd8215eadd744ae">onConnectionsDrained()</a> will be called once all connections have been drained while the acceptor is stopping.</p>
<p>Subclasses can override this method to perform any subclass-specific cleanup. </p>

<p>Reimplemented in <a class="el" href="classproxygen_1_1HTTPServerAcceptor.html#ad17caab0b384feab6968d57313485565">proxygen::HTTPServerAcceptor</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00392">392</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00432">acceptError()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00441">acceptStopped()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00277">connectionAccepted()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00458">onEmpty()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a24264956b8bf24520ee2754aabb50467"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::onDataAvailable </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classfolly_1_1AsyncUDPSocket.html">folly::AsyncUDPSocket</a> &gt;&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classfolly_1_1IOBuf.html">folly::IOBuf</a> &gt;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>truncated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when a new packet is received </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html#a0a4f5ac5c437fa70fd8497efc5fa4d70">folly::AsyncUDPServerSocket::Callback</a>.</p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#ae412134edf6f686c057741edd8df4478">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00359">359</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                              {}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a104b5a101057e9d94e4be71d7f9ad461"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::onDoneAcceptingConnection </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>clientAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::steady_clock::time_point&#160;</td>
          <td class="paramname"><em>acceptTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called right when the TCP connection has been accepted, before processing the first HTTP bytes (HTTP) or the SSL handshake (HTTPS) </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00295">295</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00277">connectionAccepted()</a>, and <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>.</p>
<div class="fragment"><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                                         {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  TransportInfo tinfo;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a38e9adf74e724e4e2941d72f5fdfc1fd">processEstablishedConnection</a>(fd, clientAddr, acceptTime, tinfo);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_a38e9adf74e724e4e2941d72f5fdfc1fd"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a38e9adf74e724e4e2941d72f5fdfc1fd">wangle::Acceptor::processEstablishedConnection</a></div><div class="ttdeci">void processEstablishedConnection(int fd, const folly::SocketAddress &amp;clientAddr, std::chrono::steady_clock::time_point acceptTime, TransportInfo &amp;tinfo) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00304">Acceptor.cpp:304</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a90eb08cbedf427965a9db197f61e1fb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::onEmpty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwangle_1_1ConnectionManager.html">wangle::ConnectionManager</a> &amp;&#160;</td>
          <td class="paramname"><em>cm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when the number of connections managed by the <a class="el" href="classwangle_1_1ConnectionManager.html">ConnectionManager</a> changes from nonzero to zero. </p>

<p>Implements <a class="el" href="classwangle_1_1ConnectionManager_1_1Callback.html#a89ab277036265aa7e63fc543625f4f64">wangle::ConnectionManager::Callback</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00458">458</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">kDraining</a>, and <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00392">onConnectionsDrained()</a>.</p>
<div class="fragment"><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                          {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Acceptor=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; onEmpty()&quot;</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> == <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">State::kDraining</a>) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">checkDrained</a>();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_ac09bdf5d859a9269276da1a6c933257a"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">wangle::Acceptor::checkDrained</a></div><div class="ttdeci">void checkDrained()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00466">Acceptor.cpp:466</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">wangle::Acceptor::State::kDraining</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="affb83064d820581f4be759d7deaad856"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::onListenStarted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when we start reading data from socket. It is invoked in each acceptors/listeners event base thread. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html#a8f0257df7f9ac7bdc94c2f7a43025f78">folly::AsyncUDPServerSocket::Callback</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00357">357</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a616cadf00094be09036476de366edbc4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::onListenStopped </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when the server socket is closed. It is invoked in each acceptors/listeners event base thread. </p>

<p>Implements <a class="el" href="classfolly_1_1AsyncUDPServerSocket_1_1Callback.html#a80c842013cd1a0c2f1a380d622c59a0f">folly::AsyncUDPServerSocket::Callback</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00358">358</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e5f4fe62eb966586da88ff20c825591"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void wangle::Acceptor::onNewConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when a new connection is created. This is where application starts processing a new downstream connection.</p>
<p>NOTE: <a class="el" href="structApplication.html">Application</a> should add the new connection to downstreamConnectionManager so that it can be garbage collected after certain period of idleness.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket connected to the client </td></tr>
    <tr><td class="paramname">address</td><td>the address of the client </td></tr>
    <tr><td class="paramname">nextProtocolName</td><td>the name of the L6 or L7 protocol to be spoken on the connection, if known (e.g., from TLS NPN during secure connection setup), or an empty string if unknown </td></tr>
    <tr><td class="paramname">secureTransportType</td><td>the name of the secure transport type that was requested by the client. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#adb8febbed0ce3ee0f85134660459ed51">wangle::ServerAcceptor&lt; Pipeline &gt;</a>, <a class="el" href="classproxygen_1_1HTTPSessionAcceptor.html#a27e105a6ad38c082b735a2df8384fdca">proxygen::HTTPSessionAcceptor</a>, <a class="el" href="classTestAcceptor.html#a836ded93a85e2f9d0412d361c96b3037">TestAcceptor</a>, <a class="el" href="classproxygen_1_1HTTPServerAcceptor.html#a0f127172c7321b8adabe1819f2762474">proxygen::HTTPServerAcceptor</a>, and <a class="el" href="classTestAcceptor.html#a67106b0830e635ecfec32c1bab34434e">TestAcceptor</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00350">350</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00365">connectionReady()</a>.</p>
<div class="fragment"><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                              {}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a96ea19d091231b1f9e46522ca46a0ddc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a>&amp; wangle::Acceptor::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae34f3a72423db9a7def47b0d7ebd8fb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::plaintextConnectionReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a>&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>clientAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nextProtocolName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a>&#160;</td>
          <td class="paramname"><em>secureTransportType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>tinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="structWrapper.html">Wrapper</a> for <a class="el" href="classwangle_1_1Acceptor.html#ac68a49a083e3d6bdcf7bb44b8e347910">connectionReady()</a> that can be overridden by subclasses to deal with plaintext connections. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00388">388</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00365">connectionReady()</a>, and <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                          {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#ac68a49a083e3d6bdcf7bb44b8e347910">connectionReady</a>(</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(sock),</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      clientAddr,</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      nextProtocolName,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      secureTransportType,</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      tinfo);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_ac68a49a083e3d6bdcf7bb44b8e347910"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ac68a49a083e3d6bdcf7bb44b8e347910">wangle::Acceptor::connectionReady</a></div><div class="ttdeci">void connectionReady(folly::AsyncTransportWrapper::UniquePtr sock, const folly::SocketAddress &amp;clientAddr, const std::string &amp;nextProtocolName, SecureTransportType secureTransportType, TransportInfo &amp;tinfo)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00365">Acceptor.cpp:365</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a38e9adf74e724e4e2941d72f5fdfc1fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::processEstablishedConnection </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>clientAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::steady_clock::time_point&#160;</td>
          <td class="paramname"><em>acceptTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>tinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Begins either processing HTTP bytes (HTTP) or the SSL handshake (HTTPS) </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00304">304</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="Acceptor_8h_source.html#l00319">base_</a>, <a class="el" href="namespacewangle.html#ad43937b0c168611d07ea6d5448a9d61cac69a1e32a105a29d95e6e7a883188d62">wangle::DROPPED</a>, <a class="el" href="error_8h_source.html#l00048">folly::pushmi::operators::error()</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00057">wangle::ServerSocketConfig::isSSL()</a>, <a class="el" href="Acceptor_8h_source.html#l00365">makeNewAsyncSocket()</a>, <a class="el" href="Acceptor_8h_source.html#l00372">makeNewAsyncSSLSocket()</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00145">wangle::ServerSocketConfig::maxConcurrentSSLHandshakes</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00087">wangle::ServerSocketConfig::name</a>, <a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823ab50339a10e1de285ac99d4c3990b8693">wangle::NONE</a>, <a class="el" href="Acceptor_8h_source.html#l00452">numPendingSSLConns_</a>, <a class="el" href="Acceptor_8cpp_source.html#l00388">plaintextConnectionReady()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00422">sslConnectionError()</a>, <a class="el" href="Acceptor_8h_source.html#l00427">sslCtxManager_</a>, <a class="el" href="Acceptor_8cpp_source.html#l00353">startHandshakeManager()</a>, <a class="el" href="Acceptor_8h_source.html#l00454">totalNumPendingSSLConns_</a>, and <a class="el" href="Acceptor_8h_source.html#l00305">updateSSLStats()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00295">onDoneAcceptingConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                   {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordtype">bool</span> shouldDoSSL = <span class="keyword">false</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a0e6fd498bd4eb5dd0aad9c7e461a80ec">isSSL</a>()) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    CHECK(<a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    shouldDoSSL = <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;getDefaultSSLCtx() != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">if</span> (shouldDoSSL) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">AsyncSSLSocket::UniquePtr</a> sslSock(</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a52accbd191645de6cf1f4e19d36ab6b8">makeNewAsyncSSLSocket</a>(</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;getDefaultSSLCtx(), <a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>, fd));</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    ++<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    ++<a class="code" href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">totalNumPendingSSLConns_</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a> &gt; <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a4592a45370bb0402545d06cd4413d4e1">maxConcurrentSSLHandshakes</a>) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      VLOG(2) &lt;&lt; <span class="stringliteral">&quot;dropped SSL handshake on &quot;</span> &lt;&lt; <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a5df8e0d1658f496b28268ca949c0bc92">name</a> &lt;&lt;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="stringliteral">&quot; too many handshakes in progress&quot;</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html#ac0115beba807afb09cef1eedb85cd89e">error</a> = <a class="code" href="namespacewangle.html#ad43937b0c168611d07ea6d5448a9d61cac69a1e32a105a29d95e6e7a883188d62">SSLErrorEnum::DROPPED</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keyword">auto</span> latency = std::chrono::milliseconds(0);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a2f9810128f2ba5dc9ea048fc1d116926">updateSSLStats</a>(sslSock.get(), latency, <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html#ac0115beba807afb09cef1eedb85cd89e">error</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keyword">auto</span> ex = folly::make_exception_wrapper&lt;SSLException&gt;(</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          <a class="code" href="namespacefolly_1_1pushmi_1_1operators.html#ac0115beba807afb09cef1eedb85cd89e">error</a>, latency, sslSock-&gt;getRawBytesReceived());</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a6ed8c24dc9946363368fb04e441c5c25">sslConnectionError</a>(ex);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    tinfo.tfoSucceded = sslSock-&gt;getTFOSucceded();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a49a16fd8e4971f8e9317bd2e3d0530d2">startHandshakeManager</a>(</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(sslSock),</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keyword">this</span>,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        clientAddr,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        acceptTime,</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        tinfo);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    tinfo.secure = <span class="keyword">false</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    tinfo.acceptTime = acceptTime;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">AsyncSocket::UniquePtr</a> sock(<a class="code" href="classwangle_1_1Acceptor.html#a0b510746d26a7efe2de256ebd5dba340">makeNewAsyncSocket</a>(<a class="code" href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">base_</a>, fd));</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    tinfo.tfoSucceded = sock-&gt;getTFOSucceded();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ae34f3a72423db9a7def47b0d7ebd8fb5">plaintextConnectionReady</a>(</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(sock),</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        clientAddr,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="namespacewangle.html#af14b22ecd6a79df8f9625894bf4ab9cc">empty_string</a>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="namespacewangle.html#a0a21718cd725845364471663b9b45823ab50339a10e1de285ac99d4c3990b8693">SecureTransportType::NONE</a>,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        tinfo);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div><div class="ttc" id="namespacewangle_html_af14b22ecd6a79df8f9625894bf4ab9cc"><div class="ttname"><a href="namespacewangle.html#af14b22ecd6a79df8f9625894bf4ab9cc">wangle::empty_string</a></div><div class="ttdeci">static const std::string empty_string</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00051">Acceptor.cpp:51</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0b510746d26a7efe2de256ebd5dba340"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0b510746d26a7efe2de256ebd5dba340">wangle::Acceptor::makeNewAsyncSocket</a></div><div class="ttdeci">virtual folly::AsyncSocket::UniquePtr makeNewAsyncSocket(folly::EventBase *base, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00365">Acceptor.h:365</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aadaf76d8da8c6ac2f7d64b219f2bee2e"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">wangle::Acceptor::numPendingSSLConns_</a></div><div class="ttdeci">uint64_t numPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00452">Acceptor.h:452</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a242076537fdb8d99e9165c042b6c05da"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">wangle::Acceptor::totalNumPendingSSLConns_</a></div><div class="ttdeci">static std::atomic&lt; uint64_t &gt; totalNumPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00454">Acceptor.h:454</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a2f9810128f2ba5dc9ea048fc1d116926"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a2f9810128f2ba5dc9ea048fc1d116926">wangle::Acceptor::updateSSLStats</a></div><div class="ttdeci">virtual void updateSSLStats(const folly::AsyncTransportWrapper *, std::chrono::milliseconds, SSLErrorEnum) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00305">Acceptor.h:305</a></div></div>
<div class="ttc" id="namespacefolly_1_1pushmi_1_1operators_html_ac0115beba807afb09cef1eedb85cd89e"><div class="ttname"><a href="namespacefolly_1_1pushmi_1_1operators.html#ac0115beba807afb09cef1eedb85cd89e">folly::pushmi::operators::error</a></div><div class="ttdeci">requires And&lt; SemiMovable&lt; VN &gt;... &gt; &amp;&amp;SemiMovable&lt; E &gt; auto error(E e)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00048">error.h:48</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a49a16fd8e4971f8e9317bd2e3d0530d2"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a49a16fd8e4971f8e9317bd2e3d0530d2">wangle::Acceptor::startHandshakeManager</a></div><div class="ttdeci">virtual void startHandshakeManager(folly::AsyncSSLSocket::UniquePtr sslSock, Acceptor *acceptor, const folly::SocketAddress &amp;clientAddr, std::chrono::steady_clock::time_point acceptTime, TransportInfo &amp;tinfo) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00353">Acceptor.cpp:353</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSSLSocket_html_a2a774a3b720af22f579b3d66d2d79712"><div class="ttname"><a href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">folly::AsyncSSLSocket::UniquePtr</a></div><div class="ttdeci">std::unique_ptr&lt; AsyncSSLSocket, Destructor &gt; UniquePtr</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSSLSocket_8h_source.html#l00072">AsyncSSLSocket.h:72</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a5df8e0d1658f496b28268ca949c0bc92"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a5df8e0d1658f496b28268ca949c0bc92">wangle::ServerSocketConfig::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00087">ServerSocketConfig.h:87</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ae34f3a72423db9a7def47b0d7ebd8fb5"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ae34f3a72423db9a7def47b0d7ebd8fb5">wangle::Acceptor::plaintextConnectionReady</a></div><div class="ttdeci">virtual void plaintextConnectionReady(folly::AsyncTransportWrapper::UniquePtr sock, const folly::SocketAddress &amp;clientAddr, const std::string &amp;nextProtocolName, SecureTransportType secureTransportType, TransportInfo &amp;tinfo)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00388">Acceptor.cpp:388</a></div></div>
<div class="ttc" id="namespacewangle_html_a0a21718cd725845364471663b9b45823ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="namespacewangle.html#a0a21718cd725845364471663b9b45823ab50339a10e1de285ac99d4c3990b8693">wangle::SecureTransportType::NONE</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a0e6fd498bd4eb5dd0aad9c7e461a80ec"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a0e6fd498bd4eb5dd0aad9c7e461a80ec">wangle::ServerSocketConfig::isSSL</a></div><div class="ttdeci">bool isSSL() const </div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00057">ServerSocketConfig.h:57</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a6ed8c24dc9946363368fb04e441c5c25"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a6ed8c24dc9946363368fb04e441c5c25">wangle::Acceptor::sslConnectionError</a></div><div class="ttdeci">virtual void sslConnectionError(const folly::exception_wrapper &amp;ex)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00422">Acceptor.cpp:422</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a4592a45370bb0402545d06cd4413d4e1"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a4592a45370bb0402545d06cd4413d4e1">wangle::ServerSocketConfig::maxConcurrentSSLHandshakes</a></div><div class="ttdeci">uint32_t maxConcurrentSSLHandshakes</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00145">ServerSocketConfig.h:145</a></div></div>
<div class="ttc" id="classfolly_1_1AsyncSocket_html_a59188939b6c898468addc2f6d56c6376"><div class="ttname"><a href="classfolly_1_1AsyncSocket.html#a59188939b6c898468addc2f6d56c6376">folly::AsyncSocket::UniquePtr</a></div><div class="ttdeci">std::unique_ptr&lt; AsyncSocket, Destructor &gt; UniquePtr</div><div class="ttdef"><b>Definition:</b> <a href="AsyncSocket_8h_source.html#l00083">AsyncSocket.h:83</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0d8fcfdb00a9cc17e39641518d2c2738"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">wangle::Acceptor::sslCtxManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SSLContextManager &gt; sslCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00427">Acceptor.h:427</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a52accbd191645de6cf1f4e19d36ab6b8"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a52accbd191645de6cf1f4e19d36ab6b8">wangle::Acceptor::makeNewAsyncSSLSocket</a></div><div class="ttdeci">virtual folly::AsyncSSLSocket::UniquePtr makeNewAsyncSSLSocket(const std::shared_ptr&lt; folly::SSLContext &gt; &amp;ctx, folly::EventBase *base, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00372">Acceptor.h:372</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a33442a8aef7480179d888a9daa7912c7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a33442a8aef7480179d888a9daa7912c7">wangle::Acceptor::base_</a></div><div class="ttdeci">folly::EventBase * base_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00319">Acceptor.h:319</a></div></div>
<div class="ttc" id="namespacewangle_html_ad43937b0c168611d07ea6d5448a9d61cac69a1e32a105a29d95e6e7a883188d62"><div class="ttname"><a href="namespacewangle.html#ad43937b0c168611d07ea6d5448a9d61cac69a1e32a105a29d95e6e7a883188d62">wangle::SSLErrorEnum::DROPPED</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a843ffaea71186c3739c0b2a9b2627354"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::resetSSLContextConfigs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Recreates ssl configs, re-reads certs </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00162">162</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00112">wangle::ServerSocketConfig::bindAddress</a>, <a class="el" href="Acceptor_8h_source.html#l00440">cacheProvider_</a>, <a class="el" href="Acceptor_8cpp_source.html#l00135">createFizzContext()</a>, <a class="el" href="FizzConfig_8h_source.html#l00024">wangle::FizzConfig::enableFizz</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00160">wangle::ServerSocketConfig::fizzConfig</a>, <a class="el" href="Acceptor_8h_source.html#l00414">getFizzPeeker()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="FizzAcceptorHandshakeHelper_8h_source.html#l00125">wangle::DefaultToFizzPeekingCallback::setContext()</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00117">wangle::ServerSocketConfig::sslCacheOptions</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00134">wangle::ServerSocketConfig::sslContextConfigs</a>, <a class="el" href="Acceptor_8h_source.html#l00427">sslCtxManager_</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00149">updateFizzContext()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00078">setSSLCacheProvider()</a>, and <a class="el" href="HTTPServer_8cpp_source.html#l00245">proxygen::HTTPServer::updateTLSCredentials()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                      {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a21349236a338f4586dfde3edf1382b03">fizzConfig</a>.<a class="code" href="structwangle_1_1FizzConfig.html#ad45df93c8843ea21a10a4960736517d3">enableFizz</a>) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">auto</span> ctx = <a class="code" href="classwangle_1_1Acceptor.html#adbd31679915f28e22ef9d2d024df20f3">createFizzContext</a>();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (ctx) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#a9cca72ea5608c28ee20b5caf42070467">updateFizzContext</a>(ctx.get());</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="classwangle_1_1Acceptor.html#aa2f9e97b7e9a2281eb2668b4d2f37dce">getFizzPeeker</a>()-&gt;<a class="code" href="classwangle_1_1DefaultToFizzPeekingCallback.html#ad0345624b5ff5d56e7cd141c94c9a996">setContext</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(ctx));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;resetSSLContextConfigs(<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#aa03e9e83b98bb36d457c91618eb83f81">sslContextConfigs</a>,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                           <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">sslCacheOptions</a>,</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                           <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                           <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#ac8bf983fb991614555ae89c835f43cdc">bindAddress</a>,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                           <a class="code" href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">cacheProvider_</a>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::runtime_error&amp; ex) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Failed to re-configure TLS: &quot;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;               &lt;&lt; ex.what()</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;will keep old config&quot;</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a5a07feaa01ea8e73d0e18c57cb523506"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a5a07feaa01ea8e73d0e18c57cb523506">wangle::ServerSocketConfig::sslCacheOptions</a></div><div class="ttdeci">SSLCacheOptions sslCacheOptions</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00117">ServerSocketConfig.h:117</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a21349236a338f4586dfde3edf1382b03"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a21349236a338f4586dfde3edf1382b03">wangle::ServerSocketConfig::fizzConfig</a></div><div class="ttdeci">FizzConfig fizzConfig</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00160">ServerSocketConfig.h:160</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a9a32d345ea76a7b4cd6e03fadc61eed1"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">wangle::Acceptor::cacheProvider_</a></div><div class="ttdeci">std::shared_ptr&lt; SSLCacheProvider &gt; cacheProvider_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00440">Acceptor.h:440</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_ac8bf983fb991614555ae89c835f43cdc"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#ac8bf983fb991614555ae89c835f43cdc">wangle::ServerSocketConfig::bindAddress</a></div><div class="ttdeci">folly::SocketAddress bindAddress</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00112">ServerSocketConfig.h:112</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a9cca72ea5608c28ee20b5caf42070467"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a9cca72ea5608c28ee20b5caf42070467">wangle::Acceptor::updateFizzContext</a></div><div class="ttdeci">void updateFizzContext(fizz::server::FizzServerContext *)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00149">Acceptor.cpp:149</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aa2f9e97b7e9a2281eb2668b4d2f37dce"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aa2f9e97b7e9a2281eb2668b4d2f37dce">wangle::Acceptor::getFizzPeeker</a></div><div class="ttdeci">virtual DefaultToFizzPeekingCallback * getFizzPeeker()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00414">Acceptor.h:414</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="classwangle_1_1DefaultToFizzPeekingCallback_html_ad0345624b5ff5d56e7cd141c94c9a996"><div class="ttname"><a href="classwangle_1_1DefaultToFizzPeekingCallback.html#ad0345624b5ff5d56e7cd141c94c9a996">wangle::DefaultToFizzPeekingCallback::setContext</a></div><div class="ttdeci">void setContext(std::shared_ptr&lt; fizz::server::FizzServerContext &gt; context)</div><div class="ttdef"><b>Definition:</b> <a href="FizzAcceptorHandshakeHelper_8h_source.html#l00125">FizzAcceptorHandshakeHelper.h:125</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_adbd31679915f28e22ef9d2d024df20f3"><div class="ttname"><a href="classwangle_1_1Acceptor.html#adbd31679915f28e22ef9d2d024df20f3">wangle::Acceptor::createFizzContext</a></div><div class="ttdeci">virtual std::shared_ptr&lt; fizz::server::FizzServerContext &gt; createFizzContext()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00135">Acceptor.cpp:135</a></div></div>
<div class="ttc" id="structwangle_1_1FizzConfig_html_ad45df93c8843ea21a10a4960736517d3"><div class="ttname"><a href="structwangle_1_1FizzConfig.html#ad45df93c8843ea21a10a4960736517d3">wangle::FizzConfig::enableFizz</a></div><div class="ttdeci">bool enableFizz</div><div class="ttdef"><b>Definition:</b> <a href="FizzConfig_8h_source.html#l00024">FizzConfig.h:24</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_aa03e9e83b98bb36d457c91618eb83f81"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#aa03e9e83b98bb36d457c91618eb83f81">wangle::ServerSocketConfig::sslContextConfigs</a></div><div class="ttdeci">std::vector&lt; SSLContextConfig &gt; sslContextConfigs</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00134">ServerSocketConfig.h:134</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0d8fcfdb00a9cc17e39641518d2c2738"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">wangle::Acceptor::sslCtxManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SSLContextManager &gt; sslCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00427">Acceptor.h:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a400ce78ba8456a7a2fb134a13aa986b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::setGracefulShutdownTimeout </td>
          <td>(</td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>gracefulShutdown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Time after <a class="el" href="classwangle_1_1Acceptor.html#a573829b01cc031375810b0252591f7d8">drainAllConnections()</a> or <a class="el" href="classwangle_1_1Acceptor.html#a64caa6c9683ac822aa613ebebbc12bb7">acceptStopped()</a> during which new requests on connections owned by the downstream <a class="el" href="classwangle_1_1ConnectionManager.html">ConnectionManager</a> will be processed normally. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00178">178</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00459">gracefulShutdownTimeout_</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                                          {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">gracefulShutdownTimeout_</a> = gracefulShutdown;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a71476b030050be7e59d1a59da0aeb783"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a71476b030050be7e59d1a59da0aeb783">wangle::Acceptor::gracefulShutdownTimeout_</a></div><div class="ttdeci">std::chrono::milliseconds gracefulShutdownTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00459">Acceptor.h:459</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a83e7c0e998266b4a8334b0e61fb8f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::setLoadShedConfig </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="classwangle_1_1LoadShedConfiguration.html">LoadShedConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>loadShedConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwangle_1_1IConnectionCounter.html">IConnectionCounter</a> *&#160;</td>
          <td class="paramname"><em>counter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00221">221</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00458">connectionCounter_</a>, <a class="el" href="PushmiBenchmarks_8cpp_source.html#l00544">counter</a>, and <a class="el" href="Acceptor_8h_source.html#l00457">loadShedConfig_</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                       {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">loadShedConfig_</a> = loadShedConfig;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">connectionCounter_</a> = <a class="code" href="PushmiBenchmarks_8cpp.html#a9241e9d818c73fbaee99c15606c552c4">counter</a>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_a05c0227e1dee7e318f940c3fc79f71d7"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a05c0227e1dee7e318f940c3fc79f71d7">wangle::Acceptor::connectionCounter_</a></div><div class="ttdeci">const IConnectionCounter * connectionCounter_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00458">Acceptor.h:458</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a7cdd849b6e0552bef812e2db488eba1b"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a7cdd849b6e0552bef812e2db488eba1b">wangle::Acceptor::loadShedConfig_</a></div><div class="ttdeci">std::shared_ptr&lt; const LoadShedConfiguration &gt; loadShedConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00457">Acceptor.h:457</a></div></div>
<div class="ttc" id="PushmiBenchmarks_8cpp_html_a9241e9d818c73fbaee99c15606c552c4"><div class="ttname"><a href="PushmiBenchmarks_8cpp.html#a9241e9d818c73fbaee99c15606c552c4">counter</a></div><div class="ttdeci">std::atomic&lt; int &gt; counter</div><div class="ttdef"><b>Definition:</b> <a href="PushmiBenchmarks_8cpp_source.html#l00544">PushmiBenchmarks.cpp:544</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1f669fbf082acdfb8b0e0a54d8efd5aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void wangle::Acceptor::setSSLCacheProvider </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classwangle_1_1SSLCacheProvider.html">SSLCacheProvider</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>cacheProvider</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Supply an SSL cache provider </p><dl class="section note"><dt>Note</dt><dd>Call this before <a class="el" href="classwangle_1_1Acceptor.html#a79adc87826c8f1e6ea5699f95a6bb062">init()</a> </dd></dl>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00078">78</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00187">addSSLContextConfig()</a>, <a class="el" href="Acceptor_8h_source.html#l00440">cacheProvider_</a>, <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00162">resetSSLContextConfigs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                                            {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">cacheProvider_</a> = cacheProvider;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div><div class="ttc" id="classwangle_1_1Acceptor_html_a9a32d345ea76a7b4cd6e03fadc61eed1"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a9a32d345ea76a7b4cd6e03fadc61eed1">wangle::Acceptor::cacheProvider_</a></div><div class="ttdeci">std::shared_ptr&lt; SSLCacheProvider &gt; cacheProvider_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00440">Acceptor.h:440</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea78da3c9c030895f5cf0c9fa4377402"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::setTLSTicketSecrets </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>oldSecrets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>currentSecrets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>newSecrets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets TLS ticket secrets to use, or updates previously set secrets. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00195">195</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="Acceptor_8h_source.html#l00441">currentSecrets_</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00026">wangle::TLSTicketKeySeeds::currentSeeds</a>, <a class="el" href="FizzConfig_8h_source.html#l00024">wangle::FizzConfig::enableFizz</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00160">wangle::ServerSocketConfig::fizzConfig</a>, <a class="el" href="Acceptor_8h_source.html#l00414">getFizzPeeker()</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00027">wangle::TLSTicketKeySeeds::newSeeds</a>, <a class="el" href="TLSTicketKeySeeds_8h_source.html#l00025">wangle::TLSTicketKeySeeds::oldSeeds</a>, <a class="el" href="Acceptor_8h_source.html#l00427">sslCtxManager_</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00149">updateFizzContext()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00104">getSSLContextManager()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, and <a class="el" href="HTTPServer_8cpp_source.html#l00262">proxygen::HTTPServer::updateTicketSeeds()</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                            {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">currentSecrets_</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a2765ce856fbe4f7b0802c7d18a42474b">oldSeeds</a> = oldSecrets;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">currentSecrets_</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a557d176fb66cc2e5e9487bd76f74c8d2">currentSeeds</a> = currentSecrets;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">currentSecrets_</a>.<a class="code" href="structwangle_1_1TLSTicketKeySeeds.html#a0c11333f0aeaf2cbf044f9191d7826fe">newSeeds</a> = newSecrets;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#a21349236a338f4586dfde3edf1382b03">fizzConfig</a>.<a class="code" href="structwangle_1_1FizzConfig.html#ad45df93c8843ea21a10a4960736517d3">enableFizz</a>) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a9cca72ea5608c28ee20b5caf42070467">updateFizzContext</a>(<a class="code" href="classwangle_1_1Acceptor.html#aa2f9e97b7e9a2281eb2668b4d2f37dce">getFizzPeeker</a>()-&gt;getContext().<span class="keyword">get</span>());</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">sslCtxManager_</a>-&gt;reloadTLSTicketKeys(</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        oldSecrets, currentSecrets, newSecrets);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a0c11333f0aeaf2cbf044f9191d7826fe"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a0c11333f0aeaf2cbf044f9191d7826fe">wangle::TLSTicketKeySeeds::newSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; newSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00027">TLSTicketKeySeeds.h:27</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a557d176fb66cc2e5e9487bd76f74c8d2"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a557d176fb66cc2e5e9487bd76f74c8d2">wangle::TLSTicketKeySeeds::currentSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; currentSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00026">TLSTicketKeySeeds.h:26</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_a21349236a338f4586dfde3edf1382b03"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#a21349236a338f4586dfde3edf1382b03">wangle::ServerSocketConfig::fizzConfig</a></div><div class="ttdeci">FizzConfig fizzConfig</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00160">ServerSocketConfig.h:160</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a86ee92187640afc119196b9c2daac37c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a86ee92187640afc119196b9c2daac37c">wangle::Acceptor::currentSecrets_</a></div><div class="ttdeci">wangle::TLSTicketKeySeeds currentSecrets_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00441">Acceptor.h:441</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a9cca72ea5608c28ee20b5caf42070467"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a9cca72ea5608c28ee20b5caf42070467">wangle::Acceptor::updateFizzContext</a></div><div class="ttdeci">void updateFizzContext(fizz::server::FizzServerContext *)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00149">Acceptor.cpp:149</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aa2f9e97b7e9a2281eb2668b4d2f37dce"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aa2f9e97b7e9a2281eb2668b4d2f37dce">wangle::Acceptor::getFizzPeeker</a></div><div class="ttdeci">virtual DefaultToFizzPeekingCallback * getFizzPeeker()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00414">Acceptor.h:414</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="structwangle_1_1TLSTicketKeySeeds_html_a2765ce856fbe4f7b0802c7d18a42474b"><div class="ttname"><a href="structwangle_1_1TLSTicketKeySeeds.html#a2765ce856fbe4f7b0802c7d18a42474b">wangle::TLSTicketKeySeeds::oldSeeds</a></div><div class="ttdeci">std::vector&lt; std::string &gt; oldSeeds</div><div class="ttdef"><b>Definition:</b> <a href="TLSTicketKeySeeds_8h_source.html#l00025">TLSTicketKeySeeds.h:25</a></div></div>
<div class="ttc" id="structwangle_1_1FizzConfig_html_ad45df93c8843ea21a10a4960736517d3"><div class="ttname"><a href="structwangle_1_1FizzConfig.html#ad45df93c8843ea21a10a4960736517d3">wangle::FizzConfig::enableFizz</a></div><div class="ttdeci">bool enableFizz</div><div class="ttdef"><b>Definition:</b> <a href="FizzConfig_8h_source.html#l00024">FizzConfig.h:24</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0d8fcfdb00a9cc17e39641518d2c2738"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0d8fcfdb00a9cc17e39641518d2c2738">wangle::Acceptor::sslCtxManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SSLContextManager &gt; sslCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00427">Acceptor.h:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ed8c24dc9946363368fb04e441c5c25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::sslConnectionError </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1exception__wrapper.html">folly::exception_wrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Notification callback for SSL handshake failures. </p>

<p>Reimplemented in <a class="el" href="classwangle_1_1ServerAcceptor.html#a62d5fedbb453faca1256ddf1e17b82bf">wangle::ServerAcceptor&lt; Pipeline &gt;</a>.</p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00422">422</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">kDraining</a>, <a class="el" href="Acceptor_8h_source.html#l00452">numPendingSSLConns_</a>, <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>, and <a class="el" href="Acceptor_8h_source.html#l00454">totalNumPendingSSLConns_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>, and <a class="el" href="ServerBootstrap-inl_8h_source.html#l00238">wangle::ServerAcceptor&lt; Pipeline &gt;::sslConnectionError()</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                                               {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  CHECK(<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a> &gt; 0);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  --<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  --<a class="code" href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">totalNumPendingSSLConns_</a>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> == <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">State::kDraining</a>) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">checkDrained</a>();</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_aadaf76d8da8c6ac2f7d64b219f2bee2e"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">wangle::Acceptor::numPendingSSLConns_</a></div><div class="ttdeci">uint64_t numPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00452">Acceptor.h:452</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ac09bdf5d859a9269276da1a6c933257a"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">wangle::Acceptor::checkDrained</a></div><div class="ttdeci">void checkDrained()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00466">Acceptor.cpp:466</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">wangle::Acceptor::State::kDraining</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a242076537fdb8d99e9165c042b6c05da"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">wangle::Acceptor::totalNumPendingSSLConns_</a></div><div class="ttdeci">static std::atomic&lt; uint64_t &gt; totalNumPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00454">Acceptor.h:454</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8fc8c2611dd2fe00dd6618d344bce152"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::sslConnectionReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncTransportWrapper.html#abdf65dfe2d287245a84c197b36036a93">folly::AsyncTransportWrapper::UniquePtr</a>&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>clientAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>nextProtocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacewangle.html#a0a21718cd725845364471663b9b45823">SecureTransportType</a>&#160;</td>
          <td class="paramname"><em>secureTransportType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>tinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="structWrapper.html">Wrapper</a> for <a class="el" href="classwangle_1_1Acceptor.html#ac68a49a083e3d6bdcf7bb44b8e347910">connectionReady()</a> that decrements the count of pending SSL connections. This should normally not be overridden. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00403">403</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00365">connectionReady()</a>, <a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">kDraining</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="Acceptor_8h_source.html#l00452">numPendingSSLConns_</a>, <a class="el" href="Acceptor_8h_source.html#l00451">state_</a>, and <a class="el" href="Acceptor_8h_source.html#l00454">totalNumPendingSSLConns_</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                                   {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  CHECK(<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a> &gt; 0);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  --<a class="code" href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">numPendingSSLConns_</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  --<a class="code" href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">totalNumPendingSSLConns_</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="classwangle_1_1Acceptor.html#ac68a49a083e3d6bdcf7bb44b8e347910">connectionReady</a>(</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(sock),</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      clientAddr,</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      nextProtocol,</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      secureTransportType,</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      tinfo);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">state_</a> == <a class="code" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">State::kDraining</a>) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">checkDrained</a>();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="ttc" id="classwangle_1_1Acceptor_html_ac68a49a083e3d6bdcf7bb44b8e347910"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ac68a49a083e3d6bdcf7bb44b8e347910">wangle::Acceptor::connectionReady</a></div><div class="ttdeci">void connectionReady(folly::AsyncTransportWrapper::UniquePtr sock, const folly::SocketAddress &amp;clientAddr, const std::string &amp;nextProtocolName, SecureTransportType secureTransportType, TransportInfo &amp;tinfo)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00365">Acceptor.cpp:365</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_aadaf76d8da8c6ac2f7d64b219f2bee2e"><div class="ttname"><a href="classwangle_1_1Acceptor.html#aadaf76d8da8c6ac2f7d64b219f2bee2e">wangle::Acceptor::numPendingSSLConns_</a></div><div class="ttdeci">uint64_t numPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00452">Acceptor.h:452</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_ac09bdf5d859a9269276da1a6c933257a"><div class="ttname"><a href="classwangle_1_1Acceptor.html#ac09bdf5d859a9269276da1a6c933257a">wangle::Acceptor::checkDrained</a></div><div class="ttdeci">void checkDrained()</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00466">Acceptor.cpp:466</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528a4edb91985bca34f444ffdaacfa4ede22">wangle::Acceptor::State::kDraining</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a242076537fdb8d99e9165c042b6c05da"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a242076537fdb8d99e9165c042b6c05da">wangle::Acceptor::totalNumPendingSSLConns_</a></div><div class="ttdeci">static std::atomic&lt; uint64_t &gt; totalNumPendingSSLConns_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00454">Acceptor.h:454</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a0e1fcd22851f2c2104204a83abb72efa"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a0e1fcd22851f2c2104204a83abb72efa">wangle::Acceptor::state_</a></div><div class="ttdeci">State state_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00451">Acceptor.h:451</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49a16fd8e4971f8e9317bd2e3d0530d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::startHandshakeManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1AsyncSSLSocket.html#a2a774a3b720af22f579b3d66d2d79712">folly::AsyncSSLSocket::UniquePtr</a>&#160;</td>
          <td class="paramname"><em>sslSock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a> *&#160;</td>
          <td class="paramname"><em>acceptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1SocketAddress.html">folly::SocketAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>clientAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::steady_clock::time_point&#160;</td>
          <td class="paramname"><em>acceptTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structwangle_1_1TransportInfo.html">TransportInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>tinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates and starts the handshake manager. </p>

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00353">353</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="SecurityProtocolContextManager_8h_source.html#l00039">wangle::SecurityProtocolContextManager::getHandshakeManager()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="Acceptor_8h_source.html#l00432">securityProtocolCtxManager_</a>, and <a class="el" href="AcceptorHandshakeManager_8cpp_source.html#l00022">wangle::AcceptorHandshakeManager::start()</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                   {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keyword">auto</span> manager = <a class="code" href="classwangle_1_1Acceptor.html#a3a8479eaefe401b585d14a2b9495b23c">securityProtocolCtxManager_</a>.<a class="code" href="classwangle_1_1SecurityProtocolContextManager.html#a2343a7c444d95a82b1a46a09bb9851e3">getHandshakeManager</a>(</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keyword">this</span>, clientAddr, acceptTime, tinfo);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  manager-&gt;<a class="code" href="classwangle_1_1AcceptorHandshakeManager.html#a320fcfecda918aebc87c7e046ad059b9">start</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(sslSock));</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div><div class="ttc" id="classwangle_1_1AcceptorHandshakeManager_html_a320fcfecda918aebc87c7e046ad059b9"><div class="ttname"><a href="classwangle_1_1AcceptorHandshakeManager.html#a320fcfecda918aebc87c7e046ad059b9">wangle::AcceptorHandshakeManager::start</a></div><div class="ttdeci">virtual void start(folly::AsyncSSLSocket::UniquePtr sock) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="AcceptorHandshakeManager_8cpp_source.html#l00022">AcceptorHandshakeManager.cpp:22</a></div></div>
<div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a3a8479eaefe401b585d14a2b9495b23c"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a3a8479eaefe401b585d14a2b9495b23c">wangle::Acceptor::securityProtocolCtxManager_</a></div><div class="ttdeci">SecurityProtocolContextManager securityProtocolCtxManager_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00432">Acceptor.h:432</a></div></div>
<div class="ttc" id="classwangle_1_1SecurityProtocolContextManager_html_a2343a7c444d95a82b1a46a09bb9851e3"><div class="ttname"><a href="classwangle_1_1SecurityProtocolContextManager.html#a2343a7c444d95a82b1a46a09bb9851e3">wangle::SecurityProtocolContextManager::getHandshakeManager</a></div><div class="ttdeci">AcceptorHandshakeManager * getHandshakeManager(Acceptor *acceptor, const folly::SocketAddress &amp;clientAddr, std::chrono::steady_clock::time_point acceptTime, TransportInfo &amp;tinfo) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="SecurityProtocolContextManager_8h_source.html#l00039">SecurityProtocolContextManager.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9cca72ea5608c28ee20b5caf42070467"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void wangle::Acceptor::updateFizzContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfizz_1_1server_1_1FizzServerContext.html">fizz::server::FizzServerContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8cpp_source.html#l00149">149</a> of file <a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a>.</p>

<p>References <a class="el" href="Acceptor_8h_source.html#l00407">accConfig_</a>, <a class="el" href="ClientProtocol_8cpp_source.html#l01006">cipher</a>, <a class="el" href="Acceptor_8cpp_source.html#l00140">createFizzTicketCipher()</a>, <a class="el" href="Base-inl_8h_source.html#l02567">folly::gen::move</a>, <a class="el" href="FizzServerContext_8h_source.html#l00150">fizz::server::FizzServerContext::setTicketCipher()</a>, <a class="el" href="ServerSocketConfig_8h_source.html#l00134">wangle::ServerSocketConfig::sslContextConfigs</a>, and <a class="el" href="Conv_8cpp_source.html#l00212">string</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00414">getFizzPeeker()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00162">resetSSLContextConfigs()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00195">setTLSTicketSecrets()</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                                                 {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (ctx) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">std::string</a> pskContext;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#aa03e9e83b98bb36d457c91618eb83f81">sslContextConfigs</a>.empty()) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      pskContext = <a class="code" href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">accConfig_</a>.<a class="code" href="structwangle_1_1ServerSocketConfig.html#aa03e9e83b98bb36d457c91618eb83f81">sslContextConfigs</a>.front().sessionContext.value_or(</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">auto</span> <a class="code" href="ClientProtocol_8cpp.html#aa7e60e524fbc7254437c13c7d22a9dfa">cipher</a> = <a class="code" href="classwangle_1_1Acceptor.html#a4946249a76ea386d460d985e60907edd">createFizzTicketCipher</a>(</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="classfolly_1_1Optional.html">folly::Optional&lt;std::string&gt;</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(pskContext)));</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    ctx-&gt;<a class="code" href="classfizz_1_1server_1_1FizzServerContext.html#ada66a17f638662916e5cf53873e7845f">setTicketCipher</a>(<a class="code" href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">std::move</a>(<a class="code" href="ClientProtocol_8cpp.html#aa7e60e524fbc7254437c13c7d22a9dfa">cipher</a>));</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1gen_html_ac24ec252b1b738a40c274285527c193f"><div class="ttname"><a href="namespacefolly_1_1gen.html#ac24ec252b1b738a40c274285527c193f">folly::gen::move</a></div><div class="ttdeci">constexpr detail::Map&lt; Move &gt; move</div><div class="ttdef"><b>Definition:</b> <a href="Base-inl_8h_source.html#l02567">Base-inl.h:2567</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a4946249a76ea386d460d985e60907edd"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a4946249a76ea386d460d985e60907edd">wangle::Acceptor::createFizzTicketCipher</a></div><div class="ttdeci">virtual std::shared_ptr&lt; fizz::server::TicketCipher &gt; createFizzTicketCipher(folly::Optional&lt; std::string &gt;=folly::none)</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8cpp_source.html#l00140">Acceptor.cpp:140</a></div></div>
<div class="ttc" id="ClientProtocol_8cpp_html_aa7e60e524fbc7254437c13c7d22a9dfa"><div class="ttname"><a href="ClientProtocol_8cpp.html#aa7e60e524fbc7254437c13c7d22a9dfa">cipher</a></div><div class="ttdeci">CipherSuite cipher</div><div class="ttdef"><b>Definition:</b> <a href="ClientProtocol_8cpp_source.html#l01006">ClientProtocol.cpp:1006</a></div></div>
<div class="ttc" id="classfolly_1_1Optional_html"><div class="ttname"><a href="classfolly_1_1Optional.html">folly::Optional&lt; std::string &gt;</a></div></div>
<div class="ttc" id="classfizz_1_1server_1_1FizzServerContext_html_ada66a17f638662916e5cf53873e7845f"><div class="ttname"><a href="classfizz_1_1server_1_1FizzServerContext.html#ada66a17f638662916e5cf53873e7845f">fizz::server::FizzServerContext::setTicketCipher</a></div><div class="ttdeci">void setTicketCipher(std::shared_ptr&lt; TicketCipher &gt; ticketCipher)</div><div class="ttdef"><b>Definition:</b> <a href="FizzServerContext_8h_source.html#l00150">FizzServerContext.h:150</a></div></div>
<div class="ttc" id="classwangle_1_1Acceptor_html_a376aa899452d0571bd2f6e6db8aaa561"><div class="ttname"><a href="classwangle_1_1Acceptor.html#a376aa899452d0571bd2f6e6db8aaa561">wangle::Acceptor::accConfig_</a></div><div class="ttdeci">const ServerSocketConfig accConfig_</div><div class="ttdef"><b>Definition:</b> <a href="Acceptor_8h_source.html#l00407">Acceptor.h:407</a></div></div>
<div class="ttc" id="Conv_8cpp_html_ae1adbce218e7a9d09164012443191d24"><div class="ttname"><a href="Conv_8cpp.html#ae1adbce218e7a9d09164012443191d24">string</a></div><div class="ttdeci">const char * string</div><div class="ttdef"><b>Definition:</b> <a href="Conv_8cpp_source.html#l00212">Conv.cpp:212</a></div></div>
<div class="ttc" id="structwangle_1_1ServerSocketConfig_html_aa03e9e83b98bb36d457c91618eb83f81"><div class="ttname"><a href="structwangle_1_1ServerSocketConfig.html#aa03e9e83b98bb36d457c91618eb83f81">wangle::ServerSocketConfig::sslContextConfigs</a></div><div class="ttdeci">std::vector&lt; SSLContextConfig &gt; sslContextConfigs</div><div class="ttdef"><b>Definition:</b> <a href="ServerSocketConfig_8h_source.html#l00134">ServerSocketConfig.h:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f9810128f2ba5dc9ea048fc1d116926"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void wangle::Acceptor::updateSSLStats </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfolly_1_1AsyncTransportWrapper.html">folly::AsyncTransportWrapper</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacewangle.html#ad43937b0c168611d07ea6d5448a9d61c">SSLErrorEnum</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Hook for subclasses to record stats about SSL connection establishment.</p>
<p>sock may be nullptr. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00305">305</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                               {}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a376aa899452d0571bd2f6e6db8aaa561"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structwangle_1_1ServerSocketConfig.html">ServerSocketConfig</a> wangle::Acceptor::accConfig_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00407">407</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00187">addSSLContextConfig()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00135">createFizzContext()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00140">createFizzTicketCipher()</a>, <a class="el" href="Acceptor_8h_source.html#l00197">getConfig()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00497">getConnTimeout()</a>, <a class="el" href="Acceptor_8h_source.html#l00162">getName()</a>, <a class="el" href="Acceptor_8h_source.html#l00169">getSSLHandshakeTimeout()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00126">initDownstreamConnectionManager()</a>, <a class="el" href="Acceptor_8h_source.html#l00195">isSSL()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00162">resetSSLContextConfigs()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00195">setTLSTicketSecrets()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00149">updateFizzContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a33442a8aef7480179d888a9daa7912c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1EventBase.html">folly::EventBase</a>* wangle::Acceptor::base_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Our event loop.</p>
<p>Probably needs to be used to pass to a <a class="el" href="classwangle_1_1ManagedConnection.html">ManagedConnection</a> implementation. Also visible in case a subclass wishes to do additional things w/ the event loop (e.g. in <a class="el" href="namespacefolly.html#aa7ee5527840192994ceb098d58b1954b">attach()</a>). </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00319">319</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00485">drainConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00530">dropConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00508">forceStop()</a>, <a class="el" href="Acceptor_8h_source.html#l00127">getEventBase()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00126">initDownstreamConnectionManager()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a32d345ea76a7b4cd6e03fadc61eed1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classwangle_1_1SSLCacheProvider.html">SSLCacheProvider</a>&gt; wangle::Acceptor::cacheProvider_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00440">440</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00187">addSSLContextConfig()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00162">resetSSLContextConfigs()</a>, and <a class="el" href="Acceptor_8h_source.html#l00078">setSSLCacheProvider()</a>.</p>

</div>
</div>
<a class="anchor" id="a05c0227e1dee7e318f940c3fc79f71d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classwangle_1_1IConnectionCounter.html">IConnectionCounter</a>* wangle::Acceptor::connectionCounter_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00458">458</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00228">canAccept()</a>, <a class="el" href="Acceptor_8h_source.html#l00323">getWorkerMaxConnections()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00221">setLoadShedConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a86ee92187640afc119196b9c2daac37c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structwangle_1_1TLSTicketKeySeeds.html">wangle::TLSTicketKeySeeds</a> wangle::Acceptor::currentSecrets_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00441">441</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00140">createFizzTicketCipher()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00195">setTLSTicketSecrets()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c81a983de91a7335d9bcf71a6e4f9c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1DefaultToFizzPeekingCallback.html">DefaultToFizzPeekingCallback</a> wangle::Acceptor::defaultFizzPeeker_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00436">436</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00414">getFizzPeeker()</a>.</p>

</div>
</div>
<a class="anchor" id="a18f047a280b4d0ff49b80fbf5816a444"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1DefaultToSSLPeekingCallback.html">DefaultToSSLPeekingCallback</a> wangle::Acceptor::defaultPeekingCallback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00435">435</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>.</p>

</div>
</div>
<a class="anchor" id="ab94a67c0ffc83f9aa9dd874dbf4865f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1ConnectionManager.html#a6a562d1f774a7678d9a73bbe70c7cdef">wangle::ConnectionManager::UniquePtr</a> wangle::Acceptor::downstreamConnectionManager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00438">438</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00501">addConnection()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00214">drainAllConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00485">drainConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00530">dropConnections()</a>, <a class="el" href="HTTPSessionAcceptor_8cpp_source.html#l00127">proxygen::HTTPSessionAcceptor::dropIdleConnections()</a>, <a class="el" href="Acceptor_8h_source.html#l00132">getConnectionManager()</a>, <a class="el" href="Acceptor_8h_source.html#l00119">getNumConnections()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00126">initDownstreamConnectionManager()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2e208ae6b6e827196a29baaabd1471c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool wangle::Acceptor::forceShutdownInProgress_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00456">456</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00530">dropConnections()</a>.</p>

</div>
</div>
<a class="anchor" id="a71476b030050be7e59d1a59da0aeb783"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds wangle::Acceptor::gracefulShutdownTimeout_ {5000}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00459">459</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00214">drainAllConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00485">drainConnections()</a>, <a class="el" href="Acceptor_8h_source.html#l00182">getGracefulShutdownTimeout()</a>, and <a class="el" href="Acceptor_8h_source.html#l00178">setGracefulShutdownTimeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cdd849b6e0552bef812e2db488eba1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;const <a class="el" href="classwangle_1_1LoadShedConfiguration.html">LoadShedConfiguration</a>&gt; wangle::Acceptor::loadShedConfig_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00457">457</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00228">canAccept()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00221">setLoadShedConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="aadaf76d8da8c6ac2f7d64b219f2bee2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> wangle::Acceptor::numPendingSSLConns_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00452">452</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00422">sslConnectionError()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00403">sslConnectionReady()</a>.</p>

</div>
</div>
<a class="anchor" id="a3a8479eaefe401b585d14a2b9495b23c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1SecurityProtocolContextManager.html">SecurityProtocolContextManager</a> wangle::Acceptor::securityProtocolCtxManager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stores peekers for different security protocols. </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00432">432</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00353">startHandshakeManager()</a>.</p>

</div>
</div>
<a class="anchor" id="a239e2bc553e858564ee567a8eff028ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1AsyncSocket.html#ae7a1a4b816cc80381f9577af92c74bfd">folly::AsyncSocket::OptionMap</a> wangle::Acceptor::socketOptions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Socket options to apply to the client socket </p>

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00425">425</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00277">connectionAccepted()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d8fcfdb00a9cc17e39641518d2c2738"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classwangle_1_1SSLContextManager.html">SSLContextManager</a>&gt; wangle::Acceptor::sslCtxManager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00427">427</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00187">addSSLContextConfig()</a>, <a class="el" href="Acceptor_8h_source.html#l00104">getSSLContextManager()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00162">resetSSLContextConfigs()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00195">setTLSTicketSecrets()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e1fcd22851f2c2104204a83abb72efa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528">State</a> wangle::Acceptor::state_ {<a class="el" href="classwangle_1_1Acceptor.html#a01decb025c474000e3399147242e1528ab217b1cb58a6ee4ef35a6c84cf367659">State::kInit</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00451">451</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00441">acceptStopped()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00466">checkDrained()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00365">connectionReady()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00513">dropAllConnections()</a>, <a class="el" href="Acceptor_8h_source.html#l00148">getState()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00126">initDownstreamConnectionManager()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00458">onEmpty()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00422">sslConnectionError()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00403">sslConnectionReady()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a6d223330a96428c799e0d940b6c558"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwangle_1_1TLSPlaintextPeekingCallback.html">TLSPlaintextPeekingCallback</a> wangle::Acceptor::tlsPlaintextPeekingCallback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00434">434</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8cpp_source.html#l00060">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a242076537fdb8d99e9165c042b6c05da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt; <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> &gt; wangle::Acceptor::totalNumPendingSSLConns_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Acceptor_8h_source.html#l00454">454</a> of file <a class="el" href="Acceptor_8h_source.html">Acceptor.h</a>.</p>

<p>Referenced by <a class="el" href="Acceptor_8h_source.html#l00199">getTotalNumPendingSSLConns()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00304">processEstablishedConnection()</a>, <a class="el" href="Acceptor_8cpp_source.html#l00422">sslConnectionError()</a>, and <a class="el" href="Acceptor_8cpp_source.html#l00403">sslConnectionReady()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/wangle/wangle/acceptor/<a class="el" href="Acceptor_8h_source.html">Acceptor.h</a></li>
<li>proxygen/wangle/wangle/acceptor/<a class="el" href="Acceptor_8cpp_source.html">Acceptor.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacewangle.html">wangle</a></li><li class="navelem"><a class="el" href="classwangle_1_1Acceptor.html">Acceptor</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
