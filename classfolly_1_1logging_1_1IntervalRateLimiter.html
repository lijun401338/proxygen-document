<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::logging::IntervalRateLimiter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1logging_1_1IntervalRateLimiter.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1logging_1_1IntervalRateLimiter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::logging::IntervalRateLimiter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9e0851a5aaf1d3be4c38169ab227c4e3"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9e0851a5aaf1d3be4c38169ab227c4e3">clock</a> = <a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html">chrono::coarse_steady_clock</a></td></tr>
<tr class="separator:a9e0851a5aaf1d3be4c38169ab227c4e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad29b03ab4d3313dde98d9bf284bfa37f"><td class="memItemLeft" align="right" valign="top">constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ad29b03ab4d3313dde98d9bf284bfa37f">IntervalRateLimiter</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> maxPerInterval, <a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html#a8b2a92aebef1745e605af29bc30da1fb">clock::duration</a> interval)</td></tr>
<tr class="separator:ad29b03ab4d3313dde98d9bf284bfa37f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa648489e038e8d264b075ec7f119c28d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#aa648489e038e8d264b075ec7f119c28d">check</a> ()</td></tr>
<tr class="separator:aa648489e038e8d264b075ec7f119c28d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a91725f178a6259a036259ffae21fa116"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a91725f178a6259a036259ffae21fa116">checkSlow</a> ()</td></tr>
<tr class="separator:a91725f178a6259a036259ffae21fa116"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ace3fb6cc665afb26f107836ad979e8b4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ace3fb6cc665afb26f107836ad979e8b4">maxPerInterval_</a></td></tr>
<tr class="separator:ace3fb6cc665afb26f107836ad979e8b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45df0e2f738ea89f401e615c4d2caee"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html#a8b2a92aebef1745e605af29bc30da1fb">clock::time_point::duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#aa45df0e2f738ea89f401e615c4d2caee">interval_</a></td></tr>
<tr class="separator:aa45df0e2f738ea89f401e615c4d2caee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f45148b3420b3745ef5814df04aea94"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9f45148b3420b3745ef5814df04aea94">count_</a> {std::numeric_limits&lt;<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&gt;::<a class="el" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>()}</td></tr>
<tr class="separator:a9f45148b3420b3745ef5814df04aea94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a3f2401d8c5618a46fc75e0ad7491a"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html#a072ff8d99a97cf6c95c3fd4ebb86f660">clock::rep</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a32a3f2401d8c5618a46fc75e0ad7491a">timestamp_</a> {0}</td></tr>
<tr class="separator:a32a3f2401d8c5618a46fc75e0ad7491a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="structA.html">A</a> rate limiter that can rate limit events to N events per M milliseconds.</p>
<p>It is intended to be fast to check when messages are not being rate limited. When messages are being rate limited it is slightly slower, as it has to check the clock each time <a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#aa648489e038e8d264b075ec7f119c28d">check()</a> is called in this case. </p>

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00034">34</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a9e0851a5aaf1d3be4c38169ab227c4e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9e0851a5aaf1d3be4c38169ab227c4e3">folly::logging::IntervalRateLimiter::clock</a> =  <a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html">chrono::coarse_steady_clock</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00036">36</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad29b03ab4d3313dde98d9bf284bfa37f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr folly::logging::IntervalRateLimiter::IntervalRateLimiter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td>
          <td class="paramname"><em>maxPerInterval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html#a8b2a92aebef1745e605af29bc30da1fb">clock::duration</a>&#160;</td>
          <td class="paramname"><em>interval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00038">38</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>

<p>References <a class="el" href="RateLimiter_8h_source.html#l00055">interval_</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      : <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ace3fb6cc665afb26f107836ad979e8b4">maxPerInterval_</a>{maxPerInterval}, <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#aa45df0e2f738ea89f401e615c4d2caee">interval_</a>{interval} {}</div><div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_aa45df0e2f738ea89f401e615c4d2caee"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#aa45df0e2f738ea89f401e615c4d2caee">folly::logging::IntervalRateLimiter::interval_</a></div><div class="ttdeci">const clock::time_point::duration interval_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00055">RateLimiter.h:55</a></div></div>
<div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_ace3fb6cc665afb26f107836ad979e8b4"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ace3fb6cc665afb26f107836ad979e8b4">folly::logging::IntervalRateLimiter::maxPerInterval_</a></div><div class="ttdeci">const uint64_t maxPerInterval_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00054">RateLimiter.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa648489e038e8d264b075ec7f119c28d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::logging::IntervalRateLimiter::check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00043">43</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>

<p>References <a class="el" href="RateLimiter_8cpp_source.html#l00021">checkSlow()</a>, <a class="el" href="RateLimiter_8h_source.html#l00060">count_</a>, and <a class="el" href="RateLimiter_8h_source.html#l00054">maxPerInterval_</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;               {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">auto</span> origCount = <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9f45148b3420b3745ef5814df04aea94">count_</a>.fetch_add(1, std::memory_order_acq_rel);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (origCount &lt; <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ace3fb6cc665afb26f107836ad979e8b4">maxPerInterval_</a>) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a91725f178a6259a036259ffae21fa116">checkSlow</a>();</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div><div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_ace3fb6cc665afb26f107836ad979e8b4"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ace3fb6cc665afb26f107836ad979e8b4">folly::logging::IntervalRateLimiter::maxPerInterval_</a></div><div class="ttdeci">const uint64_t maxPerInterval_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00054">RateLimiter.h:54</a></div></div>
<div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_a91725f178a6259a036259ffae21fa116"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a91725f178a6259a036259ffae21fa116">folly::logging::IntervalRateLimiter::checkSlow</a></div><div class="ttdeci">bool checkSlow()</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8cpp_source.html#l00021">RateLimiter.cpp:21</a></div></div>
<div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_a9f45148b3420b3745ef5814df04aea94"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9f45148b3420b3745ef5814df04aea94">folly::logging::IntervalRateLimiter::count_</a></div><div class="ttdeci">std::atomic&lt; uint64_t &gt; count_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00060">RateLimiter.h:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a91725f178a6259a036259ffae21fa116"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::logging::IntervalRateLimiter::checkSlow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8cpp_source.html#l00021">21</a> of file <a class="el" href="RateLimiter_8cpp_source.html">RateLimiter.cpp</a>.</p>

<p>References <a class="el" href="RateLimiter_8h_source.html#l00060">count_</a>, <a class="el" href="RateLimiter_8h_source.html#l00055">interval_</a>, <a class="el" href="RateLimiter_8h_source.html#l00054">maxPerInterval_</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, <a class="el" href="Chrono_8h_source.html#l00171">folly::chrono::coarse_steady_clock::now()</a>, and <a class="el" href="RateLimiter_8h_source.html#l00064">timestamp_</a>.</p>

<p>Referenced by <a class="el" href="RateLimiter_8h_source.html#l00043">check()</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                                    {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <span class="keyword">auto</span> ts = <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a32a3f2401d8c5618a46fc75e0ad7491a">timestamp_</a>.load();</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <span class="keyword">auto</span> <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a> = <a class="code" href="structfolly_1_1chrono_1_1coarse__steady__clock.html#aad10e3f755e70802e5e29c69ad813ea4">clock::now</a>().time_since_epoch().count();</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a> &lt; (ts + <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#aa45df0e2f738ea89f401e615c4d2caee">interval_</a>.count())) {</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  }</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a32a3f2401d8c5618a46fc75e0ad7491a">timestamp_</a>.compare_exchange_strong(ts, <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a>)) {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// We raced with another thread that reset the timestamp.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">// We treat this as if we fell into the previous interval, and so we</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// rate-limit ourself.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  }</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span> (ts == 0) {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// If we initialized timestamp_ for the very first time increment count_ by</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// one instead of setting it to 0.  Our original increment made it roll over</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// to 0, so other threads may have already incremented it again and passed</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// the check.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">auto</span> origCount = <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9f45148b3420b3745ef5814df04aea94">count_</a>.fetch_add(1, std::memory_order_acq_rel);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// Check to see if other threads already hit the rate limit cap before we</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// finished checkSlow().</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">return</span> (origCount &lt; <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ace3fb6cc665afb26f107836ad979e8b4">maxPerInterval_</a>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// In the future, if we wanted to return the number of dropped events we</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// could use (count_.exchange(0) - maxPerInterval_) here.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9f45148b3420b3745ef5814df04aea94">count_</a>.store(1, std::memory_order_release);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div><div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_a32a3f2401d8c5618a46fc75e0ad7491a"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a32a3f2401d8c5618a46fc75e0ad7491a">folly::logging::IntervalRateLimiter::timestamp_</a></div><div class="ttdeci">std::atomic&lt; clock::rep &gt; timestamp_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00064">RateLimiter.h:64</a></div></div>
<div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_aa45df0e2f738ea89f401e615c4d2caee"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#aa45df0e2f738ea89f401e615c4d2caee">folly::logging::IntervalRateLimiter::interval_</a></div><div class="ttdeci">const clock::time_point::duration interval_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00055">RateLimiter.h:55</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_ace3fb6cc665afb26f107836ad979e8b4"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#ace3fb6cc665afb26f107836ad979e8b4">folly::logging::IntervalRateLimiter::maxPerInterval_</a></div><div class="ttdeci">const uint64_t maxPerInterval_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00054">RateLimiter.h:54</a></div></div>
<div class="ttc" id="classfolly_1_1logging_1_1IntervalRateLimiter_html_a9f45148b3420b3745ef5814df04aea94"><div class="ttname"><a href="classfolly_1_1logging_1_1IntervalRateLimiter.html#a9f45148b3420b3745ef5814df04aea94">folly::logging::IntervalRateLimiter::count_</a></div><div class="ttdeci">std::atomic&lt; uint64_t &gt; count_</div><div class="ttdef"><b>Definition:</b> <a href="RateLimiter_8h_source.html#l00060">RateLimiter.h:60</a></div></div>
<div class="ttc" id="structfolly_1_1chrono_1_1coarse__steady__clock_html_aad10e3f755e70802e5e29c69ad813ea4"><div class="ttname"><a href="structfolly_1_1chrono_1_1coarse__steady__clock.html#aad10e3f755e70802e5e29c69ad813ea4">folly::chrono::coarse_steady_clock::now</a></div><div class="ttdeci">static time_point now() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="Chrono_8h_source.html#l00171">Chrono.h:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a9f45148b3420b3745ef5814df04aea94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&gt; folly::logging::IntervalRateLimiter::count_ {std::numeric_limits&lt;<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&gt;::<a class="el" href="LogLevel_8cpp.html#a15c8b90f03cae068a6979f32590642e2">max</a>()}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00060">60</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>

<p>Referenced by <a class="el" href="RateLimiter_8h_source.html#l00043">check()</a>, and <a class="el" href="RateLimiter_8cpp_source.html#l00021">checkSlow()</a>.</p>

</div>
</div>
<a class="anchor" id="aa45df0e2f738ea89f401e615c4d2caee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html#a8b2a92aebef1745e605af29bc30da1fb">clock::time_point::duration</a> folly::logging::IntervalRateLimiter::interval_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00055">55</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>

<p>Referenced by <a class="el" href="RateLimiter_8cpp_source.html#l00021">checkSlow()</a>, and <a class="el" href="RateLimiter_8h_source.html#l00038">IntervalRateLimiter()</a>.</p>

</div>
</div>
<a class="anchor" id="ace3fb6cc665afb26f107836ad979e8b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> folly::logging::IntervalRateLimiter::maxPerInterval_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00054">54</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>

<p>Referenced by <a class="el" href="RateLimiter_8h_source.html#l00043">check()</a>, and <a class="el" href="RateLimiter_8cpp_source.html#l00021">checkSlow()</a>.</p>

</div>
</div>
<a class="anchor" id="a32a3f2401d8c5618a46fc75e0ad7491a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="structfolly_1_1chrono_1_1coarse__steady__clock.html#a072ff8d99a97cf6c95c3fd4ebb86f660">clock::rep</a>&gt; folly::logging::IntervalRateLimiter::timestamp_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RateLimiter_8h_source.html#l00064">64</a> of file <a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a>.</p>

<p>Referenced by <a class="el" href="RateLimiter_8cpp_source.html#l00021">checkSlow()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/logging/<a class="el" href="RateLimiter_8h_source.html">RateLimiter.h</a></li>
<li>proxygen/folly/folly/logging/<a class="el" href="RateLimiter_8cpp_source.html">RateLimiter.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="namespacefolly_1_1logging.html">logging</a></li><li class="navelem"><a class="el" href="classfolly_1_1logging_1_1IntervalRateLimiter.html">IntervalRateLimiter</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
