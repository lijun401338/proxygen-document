<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::test::DeterministicSchedule Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1test_1_1DeterministicSchedule.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classfolly_1_1test_1_1DeterministicSchedule-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::test::DeterministicSchedule Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::test::DeterministicSchedule:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1test_1_1DeterministicSchedule.png" usemap="#folly::test::DeterministicSchedule_map" alt=""/>
  <map id="folly::test::DeterministicSchedule_map" name="folly::test::DeterministicSchedule_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a70f41f034eb087d14c6177f4854a8157"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a70f41f034eb087d14c6177f4854a8157">DeterministicSchedule</a> (const std::function&lt; size_t(size_t)&gt; &amp;<a class="el" href="FilePoller_8cpp.html#af8aa2314425a86a160127ccd900704f8">scheduler</a>)</td></tr>
<tr class="separator:a70f41f034eb087d14c6177f4854a8157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ba403f550f5cf7a985fa006db0cca85"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a2ba403f550f5cf7a985fa006db0cca85">~DeterministicSchedule</a> ()</td></tr>
<tr class="separator:a2ba403f550f5cf7a985fa006db0cca85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4644518091912f13916b2a1a98be3397"><td class="memItemLeft" align="right" valign="top">static std::function&lt; size_t(size_t)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a4644518091912f13916b2a1a98be3397">uniform</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="el" href="FBStringBenchmark_8cpp.html#ab1633aa266a0a720540840343194b2cf">seed</a>)</td></tr>
<tr class="separator:a4644518091912f13916b2a1a98be3397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6bf7a4e002dd759e0f3cc7d149771fa"><td class="memItemLeft" align="right" valign="top">static std::function&lt; size_t(size_t)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab6bf7a4e002dd759e0f3cc7d149771fa">uniformSubset</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="el" href="FBStringBenchmark_8cpp.html#ab1633aa266a0a720540840343194b2cf">seed</a>, size_t n=2, size_t <a class="el" href="StringKeyedBenchmark_8cpp.html#a5048bbdc4a007465f07e97c4b28117c9">m</a>=64)</td></tr>
<tr class="separator:ab6bf7a4e002dd759e0f3cc7d149771fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ce98cad3384d82f3ec1ca588e944686"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a> ()</td></tr>
<tr class="separator:a6ce98cad3384d82f3ec1ca588e944686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37faddb6c016feb11d55bc629e2ff195"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a> ()</td></tr>
<tr class="separator:a37faddb6c016feb11d55bc629e2ff195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6651bc1aa9c848884612c503d35b8e55"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6651bc1aa9c848884612c503d35b8e55">afterSharedAccess</a> (bool success)</td></tr>
<tr class="separator:a6651bc1aa9c848884612c503d35b8e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f5de59c0afdc448572f9efd3a045839"><td class="memTemplParams" colspan="2">template&lt;typename Func , typename... Args&gt; </td></tr>
<tr class="memitem:a8f5de59c0afdc448572f9efd3a045839"><td class="memTemplItemLeft" align="right" valign="top">static std::thread&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">thread</a> (<a class="el" href="namespacefolly.html#a4f345dd5f9b26d8dd202c2072badbea8">Func</a> &amp;&amp;func, Args &amp;&amp;...args)</td></tr>
<tr class="separator:a8f5de59c0afdc448572f9efd3a045839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2575449f710ab101a165dfa0a761d27"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ac2575449f710ab101a165dfa0a761d27">join</a> (std::thread &amp;<a class="el" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>)</td></tr>
<tr class="separator:ac2575449f710ab101a165dfa0a761d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7049b12ec833ac3aa6f17df0c8c278c0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a7049b12ec833ac3aa6f17df0c8c278c0">post</a> (sem_t *sem)</td></tr>
<tr class="separator:a7049b12ec833ac3aa6f17df0c8c278c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0cd3d94671fbf389579cfe638e87ff"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a1e0cd3d94671fbf389579cfe638e87ff">tryWait</a> (sem_t *sem)</td></tr>
<tr class="separator:a1e0cd3d94671fbf389579cfe638e87ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe39730e8cfb1a37218b72888f8bd118"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#abe39730e8cfb1a37218b72888f8bd118">wait</a> (sem_t *sem)</td></tr>
<tr class="separator:abe39730e8cfb1a37218b72888f8bd118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8872efb54c3f301f112ffd279d42d0"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#aff8872efb54c3f301f112ffd279d42d0">getRandNumber</a> (size_t n)</td></tr>
<tr class="separator:aff8872efb54c3f301f112ffd279d42d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3551dcd34a26400ceab3428b1c5f18a3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a3551dcd34a26400ceab3428b1c5f18a3">getcpu</a> (unsigned *cpu, unsigned *node, void *unused)</td></tr>
<tr class="separator:a3551dcd34a26400ceab3428b1c5f18a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96502db669e8a4e68c5f40e32ef53e0f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a96502db669e8a4e68c5f40e32ef53e0f">setAuxAct</a> (<a class="el" href="namespacefolly_1_1test.html#a0d22f4cfbe8c4f173b8f7bddbcbe65c9">AuxAct</a> &amp;aux)</td></tr>
<tr class="separator:a96502db669e8a4e68c5f40e32ef53e0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d566e1a829560bf49ff774eb458b4b4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a2d566e1a829560bf49ff774eb458b4b4">setAuxChk</a> (<a class="el" href="namespacefolly_1_1test.html#a39acd58805cc75e4759930e329200f97">AuxChk</a> &amp;aux)</td></tr>
<tr class="separator:a2d566e1a829560bf49ff774eb458b4b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad489b1de868e222ec226b0cfc6905c3f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ad489b1de868e222ec226b0cfc6905c3f">clearAuxChk</a> ()</td></tr>
<tr class="separator:ad489b1de868e222ec226b0cfc6905c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab73fcf78fb9929bec933434a27a3eb97"><td class="memItemLeft" align="right" valign="top">static sem_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab73fcf78fb9929bec933434a27a3eb97">descheduleCurrentThread</a> ()</td></tr>
<tr class="separator:ab73fcf78fb9929bec933434a27a3eb97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae35d0e3042faf9b3a962d175ed4957b5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ae35d0e3042faf9b3a962d175ed4957b5">reschedule</a> (sem_t *sem)</td></tr>
<tr class="separator:ae35d0e3042faf9b3a962d175ed4957b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a36a8b0c104748b8a13735ced4f15ded5"><td class="memItemLeft" align="right" valign="top">sem_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a36a8b0c104748b8a13735ced4f15ded5">beforeThreadCreate</a> ()</td></tr>
<tr class="separator:a36a8b0c104748b8a13735ced4f15ded5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966a6a8f3da28a1a68fde04d68849e3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a966a6a8f3da28a1a68fde04d68849e3c">afterThreadCreate</a> (sem_t *)</td></tr>
<tr class="separator:a966a6a8f3da28a1a68fde04d68849e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c4ee77bb6c41b887c9e34749cac5f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a09c4ee77bb6c41b887c9e34749cac5f0">beforeThreadExit</a> ()</td></tr>
<tr class="separator:a09c4ee77bb6c41b887c9e34749cac5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab752f09196f56bbb210d9e9497317093"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab752f09196f56bbb210d9e9497317093">callAux</a> (bool)</td></tr>
<tr class="separator:ab752f09196f56bbb210d9e9497317093"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a19b453612b1209531f90c11756550a87"><td class="memItemLeft" align="right" valign="top">std::function&lt; size_t(size_t)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a19b453612b1209531f90c11756550a87">scheduler_</a></td></tr>
<tr class="separator:a19b453612b1209531f90c11756550a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa491ac6a32bf9101631666ebb8ad81b3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; sem_t * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a></td></tr>
<tr class="separator:aa491ac6a32bf9101631666ebb8ad81b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e97624e85ebae7669c4f8455120cfd1"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; std::thread::id &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a0e97624e85ebae7669c4f8455120cfd1">active_</a></td></tr>
<tr class="separator:a0e97624e85ebae7669c4f8455120cfd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64287655d498004962b82227262cabc7"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::thread::id, sem_t * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a64287655d498004962b82227262cabc7">joins_</a></td></tr>
<tr class="separator:a64287655d498004962b82227262cabc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f15ef9a7954753439cccccb37476d6"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a68f15ef9a7954753439cccccb37476d6">nextThreadId_</a></td></tr>
<tr class="separator:a68f15ef9a7954753439cccccb37476d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab140f847887e0fbee2a60ca880c1e925"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab140f847887e0fbee2a60ca880c1e925">step_</a></td></tr>
<tr class="separator:ab140f847887e0fbee2a60ca880c1e925"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a539aeaace14bb01842f20aa42abe666b"><td class="memItemLeft" align="right" valign="top">static FOLLY_TLS sem_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a></td></tr>
<tr class="separator:a539aeaace14bb01842f20aa42abe666b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030fbe819b25bd604eb5829a2cd64337"><td class="memItemLeft" align="right" valign="top">static FOLLY_TLS <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a></td></tr>
<tr class="separator:a030fbe819b25bd604eb5829a2cd64337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa01860d5e54d2f4c647f7e3c65171b"><td class="memItemLeft" align="right" valign="top">static FOLLY_TLS unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8aa01860d5e54d2f4c647f7e3c65171b">tls_threadId</a></td></tr>
<tr class="separator:a8aa01860d5e54d2f4c647f7e3c65171b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcb6e5be66baab19126d6758c09faeb3"><td class="memItemLeft" align="right" valign="top">static thread_local <a class="el" href="namespacefolly_1_1test.html#a0d22f4cfbe8c4f173b8f7bddbcbe65c9">AuxAct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">tls_aux_act</a></td></tr>
<tr class="separator:afcb6e5be66baab19126d6758c09faeb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae289a24d0471e508e79014e063e98dbe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacefolly_1_1test.html#a39acd58805cc75e4759930e329200f97">AuxChk</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">aux_chk</a></td></tr>
<tr class="separator:ae289a24d0471e508e79014e063e98dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a> coordinates the inter-thread communication of a set of threads under test, so that despite concurrency the execution is the same every time. It works by stashing a reference to the schedule in a thread-local variable, then blocking all but one thread at a time.</p>
<p>In order for <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a> to work, it needs to intercept all inter-thread communication. To do this you should use DeterministicAtomic&lt;T&gt; instead of std::atomic&lt;T&gt;, create threads using <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">DeterministicSchedule::thread()</a> instead of the std::thread constructor, DeterministicSchedule::join(thr) instead of thr.join(), and access semaphores via the helper functions in <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a>. Locks are not yet supported, although they would be easy to add with the same strategy as the mapping of sem_wait.</p>
<p>The actual schedule is defined by a function from n -&gt; [0,n). At each step, the function will be given the number of active threads (n), and it returns the index of the thread that should be run next. Invocations of the scheduler function will be serialized, but will occur from multiple threads. <a class="el" href="structA.html">A</a> good starting schedule is uniform(0). </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00075">75</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a70f41f034eb087d14c6177f4854a8157"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::test::DeterministicSchedule::DeterministicSchedule </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; size_t(size_t)&gt; &amp;&#160;</td>
          <td class="paramname"><em>scheduler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Arranges for the current thread (and all threads created by <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">DeterministicSchedule::thread</a> on a thread participating in this schedule) to participate in a deterministic schedule. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00047">47</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00202">sems_</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00198">tls_aux_act</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00195">tls_sem</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    : <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a19b453612b1209531f90c11756550a87">scheduler_</a>(<a class="code" href="FilePoller_8cpp.html#af8aa2314425a86a160127ccd900704f8">scheduler</a>), <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a68f15ef9a7954753439cccccb37476d6">nextThreadId_</a>(1), <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab140f847887e0fbee2a60ca880c1e925">step_</a>(0) {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">tls_aux_act</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a> = <span class="keyword">new</span> sem_t;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  sem_init(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>, 0, 1);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.push_back(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a> = <span class="keyword">this</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a19b453612b1209531f90c11756550a87"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a19b453612b1209531f90c11756550a87">folly::test::DeterministicSchedule::scheduler_</a></div><div class="ttdeci">std::function&lt; size_t(size_t)&gt; scheduler_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00201">DeterministicSchedule.h:201</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ab140f847887e0fbee2a60ca880c1e925"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ab140f847887e0fbee2a60ca880c1e925">folly::test::DeterministicSchedule::step_</a></div><div class="ttdeci">uint64_t step_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00212">DeterministicSchedule.h:212</a></div></div>
<div class="ttc" id="FilePoller_8cpp_html_af8aa2314425a86a160127ccd900704f8"><div class="ttname"><a href="FilePoller_8cpp.html#af8aa2314425a86a160127ccd900704f8">scheduler</a></div><div class="ttdeci">std::shared_ptr&lt; folly::FunctionScheduler &gt; scheduler</div><div class="ttdef"><b>Definition:</b> <a href="FilePoller_8cpp_source.html#l00050">FilePoller.cpp:50</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a68f15ef9a7954753439cccccb37476d6"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a68f15ef9a7954753439cccccb37476d6">folly::test::DeterministicSchedule::nextThreadId_</a></div><div class="ttdeci">unsigned nextThreadId_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00205">DeterministicSchedule.h:205</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a539aeaace14bb01842f20aa42abe666b"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">folly::test::DeterministicSchedule::tls_sem</a></div><div class="ttdeci">static FOLLY_TLS sem_t * tls_sem</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00195">DeterministicSchedule.h:195</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_afcb6e5be66baab19126d6758c09faeb3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">folly::test::DeterministicSchedule::tls_aux_act</a></div><div class="ttdeci">static thread_local AuxAct tls_aux_act</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00198">DeterministicSchedule.h:198</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_aa491ac6a32bf9101631666ebb8ad81b3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">folly::test::DeterministicSchedule::sems_</a></div><div class="ttdeci">std::vector&lt; sem_t * &gt; sems_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00202">DeterministicSchedule.h:202</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ba403f550f5cf7a985fa006db0cca85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">folly::test::DeterministicSchedule::~DeterministicSchedule </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Completes the schedule. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00061">61</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00202">sems_</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00195">tls_sem</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                              {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a> == <span class="keyword">this</span>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.size() == 1);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>[0] == <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a09c4ee77bb6c41b887c9e34749cac5f0">beforeThreadExit</a>();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a09c4ee77bb6c41b887c9e34749cac5f0"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a09c4ee77bb6c41b887c9e34749cac5f0">folly::test::DeterministicSchedule::beforeThreadExit</a></div><div class="ttdeci">void beforeThreadExit()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00231">DeterministicSchedule.cpp:231</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a539aeaace14bb01842f20aa42abe666b"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">folly::test::DeterministicSchedule::tls_sem</a></div><div class="ttdeci">static FOLLY_TLS sem_t * tls_sem</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00195">DeterministicSchedule.h:195</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_aa491ac6a32bf9101631666ebb8ad81b3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">folly::test::DeterministicSchedule::sems_</a></div><div class="ttdeci">std::vector&lt; sem_t * &gt; sems_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00202">DeterministicSchedule.h:202</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a37faddb6c016feb11d55bc629e2ff195"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::afterSharedAccess </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Releases permission for the current thread to perform inter-thread communication. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">137</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00216">afterThreadCreate()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00207">beforeThreadCreate()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00310">folly::test::futexWaitImpl()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00384">folly::test::futexWakeImpl()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00161">getcpu()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">join()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00505">folly::test::DeterministicMutex::lock()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00282">post()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00520">folly::test::DeterministicMutex::try_lock()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00289">tryWait()</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00528">folly::test::DeterministicMutex::unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                              {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keyword">auto</span> sched = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">if</span> (!sched) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  sem_post(sched-&gt;sems_[sched-&gt;scheduler_(sched-&gt;sems_.size())]);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6651bc1aa9c848884612c503d35b8e55"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::afterSharedAccess </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>success</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calls a user-defined auxiliary function if any, and releases permission for the current thread to perform inter-thread communication. The bool parameter indicates the success of the shared access (if conditional, true otherwise). </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00145">145</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00271">callAux()</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                                          {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keyword">auto</span> sched = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span> (!sched) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  sched-&gt;<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab752f09196f56bbb210d9e9497317093">callAux</a>(success);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  sem_post(sched-&gt;sems_[sched-&gt;scheduler_(sched-&gt;sems_.size())]);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ab752f09196f56bbb210d9e9497317093"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ab752f09196f56bbb210d9e9497317093">folly::test::DeterministicSchedule::callAux</a></div><div class="ttdeci">void callAux(bool)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00271">DeterministicSchedule.cpp:271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a966a6a8f3da28a1a68fde04d68849e3c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::afterThreadCreate </td>
          <td>(</td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00216">216</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00203">active_</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00195">tls_sem</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                                        {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a> = sem;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a> = <span class="keyword">this</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordtype">bool</span> started = <span class="keyword">false</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">while</span> (!started) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a0e97624e85ebae7669c4f8455120cfd1">active_</a>.count(std::this_thread::get_id()) == 1) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      started = <span class="keyword">true</span>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a0e97624e85ebae7669c4f8455120cfd1"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a0e97624e85ebae7669c4f8455120cfd1">folly::test::DeterministicSchedule::active_</a></div><div class="ttdeci">std::unordered_set&lt; std::thread::id &gt; active_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00203">DeterministicSchedule.h:203</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a539aeaace14bb01842f20aa42abe666b"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">folly::test::DeterministicSchedule::tls_sem</a></div><div class="ttdeci">static FOLLY_TLS sem_t * tls_sem</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00195">DeterministicSchedule.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ce98cad3384d82f3ec1ca588e944686"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::beforeSharedAccess </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Obtains permission for the current thread to perform inter-thread communication. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">131</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00195">tls_sem</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00216">afterThreadCreate()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00207">beforeThreadCreate()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00310">folly::test::futexWaitImpl()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00384">folly::test::futexWakeImpl()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00161">getcpu()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">join()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00505">folly::test::DeterministicMutex::lock()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00282">post()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00520">folly::test::DeterministicMutex::try_lock()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00289">tryWait()</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00528">folly::test::DeterministicMutex::unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                               {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    sem_wait(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a539aeaace14bb01842f20aa42abe666b"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">folly::test::DeterministicSchedule::tls_sem</a></div><div class="ttdeci">static FOLLY_TLS sem_t * tls_sem</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00195">DeterministicSchedule.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a36a8b0c104748b8a13735ced4f15ded5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sem_t * folly::test::DeterministicSchedule::beforeThreadCreate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00207">207</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, <a class="el" href="StringKeyedBenchmark_8cpp_source.html#l00048">s</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00202">sems_</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8h_source.html#l00123">thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                                 {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  sem_t* <a class="code" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a> = <span class="keyword">new</span> sem_t;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  sem_init(s, 0, 0);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.push_back(s);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
<div class="ttc" id="StringKeyedBenchmark_8cpp_html_aa7f1a46e86fabf3df0ec876cd34220c2"><div class="ttname"><a href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a></div><div class="ttdeci">static set&lt; string &gt; s</div><div class="ttdef"><b>Definition:</b> <a href="StringKeyedBenchmark_8cpp_source.html#l00048">StringKeyedBenchmark.cpp:48</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_aa491ac6a32bf9101631666ebb8ad81b3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">folly::test::DeterministicSchedule::sems_</a></div><div class="ttdeci">std::vector&lt; sem_t * &gt; sems_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00202">DeterministicSchedule.h:202</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a09c4ee77bb6c41b887c9e34749cac5f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::beforeThreadExit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">231</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00203">active_</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00042">FOLLY_TEST_DSCHED_VLOG</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00204">joins_</a>, <a class="el" href="AtFork_8cpp_source.html#l00034">parent</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00191">reschedule()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00202">sems_</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00198">tls_aux_act</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00195">tls_sem</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00061">~DeterministicSchedule()</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                             {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  assert(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a> == <span class="keyword">this</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keyword">auto</span> <a class="code" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a> = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a64287655d498004962b82227262cabc7">joins_</a>.find(std::this_thread::get_id());</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a> != <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a64287655d498004962b82227262cabc7">joins_</a>.end()) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ae35d0e3042faf9b3a962d175ed4957b5">reschedule</a>(<a class="code" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a>-&gt;second);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a64287655d498004962b82227262cabc7">joins_</a>.erase(<a class="code" href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.erase(std::find(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.begin(), <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.end(), <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>));</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a0e97624e85ebae7669c4f8455120cfd1">active_</a>.erase(std::this_thread::get_id());</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.size() &gt; 0) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a>(<span class="stringliteral">&quot;exiting&quot;</span>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  sem_destroy(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keyword">delete</span> <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">tls_aux_act</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div><div class="ttc" id="DeterministicSchedule_8h_html_a2093fbe43c6769ae22547141f44a5061"><div class="ttname"><a href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a></div><div class="ttdeci">#define FOLLY_TEST_DSCHED_VLOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00042">DeterministicSchedule.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a0e97624e85ebae7669c4f8455120cfd1"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a0e97624e85ebae7669c4f8455120cfd1">folly::test::DeterministicSchedule::active_</a></div><div class="ttdeci">std::unordered_set&lt; std::thread::id &gt; active_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00203">DeterministicSchedule.h:203</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ae35d0e3042faf9b3a962d175ed4957b5"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ae35d0e3042faf9b3a962d175ed4957b5">folly::test::DeterministicSchedule::reschedule</a></div><div class="ttdeci">static void reschedule(sem_t *sem)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00191">DeterministicSchedule.cpp:191</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a539aeaace14bb01842f20aa42abe666b"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">folly::test::DeterministicSchedule::tls_sem</a></div><div class="ttdeci">static FOLLY_TLS sem_t * tls_sem</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00195">DeterministicSchedule.h:195</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a64287655d498004962b82227262cabc7"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a64287655d498004962b82227262cabc7">folly::test::DeterministicSchedule::joins_</a></div><div class="ttdeci">std::unordered_map&lt; std::thread::id, sem_t * &gt; joins_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00204">DeterministicSchedule.h:204</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_afcb6e5be66baab19126d6758c09faeb3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">folly::test::DeterministicSchedule::tls_aux_act</a></div><div class="ttdeci">static thread_local AuxAct tls_aux_act</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00198">DeterministicSchedule.h:198</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_aa491ac6a32bf9101631666ebb8ad81b3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">folly::test::DeterministicSchedule::sems_</a></div><div class="ttdeci">std::vector&lt; sem_t * &gt; sems_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00202">DeterministicSchedule.h:202</a></div></div>
<div class="ttc" id="AtFork_8cpp_html_a235449ce5d78fe77bad1c1397b02b1bf"><div class="ttname"><a href="AtFork_8cpp.html#a235449ce5d78fe77bad1c1397b02b1bf">parent</a></div><div class="ttdeci">folly::Function&lt; void()&gt; parent</div><div class="ttdef"><b>Definition:</b> <a href="AtFork_8cpp_source.html#l00034">AtFork.cpp:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab752f09196f56bbb210d9e9497317093"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::callAux </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>success</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calls user-defined auxiliary function (if any) </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00271">271</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00199">aux_chk</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00212">step_</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00198">tls_aux_act</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00145">afterSharedAccess()</a>.</p>
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                                {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  ++<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab140f847887e0fbee2a60ca880c1e925">step_</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">tls_aux_act</a>) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">tls_aux_act</a>(success);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">tls_aux_act</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">aux_chk</a>) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">aux_chk</a>(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab140f847887e0fbee2a60ca880c1e925">step_</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ab140f847887e0fbee2a60ca880c1e925"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ab140f847887e0fbee2a60ca880c1e925">folly::test::DeterministicSchedule::step_</a></div><div class="ttdeci">uint64_t step_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00212">DeterministicSchedule.h:212</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ae289a24d0471e508e79014e063e98dbe"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">folly::test::DeterministicSchedule::aux_chk</a></div><div class="ttdeci">static AuxChk aux_chk</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00199">DeterministicSchedule.h:199</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_afcb6e5be66baab19126d6758c09faeb3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">folly::test::DeterministicSchedule::tls_aux_act</a></div><div class="ttdeci">static thread_local AuxAct tls_aux_act</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00198">DeterministicSchedule.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad489b1de868e222ec226b0cfc6905c3f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::clearAuxChk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Clears the function set by setAuxChk </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00187">187</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00199">aux_chk</a>.</p>

<p>Referenced by <a class="el" href="DeterministicScheduleTest_8cpp_source.html#l00268">AnnotatedAtomicCounter&lt; T &gt;::clearAuxChk()</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                        {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">aux_chk</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ae289a24d0471e508e79014e063e98dbe"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">folly::test::DeterministicSchedule::aux_chk</a></div><div class="ttdeci">static AuxChk aux_chk</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00199">DeterministicSchedule.h:199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab73fcf78fb9929bec933434a27a3eb97"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sem_t * folly::test::DeterministicSchedule::descheduleCurrentThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Remove the current thread's semaphore from sems_ </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00198">198</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00202">sems_</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00195">tls_sem</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">join()</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00505">folly::test::DeterministicMutex::lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                                      {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keyword">auto</span> sched = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (sched) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    sched-&gt;<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.erase(</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        std::find(sched-&gt;sems_.begin(), sched-&gt;sems_.end(), <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>));</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">tls_sem</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a539aeaace14bb01842f20aa42abe666b"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a539aeaace14bb01842f20aa42abe666b">folly::test::DeterministicSchedule::tls_sem</a></div><div class="ttdeci">static FOLLY_TLS sem_t * tls_sem</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00195">DeterministicSchedule.h:195</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_aa491ac6a32bf9101631666ebb8ad81b3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">folly::test::DeterministicSchedule::sems_</a></div><div class="ttdeci">std::vector&lt; sem_t * &gt; sems_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00202">DeterministicSchedule.h:202</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3551dcd34a26400ceab3428b1c5f18a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int folly::test::DeterministicSchedule::getcpu </td>
          <td>(</td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>unused</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deterministic implemencation of getcpu </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00161">161</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00205">nextThreadId_</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00197">tls_threadId</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00429">folly::AccessSpreader&lt; Atom &gt;::pickGetcpuFunc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;             {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8aa01860d5e54d2f4c647f7e3c65171b">tls_threadId</a> &amp;&amp; <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8aa01860d5e54d2f4c647f7e3c65171b">tls_threadId</a> = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>-&gt;<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a68f15ef9a7954753439cccccb37476d6">nextThreadId_</a>++;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span> (cpu) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    *cpu = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8aa01860d5e54d2f4c647f7e3c65171b">tls_threadId</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span> (node) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    *node = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8aa01860d5e54d2f4c647f7e3c65171b">tls_threadId</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a8aa01860d5e54d2f4c647f7e3c65171b"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a8aa01860d5e54d2f4c647f7e3c65171b">folly::test::DeterministicSchedule::tls_threadId</a></div><div class="ttdeci">static FOLLY_TLS unsigned tls_threadId</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00197">DeterministicSchedule.h:197</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a68f15ef9a7954753439cccccb37476d6"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a68f15ef9a7954753439cccccb37476d6">folly::test::DeterministicSchedule::nextThreadId_</a></div><div class="ttdeci">unsigned nextThreadId_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00205">DeterministicSchedule.h:205</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aff8872efb54c3f301f112ffd279d42d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t folly::test::DeterministicSchedule::getRandNumber </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Used scheduler_ to get a random number b/w [0, n). If tls_sched is not set-up it falls back to std::rand() </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00154">154</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="Random_8h_source.html#l00213">folly::Random::rand32()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00201">scheduler_</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00310">folly::test::futexWaitImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                                    {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>-&gt;<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a19b453612b1209531f90c11756550a87">scheduler_</a>(n);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1Random.html#a3174852323fb3668d33b487f17fe7adc">Random::rand32</a>() % n;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a19b453612b1209531f90c11756550a87"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a19b453612b1209531f90c11756550a87">folly::test::DeterministicSchedule::scheduler_</a></div><div class="ttdeci">std::function&lt; size_t(size_t)&gt; scheduler_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00201">DeterministicSchedule.h:201</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1Random_html_a3174852323fb3668d33b487f17fe7adc"><div class="ttname"><a href="classfolly_1_1Random.html#a3174852323fb3668d33b487f17fe7adc">folly::Random::rand32</a></div><div class="ttdeci">static uint32_t rand32()</div><div class="ttdef"><b>Definition:</b> <a href="Random_8h_source.html#l00213">Random.h:213</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac2575449f710ab101a165dfa0a761d27"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::join </td>
          <td>(</td>
          <td class="paramtype">std::thread &amp;&#160;</td>
          <td class="paramname"><em>child</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calls child.join() as part of a deterministic schedule. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">252</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00198">descheduleCurrentThread()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00042">FOLLY_TEST_DSCHED_VLOG</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>.</p>

<p>Referenced by <a class="el" href="DistributedMutexTest_8cpp_source.html#l00182">folly::test::atomic_notify_one()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00720">cleanup_test()</a>, <a class="el" href="RelaxedConcurrentPriorityQueueTest_8cpp_source.html#l00630">DSchedMixedTest()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00813">lifo_test()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00062">liveClockWaitUntilTests()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00540">mt_linked_test()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00790">priv_dtor_test()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00424">producerConsumerBench()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00046">run_basic_tests()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00067">run_mt_sequencer_test()</a>, <a class="el" href="SaturatingSemaphoreTest_8cpp_source.html#l00073">run_multi_poster_multi_waiter_test()</a>, <a class="el" href="BatonTestHelpers_8h_source.html#l00036">folly::test::run_pingpong_test()</a>, <a class="el" href="SaturatingSemaphoreTest_8cpp_source.html#l00050">run_pingpong_test()</a>, <a class="el" href="BatonTestHelpers_8h_source.html#l00077">folly::test::run_timed_wait_regular_test()</a>, <a class="el" href="BatonTestHelpers_8h_source.html#l00065">folly::test::run_timed_wait_tmo_tests()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00192">run_wake_blocked_test()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l00754">runAllAndValidate()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l00530">runContendedReaders()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l00618">runMixed()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00733">runNeverFailTest()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l01302">runPingPong()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l01149">runRemoteUnlock()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00272">runTryEnqDeqTest()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00840">swmr_test()</a>, <a class="el" href="DeterministicScheduleTest_8cpp_source.html#l00054">TEST()</a>, <a class="el" href="DistributedMutexTest_8cpp_source.html#l00563">folly::TEST()</a>, and <a class="el" href="LifoSemTests_8cpp_source.html#l00085">TEST_F()</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                                 {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keyword">auto</span> sched = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (sched) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    assert(sched-&gt;joins_.count(<a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.get_id()) == 0);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (sched-&gt;active_.count(<a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.get_id())) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      sem_t* sem = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ab73fcf78fb9929bec933434a27a3eb97">descheduleCurrentThread</a>();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      sched-&gt;joins_.insert({<a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.get_id(), sem});</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="comment">// Wait to be scheduled by exiting child thread</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      assert(!sched-&gt;active_.count(<a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.get_id()));</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a>(<span class="stringliteral">&quot;joined &quot;</span> &lt;&lt; std::hex &lt;&lt; <a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.get_id());</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.join();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ab73fcf78fb9929bec933434a27a3eb97"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ab73fcf78fb9929bec933434a27a3eb97">folly::test::DeterministicSchedule::descheduleCurrentThread</a></div><div class="ttdeci">static sem_t * descheduleCurrentThread()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00198">DeterministicSchedule.cpp:198</a></div></div>
<div class="ttc" id="DeterministicSchedule_8h_html_a2093fbe43c6769ae22547141f44a5061"><div class="ttname"><a href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a></div><div class="ttdeci">#define FOLLY_TEST_DSCHED_VLOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00042">DeterministicSchedule.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
<div class="ttc" id="AtFork_8cpp_html_a0669229200d80efb3fd6a142d9359652"><div class="ttname"><a href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a></div><div class="ttdeci">folly::Function&lt; void()&gt; child</div><div class="ttdef"><b>Definition:</b> <a href="AtFork_8cpp_source.html#l00035">AtFork.cpp:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7049b12ec833ac3aa6f17df0c8c278c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::post </td>
          <td>(</td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calls sem_post(sem) as part of a deterministic schedule. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00282">282</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00042">FOLLY_TEST_DSCHED_VLOG</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                           {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  sem_post(sem);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a>(<span class="stringliteral">&quot;sem_post(&quot;</span> &lt;&lt; sem &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div><div class="ttc" id="DeterministicSchedule_8h_html_a2093fbe43c6769ae22547141f44a5061"><div class="ttname"><a href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a></div><div class="ttdeci">#define FOLLY_TEST_DSCHED_VLOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00042">DeterministicSchedule.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae35d0e3042faf9b3a962d175ed4957b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::reschedule </td>
          <td>(</td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add sem back into sems_ </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00191">191</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00202">sems_</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00528">folly::test::DeterministicMutex::unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                 {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keyword">auto</span> sched = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (sched) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    sched-&gt;<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">sems_</a>.push_back(sem);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_aa491ac6a32bf9101631666ebb8ad81b3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#aa491ac6a32bf9101631666ebb8ad81b3">folly::test::DeterministicSchedule::sems_</a></div><div class="ttdeci">std::vector&lt; sem_t * &gt; sems_</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00202">DeterministicSchedule.h:202</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a96502db669e8a4e68c5f40e32ef53e0f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::setAuxAct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1test.html#a0d22f4cfbe8c4f173b8f7bddbcbe65c9">AuxAct</a> &amp;&#160;</td>
          <td class="paramname"><em>aux</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets up a thread-specific function for call immediately after the next shared access by the thread for managing auxiliary data. The function takes a bool parameter that indicates the success of the shared access (if it is conditional, true otherwise). The function is cleared after one use. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00179">179</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00198">tls_aux_act</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                 {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">tls_aux_act</a> = aux;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_afcb6e5be66baab19126d6758c09faeb3"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#afcb6e5be66baab19126d6758c09faeb3">folly::test::DeterministicSchedule::tls_aux_act</a></div><div class="ttdeci">static thread_local AuxAct tls_aux_act</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00198">DeterministicSchedule.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2d566e1a829560bf49ff774eb458b4b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::setAuxChk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1test.html#a39acd58805cc75e4759930e329200f97">AuxChk</a> &amp;&#160;</td>
          <td class="paramname"><em>aux</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets up a function to be called after every subsequent shared access (until <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html#ad489b1de868e222ec226b0cfc6905c3f">clearAuxChk()</a> is called) for checking global invariants and logging. The function takes a uint64_t parameter that indicates the number of shared accesses so far. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00183">183</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8h_source.html#l00199">aux_chk</a>.</p>

<p>Referenced by <a class="el" href="DeterministicScheduleTest_8cpp_source.html#l00260">AnnotatedAtomicCounter&lt; T &gt;::setAuxChk()</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                                 {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">aux_chk</a> = aux;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ae289a24d0471e508e79014e063e98dbe"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ae289a24d0471e508e79014e063e98dbe">folly::test::DeterministicSchedule::aux_chk</a></div><div class="ttdeci">static AuxChk aux_chk</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00199">DeterministicSchedule.h:199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8f5de59c0afdc448572f9efd3a045839"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Func , typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::thread folly::test::DeterministicSchedule::thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a4f345dd5f9b26d8dd202c2072badbea8">Func</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Launches a thread that will participate in the same deterministic schedule as the current thread. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00123">123</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>References <a class="el" href="OptionalTest_8cpp_source.html#l00053">a</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-generated-matchers_8h_source.html#l00481">testing::Args()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00207">beforeThreadCreate()</a>, <a class="el" href="AtFork_8cpp_source.html#l00035">child</a>, <a class="el" href="ScopeGuard_8h_source.html#l00274">SCOPE_EXIT</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00196">tls_sched</a>.</p>

<p>Referenced by <a class="el" href="DistributedMutexTest_8cpp_source.html#l00182">folly::test::atomic_notify_one()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00720">cleanup_test()</a>, <a class="el" href="RelaxedConcurrentPriorityQueueTest_8cpp_source.html#l00630">DSchedMixedTest()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00813">lifo_test()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00062">liveClockWaitUntilTests()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00540">mt_linked_test()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00790">priv_dtor_test()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00424">producerConsumerBench()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00046">run_basic_tests()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00067">run_mt_sequencer_test()</a>, <a class="el" href="SaturatingSemaphoreTest_8cpp_source.html#l00073">run_multi_poster_multi_waiter_test()</a>, <a class="el" href="BatonTestHelpers_8h_source.html#l00036">folly::test::run_pingpong_test()</a>, <a class="el" href="SaturatingSemaphoreTest_8cpp_source.html#l00050">run_pingpong_test()</a>, <a class="el" href="BatonTestHelpers_8h_source.html#l00077">folly::test::run_timed_wait_regular_test()</a>, <a class="el" href="BatonTestHelpers_8h_source.html#l00065">folly::test::run_timed_wait_tmo_tests()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00192">run_wake_blocked_test()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l00754">runAllAndValidate()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l00530">runContendedReaders()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l00618">runMixed()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00733">runNeverFailTest()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l01302">runPingPong()</a>, <a class="el" href="SharedMutexTest_8cpp_source.html#l01149">runRemoteUnlock()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00272">runTryEnqDeqTest()</a>, <a class="el" href="HazptrTest_8cpp_source.html#l00840">swmr_test()</a>, <a class="el" href="DeterministicScheduleTest_8cpp_source.html#l00054">TEST()</a>, <a class="el" href="DistributedMutexTest_8cpp_source.html#l00563">folly::TEST()</a>, and <a class="el" href="LifoSemTests_8cpp_source.html#l00085">TEST_F()</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                                              {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// TODO: maybe future versions of gcc will allow forwarding to thread</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">auto</span> sched = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">tls_sched</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">auto</span> sem = sched ? sched-&gt;<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a36a8b0c104748b8a13735ced4f15ded5">beforeThreadCreate</a>() : <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">auto</span> <a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a> = std::thread(</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        [=](<a class="code" href="namespacetesting.html#a5c05ce51adb5247166a739c6a17f0880">Args</a>... <a class="code" href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a>) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          if (sched) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            sched-&gt;afterThreadCreate(sem);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            beforeSharedAccess();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            FOLLY_TEST_DSCHED_VLOG(<span class="stringliteral">&quot;running&quot;</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            afterSharedAccess();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;          }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;          <a class="code" href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a> {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            if (sched) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;              sched-&gt;beforeThreadExit();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          };</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          func(<a class="code" href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a>...);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        },</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        args...);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (sched) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      sched-&gt;active_.insert(<a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.get_id());</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a>(<span class="stringliteral">&quot;forked &quot;</span> &lt;&lt; std::hex &lt;&lt; <a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>.get_id());</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="ttc" id="DeterministicSchedule_8h_html_a2093fbe43c6769ae22547141f44a5061"><div class="ttname"><a href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a></div><div class="ttdeci">#define FOLLY_TEST_DSCHED_VLOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00042">DeterministicSchedule.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a030fbe819b25bd604eb5829a2cd64337"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a030fbe819b25bd604eb5829a2cd64337">folly::test::DeterministicSchedule::tls_sched</a></div><div class="ttdeci">static FOLLY_TLS DeterministicSchedule * tls_sched</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00196">DeterministicSchedule.h:196</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a36a8b0c104748b8a13735ced4f15ded5"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a36a8b0c104748b8a13735ced4f15ded5">folly::test::DeterministicSchedule::beforeThreadCreate</a></div><div class="ttdeci">sem_t * beforeThreadCreate()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00207">DeterministicSchedule.cpp:207</a></div></div>
<div class="ttc" id="ScopeGuard_8h_html_a175c354c3e38222bc00ce5df5e6d431d"><div class="ttname"><a href="ScopeGuard_8h.html#a175c354c3e38222bc00ce5df5e6d431d">SCOPE_EXIT</a></div><div class="ttdeci">#define SCOPE_EXIT</div><div class="ttdef"><b>Definition:</b> <a href="ScopeGuard_8h_source.html#l00274">ScopeGuard.h:274</a></div></div>
<div class="ttc" id="namespacetesting_html_a5c05ce51adb5247166a739c6a17f0880"><div class="ttname"><a href="namespacetesting.html#a5c05ce51adb5247166a739c6a17f0880">testing::Args</a></div><div class="ttdeci">internal::ArgsMatcher&lt; InnerMatcher &gt; Args(const InnerMatcher &amp;matcher)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-generated-matchers_8h_source.html#l00481">gmock-generated-matchers.h:481</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
<div class="ttc" id="OptionalTest_8cpp_html_aa07479975edbe9c84d0db17cab30a7f6"><div class="ttname"><a href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a></div><div class="ttdeci">char a</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
<div class="ttc" id="AtFork_8cpp_html_a0669229200d80efb3fd6a142d9359652"><div class="ttname"><a href="AtFork_8cpp.html#a0669229200d80efb3fd6a142d9359652">child</a></div><div class="ttdeci">folly::Function&lt; void()&gt; child</div><div class="ttdef"><b>Definition:</b> <a href="AtFork_8cpp_source.html#l00035">AtFork.cpp:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e0cd3d94671fbf389579cfe638e87ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool folly::test::DeterministicSchedule::tryWait </td>
          <td>(</td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calls sem_trywait(sem) as part of a deterministic schedule, returning true on success and false on transient failure. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00289">289</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00042">FOLLY_TEST_DSCHED_VLOG</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00304">wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                              {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">beforeSharedAccess</a>();</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordtype">int</span> rv = sem_trywait(sem);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordtype">int</span> e = rv == 0 ? 0 : errno;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a>(</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="stringliteral">&quot;sem_trywait(&quot;</span> &lt;&lt; sem &lt;&lt; <span class="stringliteral">&quot;) = &quot;</span> &lt;&lt; rv &lt;&lt; <span class="stringliteral">&quot; errno=&quot;</span> &lt;&lt; e);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">afterSharedAccess</a>();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (rv == 0) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    assert(e == EAGAIN);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div><div class="ttc" id="DeterministicSchedule_8h_html_a2093fbe43c6769ae22547141f44a5061"><div class="ttname"><a href="DeterministicSchedule_8h.html#a2093fbe43c6769ae22547141f44a5061">FOLLY_TEST_DSCHED_VLOG</a></div><div class="ttdeci">#define FOLLY_TEST_DSCHED_VLOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00042">DeterministicSchedule.h:42</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a6ce98cad3384d82f3ec1ca588e944686"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a6ce98cad3384d82f3ec1ca588e944686">folly::test::DeterministicSchedule::beforeSharedAccess</a></div><div class="ttdeci">static void beforeSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00131">DeterministicSchedule.cpp:131</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a37faddb6c016feb11d55bc629e2ff195"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a37faddb6c016feb11d55bc629e2ff195">folly::test::DeterministicSchedule::afterSharedAccess</a></div><div class="ttdeci">static void afterSharedAccess()</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00137">DeterministicSchedule.cpp:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4644518091912f13916b2a1a98be3397"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt; size_t(size_t)&gt; folly::test::DeterministicSchedule::uniform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td>
          <td class="paramname"><em>seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a scheduling function that randomly chooses one of the runnable threads at each step, with no history. This implements a schedule that is equivalent to one in which the steps between inter-thread communication are random variables following a poisson distribution. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00068">68</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="FunctionScheduler_8cpp_source.html#l00090">dist</a>, and <a class="el" href="FBStringBenchmark_8cpp_source.html#l00037">seed</a>.</p>

<p>Referenced by <a class="el" href="MPMCQueueTest_8cpp_source.html#l00787">runMtNeverFailDeterministic()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00504">runMtProdConsDeterministic()</a>, <a class="el" href="MPMCQueueTest_8cpp_source.html#l00569">runMtProdConsDeterministicDynamic()</a>, <a class="el" href="ConcurrentHashMapTest_8cpp_source.html#l00310">TEST()</a>, <a class="el" href="DistributedMutexTest_8cpp_source.html#l00438">folly::TEST()</a>, and <a class="el" href="HazptrTest_8cpp_source.html#l00900">TEST_F()</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                                                        {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keyword">auto</span> rand = std::make_shared&lt;std::ranlux48&gt;(<a class="code" href="FBStringBenchmark_8cpp.html#ab1633aa266a0a720540840343194b2cf">seed</a>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">return</span> [rand](<span class="keywordtype">size_t</span> numActive) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">auto</span> <a class="code" href="FunctionScheduler_8cpp.html#ab5c1a912eb4aea9f7daec39491fb00ab">dist</a> = std::uniform_int_distribution&lt;size_t&gt;(0, numActive - 1);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="FunctionScheduler_8cpp.html#ab5c1a912eb4aea9f7daec39491fb00ab">dist</a>(*rand);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  };</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div><div class="ttc" id="FBStringBenchmark_8cpp_html_ab1633aa266a0a720540840343194b2cf"><div class="ttname"><a href="FBStringBenchmark_8cpp.html#ab1633aa266a0a720540840343194b2cf">seed</a></div><div class="ttdeci">static const int seed</div><div class="ttdef"><b>Definition:</b> <a href="FBStringBenchmark_8cpp_source.html#l00037">FBStringBenchmark.cpp:37</a></div></div>
<div class="ttc" id="FunctionScheduler_8cpp_html_ab5c1a912eb4aea9f7daec39491fb00ab"><div class="ttname"><a href="FunctionScheduler_8cpp.html#ab5c1a912eb4aea9f7daec39491fb00ab">dist</a></div><div class="ttdeci">std::uniform_int_distribution&lt; milliseconds::rep &gt; dist</div><div class="ttdef"><b>Definition:</b> <a href="FunctionScheduler_8cpp_source.html#l00090">FunctionScheduler.cpp:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6bf7a4e002dd759e0f3cc7d149771fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt; size_t(size_t)&gt; folly::test::DeterministicSchedule::uniformSubset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td>
          <td class="paramname"><em>seed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>m</em> = <code>64</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a scheduling function that chooses a subset of the active threads and randomly chooses a member of the subset as the next runnable thread. The subset is chosen with size n, and the choice is made every m steps. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00126">126</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="StringKeyedBenchmark_8cpp_source.html#l00046">m</a>, and <a class="el" href="FBStringBenchmark_8cpp_source.html#l00037">seed</a>.</p>

<p>Referenced by <a class="el" href="MPMCQueueTest_8cpp_source.html#l00787">runMtNeverFailDeterministic()</a>, <a class="el" href="DeterministicScheduleTest_8cpp_source.html#l00035">TEST()</a>, and <a class="el" href="LifoSemTests_8cpp_source.html#l00167">TEST_F()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                                      {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">auto</span> gen = std::make_shared&lt;UniformSubset&gt;(<a class="code" href="FBStringBenchmark_8cpp.html#ab1633aa266a0a720540840343194b2cf">seed</a>, n, <a class="code" href="StringKeyedBenchmark_8cpp.html#a5048bbdc4a007465f07e97c4b28117c9">m</a>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keywordtype">size_t</span> numActive) { <span class="keywordflow">return</span> (*gen)(numActive); };</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="ttc" id="FBStringBenchmark_8cpp_html_ab1633aa266a0a720540840343194b2cf"><div class="ttname"><a href="FBStringBenchmark_8cpp.html#ab1633aa266a0a720540840343194b2cf">seed</a></div><div class="ttdeci">static const int seed</div><div class="ttdef"><b>Definition:</b> <a href="FBStringBenchmark_8cpp_source.html#l00037">FBStringBenchmark.cpp:37</a></div></div>
<div class="ttc" id="StringKeyedBenchmark_8cpp_html_a5048bbdc4a007465f07e97c4b28117c9"><div class="ttname"><a href="StringKeyedBenchmark_8cpp.html#a5048bbdc4a007465f07e97c4b28117c9">m</a></div><div class="ttdeci">static map&lt; string, int &gt; m</div><div class="ttdef"><b>Definition:</b> <a href="StringKeyedBenchmark_8cpp_source.html#l00046">StringKeyedBenchmark.cpp:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe39730e8cfb1a37218b72888f8bd118"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void folly::test::DeterministicSchedule::wait </td>
          <td>(</td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>sem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calls sem_wait(sem) as part of a deterministic schedule. </p>

<p>Definition at line <a class="el" href="DeterministicSchedule_8cpp_source.html#l00304">304</a> of file <a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a>.</p>

<p>References <a class="el" href="DeterministicSchedule_8cpp_source.html#l00289">tryWait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                           {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a1e0cd3d94671fbf389579cfe638e87ff">tryWait</a>(sem)) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// we&#39;re not busy waiting because this is a deterministic schedule</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a1e0cd3d94671fbf389579cfe638e87ff"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a1e0cd3d94671fbf389579cfe638e87ff">folly::test::DeterministicSchedule::tryWait</a></div><div class="ttdeci">static bool tryWait(sem_t *sem)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00289">DeterministicSchedule.cpp:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a0e97624e85ebae7669c4f8455120cfd1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;std::thread::id&gt; folly::test::DeterministicSchedule::active_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00203">203</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00216">afterThreadCreate()</a>, and <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>.</p>

</div>
</div>
<a class="anchor" id="ae289a24d0471e508e79014e063e98dbe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefolly_1_1test.html#a39acd58805cc75e4759930e329200f97">AuxChk</a> folly::test::DeterministicSchedule::aux_chk</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00199">199</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00271">callAux()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00187">clearAuxChk()</a>, and <a class="el" href="DeterministicSchedule_8cpp_source.html#l00183">setAuxChk()</a>.</p>

</div>
</div>
<a class="anchor" id="a64287655d498004962b82227262cabc7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::thread::id, sem_t*&gt; folly::test::DeterministicSchedule::joins_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00204">204</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>.</p>

</div>
</div>
<a class="anchor" id="a68f15ef9a7954753439cccccb37476d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned folly::test::DeterministicSchedule::nextThreadId_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00205">205</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00161">getcpu()</a>.</p>

</div>
</div>
<a class="anchor" id="a19b453612b1209531f90c11756550a87"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt;size_t(size_t)&gt; folly::test::DeterministicSchedule::scheduler_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00201">201</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00154">getRandNumber()</a>.</p>

</div>
</div>
<a class="anchor" id="aa491ac6a32bf9101631666ebb8ad81b3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;sem_t*&gt; folly::test::DeterministicSchedule::sems_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00202">202</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00207">beforeThreadCreate()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00198">descheduleCurrentThread()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00047">DeterministicSchedule()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00191">reschedule()</a>, and <a class="el" href="DeterministicSchedule_8cpp_source.html#l00061">~DeterministicSchedule()</a>.</p>

</div>
</div>
<a class="anchor" id="ab140f847887e0fbee2a60ca880c1e925"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> folly::test::DeterministicSchedule::step_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00212">212</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00271">callAux()</a>.</p>

</div>
</div>
<a class="anchor" id="afcb6e5be66baab19126d6758c09faeb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">thread_local <a class="el" href="namespacefolly_1_1test.html#a0d22f4cfbe8c4f173b8f7bddbcbe65c9">AuxAct</a> folly::test::DeterministicSchedule::tls_aux_act</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00198">198</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00271">callAux()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00047">DeterministicSchedule()</a>, and <a class="el" href="DeterministicSchedule_8cpp_source.html#l00179">setAuxAct()</a>.</p>

</div>
</div>
<a class="anchor" id="a030fbe819b25bd604eb5829a2cd64337"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FOLLY_TLS <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a> * folly::test::DeterministicSchedule::tls_sched</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00196">196</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00137">afterSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00216">afterThreadCreate()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00198">descheduleCurrentThread()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00047">DeterministicSchedule()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00161">getcpu()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00154">getRandNumber()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">join()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00191">reschedule()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00123">thread()</a>, and <a class="el" href="DeterministicSchedule_8cpp_source.html#l00061">~DeterministicSchedule()</a>.</p>

</div>
</div>
<a class="anchor" id="a539aeaace14bb01842f20aa42abe666b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FOLLY_TLS sem_t * folly::test::DeterministicSchedule::tls_sem</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00195">195</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00216">afterThreadCreate()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00131">beforeSharedAccess()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00231">beforeThreadExit()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00198">descheduleCurrentThread()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00047">DeterministicSchedule()</a>, and <a class="el" href="DeterministicSchedule_8cpp_source.html#l00061">~DeterministicSchedule()</a>.</p>

</div>
</div>
<a class="anchor" id="a8aa01860d5e54d2f4c647f7e3c65171b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FOLLY_TLS unsigned folly::test::DeterministicSchedule::tls_threadId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DeterministicSchedule_8h_source.html#l00197">197</a> of file <a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a>.</p>

<p>Referenced by <a class="el" href="DeterministicSchedule_8cpp_source.html#l00161">getcpu()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/folly/folly/test/<a class="el" href="DeterministicSchedule_8h_source.html">DeterministicSchedule.h</a></li>
<li>proxygen/folly/folly/test/<a class="el" href="DeterministicSchedule_8cpp_source.html">DeterministicSchedule.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="namespacefolly_1_1test.html">test</a></li><li class="navelem"><a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
