<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::UndelayedDestruction&lt; TDD &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1UndelayedDestruction.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classfolly_1_1UndelayedDestruction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::UndelayedDestruction&lt; TDD &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="UndelayedDestruction_8h_source.html">UndelayedDestruction.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::UndelayedDestruction&lt; TDD &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1UndelayedDestruction.png" usemap="#folly::UndelayedDestruction_3C_20TDD_20_3E_map" alt=""/>
  <map id="folly::UndelayedDestruction_3C_20TDD_20_3E_map" name="folly::UndelayedDestruction&lt; TDD &gt;_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaaa8e685fadf5f4b4eccb96bb3f9cafb"><td class="memTemplParams" colspan="2">template&lt;typename... Args&gt; </td></tr>
<tr class="memitem:aaaa8e685fadf5f4b4eccb96bb3f9cafb"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfolly_1_1UndelayedDestruction.html#aaaa8e685fadf5f4b4eccb96bb3f9cafb">UndelayedDestruction</a> (Args &amp;&amp;...args)</td></tr>
<tr class="separator:aaaa8e685fadf5f4b4eccb96bb3f9cafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac58c961d3bf3c891cf7b8c3faec10580"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1UndelayedDestruction.html#ac58c961d3bf3c891cf7b8c3faec10580">~UndelayedDestruction</a> () override</td></tr>
<tr class="separator:ac58c961d3bf3c891cf7b8c3faec10580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3850f9c8b3fd31ca562d43a2932d8cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1UndelayedDestruction.html#ab3850f9c8b3fd31ca562d43a2932d8cc">onDelayedDestroy</a> (bool delayed) override</td></tr>
<tr class="separator:ab3850f9c8b3fd31ca562d43a2932d8cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a83840c34b4e1f2bbf967ec8667783bd2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1UndelayedDestruction.html#a83840c34b4e1f2bbf967ec8667783bd2">destroy</a> () override</td></tr>
<tr class="separator:a83840c34b4e1f2bbf967ec8667783bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9951812e3a79ba9c93f144dc4fd9b049"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1UndelayedDestruction.html#a9951812e3a79ba9c93f144dc4fd9b049">UndelayedDestruction</a> (<a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a> const &amp;)=delete</td></tr>
<tr class="separator:a9951812e3a79ba9c93f144dc4fd9b049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450e5eef433098592f4722d4955826c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1UndelayedDestruction.html#a450e5eef433098592f4722d4955826c1">operator=</a> (<a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a> const &amp;)=delete</td></tr>
<tr class="separator:a450e5eef433098592f4722d4955826c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename TDD&gt;<br />
class folly::UndelayedDestruction&lt; TDD &gt;</h3>

<p><a class="el" href="structA.html">A</a> helper class to allow a <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> object to be instantiated on the stack.</p>
<p>This class derives from an existing <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> type and makes the destructor public again. This allows objects of this type to be declared on the stack or directly inside another class. Normally <a class="el" href="classfolly_1_1DelayedDestruction.html">DelayedDestruction</a> objects must be dynamically allocated on the heap.</p>
<p>However, the trade-off is that you lose some of the protections provided by <a class="el" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">DelayedDestruction::destroy()</a>. <a class="el" href="classfolly_1_1DelayedDestruction.html#a6dd27b219d5af8b2a93d6c324c65e95a">DelayedDestruction::destroy()</a> will automatically delay destruction of the object until it is safe to do so. If you use <a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a>, you become responsible for ensuring that you only destroy the object where it is safe to do so. Attempting to destroy a <a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a> object while it has a non-zero destructor guard count will abort the program. </p>

<p>Definition at line <a class="el" href="UndelayedDestruction_8h_source.html#l00044">44</a> of file <a class="el" href="UndelayedDestruction_8h_source.html">UndelayedDestruction.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aaaa8e685fadf5f4b4eccb96bb3f9cafb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TDD&gt; </div>
<div class="memtemplate">
template&lt;typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1UndelayedDestruction.html">folly::UndelayedDestruction</a>&lt; TDD &gt;::<a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a> </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="UndelayedDestruction_8h_source.html#l00057">57</a> of file <a class="el" href="UndelayedDestruction_8h_source.html">UndelayedDestruction.h</a>.</p>

<p>Referenced by <a class="el" href="UndelayedDestruction_8h_source.html#l00097">folly::UndelayedDestruction&lt; HHWheelTimer &gt;::destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      : TDD(std::forward&lt;Args&gt;(args)...) {}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac58c961d3bf3c891cf7b8c3faec10580"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TDD&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1UndelayedDestruction.html">folly::UndelayedDestruction</a>&lt; TDD &gt;::~<a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Public destructor.</p>
<p>The caller is responsible for ensuring that the object is only destroyed where it is safe to do so. (i.e., when the destructor guard count is 0).</p>
<p>The exact conditions for meeting this may be dependent upon your class semantics. Typically you are only guaranteed that it is safe to destroy the object directly from the event loop (e.g., directly from a <a class="el" href="classfolly_1_1EventBase_1_1LoopCallback.html">EventBase::LoopCallback</a>), or when the event loop is stopped. </p>

<p>Definition at line <a class="el" href="UndelayedDestruction_8h_source.html#l00071">71</a> of file <a class="el" href="UndelayedDestruction_8h_source.html">UndelayedDestruction.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                   {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// Crash if the caller is destroying us with outstanding destructor guards.</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span> (this-&gt;getDestructorGuardCount() != 0) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      abort();</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// Invoke destroy.  This is necessary since our base class may have</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// implemented custom behavior in destroy().</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    this-&gt;<a class="code" href="classfolly_1_1UndelayedDestruction.html#a83840c34b4e1f2bbf967ec8667783bd2">destroy</a>();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div><div class="ttc" id="classfolly_1_1UndelayedDestruction_html_a83840c34b4e1f2bbf967ec8667783bd2"><div class="ttname"><a href="classfolly_1_1UndelayedDestruction.html#a83840c34b4e1f2bbf967ec8667783bd2">folly::UndelayedDestruction::destroy</a></div><div class="ttdeci">void destroy() override</div><div class="ttdef"><b>Definition:</b> <a href="UndelayedDestruction_8h_source.html#l00097">UndelayedDestruction.h:97</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9951812e3a79ba9c93f144dc4fd9b049"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TDD&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1UndelayedDestruction.html">folly::UndelayedDestruction</a>&lt; TDD &gt;::<a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a>&lt; TDD &gt; const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a83840c34b4e1f2bbf967ec8667783bd2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TDD&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1UndelayedDestruction.html">folly::UndelayedDestruction</a>&lt; TDD &gt;::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override our parent's <a class="el" href="classfolly_1_1UndelayedDestruction.html#a83840c34b4e1f2bbf967ec8667783bd2">destroy()</a> method to make it protected. Callers should use the normal destructor instead of destroy </p>

<p>Definition at line <a class="el" href="UndelayedDestruction_8h_source.html#l00097">97</a> of file <a class="el" href="UndelayedDestruction_8h_source.html">UndelayedDestruction.h</a>.</p>

<p>Referenced by <a class="el" href="UndelayedDestruction_8h_source.html#l00071">folly::UndelayedDestruction&lt; HHWheelTimer &gt;::~UndelayedDestruction()</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                          {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    this-&gt;<a class="code" href="ThreadPoolExecutorTest_8cpp.html#a48d87d9b4245c5ac2b79b3314f8bef9e">TDD::destroy</a>();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div><div class="ttc" id="ThreadPoolExecutorTest_8cpp_html_a48d87d9b4245c5ac2b79b3314f8bef9e"><div class="ttname"><a href="ThreadPoolExecutorTest_8cpp.html#a48d87d9b4245c5ac2b79b3314f8bef9e">destroy</a></div><div class="ttdeci">static void destroy()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadPoolExecutorTest_8cpp_source.html#l00140">ThreadPoolExecutorTest.cpp:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3850f9c8b3fd31ca562d43a2932d8cc"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TDD&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1UndelayedDestruction.html">folly::UndelayedDestruction</a>&lt; TDD &gt;::onDelayedDestroy </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>delayed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="UndelayedDestruction_8h_source.html#l00081">81</a> of file <a class="el" href="UndelayedDestruction_8h_source.html">UndelayedDestruction.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                               {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (delayed &amp;&amp; !this-&gt;TDD::getDestroyPending()) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// Do nothing.  This will always be invoked from the call to destroy</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// inside our destructor.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    assert(!delayed);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// prevent unused variable warnings when asserts are compiled out.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    (void)delayed;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a450e5eef433098592f4722d4955826c1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TDD&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a>&amp; <a class="el" href="classfolly_1_1UndelayedDestruction.html">folly::UndelayedDestruction</a>&lt; TDD &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a>&lt; TDD &gt; const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="UndelayedDestruction_8h_source.html#l00097">folly::UndelayedDestruction&lt; HHWheelTimer &gt;::destroy()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>proxygen/folly/folly/io/async/test/<a class="el" href="UndelayedDestruction_8h_source.html">UndelayedDestruction.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1UndelayedDestruction.html">UndelayedDestruction</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
