<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_proxygen_folly_folly_logging_docs_Usage.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Logging messages with the folly logging library is done with one of a handful of log macros. Macros are used to allow lazily evaluating the log arguments: if the log message is disabled the log message expression will not be executed.</p>
<h1>Logging Macros</h1>
<h2><code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code></h2>
<p>In most cases, if you want to log a message you will use the <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code> macro:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;XLOG(INFO) &lt;&lt; &quot;hello world!&quot;;</div></div><!-- fragment --><p>This macro is defined in <code>folly/logging/xlog.h</code></p>
<h2><code><a class="el" href="Logger_8h.html#a3da8b03c52e8065c88d498515c6765de">FB_LOG()</a></code></h2>
<p>The <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code> macro automatically chooses the log category based on the current file name. However, if you want to log to an explicit log category, you can use <code><a class="el" href="Logger_8h.html#a3da8b03c52e8065c88d498515c6765de">FB_LOG()</a></code>. It behaves like <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code>, except that it requires a <code><a class="el" href="classfolly_1_1Logger.html">folly::Logger</a></code> as is first argument to specify the log category:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;folly::Logger eventLogger(&quot;eden.events&quot;);</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;FB_LOG(eventLogger, INFO) &lt;&lt; &quot;something happened&quot;;</div></div><!-- fragment --><p><code><a class="el" href="Logger_8h.html#a3da8b03c52e8065c88d498515c6765de">FB_LOG()</a></code> is defined in <code>folly/logging/Logger.h</code></p>
<h2>Macro Arguments</h2>
<p>The <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code> macro takes a log level as its first argument. See the <a class="el" href="LogLevels_8md.html">Log Levels</a> document for a list of available log levels.</p>
<p>If you supply additional arguments they will be converted to strings using <code><a class="el" href="namespacefolly.html#a005f91db4ecc55675cf5ad7ba25ec24d">folly::to</a>&lt;std::string&gt;()</code> and concatenated together as part of the log message. For example:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;XLOG(INFO, &quot;the number is &quot;, 2 + 2);</div></div><!-- fragment --><p>will result in the message "the number is 4".</p>
<p>If desired, you can specify both function argument style and <code>ostream</code> style streaming log arguments together:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;XLOG(INFO, &quot;the number is &quot;) &lt;&lt;  2 + 2);</div></div><!-- fragment --><p>The <code><a class="el" href="Logger_8h.html#a3da8b03c52e8065c88d498515c6765de">FB_LOG()</a></code> macro accepts requires a <code>Logger</code> object as its first argument, and all subsequent arguments behave the same as the arguments to <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code>.</p>
<h2>Python-style string formatting</h2>
<p>The <code><a class="el" href="xlog_8h.html#a61c32173d3cce628c40fbc63aa021956">XLOGF()</a></code> and <code><a class="el" href="Logger_8h.html#a67726296f3d8d65503478d46a08a3d3a">FB_LOGF()</a></code> macros allow log messages to be formatted using format strings similar to python's <a href="https://docs.python.org/3/library/string.html#formatspec">str.format()</a> mechanism.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;XLOGF(DBG1, &quot;cannot engage {} thruster: {}&quot;, thruster.name(), err.what());</div></div><!-- fragment --><p>This uses https://github.com/facebook/folly/blob/master/folly/docs/Format.md "`folly::format()`" to perform the formatting internally.</p>
<h2><code>printf</code>-style string formatting</h2>
<p>To help existing projects convert from older logging APIs, <code><a class="el" href="printf_8h.html#a55331c3c712d4beaba29a96e359a653d">XLOGC()</a></code> and <code><a class="el" href="printf_8h.html#a7fbd1368a8d78e2c1f44a3c26c7dc92b">FB_LOGC()</a></code> macros exist to support C-style <code>printf()</code> format strings. You must include <code>folly/logging/printf.h</code> to access these macros.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;XLOGC(DBG1, &quot;failed to engage thruster %d: %s&quot;, thruster.number(), err.what());</div></div><!-- fragment --><h1>Log Category Selection</h1>
<p>The <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code> macro automatically selects a log category to log to based on the current source file name. Directory separators in the path are replaced with <code>.</code> characters to compute the log category name.</p>
<p>For instance, in a source file named <code>src/tiefighter/thruster.cpp</code> the default <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code> category will be <code>src.tiefighter.thruster.cpp</code></p>
<p>Inside <code>.cpp</code> files the default <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code> category name can be overridden using the <code><a class="el" href="xlog_8h.html#adeeb5eb6c491eb0125688f40586b78a6">XLOG_SET_CATEGORY_NAME()</a></code> macro. <code><a class="el" href="xlog_8h.html#adeeb5eb6c491eb0125688f40586b78a6">XLOG_SET_CATEGORY_NAME()</a></code> can be specified at top-level scope in the <code>.cpp</code> file to specify an alternate category name for all <code><a class="el" href="xlog_8h.html#aff43beb7fa37b1deeb421a69c26432c5">XLOG()</a></code> statements in this file. <code><a class="el" href="xlog_8h.html#adeeb5eb6c491eb0125688f40586b78a6">XLOG_SET_CATEGORY_NAME()</a></code> should not be used in header files, since it would end up affecting all <code>.cpp</code> files that include that header.</p>
<h1>Configuration</h1>
<p>The logging library provides several APIs for configuring log categories and handlers. While you can programmatically configure <code>LogCategory</code> and <code>LogHandler</code> objects via their public APIs, there are also APIs to configure the logging library via configuration strings.</p>
<p><code><a class="el" href="namespacefolly.html#a6fa97de296c2a5f29f40abce96a98a83">folly::parseLogConfig()</a></code> can parse a configuration string in to a <code>LogConfig</code> object. The configuration string syntax is documented in <a class="el" href="Config_8md.html">Config.md</a>.</p>
<p>You can then apply a <code>LogConfig</code> object to the main <code>LoggerDB</code> singleton by using <code><a class="el" href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">LoggerDB::get()</a>-&gt;updateConfig()</code> to incrementally update the current configuration, or by using <code><a class="el" href="namespacefolly_1_1pushmi_1_1operators.html#a3fb4b634ea259cf94b63687a25b3f505">LoggerDB::get()</a>-&gt;resetConfig()</code> to replace all existing settings with the new configuration.</p>
<p>The <code><a class="el" href="namespacefolly.html#ad600cbf415e4a37d30ddf07b0c41609d">folly::initLogging()</a></code> function provides a convenient API for initially configuring the logging library from a configuration string that was obtained from a command line flag or configuration file. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
