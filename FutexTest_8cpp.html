<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: proxygen/folly/folly/test/FutexTest.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('FutexTest_8cpp.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FutexTest.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="Futex_8h_source.html">folly/detail/Futex.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="DeterministicSchedule_8h_source.html">folly/test/DeterministicSchedule.h</a>&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;condition_variable&gt;</code><br />
<code>#include &lt;functional&gt;</code><br />
<code>#include &lt;ratio&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;glog/logging.h&gt;</code><br />
<code>#include &lt;<a class="el" href="Chrono_8h_source.html">folly/Chrono.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="GTest_8h_source.html">folly/portability/GTest.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="folly_2folly_2portability_2Time_8h_source.html">folly/portability/Time.h</a>&gt;</code><br />
</div>
<p><a href="FutexTest_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa2f98576bace8556875c25a9fba8532d"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#aa2f98576bace8556875c25a9fba8532d">DSched</a></td></tr>
<tr class="separator:aa2f98576bace8556875c25a9fba8532d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a558b7a6a5550045193ef32cfbb388fc6"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename &gt; class Atom&gt; </td></tr>
<tr class="memitem:a558b7a6a5550045193ef32cfbb388fc6"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a558b7a6a5550045193ef32cfbb388fc6">run_basic_thread</a> (<a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&lt; <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt; &amp;<a class="el" href="StackOverflow_8cpp.html#a818f01d15ad1b9b4900c4513a27c273f">f</a>)</td></tr>
<tr class="separator:a558b7a6a5550045193ef32cfbb388fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838940509d54b3cb3eef8ecfe6a31748"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename &gt; class Atom&gt; </td></tr>
<tr class="memitem:a838940509d54b3cb3eef8ecfe6a31748"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a838940509d54b3cb3eef8ecfe6a31748">run_basic_tests</a> ()</td></tr>
<tr class="separator:a838940509d54b3cb3eef8ecfe6a31748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0766da29b6beefec55c492d8f78750"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename &gt; class Atom, typename Clock , typename Duration &gt; </td></tr>
<tr class="memitem:a6e0766da29b6beefec55c492d8f78750"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a6e0766da29b6beefec55c492d8f78750">liveClockWaitUntilTests</a> ()</td></tr>
<tr class="separator:a6e0766da29b6beefec55c492d8f78750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cac532a6c832ae7a7929f248b6e49b5"><td class="memTemplParams" colspan="2">template&lt;typename Clock &gt; </td></tr>
<tr class="memitem:a3cac532a6c832ae7a7929f248b6e49b5"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a3cac532a6c832ae7a7929f248b6e49b5">deterministicAtomicWaitUntilTests</a> ()</td></tr>
<tr class="separator:a3cac532a6c832ae7a7929f248b6e49b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f6325b48053d2677873a4e59a11af8"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename &gt; class Atom&gt; </td></tr>
<tr class="memitem:a87f6325b48053d2677873a4e59a11af8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a87f6325b48053d2677873a4e59a11af8">run_wait_until_tests</a> ()</td></tr>
<tr class="separator:a87f6325b48053d2677873a4e59a11af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54f50445abdfad4921d2b48347cff4d1"><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr class="memitem:a54f50445abdfad4921d2b48347cff4d1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a54f50445abdfad4921d2b48347cff4d1">run_wait_until_tests&lt; DeterministicAtomic &gt;</a> ()</td></tr>
<tr class="separator:a54f50445abdfad4921d2b48347cff4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20a35239944e6c8935103e8d109ead23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a20a35239944e6c8935103e8d109ead23">diff</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="el" href="ThreadLocalTestLib_8cpp.html#ade9333b8d79add4dbffa41b7727714e8">a</a>, <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="el" href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a>)</td></tr>
<tr class="separator:a20a35239944e6c8935103e8d109ead23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bbbad23a75aed3105d7018bad689503"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a5bbbad23a75aed3105d7018bad689503">run_system_clock_test</a> ()</td></tr>
<tr class="separator:a5bbbad23a75aed3105d7018bad689503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52ff55715b922eb157e5231c34568bd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a52ff55715b922eb157e5231c34568bd9">run_steady_clock_test</a> ()</td></tr>
<tr class="separator:a52ff55715b922eb157e5231c34568bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4733eb9adb4a90e5f784748abbb843b3"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename &gt; class Atom&gt; </td></tr>
<tr class="memitem:a4733eb9adb4a90e5f784748abbb843b3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a4733eb9adb4a90e5f784748abbb843b3">run_wake_blocked_test</a> ()</td></tr>
<tr class="separator:a4733eb9adb4a90e5f784748abbb843b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bd89be76e85bcee9666034942887feb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a1bd89be76e85bcee9666034942887feb">TEST</a> (<a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>, clock_source)</td></tr>
<tr class="separator:a1bd89be76e85bcee9666034942887feb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba119330e17adbe431c9392d856c9936"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#aba119330e17adbe431c9392d856c9936">TEST</a> (<a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>, basic_live)</td></tr>
<tr class="separator:aba119330e17adbe431c9392d856c9936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb9553fae9bc8df6c9b67bbce16c8a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#abcb9553fae9bc8df6c9b67bbce16c8a0">TEST</a> (<a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>, basic_emulated)</td></tr>
<tr class="separator:abcb9553fae9bc8df6c9b67bbce16c8a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ebcfba8bcaef5f63c7bf3737e95d045"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a5ebcfba8bcaef5f63c7bf3737e95d045">TEST</a> (<a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>, basic_deterministic)</td></tr>
<tr class="separator:a5ebcfba8bcaef5f63c7bf3737e95d045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a537530adc8b0db429d012dcb270d5215"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a537530adc8b0db429d012dcb270d5215">TEST</a> (<a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>, wake_blocked_live)</td></tr>
<tr class="separator:a537530adc8b0db429d012dcb270d5215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a478cb013dc148c25d484ef6a2c4515da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FutexTest_8cpp.html#a478cb013dc148c25d484ef6a2c4515da">TEST</a> (<a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>, wake_blocked_emulated)</td></tr>
<tr class="separator:a478cb013dc148c25d484ef6a2c4515da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aa2f98576bace8556875c25a9fba8532d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfolly_1_1test_1_1DeterministicSchedule.html">DeterministicSchedule</a> <a class="el" href="RelaxedConcurrentPriorityQueueTest_8cpp.html#abead728bf1960beced9e4c0f51d3a334">DSched</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00038">38</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3cac532a6c832ae7a7929f248b6e49b5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Clock &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void deterministicAtomicWaitUntilTests </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00109">109</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="ConcurrentHashMapTest_8cpp_source.html#l00301">Atom</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">EXPECT_TRUE</a>, <a class="el" href="PushmiBenchmarks_8cpp_source.html#l00515">f</a>, <a class="el" href="Futex-inl_8h_source.html#l00112">folly::detail::futexWaitUntil()</a>, <a class="el" href="namespacefolly_1_1detail.html#af130844a971c4ed26a0658a3e79f273ca658f2cadfdf09b6046246e9314f7cd43">folly::detail::INTERRUPTED</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, and <a class="el" href="namespacefolly_1_1detail.html#af130844a971c4ed26a0658a3e79f273cac5b306a30b21dec5abcb84067152687a">folly::detail::TIMEDOUT</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                         {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex&lt;DeterministicAtomic&gt;</a> <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>(0);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Futex wait must eventually fail with either FutexResult::TIMEDOUT or</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// FutexResult::INTERRUPTED</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> res = <a class="code" href="MemoryIdlerTest_8cpp.html#ab28ba4fe7e472e56f1c809bdaad1f3a2">futexWaitUntil</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>, 0, <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">Clock::now</a>() + milliseconds(100));</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a>(res == FutexResult::TIMEDOUT || res == FutexResult::INTERRUPTED);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div><div class="ttc" id="PushmiBenchmarks_8cpp_html_ad94c2c2f9fd35a12cc099962b7540071"><div class="ttname"><a href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a></div><div class="ttdeci">auto f</div><div class="ttdef"><b>Definition:</b> <a href="PushmiBenchmarks_8cpp_source.html#l00515">PushmiBenchmarks.cpp:515</a></div></div>
<div class="ttc" id="MemoryIdlerTest_8cpp_html_ab28ba4fe7e472e56f1c809bdaad1f3a2"><div class="ttname"><a href="MemoryIdlerTest_8cpp.html#ab28ba4fe7e472e56f1c809bdaad1f3a2">futexWaitUntil</a></div><div class="ttdeci">FutexResult futexWaitUntil(const Futex&lt; MockAtom &gt; *futex, std::uint32_t expected, std::chrono::time_point&lt; Clock, Duration &gt; const &amp;deadline, uint32_t waitMask)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryIdlerTest_8cpp_source.html#l00101">MemoryIdlerTest.cpp:101</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_a119b8d460f481815f833da41cdc33141"><div class="ttname"><a href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">folly::detail::Futex</a></div><div class="ttdeci">Atom&lt; std::uint32_t &gt; Futex</div><div class="ttdef"><b>Definition:</b> <a href="Futex_8h_source.html#l00051">Futex.h:51</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_html_ac33e7cdfb5d44a7a0f0ab552eb5c3c6a"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a></div><div class="ttdeci">#define EXPECT_TRUE(condition)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">gtest.h:1859</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a20a35239944e6c8935103e8d109ead23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> diff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00135">135</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="OptionalTest_8cpp_source.html#l00053">a</a>.</p>

<p>Referenced by <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2src_2gtest_8cc_source.html#l01362">testing::internal::DoubleNearPredFormat()</a>, <a class="el" href="UnboundedQueue_8h_source.html#l00523">folly::UnboundedQueue&lt; T, false, 6 &gt;::getAllocNextSegment()</a>, <a class="el" href="HTTPCommonHeaders_8h_source.html#l00172">proxygen::HTTPCommonHeaders::getHeaderCodeFromTableCommonHeaderName()</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock-matchers__test_8cc_source.html#l00170">testing::gmock_matchers_test::GreaterThanMatcher::MatchAndExplain()</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2include_2gmock_2gmock-matchers_8h_source.html#l01921">testing::internal::FloatingEqMatcher&lt; FloatType &gt;::Impl&lt; T &gt;::MatchAndExplain()</a>, <a class="el" href="dynamic_8cpp_source.html#l00343">folly::dynamic::merge_diff()</a>, <a class="el" href="BufferedStat-defs_8h_source.html#l00138">folly::detail::BufferedSlidingWindow&lt; DigestT, ClockT &gt;::onNewDigest()</a>, <a class="el" href="AtomicSharedPtr_8h_source.html#l00241">folly::atomic_shared_ptr&lt; T, Atom, CountedDetail &gt;::release_external()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00139">run_system_clock_test()</a>, <a class="el" href="SmallLocksBenchmark_8cpp_source.html#l00161">runFairness()</a>, <a class="el" href="HHWheelTimer_8cpp_source.html#l00111">folly::HHWheelTimer::scheduleTimeoutImpl()</a>, <a class="el" href="Window_8cpp_source.html#l00084">proxygen::Window::setCapacity()</a>, <a class="el" href="IteratorTest_8cpp_source.html#l00228">TEST()</a>, and <a class="el" href="FilePollerTest_8cpp_source.html#l00043">updateModifiedTime()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                      {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a> &gt; <a class="code" href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a> ? <a class="code" href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a> - <a class="code" href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a> : <a class="code" href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a> - <a class="code" href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="ttc" id="OptionalTest_8cpp_html_a9c67fe724294816aca4adddf8255fece"><div class="ttname"><a href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a></div><div class="ttdeci">char b</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
<div class="ttc" id="OptionalTest_8cpp_html_aa07479975edbe9c84d0db17cab30a7f6"><div class="ttname"><a href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a></div><div class="ttdeci">char a</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6e0766da29b6beefec55c492d8f78750"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename &gt; class Atom, typename Clock , typename Duration &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void liveClockWaitUntilTests </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00062">62</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="namespacefolly_1_1detail.html#af130844a971c4ed26a0658a3e79f273ca200aad555948aaab2f495d5e48f8eae8">folly::detail::AWOKEN</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01922">EXPECT_EQ</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">EXPECT_TRUE</a>, <a class="el" href="PushmiBenchmarks_8cpp_source.html#l00515">f</a>, <a class="el" href="Futex-inl_8h_source.html#l00112">folly::detail::futexWaitUntil()</a>, <a class="el" href="Futex-inl_8h_source.html#l00107">folly::detail::futexWake()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">folly::test::DeterministicSchedule::join()</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, <a class="el" href="ParallelBenchmark_8cpp_source.html#l00083">start</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00123">folly::test::DeterministicSchedule::thread()</a>, <a class="el" href="namespacefolly_1_1detail.html#af130844a971c4ed26a0658a3e79f273cac5b306a30b21dec5abcb84067152687a">folly::detail::TIMEDOUT</a>, and <a class="el" href="FiberManagerInternal_8h_source.html#l00592">folly::fibers::yield()</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                               {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex&lt;Atom&gt;</a> <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>(0);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stress = 0; stress &lt; 1000; ++stress) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">auto</span> fp = &amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>; <span class="comment">// workaround for t5336595</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">auto</span> thrA = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">DSched::thread</a>([fp, stress] {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> deadline = time_point_cast&lt;<a class="code" href="TimeSeriesTest_8cpp.html#aa7b45ef0ac6d2e5cf59a059d915b925e">Duration</a>&gt;(</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">Clock::now</a>() + microseconds(1 &lt;&lt; (stress % 20)));</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> res = <a class="code" href="MemoryIdlerTest_8cpp.html#ab28ba4fe7e472e56f1c809bdaad1f3a2">futexWaitUntil</a>(fp, 0, deadline);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a>(res == FutexResult::TIMEDOUT || res == FutexResult::AWOKEN);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">if</span> (res == FutexResult::AWOKEN) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    });</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">futexWake</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>) != 1) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <a class="code" href="namespacefolly_1_1fibers.html#ad9af2bea32bcaa0b71686fc62475c2a8">std::this_thread::yield</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ac2575449f710ab101a165dfa0a761d27">DSched::join</a>(thrA);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">Clock::now</a>();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> deadline = time_point_cast&lt;<a class="code" href="TimeSeriesTest_8cpp.html#aa7b45ef0ac6d2e5cf59a059d915b925e">Duration</a>&gt;(<a class="code" href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a> + milliseconds(100));</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a>(<a class="code" href="MemoryIdlerTest_8cpp.html#ab28ba4fe7e472e56f1c809bdaad1f3a2">futexWaitUntil</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>, 0, deadline), FutexResult::TIMEDOUT);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Futex wait timed out after waiting for &quot;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;              &lt;&lt; duration_cast&lt;milliseconds&gt;(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">Clock::now</a>() - <a class="code" href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a>).<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>()</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;ms using clock with &quot;</span> &lt;&lt; Duration::period::den</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; precision, should be ~100ms&quot;</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a> = <a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">Clock::now</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> deadline =</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        time_point_cast&lt;<a class="code" href="TimeSeriesTest_8cpp.html#aa7b45ef0ac6d2e5cf59a059d915b925e">Duration</a>&gt;(<a class="code" href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a> - 2 * <a class="code" href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a>.time_since_epoch());</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a>(<a class="code" href="MemoryIdlerTest_8cpp.html#ab28ba4fe7e472e56f1c809bdaad1f3a2">futexWaitUntil</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>, 0, deadline), FutexResult::TIMEDOUT);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Futex wait with invalid deadline timed out after waiting for &quot;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;              &lt;&lt; duration_cast&lt;milliseconds&gt;(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">Clock::now</a>() - <a class="code" href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a>).<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>()</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;ms using clock with &quot;</span> &lt;&lt; Duration::period::den</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; precision, should be ~0ms&quot;</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div><div class="ttc" id="PushmiBenchmarks_8cpp_html_ad94c2c2f9fd35a12cc099962b7540071"><div class="ttname"><a href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a></div><div class="ttdeci">auto f</div><div class="ttdef"><b>Definition:</b> <a href="PushmiBenchmarks_8cpp_source.html#l00515">PushmiBenchmarks.cpp:515</a></div></div>
<div class="ttc" id="MemoryIdlerTest_8cpp_html_ab28ba4fe7e472e56f1c809bdaad1f3a2"><div class="ttname"><a href="MemoryIdlerTest_8cpp.html#ab28ba4fe7e472e56f1c809bdaad1f3a2">futexWaitUntil</a></div><div class="ttdeci">FutexResult futexWaitUntil(const Futex&lt; MockAtom &gt; *futex, std::uint32_t expected, std::chrono::time_point&lt; Clock, Duration &gt; const &amp;deadline, uint32_t waitMask)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryIdlerTest_8cpp_source.html#l00101">MemoryIdlerTest.cpp:101</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_html_a4159019abda84f5366acdb7604ff220a"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a></div><div class="ttdeci">#define EXPECT_EQ(val1, val2)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01922">gtest.h:1922</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_a119b8d460f481815f833da41cdc33141"><div class="ttname"><a href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">folly::detail::Futex</a></div><div class="ttdeci">Atom&lt; std::uint32_t &gt; Futex</div><div class="ttdef"><b>Definition:</b> <a href="Futex_8h_source.html#l00051">Futex.h:51</a></div></div>
<div class="ttc" id="namespacefolly_1_1fibers_html_ad9af2bea32bcaa0b71686fc62475c2a8"><div class="ttname"><a href="namespacefolly_1_1fibers.html#ad9af2bea32bcaa0b71686fc62475c2a8">folly::fibers::yield</a></div><div class="ttdeci">void yield()</div><div class="ttdef"><b>Definition:</b> <a href="FiberManagerInternal_8h_source.html#l00592">FiberManagerInternal.h:592</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a8f5de59c0afdc448572f9efd3a045839"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">folly::test::DeterministicSchedule::thread</a></div><div class="ttdeci">static std::thread thread(Func &amp;&amp;func, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00123">DeterministicSchedule.h:123</a></div></div>
<div class="ttc" id="ParallelBenchmark_8cpp_html_a7f02a749754f40365411f74cf75d08fa"><div class="ttname"><a href="ParallelBenchmark_8cpp.html#a7f02a749754f40365411f74cf75d08fa">start</a></div><div class="ttdeci">auto start</div><div class="ttdef"><b>Definition:</b> <a href="ParallelBenchmark_8cpp_source.html#l00083">ParallelBenchmark.cpp:83</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_html_ac33e7cdfb5d44a7a0f0ab552eb5c3c6a"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a></div><div class="ttdeci">#define EXPECT_TRUE(condition)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">gtest.h:1859</a></div></div>
<div class="ttc" id="TimeSeriesTest_8cpp_html_aa7b45ef0ac6d2e5cf59a059d915b925e"><div class="ttname"><a href="TimeSeriesTest_8cpp.html#aa7b45ef0ac6d2e5cf59a059d915b925e">Duration</a></div><div class="ttdeci">StatsClock::duration Duration</div><div class="ttdef"><b>Definition:</b> <a href="TimeSeriesTest_8cpp_source.html#l00038">TimeSeriesTest.cpp:38</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ac2575449f710ab101a165dfa0a761d27"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ac2575449f710ab101a165dfa0a761d27">folly::test::DeterministicSchedule::join</a></div><div class="ttdeci">static void join(std::thread &amp;child)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00252">DeterministicSchedule.cpp:252</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_aeba3f67ff8fb877e9e460b417afdf82f"><div class="ttname"><a href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">folly::detail::futexWake</a></div><div class="ttdeci">int futexWake(const Futex *futex, int count, uint32_t wakeMask)</div><div class="ttdef"><b>Definition:</b> <a href="Futex-inl_8h_source.html#l00107">Futex-inl.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a838940509d54b3cb3eef8ecfe6a31748"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename &gt; class Atom&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void run_basic_tests </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00046">46</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="ConcurrentHashMapTest_8cpp_source.html#l00301">Atom</a>, <a class="el" href="NetOps_8cpp_source.html#l00076">folly::netops::bind()</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01922">EXPECT_EQ</a>, <a class="el" href="PushmiBenchmarks_8cpp_source.html#l00515">f</a>, <a class="el" href="Futex-inl_8h_source.html#l00100">folly::detail::futexWait()</a>, <a class="el" href="Futex-inl_8h_source.html#l00107">folly::detail::futexWake()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">folly::test::DeterministicSchedule::join()</a>, <a class="el" href="DeterministicSchedule_8h_source.html#l00123">folly::test::DeterministicSchedule::thread()</a>, <a class="el" href="namespacefolly_1_1detail.html#af130844a971c4ed26a0658a3e79f273caea9b1a04c0a6e4b39394c8678e08a28a">folly::detail::VALUE_CHANGED</a>, and <a class="el" href="FiberManagerInternal_8h_source.html#l00592">folly::fibers::yield()</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                       {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex&lt;Atom&gt;</a> <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>(0);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a>(FutexResult::VALUE_CHANGED, <a class="code" href="MemoryIdlerTest_8cpp.html#a3709657583955c0b36b1038e7346bc1a">futexWait</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>, 1));</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a>(<a class="code" href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">futexWake</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>), 0);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keyword">auto</span> thr = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">DSched::thread</a>(<a class="code" href="namespacefolly_1_1netops.html#a169c47f12a823de180fb9e9de51e951f">std::bind</a>(run_basic_thread&lt;Atom&gt;, std::ref(<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>)));</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">futexWake</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>) != 1) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="namespacefolly_1_1fibers.html#ad9af2bea32bcaa0b71686fc62475c2a8">std::this_thread::yield</a>();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ac2575449f710ab101a165dfa0a761d27">DSched::join</a>(thr);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="PushmiBenchmarks_8cpp_html_ad94c2c2f9fd35a12cc099962b7540071"><div class="ttname"><a href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a></div><div class="ttdeci">auto f</div><div class="ttdef"><b>Definition:</b> <a href="PushmiBenchmarks_8cpp_source.html#l00515">PushmiBenchmarks.cpp:515</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_html_a4159019abda84f5366acdb7604ff220a"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a></div><div class="ttdeci">#define EXPECT_EQ(val1, val2)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01922">gtest.h:1922</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_a119b8d460f481815f833da41cdc33141"><div class="ttname"><a href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">folly::detail::Futex</a></div><div class="ttdeci">Atom&lt; std::uint32_t &gt; Futex</div><div class="ttdef"><b>Definition:</b> <a href="Futex_8h_source.html#l00051">Futex.h:51</a></div></div>
<div class="ttc" id="namespacefolly_1_1fibers_html_ad9af2bea32bcaa0b71686fc62475c2a8"><div class="ttname"><a href="namespacefolly_1_1fibers.html#ad9af2bea32bcaa0b71686fc62475c2a8">folly::fibers::yield</a></div><div class="ttdeci">void yield()</div><div class="ttdef"><b>Definition:</b> <a href="FiberManagerInternal_8h_source.html#l00592">FiberManagerInternal.h:592</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a8f5de59c0afdc448572f9efd3a045839"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">folly::test::DeterministicSchedule::thread</a></div><div class="ttdeci">static std::thread thread(Func &amp;&amp;func, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00123">DeterministicSchedule.h:123</a></div></div>
<div class="ttc" id="namespacefolly_1_1netops_html_a169c47f12a823de180fb9e9de51e951f"><div class="ttname"><a href="namespacefolly_1_1netops.html#a169c47f12a823de180fb9e9de51e951f">folly::netops::bind</a></div><div class="ttdeci">int bind(NetworkSocket s, const sockaddr *name, socklen_t namelen)</div><div class="ttdef"><b>Definition:</b> <a href="NetOps_8cpp_source.html#l00076">NetOps.cpp:76</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ac2575449f710ab101a165dfa0a761d27"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ac2575449f710ab101a165dfa0a761d27">folly::test::DeterministicSchedule::join</a></div><div class="ttdeci">static void join(std::thread &amp;child)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00252">DeterministicSchedule.cpp:252</a></div></div>
<div class="ttc" id="MemoryIdlerTest_8cpp_html_a3709657583955c0b36b1038e7346bc1a"><div class="ttname"><a href="MemoryIdlerTest_8cpp.html#a3709657583955c0b36b1038e7346bc1a">futexWait</a></div><div class="ttdeci">FutexResult futexWait(const Futex&lt; MockAtom &gt; *futex, uint32_t expected, uint32_t waitMask)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryIdlerTest_8cpp_source.html#l00097">MemoryIdlerTest.cpp:97</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_aeba3f67ff8fb877e9e460b417afdf82f"><div class="ttname"><a href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">folly::detail::futexWake</a></div><div class="ttdeci">int futexWake(const Futex *futex, int count, uint32_t wakeMask)</div><div class="ttdef"><b>Definition:</b> <a href="Futex-inl_8h_source.html#l00107">Futex-inl.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a558b7a6a5550045193ef32cfbb388fc6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename &gt; class Atom&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void run_basic_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&lt; <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00041">41</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="ConcurrentHashMapTest_8cpp_source.html#l00301">Atom</a>, <a class="el" href="namespacefolly_1_1detail.html#af130844a971c4ed26a0658a3e79f273ca200aad555948aaab2f495d5e48f8eae8">folly::detail::AWOKEN</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01922">EXPECT_EQ</a>, and <a class="el" href="Futex-inl_8h_source.html#l00100">folly::detail::futexWait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                      {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a>(FutexResult::AWOKEN, <a class="code" href="MemoryIdlerTest_8cpp.html#a3709657583955c0b36b1038e7346bc1a">futexWait</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>, 0));</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div><div class="ttc" id="PushmiBenchmarks_8cpp_html_ad94c2c2f9fd35a12cc099962b7540071"><div class="ttname"><a href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a></div><div class="ttdeci">auto f</div><div class="ttdef"><b>Definition:</b> <a href="PushmiBenchmarks_8cpp_source.html#l00515">PushmiBenchmarks.cpp:515</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_html_a4159019abda84f5366acdb7604ff220a"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#a4159019abda84f5366acdb7604ff220a">EXPECT_EQ</a></div><div class="ttdeci">#define EXPECT_EQ(val1, val2)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01922">gtest.h:1922</a></div></div>
<div class="ttc" id="MemoryIdlerTest_8cpp_html_a3709657583955c0b36b1038e7346bc1a"><div class="ttname"><a href="MemoryIdlerTest_8cpp.html#a3709657583955c0b36b1038e7346bc1a">futexWait</a></div><div class="ttdeci">FutexResult futexWait(const Futex&lt; MockAtom &gt; *futex, uint32_t expected, uint32_t waitMask)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryIdlerTest_8cpp_source.html#l00097">MemoryIdlerTest.cpp:97</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a52ff55715b922eb157e5231c34568bd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void run_steady_clock_test </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00172">172</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="ConcurrentHashMapTest_8cpp_source.html#l00301">Atom</a>, <a class="el" href="CpuId_8h_source.html#l00178">B</a>, <a class="el" href="CpuId_8h_source.html#l00204">C</a>, <a class="el" href="ClockGettimeWrappers_8cpp_source.html#l00048">folly::chrono::clock_gettime</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">EXPECT_TRUE</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>.</p>

<p>Referenced by <a class="el" href="FutexTest_8cpp_source.html#l00209">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                             {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">/* Test to verify that steady_clock uses clock_gettime(CLOCK_MONOTONIC, ...)</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">   * for the time_points */</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a>(steady_clock::is_steady);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">const</span> <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="namespacefolly.html#aa6586b3b6d50072e6d811e4fe0239610">A</a> =</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      duration_cast&lt;nanoseconds&gt;(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">steady_clock::now</a>().time_since_epoch())</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          .<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keyword">struct </span>timespec ts;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="namespacefolly_1_1chrono.html#ada80becb9bff529ac0908cde224d9eef">clock_gettime</a>(CLOCK_MONOTONIC, &amp;ts);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">const</span> <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="CpuId_8h.html#a6cf6fb3d5954b7c743b07616f47166cd">B</a> = ts.tv_sec * 1000000000ULL + ts.tv_nsec;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keyword">const</span> <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="CpuId_8h.html#ab4ea6500801cc6f149d5ea05a269e08d">C</a> =</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      duration_cast&lt;nanoseconds&gt;(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">steady_clock::now</a>().time_since_epoch())</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          .<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a>(A &lt;= B &amp;&amp; B &lt;= C);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="ttc" id="namespacefolly_html_aa6586b3b6d50072e6d811e4fe0239610"><div class="ttname"><a href="namespacefolly.html#aa6586b3b6d50072e6d811e4fe0239610">folly::A</a></div><div class="ttdeci">std::unique_ptr&lt; int &gt; A</div><div class="ttdef"><b>Definition:</b> <a href="ThenCompileTest_8h_source.html#l00026">ThenCompileTest.h:26</a></div></div>
<div class="ttc" id="namespacefolly_1_1chrono_html_ada80becb9bff529ac0908cde224d9eef"><div class="ttname"><a href="namespacefolly_1_1chrono.html#ada80becb9bff529ac0908cde224d9eef">folly::chrono::clock_gettime</a></div><div class="ttdeci">int(* clock_gettime)(clockid_t, timespec *ts)</div><div class="ttdef"><b>Definition:</b> <a href="ClockGettimeWrappers_8cpp_source.html#l00048">ClockGettimeWrappers.cpp:48</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="CpuId_8h_html_ab4ea6500801cc6f149d5ea05a269e08d"><div class="ttname"><a href="CpuId_8h.html#ab4ea6500801cc6f149d5ea05a269e08d">C</a></div><div class="ttdeci">#define C(name, bit)</div><div class="ttdef"><b>Definition:</b> <a href="CpuId_8h_source.html#l00204">CpuId.h:204</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_html_ac33e7cdfb5d44a7a0f0ab552eb5c3c6a"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a></div><div class="ttdeci">#define EXPECT_TRUE(condition)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">gtest.h:1859</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="CpuId_8h_html_a6cf6fb3d5954b7c743b07616f47166cd"><div class="ttname"><a href="CpuId_8h.html#a6cf6fb3d5954b7c743b07616f47166cd">B</a></div><div class="ttdeci">#define B(name, bit)</div><div class="ttdef"><b>Definition:</b> <a href="CpuId_8h_source.html#l00178">CpuId.h:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5bbbad23a75aed3105d7018bad689503"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void run_system_clock_test </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The following loop is only to make the test more robust in the presence of clock adjustments that can occur. We just run the loop maxIter times and expect with very high probability that there will be atleast one iteration of the test during which clock adjustments &gt; delta have not occurred. </p>

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00139">139</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="OptionalTest_8cpp_source.html#l00053">a</a>, <a class="el" href="OptionalTest_8cpp_source.html#l00053">b</a>, <a class="el" href="OptionalTest_8cpp_source.html#l00053">c</a>, <a class="el" href="ClockGettimeWrappers_8cpp_source.html#l00048">folly::chrono::clock_gettime</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">count</a>, <a class="el" href="FutexTest_8cpp_source.html#l00135">diff()</a>, <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">EXPECT_TRUE</a>, <a class="el" href="TimekeeperTest_8cpp_source.html#l00031">now()</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>.</p>

<p>Referenced by <a class="el" href="FutexTest_8cpp_source.html#l00209">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                             {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">/* Test to verify that system_clock uses clock_gettime(CLOCK_REALTIME, ...)</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">   * for the time_points */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">struct </span>timespec ts;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> maxIters = 1000;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">int</span> iter = 0;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keyword">const</span> <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> delta = 10000000 <span class="comment">/* 10 ms */</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">while</span> (iter &lt; maxIters) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a> =</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        duration_cast&lt;nanoseconds&gt;(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">system_clock::now</a>().time_since_epoch())</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            .<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="namespacefolly_1_1chrono.html#ada80becb9bff529ac0908cde224d9eef">clock_gettime</a>(CLOCK_REALTIME, &amp;ts);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a> = ts.tv_sec * 1000000000ULL + ts.tv_nsec;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a> =</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        duration_cast&lt;nanoseconds&gt;(<a class="code" href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">system_clock::now</a>().time_since_epoch())</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            .<a class="code" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a>();</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="FutexTest_8cpp.html#a20a35239944e6c8935103e8d109ead23">diff</a>(a, b) &lt;= delta &amp;&amp; <a class="code" href="FutexTest_8cpp.html#a20a35239944e6c8935103e8d109ead23">diff</a>(b, c) &lt;= delta &amp;&amp; <a class="code" href="FutexTest_8cpp.html#a20a35239944e6c8935103e8d109ead23">diff</a>(a, c) &lt;= 2 * delta) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="comment">/* Success! system_clock uses CLOCK_REALTIME for time_points */</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    iter++;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a>(iter &lt; maxIters);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div><div class="ttc" id="namespacefolly_1_1chrono_html_ada80becb9bff529ac0908cde224d9eef"><div class="ttname"><a href="namespacefolly_1_1chrono.html#ada80becb9bff529ac0908cde224d9eef">folly::chrono::clock_gettime</a></div><div class="ttdeci">int(* clock_gettime)(clockid_t, timespec *ts)</div><div class="ttdef"><b>Definition:</b> <a href="ClockGettimeWrappers_8cpp_source.html#l00048">ClockGettimeWrappers.cpp:48</a></div></div>
<div class="ttc" id="OptionalTest_8cpp_html_a9c67fe724294816aca4adddf8255fece"><div class="ttname"><a href="OptionalTest_8cpp.html#a9c67fe724294816aca4adddf8255fece">b</a></div><div class="ttdeci">char b</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
<div class="ttc" id="TimekeeperTest_8cpp_html_a562b4baa36dcf267f35a4ba4e0aef329"><div class="ttname"><a href="TimekeeperTest_8cpp.html#a562b4baa36dcf267f35a4ba4e0aef329">now</a></div><div class="ttdeci">std::chrono::steady_clock::time_point now()</div><div class="ttdef"><b>Definition:</b> <a href="TimekeeperTest_8cpp_source.html#l00031">TimekeeperTest.cpp:31</a></div></div>
<div class="ttc" id="OptionalTest_8cpp_html_aa07479975edbe9c84d0db17cab30a7f6"><div class="ttname"><a href="OptionalTest_8cpp.html#aa07479975edbe9c84d0db17cab30a7f6">a</a></div><div class="ttdeci">char a</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_html_afd9db40e3361ae09188795e8cbe19752"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc.html#afd9db40e3361ae09188795e8cbe19752">count</a></div><div class="ttdeci">int * count</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2test_2gmock__stress__test_8cc_source.html#l00176">gmock_stress_test.cc:176</a></div></div>
<div class="ttc" id="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_html_ac33e7cdfb5d44a7a0f0ab552eb5c3c6a"><div class="ttname"><a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h.html#ac33e7cdfb5d44a7a0f0ab552eb5c3c6a">EXPECT_TRUE</a></div><div class="ttdeci">#define EXPECT_TRUE(condition)</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googletest_2include_2gtest_2gtest_8h_source.html#l01859">gtest.h:1859</a></div></div>
<div class="ttc" id="FutexTest_8cpp_html_a20a35239944e6c8935103e8d109ead23"><div class="ttname"><a href="FutexTest_8cpp.html#a20a35239944e6c8935103e8d109ead23">diff</a></div><div class="ttdeci">uint64_t diff(uint64_t a, uint64_t b)</div><div class="ttdef"><b>Definition:</b> <a href="FutexTest_8cpp_source.html#l00135">FutexTest.cpp:135</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="OptionalTest_8cpp_html_adc08ed1554f35803d229aeaf11216b3f"><div class="ttname"><a href="OptionalTest_8cpp.html#adc08ed1554f35803d229aeaf11216b3f">c</a></div><div class="ttdeci">char c</div><div class="ttdef"><b>Definition:</b> <a href="OptionalTest_8cpp_source.html#l00053">OptionalTest.cpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a87f6325b48053d2677873a4e59a11af8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename &gt; class Atom&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void run_wait_until_tests </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00119">119</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                            {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  liveClockWaitUntilTests&lt;Atom, system_clock, system_clock::duration&gt;();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  liveClockWaitUntilTests&lt;Atom, steady_clock, steady_clock::duration&gt;();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  liveClockWaitUntilTests&lt;Atom, steady_clock, coarse_steady_clock::duration&gt;();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">typedef</span> duration&lt;int64_t, std::ratio&lt;1, 10000000&gt;&gt; decimicroseconds;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  liveClockWaitUntilTests&lt;Atom, system_clock, decimicroseconds&gt;();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a54f50445abdfad4921d2b48347cff4d1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="FutexTest_8cpp.html#a87f6325b48053d2677873a4e59a11af8">run_wait_until_tests</a>&lt; <a class="el" href="namespacefolly_1_1test.html#a36cab8b2e79142d5f56c4ff0d2fc7a23">DeterministicAtomic</a> &gt; </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00129">129</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>Referenced by <a class="el" href="FutexTest_8cpp_source.html#l00229">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                                 {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  deterministicAtomicWaitUntilTests&lt;system_clock&gt;();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  deterministicAtomicWaitUntilTests&lt;steady_clock&gt;();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  deterministicAtomicWaitUntilTests&lt;coarse_steady_clock&gt;();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4733eb9adb4a90e5f784748abbb843b3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename &gt; class Atom&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void run_wake_blocked_test </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00192">192</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="namespacefolly_1_1detail.html#af130844a971c4ed26a0658a3e79f273ca200aad555948aaab2f495d5e48f8eae8">folly::detail::AWOKEN</a>, <a class="el" href="PushmiBenchmarks_8cpp_source.html#l00515">f</a>, <a class="el" href="Futex-inl_8h_source.html#l00100">folly::detail::futexWait()</a>, <a class="el" href="Futex-inl_8h_source.html#l00107">folly::detail::futexWake()</a>, <a class="el" href="DeterministicSchedule_8cpp_source.html#l00252">folly::test::DeterministicSchedule::join()</a>, <a class="el" href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a260ca9dd8a4577fc00b7bd5810298076">folly::detail::success</a>, and <a class="el" href="DeterministicSchedule_8h_source.html#l00123">folly::test::DeterministicSchedule::thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                             {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> delay = std::chrono::milliseconds(1);; delay *= 2) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a260ca9dd8a4577fc00b7bd5810298076">success</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex&lt;Atom&gt;</a> <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>(0);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">auto</span> thr = <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">DSched::thread</a>(</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        [&amp;] { success = FutexResult::AWOKEN == <a class="code" href="MemoryIdlerTest_8cpp.html#a3709657583955c0b36b1038e7346bc1a">futexWait</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>, 0); });</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">/* sleep override */</span> std::this_thread::sleep_for(delay);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>.store(1);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">futexWake</a>(&amp;<a class="code" href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a>, 1);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#ac2575449f710ab101a165dfa0a761d27">DSched::join</a>(thr);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;delay=&quot;</span> &lt;&lt; delay.count() &lt;&lt; <span class="stringliteral">&quot;_ms, success=&quot;</span> &lt;&lt; success;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (success) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="ttc" id="PushmiBenchmarks_8cpp_html_ad94c2c2f9fd35a12cc099962b7540071"><div class="ttname"><a href="PushmiBenchmarks_8cpp.html#ad94c2c2f9fd35a12cc099962b7540071">f</a></div><div class="ttdeci">auto f</div><div class="ttdef"><b>Definition:</b> <a href="PushmiBenchmarks_8cpp_source.html#l00515">PushmiBenchmarks.cpp:515</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_a119b8d460f481815f833da41cdc33141"><div class="ttname"><a href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">folly::detail::Futex</a></div><div class="ttdeci">Atom&lt; std::uint32_t &gt; Futex</div><div class="ttdef"><b>Definition:</b> <a href="Futex_8h_source.html#l00051">Futex.h:51</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a8f5de59c0afdc448572f9efd3a045839"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a8f5de59c0afdc448572f9efd3a045839">folly::test::DeterministicSchedule::thread</a></div><div class="ttdeci">static std::thread thread(Func &amp;&amp;func, Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00123">DeterministicSchedule.h:123</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_a87c55c2d12ad5b5dc9b7416bbed13720a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacefolly_1_1detail.html#a87c55c2d12ad5b5dc9b7416bbed13720a260ca9dd8a4577fc00b7bd5810298076">folly::detail::spin_result::success</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_ac2575449f710ab101a165dfa0a761d27"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#ac2575449f710ab101a165dfa0a761d27">folly::test::DeterministicSchedule::join</a></div><div class="ttdeci">static void join(std::thread &amp;child)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00252">DeterministicSchedule.cpp:252</a></div></div>
<div class="ttc" id="MemoryIdlerTest_8cpp_html_a3709657583955c0b36b1038e7346bc1a"><div class="ttname"><a href="MemoryIdlerTest_8cpp.html#a3709657583955c0b36b1038e7346bc1a">futexWait</a></div><div class="ttdeci">FutexResult futexWait(const Futex&lt; MockAtom &gt; *futex, uint32_t expected, uint32_t waitMask)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryIdlerTest_8cpp_source.html#l00097">MemoryIdlerTest.cpp:97</a></div></div>
<div class="ttc" id="namespacefolly_1_1detail_html_aeba3f67ff8fb877e9e460b417afdf82f"><div class="ttname"><a href="namespacefolly_1_1detail.html#aeba3f67ff8fb877e9e460b417afdf82f">folly::detail::futexWake</a></div><div class="ttdeci">int futexWake(const Futex *futex, int count, uint32_t wakeMask)</div><div class="ttdef"><b>Definition:</b> <a href="Futex-inl_8h_source.html#l00107">Futex-inl.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1bd89be76e85bcee9666034942887feb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">clock_source&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00209">209</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="FutexTest_8cpp_source.html#l00172">run_steady_clock_test()</a>, <a class="el" href="FutexTest_8cpp_source.html#l00139">run_system_clock_test()</a>, and <a class="el" href="Conv_8cpp_source.html#l00050">value</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                          {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="FutexTest_8cpp.html#a5bbbad23a75aed3105d7018bad689503">run_system_clock_test</a>();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">/* On some systems steady_clock is just an alias for system_clock. So,</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">   * we must skip run_steady_clock_test if the two clocks are the same. */</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="Conv_8cpp.html#a2f6ac1714c34743067351b0d2a64162b">std::is_same&lt;system_clock, steady_clock&gt;::value</a>) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="FutexTest_8cpp.html#a52ff55715b922eb157e5231c34568bd9">run_steady_clock_test</a>();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="ttc" id="Conv_8cpp_html_a2f6ac1714c34743067351b0d2a64162b"><div class="ttname"><a href="Conv_8cpp.html#a2f6ac1714c34743067351b0d2a64162b">value</a></div><div class="ttdeci">static const char *const value</div><div class="ttdef"><b>Definition:</b> <a href="Conv_8cpp_source.html#l00050">Conv.cpp:50</a></div></div>
<div class="ttc" id="FutexTest_8cpp_html_a5bbbad23a75aed3105d7018bad689503"><div class="ttname"><a href="FutexTest_8cpp.html#a5bbbad23a75aed3105d7018bad689503">run_system_clock_test</a></div><div class="ttdeci">void run_system_clock_test()</div><div class="ttdef"><b>Definition:</b> <a href="FutexTest_8cpp_source.html#l00139">FutexTest.cpp:139</a></div></div>
<div class="ttc" id="FutexTest_8cpp_html_a52ff55715b922eb157e5231c34568bd9"><div class="ttname"><a href="FutexTest_8cpp.html#a52ff55715b922eb157e5231c34568bd9">run_steady_clock_test</a></div><div class="ttdeci">void run_steady_clock_test()</div><div class="ttdef"><b>Definition:</b> <a href="FutexTest_8cpp_source.html#l00172">FutexTest.cpp:172</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba119330e17adbe431c9392d856c9936"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">basic_live&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00219">219</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  run_basic_tests&lt;std::atomic&gt;();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  run_wait_until_tests&lt;std::atomic&gt;();</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abcb9553fae9bc8df6c9b67bbce16c8a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">basic_emulated&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00224">224</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                            {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  run_basic_tests&lt;EmulatedFutexAtomic&gt;();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  run_wait_until_tests&lt;EmulatedFutexAtomic&gt;();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5ebcfba8bcaef5f63c7bf3737e95d045"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">basic_deterministic&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00229">229</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>

<p>References <a class="el" href="FutexTest_8cpp_source.html#l00129">run_wait_until_tests&lt; DeterministicAtomic &gt;()</a>, and <a class="el" href="DeterministicSchedule_8cpp_source.html#l00068">folly::test::DeterministicSchedule::uniform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                 {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html">DSched</a> sched(<a class="code" href="classfolly_1_1test_1_1DeterministicSchedule.html#a4644518091912f13916b2a1a98be3397">DSched::uniform</a>(0));</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  run_basic_tests&lt;DeterministicAtomic&gt;();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="FutexTest_8cpp.html#a54f50445abdfad4921d2b48347cff4d1">run_wait_until_tests&lt;DeterministicAtomic&gt;</a>();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div><div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html_a4644518091912f13916b2a1a98be3397"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html#a4644518091912f13916b2a1a98be3397">folly::test::DeterministicSchedule::uniform</a></div><div class="ttdeci">static std::function&lt; size_t(size_t)&gt; uniform(uint64_t seed)</div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8cpp_source.html#l00068">DeterministicSchedule.cpp:68</a></div></div>
<div class="ttc" id="FutexTest_8cpp_html_a54f50445abdfad4921d2b48347cff4d1"><div class="ttname"><a href="FutexTest_8cpp.html#a54f50445abdfad4921d2b48347cff4d1">run_wait_until_tests&lt; DeterministicAtomic &gt;</a></div><div class="ttdeci">void run_wait_until_tests&lt; DeterministicAtomic &gt;()</div><div class="ttdef"><b>Definition:</b> <a href="FutexTest_8cpp_source.html#l00129">FutexTest.cpp:129</a></div></div>
<div class="ttc" id="classfolly_1_1test_1_1DeterministicSchedule_html"><div class="ttname"><a href="classfolly_1_1test_1_1DeterministicSchedule.html">folly::test::DeterministicSchedule</a></div><div class="ttdef"><b>Definition:</b> <a href="DeterministicSchedule_8h_source.html#l00075">DeterministicSchedule.h:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a537530adc8b0db429d012dcb270d5215"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wake_blocked_live&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00235">235</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                               {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  run_wake_blocked_test&lt;std::atomic&gt;();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a478cb013dc148c25d484ef6a2c4515da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly_1_1detail.html#a119b8d460f481815f833da41cdc33141">Futex</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wake_blocked_emulated&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="FutexTest_8cpp_source.html#l00239">239</a> of file <a class="el" href="FutexTest_8cpp_source.html">FutexTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                   {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  run_wake_blocked_test&lt;EmulatedFutexAtomic&gt;();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d333e33cf903653326082c1f32e03be5.html">proxygen</a></li><li class="navelem"><a class="el" href="dir_32ce190710b1753ff87b781fbaae9b47.html">folly</a></li><li class="navelem"><a class="el" href="dir_dcf8e1233ba68571c5027662569cd1d9.html">folly</a></li><li class="navelem"><a class="el" href="dir_1225781ec9161af73a1065ad4149bfd8.html">test</a></li><li class="navelem"><a class="el" href="FutexTest_8cpp.html">FutexTest.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
