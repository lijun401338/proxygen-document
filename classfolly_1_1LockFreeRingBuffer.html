<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::LockFreeRingBuffer&lt; T, Atom &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfolly_1_1LockFreeRingBuffer.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfolly_1_1LockFreeRingBuffer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::LockFreeRingBuffer&lt; T, Atom &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for folly::LockFreeRingBuffer&lt; T, Atom &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfolly_1_1LockFreeRingBuffer.png" usemap="#folly::LockFreeRingBuffer_3C_20T_2C_20Atom_20_3E_map" alt=""/>
  <map id="folly::LockFreeRingBuffer_3C_20T_2C_20Atom_20_3E_map" name="folly::LockFreeRingBuffer&lt; T, Atom &gt;_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aace8165a3d89c5d5f9667b3f9852c91a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#aace8165a3d89c5d5f9667b3f9852c91a">LockFreeRingBuffer</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> capacity) noexcept</td></tr>
<tr class="separator:aace8165a3d89c5d5f9667b3f9852c91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a362189c38c2ba6a1e952b8cb586ab1b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#a362189c38c2ba6a1e952b8cb586ab1b5">write</a> (<a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;<a class="el" href="namespacefolly.html#af765fccfa9242184196b4906286ada49">value</a>) noexcept</td></tr>
<tr class="separator:a362189c38c2ba6a1e952b8cb586ab1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8879674fbec3f9d704359872d04bfa1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#ac8879674fbec3f9d704359872d04bfa1">writeAndGetCursor</a> (<a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;<a class="el" href="namespacefolly.html#af765fccfa9242184196b4906286ada49">value</a>) noexcept</td></tr>
<tr class="separator:ac8879674fbec3f9d704359872d04bfa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53db312c4659e411f59fa982049e1a91"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#a53db312c4659e411f59fa982049e1a91">tryRead</a> (<a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;dest, const <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> &amp;cursor) noexcept</td></tr>
<tr class="separator:a53db312c4659e411f59fa982049e1a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cda8b3e348a654986657f381714bc92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#a9cda8b3e348a654986657f381714bc92">waitAndTryRead</a> (<a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;dest, const <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> &amp;cursor) noexcept</td></tr>
<tr class="separator:a9cda8b3e348a654986657f381714bc92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9774e239cad9ebc6b4765bda8fc219f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#a9774e239cad9ebc6b4765bda8fc219f6">currentHead</a> () noexcept</td></tr>
<tr class="memdesc:a9774e239cad9ebc6b4765bda8fc219f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> pointing to the first write that has not occurred yet.  <a href="#a9774e239cad9ebc6b4765bda8fc219f6">More...</a><br /></td></tr>
<tr class="separator:a9774e239cad9ebc6b4765bda8fc219f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8068ca4ecd4b4613f3f807201552af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#adc8068ca4ecd4b4613f3f807201552af">currentTail</a> (double skipFraction=0.0) noexcept</td></tr>
<tr class="separator:adc8068ca4ecd4b4613f3f807201552af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a495ab9913b39f467a27c5cebeaf32d59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#a495ab9913b39f467a27c5cebeaf32d59">~LockFreeRingBuffer</a> ()</td></tr>
<tr class="separator:a495ab9913b39f467a27c5cebeaf32d59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4f578e427cb8ca754f9959a05ce43d82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">idx</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="el" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a>) noexcept</td></tr>
<tr class="separator:a4f578e427cb8ca754f9959a05ce43d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29d194ffda177a92290929ada5504d65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">turn</a> (<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="el" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a>) noexcept</td></tr>
<tr class="separator:a29d194ffda177a92290929ada5504d65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa04daa33b8f619d631d933670907e77a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">capacity_</a></td></tr>
<tr class="separator:aa04daa33b8f619d631d933670907e77a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02e903e8c6de81ca1500987dcf81ee2"><td class="memItemLeft" align="right" valign="top">const std::unique_ptr&lt; <a class="el" href="classfolly_1_1detail_1_1RingBufferSlot.html">detail::RingBufferSlot</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;[]&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">slots_</a></td></tr>
<tr class="separator:af02e903e8c6de81ca1500987dcf81ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e7c1459024911a233b5c8273d8680e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt; <a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">ticket_</a></td></tr>
<tr class="separator:ab9e7c1459024911a233b5c8273d8680e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt;<br />
class folly::LockFreeRingBuffer&lt; T, Atom &gt;</h3>

<p>LockFreeRingBuffer&lt;T&gt; is a fixed-size, concurrent ring buffer with the following semantics:</p>
<ol type="1">
<li>Writers cannot block on other writers UNLESS they are &lt;capacity&gt; writes apart from each other (writing to the same slot after a wrap-around)</li>
<li>Writers cannot block on readers</li>
<li>Readers can wait for writes that haven't occurred yet</li>
<li>Readers can detect if they are lagging behind</li>
</ol>
<p>In this sense, reads from this buffer are best-effort but writes are guaranteed.</p>
<p>Another way to think about this is as an unbounded stream of writes. The buffer contains the last &lt;capacity&gt; writes but readers can attempt to read any part of the stream, even outside this window. The read API takes a <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> that can point anywhere in this stream of writes. Reads from the "future" can optionally block but reads from the "past" will always fail. </p>

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00059">59</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aace8165a3d89c5d5f9667b3f9852c91a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::<a class="el" href="classfolly_1_1LockFreeRingBuffer.html">LockFreeRingBuffer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&#160;</td>
          <td class="paramname"><em>capacity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00099">99</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      : <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">capacity_</a>(capacity),</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">slots_</a>(<span class="keyword">new</span> detail::RingBufferSlot&lt;T, Atom&gt;[capacity]),</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">ticket_</a>(0) {}</div><div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_af02e903e8c6de81ca1500987dcf81ee2"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">folly::LockFreeRingBuffer::slots_</a></div><div class="ttdeci">const std::unique_ptr&lt; detail::RingBufferSlot&lt; T, Atom &gt;[]&gt; slots_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00167">LockFreeRingBuffer.h:167</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_aa04daa33b8f619d631d933670907e77a"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">folly::LockFreeRingBuffer::capacity_</a></div><div class="ttdeci">const uint32_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00165">LockFreeRingBuffer.h:165</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_ab9e7c1459024911a233b5c8273d8680e"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">folly::LockFreeRingBuffer::ticket_</a></div><div class="ttdeci">Atom&lt; uint64_t &gt; ticket_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00169">LockFreeRingBuffer.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a495ab9913b39f467a27c5cebeaf32d59"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::~<a class="el" href="classfolly_1_1LockFreeRingBuffer.html">LockFreeRingBuffer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00162">162</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9774e239cad9ebc6b4765bda8fc219f6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::currentHead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> pointing to the first write that has not occurred yet. </p>

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00139">139</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>Referenced by <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00119">folly::runWritesNeverFail()</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00026">folly::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> Cursor(<a class="code" href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">ticket_</a>.load());</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div><div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_ab9e7c1459024911a233b5c8273d8680e"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">folly::LockFreeRingBuffer::ticket_</a></div><div class="ttdeci">Atom&lt; uint64_t &gt; ticket_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00169">LockFreeRingBuffer.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc8068ca4ecd4b4613f3f807201552af"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::currentTail </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>skipFraction</em> = <code>0.0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> pointing to a currently readable write. skipFraction is a value in the [0, 1] range indicating how far into the currently readable window to place the cursor. 0 means the earliest readable write, 1 means the latest readable write (if any). </p>

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00147">147</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>References <a class="el" href="LogLevel_8cpp_source.html#l00030">min</a>, <a class="el" href="TicketCodecTest_8cpp_source.html#l00021">ticket</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>.</p>

<p>Referenced by <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00160">folly::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                                         {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    assert(skipFraction &gt;= 0.0 &amp;&amp; skipFraction &lt;= 1.0);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a> = <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">ticket_</a>.load();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> backStep = llround((1.0 - skipFraction) * <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">capacity_</a>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// always try to move at least one step backward to something readable</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    backStep = std::max&lt;uint64_t&gt;(1, backStep);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// can&#39;t go back more steps than we&#39;ve taken</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    backStep = <a class="code" href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">std::min</a>(ticket, backStep);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> Cursor(ticket - backStep);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="ttc" id="TicketCodecTest_8cpp_html_a7093cc9e41a6fdad6b2f2aa9211604c6"><div class="ttname"><a href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a></div><div class="ttdeci">static constexpr StringPiece ticket</div><div class="ttdef"><b>Definition:</b> <a href="TicketCodecTest_8cpp_source.html#l00021">TicketCodecTest.cpp:21</a></div></div>
<div class="ttc" id="LogLevel_8cpp_html_a7361901234703a521a82885405734c53"><div class="ttname"><a href="LogLevel_8cpp.html#a7361901234703a521a82885405734c53">min</a></div><div class="ttdeci">LogLevel min</div><div class="ttdef"><b>Definition:</b> <a href="LogLevel_8cpp_source.html#l00030">LogLevel.cpp:30</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_aa04daa33b8f619d631d933670907e77a"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">folly::LockFreeRingBuffer::capacity_</a></div><div class="ttdeci">const uint32_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00165">LockFreeRingBuffer.h:165</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_ab9e7c1459024911a233b5c8273d8680e"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">folly::LockFreeRingBuffer::ticket_</a></div><div class="ttdeci">Atom&lt; uint64_t &gt; ticket_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00169">LockFreeRingBuffer.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4f578e427cb8ca754f9959a05ce43d82"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::idx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td>
          <td class="paramname"><em>ticket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00171">171</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>References <a class="el" href="TicketCodecTest_8cpp_source.html#l00021">ticket</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                         {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a> % <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">capacity_</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div><div class="ttc" id="TicketCodecTest_8cpp_html_a7093cc9e41a6fdad6b2f2aa9211604c6"><div class="ttname"><a href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a></div><div class="ttdeci">static constexpr StringPiece ticket</div><div class="ttdef"><b>Definition:</b> <a href="TicketCodecTest_8cpp_source.html#l00021">TicketCodecTest.cpp:21</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_aa04daa33b8f619d631d933670907e77a"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">folly::LockFreeRingBuffer::capacity_</a></div><div class="ttdeci">const uint32_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00165">LockFreeRingBuffer.h:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a53db312c4659e411f59fa982049e1a91"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::tryRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> &amp;&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the value at the cursor. Returns true if the read succeeded, false otherwise. If the return value is false, dest is to be considered partially read and in an inconsistent state. Readers are advised to discard it. </p>

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00126">126</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2upload_8py_source.html#l00394">upload::dest</a>.</p>

<p>Referenced by <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00026">folly::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                       {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">slots_</a>[<a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">idx</a>(cursor.ticket)].tryRead(<a class="code" href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">dest</a>, <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">turn</a>(cursor.ticket));</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div><div class="ttc" id="namespaceupload_html_a770d9c7b49b1fede80de6078d5e49af7"><div class="ttname"><a href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">upload.dest</a></div><div class="ttdeci">dest</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2upload_8py_source.html#l00394">upload.py:394</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a4f578e427cb8ca754f9959a05ce43d82"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">folly::LockFreeRingBuffer::idx</a></div><div class="ttdeci">uint32_t idx(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00171">LockFreeRingBuffer.h:171</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_af02e903e8c6de81ca1500987dcf81ee2"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">folly::LockFreeRingBuffer::slots_</a></div><div class="ttdeci">const std::unique_ptr&lt; detail::RingBufferSlot&lt; T, Atom &gt;[]&gt; slots_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00167">LockFreeRingBuffer.h:167</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a29d194ffda177a92290929ada5504d65"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">folly::LockFreeRingBuffer::turn</a></div><div class="ttdeci">uint32_t turn(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00175">LockFreeRingBuffer.h:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a29d194ffda177a92290929ada5504d65"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::turn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&#160;</td>
          <td class="paramname"><em>ticket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00175">175</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>References <a class="el" href="ConcurrentHashMapTest_8cpp_source.html#l00301">Atom</a>, <a class="el" href="TicketCodecTest_8cpp_source.html#l00021">ticket</a>, and <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00186">uint32_t</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                          {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a>)(<a class="code" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a> / <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">capacity_</a>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div><div class="ttc" id="TicketCodecTest_8cpp_html_a7093cc9e41a6fdad6b2f2aa9211604c6"><div class="ttname"><a href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a></div><div class="ttdeci">static constexpr StringPiece ticket</div><div class="ttdef"><b>Definition:</b> <a href="TicketCodecTest_8cpp_source.html#l00021">TicketCodecTest.cpp:21</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_aa04daa33b8f619d631d933670907e77a"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#aa04daa33b8f619d631d933670907e77a">folly::LockFreeRingBuffer::capacity_</a></div><div class="ttdeci">const uint32_t capacity_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00165">LockFreeRingBuffer.h:165</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a09a1e304d66d35dd47daffee9731edaa"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a></div><div class="ttdeci">uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00186">ConstexprMathBenchmark.cpp:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9cda8b3e348a654986657f381714bc92"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::waitAndTryRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> &amp;&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the value at the cursor or block if the write has not occurred yet. Returns true if the read succeeded, false otherwise. If the return value is false, dest is to be considered partially read and in an inconsistent state. Readers are advised to discard it. </p>

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00134">134</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>References <a class="el" href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2upload_8py_source.html#l00394">upload::dest</a>.</p>

<p>Referenced by <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00069">folly::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                                              {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">slots_</a>[<a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">idx</a>(cursor.ticket)].waitAndTryRead(<a class="code" href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">dest</a>, <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">turn</a>(cursor.ticket));</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div><div class="ttc" id="namespaceupload_html_a770d9c7b49b1fede80de6078d5e49af7"><div class="ttname"><a href="namespaceupload.html#a770d9c7b49b1fede80de6078d5e49af7">upload.dest</a></div><div class="ttdeci">dest</div><div class="ttdef"><b>Definition:</b> <a href="fizz_2build___2gtest_2src_2gtest_2googlemock_2scripts_2upload_8py_source.html#l00394">upload.py:394</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a4f578e427cb8ca754f9959a05ce43d82"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">folly::LockFreeRingBuffer::idx</a></div><div class="ttdeci">uint32_t idx(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00171">LockFreeRingBuffer.h:171</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_af02e903e8c6de81ca1500987dcf81ee2"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">folly::LockFreeRingBuffer::slots_</a></div><div class="ttdeci">const std::unique_ptr&lt; detail::RingBufferSlot&lt; T, Atom &gt;[]&gt; slots_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00167">LockFreeRingBuffer.h:167</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a29d194ffda177a92290929ada5504d65"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">folly::LockFreeRingBuffer::turn</a></div><div class="ttdeci">uint32_t turn(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00175">LockFreeRingBuffer.h:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a362189c38c2ba6a1e952b8cb586ab1b5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform a single write of an object of type T. Writes can block iff a previous writer has not yet completed a write for the same slot (before the most recent wrap-around). </p>

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00107">107</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>References <a class="el" href="TicketCodecTest_8cpp_source.html#l00021">ticket</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00109">folly::runReader()</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00026">folly::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a> = <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">ticket_</a>.fetch_add(1);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">slots_</a>[<a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">idx</a>(ticket)].write(<a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">turn</a>(ticket), <a class="code" href="namespacefolly.html#af765fccfa9242184196b4906286ada49">value</a>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div><div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a4f578e427cb8ca754f9959a05ce43d82"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">folly::LockFreeRingBuffer::idx</a></div><div class="ttdeci">uint32_t idx(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00171">LockFreeRingBuffer.h:171</a></div></div>
<div class="ttc" id="TicketCodecTest_8cpp_html_a7093cc9e41a6fdad6b2f2aa9211604c6"><div class="ttname"><a href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a></div><div class="ttdeci">static constexpr StringPiece ticket</div><div class="ttdef"><b>Definition:</b> <a href="TicketCodecTest_8cpp_source.html#l00021">TicketCodecTest.cpp:21</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_af02e903e8c6de81ca1500987dcf81ee2"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">folly::LockFreeRingBuffer::slots_</a></div><div class="ttdeci">const std::unique_ptr&lt; detail::RingBufferSlot&lt; T, Atom &gt;[]&gt; slots_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00167">LockFreeRingBuffer.h:167</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a29d194ffda177a92290929ada5504d65"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">folly::LockFreeRingBuffer::turn</a></div><div class="ttdeci">uint32_t turn(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00175">LockFreeRingBuffer.h:175</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="namespacefolly_html_af765fccfa9242184196b4906286ada49"><div class="ttname"><a href="namespacefolly.html#af765fccfa9242184196b4906286ada49">folly::value</a></div><div class="ttdeci">uint64_t value(const typename LockFreeRingBuffer&lt; T, Atom &gt;::Cursor &amp;rbcursor)</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBufferTest_8cpp_source.html#l00096">LockFreeRingBufferTest.cpp:96</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_ab9e7c1459024911a233b5c8273d8680e"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">folly::LockFreeRingBuffer::ticket_</a></div><div class="ttdeci">Atom&lt; uint64_t &gt; ticket_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00169">LockFreeRingBuffer.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac8879674fbec3f9d704359872d04bfa1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::writeAndGetCursor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform a single write of an object of type T. Writes can block iff a previous writer has not yet completed a write for the same slot (before the most recent wrap-around). Returns a <a class="el" href="structfolly_1_1LockFreeRingBuffer_1_1Cursor.html">Cursor</a> pointing to the just-written T. </p>

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00116">116</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

<p>References <a class="el" href="TicketCodecTest_8cpp_source.html#l00021">ticket</a>, <a class="el" href="ConstexprMathBenchmark_8cpp_source.html#l00190">uint64_t</a>, and <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00096">folly::value()</a>.</p>

<p>Referenced by <a class="el" href="LockFreeRingBufferTest_8cpp_source.html#l00221">folly::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                              {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a> <a class="code" href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a> = <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">ticket_</a>.fetch_add(1);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">slots_</a>[<a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">idx</a>(ticket)].write(<a class="code" href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">turn</a>(ticket), <a class="code" href="namespacefolly.html#af765fccfa9242184196b4906286ada49">value</a>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">return</span> Cursor(ticket);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a4f578e427cb8ca754f9959a05ce43d82"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a4f578e427cb8ca754f9959a05ce43d82">folly::LockFreeRingBuffer::idx</a></div><div class="ttdeci">uint32_t idx(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00171">LockFreeRingBuffer.h:171</a></div></div>
<div class="ttc" id="TicketCodecTest_8cpp_html_a7093cc9e41a6fdad6b2f2aa9211604c6"><div class="ttname"><a href="TicketCodecTest_8cpp.html#a7093cc9e41a6fdad6b2f2aa9211604c6">ticket</a></div><div class="ttdeci">static constexpr StringPiece ticket</div><div class="ttdef"><b>Definition:</b> <a href="TicketCodecTest_8cpp_source.html#l00021">TicketCodecTest.cpp:21</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_af02e903e8c6de81ca1500987dcf81ee2"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#af02e903e8c6de81ca1500987dcf81ee2">folly::LockFreeRingBuffer::slots_</a></div><div class="ttdeci">const std::unique_ptr&lt; detail::RingBufferSlot&lt; T, Atom &gt;[]&gt; slots_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00167">LockFreeRingBuffer.h:167</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_a29d194ffda177a92290929ada5504d65"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#a29d194ffda177a92290929ada5504d65">folly::LockFreeRingBuffer::turn</a></div><div class="ttdeci">uint32_t turn(uint64_t ticket) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00175">LockFreeRingBuffer.h:175</a></div></div>
<div class="ttc" id="ConstexprMathBenchmark_8cpp_html_a5dc34568a989dd90728a4ed499cd9fab"><div class="ttname"><a href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a></div><div class="ttdeci">uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ConstexprMathBenchmark_8cpp_source.html#l00190">ConstexprMathBenchmark.cpp:190</a></div></div>
<div class="ttc" id="namespacefolly_html_af765fccfa9242184196b4906286ada49"><div class="ttname"><a href="namespacefolly.html#af765fccfa9242184196b4906286ada49">folly::value</a></div><div class="ttdeci">uint64_t value(const typename LockFreeRingBuffer&lt; T, Atom &gt;::Cursor &amp;rbcursor)</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBufferTest_8cpp_source.html#l00096">LockFreeRingBufferTest.cpp:96</a></div></div>
<div class="ttc" id="classfolly_1_1LockFreeRingBuffer_html_ab9e7c1459024911a233b5c8273d8680e"><div class="ttname"><a href="classfolly_1_1LockFreeRingBuffer.html#ab9e7c1459024911a233b5c8273d8680e">folly::LockFreeRingBuffer::ticket_</a></div><div class="ttdeci">Atom&lt; uint64_t &gt; ticket_</div><div class="ttdef"><b>Definition:</b> <a href="LockFreeRingBuffer_8h_source.html#l00169">LockFreeRingBuffer.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aa04daa33b8f619d631d933670907e77a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ConstexprMathBenchmark_8cpp.html#a09a1e304d66d35dd47daffee9731edaa">uint32_t</a> <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::capacity_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00165">165</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="af02e903e8c6de81ca1500987dcf81ee2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::unique_ptr&lt;<a class="el" href="classfolly_1_1detail_1_1RingBufferSlot.html">detail::RingBufferSlot</a>&lt;<a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&gt;[]&gt; <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::slots_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00167">167</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab9e7c1459024911a233b5c8273d8680e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, template&lt; typename &gt; class Atom = std::atomic&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt;<a class="el" href="ConstexprMathBenchmark_8cpp.html#a5dc34568a989dd90728a4ed499cd9fab">uint64_t</a>&gt; <a class="el" href="classfolly_1_1LockFreeRingBuffer.html">folly::LockFreeRingBuffer</a>&lt; <a class="el" href="namespacefolly.html#a0652a9c51b69e7a13d40ccbcb139bc55">T</a>, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a> &gt;::ticket_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFreeRingBuffer_8h_source.html#l00169">169</a> of file <a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>proxygen/folly/folly/experimental/<a class="el" href="LockFreeRingBuffer_8h_source.html">LockFreeRingBuffer.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="classfolly_1_1LockFreeRingBuffer.html">LockFreeRingBuffer</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
