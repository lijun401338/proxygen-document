<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: folly::AtomicUnorderedInsertMap&lt; Key, Value, Hash, KeyEqual, SkipKeyValueDeletion, Atom, IndexType, Allocator &gt;::Slot Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">folly::AtomicUnorderedInsertMap&lt; Key, Value, Hash, KeyEqual, SkipKeyValueDeletion, Atom, IndexType, Allocator &gt;::Slot Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1148ebaa5ea94234f37076c1cf08b9e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#a1148ebaa5ea94234f37076c1cf08b9e4">~Slot</a> ()</td></tr>
<tr class="separator:a1148ebaa5ea94234f37076c1cf08b9e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4bd2d152cc267a23557c9bf654ee1e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">BucketState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">state</a> () const </td></tr>
<tr class="separator:af4bd2d152cc267a23557c9bf654ee1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab90179dfb15f54ffff359765bc5e7767"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#ab90179dfb15f54ffff359765bc5e7767">stateUpdate</a> (<a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">BucketState</a> before, <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">BucketState</a> after)</td></tr>
<tr class="separator:ab90179dfb15f54ffff359765bc5e7767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb6a4a2c0700a53eafbd62ebca146de1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#acb6a4a2c0700a53eafbd62ebca146de1">keyValue</a> ()</td></tr>
<tr class="separator:acb6a4a2c0700a53eafbd62ebca146de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a326fecbcd2c97d4a4546eb52c69a8251"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#a326fecbcd2c97d4a4546eb52c69a8251">keyValue</a> () const </td></tr>
<tr class="separator:a326fecbcd2c97d4a4546eb52c69a8251"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afd7aae4c621d3c766fc147acc4c3ca12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt; IndexType &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#afd7aae4c621d3c766fc147acc4c3ca12">headAndState_</a></td></tr>
<tr class="separator:afd7aae4c621d3c766fc147acc4c3ca12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb70766bb70978b27a485098ff7e25b5"><td class="memItemLeft" align="right" valign="top">IndexType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#afb70766bb70978b27a485098ff7e25b5">next_</a></td></tr>
<tr class="memdesc:afb70766bb70978b27a485098ff7e25b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The next bucket in the chain.  <a href="#afb70766bb70978b27a485098ff7e25b5">More...</a><br /></td></tr>
<tr class="separator:afb70766bb70978b27a485098ff7e25b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a553468b4d0c2693128c9c2816900db38"><td class="memItemLeft" align="right" valign="top">std::aligned_storage&lt; <a class="el" href="namespacefolly.html#a7c631f0179944e4771e98d398db760dd">sizeof</a>(<a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>), alignof(<a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>)&gt;::<a class="el" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#a553468b4d0c2693128c9c2816900db38">raw_</a></td></tr>
<tr class="memdesc:a553468b4d0c2693128c9c2816900db38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key and Value.  <a href="#a553468b4d0c2693128c9c2816900db38">More...</a><br /></td></tr>
<tr class="separator:a553468b4d0c2693128c9c2816900db38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt;<br />
struct folly::AtomicUnorderedInsertMap&lt; Key, Value, Hash, KeyEqual, SkipKeyValueDeletion, Atom, IndexType, Allocator &gt;::Slot</h3>

<p>Lock-free insertion is easiest by prepending to collision chains. <a class="el" href="structA.html">A</a> large chaining hash table takes two cache misses instead of one, however. Our solution is to colocate the bucket storage and the head storage, so that even though we are traversing chains we are likely to stay within the same cache line. Just make sure to traverse head before looking at any keys. This strategy gives us 32 bit pointers and fast iteration. </p>

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00354">354</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1148ebaa5ea94234f37076c1cf08b9e4"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::~Slot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00368">368</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>

<p>References <a class="el" href="StringKeyedBenchmark_8cpp_source.html#l00048">s</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keyword">auto</span> <a class="code" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a> = <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">state</a>();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      assert(<a class="code" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a> == <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4">EMPTY</a> || <a class="code" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a> == <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49af2c6e81a3eea9a24ed750572fbbc6efd">LINKED</a>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a> == <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49af2c6e81a3eea9a24ed750572fbbc6efd">LINKED</a>) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#acb6a4a2c0700a53eafbd62ebca146de1">keyValue</a>().first.~Key();</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#acb6a4a2c0700a53eafbd62ebca146de1">keyValue</a>().second.~Value();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div><div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_af4bd2d152cc267a23557c9bf654ee1e1"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">folly::AtomicUnorderedInsertMap::Slot::state</a></div><div class="ttdeci">BucketState state() const </div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00377">AtomicUnorderedMap.h:377</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_html_a3b78eb039cb12dc31ee2a439b3687f49af2c6e81a3eea9a24ed750572fbbc6efd"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49af2c6e81a3eea9a24ed750572fbbc6efd">folly::AtomicUnorderedInsertMap::LINKED</a></div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00344">AtomicUnorderedMap.h:344</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_html_a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4">folly::AtomicUnorderedInsertMap::EMPTY</a></div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00342">AtomicUnorderedMap.h:342</a></div></div>
<div class="ttc" id="StringKeyedBenchmark_8cpp_html_aa7f1a46e86fabf3df0ec876cd34220c2"><div class="ttname"><a href="StringKeyedBenchmark_8cpp.html#aa7f1a46e86fabf3df0ec876cd34220c2">s</a></div><div class="ttdeci">static set&lt; string &gt; s</div><div class="ttdef"><b>Definition:</b> <a href="StringKeyedBenchmark_8cpp_source.html#l00048">StringKeyedBenchmark.cpp:48</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_acb6a4a2c0700a53eafbd62ebca146de1"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#acb6a4a2c0700a53eafbd62ebca146de1">folly::AtomicUnorderedInsertMap::Slot::keyValue</a></div><div class="ttdeci">value_type &amp; keyValue()</div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00386">AtomicUnorderedMap.h:386</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="acb6a4a2c0700a53eafbd62ebca146de1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>&amp; <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::keyValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00386">386</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                           {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      assert(<a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">state</a>() != <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4">EMPTY</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">static_cast&lt;</span><a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>*<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(&amp;<a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#a553468b4d0c2693128c9c2816900db38">raw_</a>));</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div><div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_af4bd2d152cc267a23557c9bf654ee1e1"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">folly::AtomicUnorderedInsertMap::Slot::state</a></div><div class="ttdeci">BucketState state() const </div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00377">AtomicUnorderedMap.h:377</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_a553468b4d0c2693128c9c2816900db38"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#a553468b4d0c2693128c9c2816900db38">folly::AtomicUnorderedInsertMap::Slot::raw_</a></div><div class="ttdeci">std::aligned_storage&lt; sizeof(value_type), alignof(value_type)&gt;::type raw_</div><div class="ttdoc">Key and Value. </div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00366">AtomicUnorderedMap.h:366</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_html_a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4">folly::AtomicUnorderedInsertMap::EMPTY</a></div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00342">AtomicUnorderedMap.h:342</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_html_ae935b2a3a141e2fd0756b2e390bb15eb"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">folly::AtomicUnorderedInsertMap::value_type</a></div><div class="ttdeci">std::pair&lt; Key, Value &gt; value_type</div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00147">AtomicUnorderedMap.h:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a326fecbcd2c97d4a4546eb52c69a8251"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>&amp; <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::keyValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00391">391</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                       {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      assert(<a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">state</a>() != <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4">EMPTY</a>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>*<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(&amp;<a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#a553468b4d0c2693128c9c2816900db38">raw_</a>));</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div><div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_af4bd2d152cc267a23557c9bf654ee1e1"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">folly::AtomicUnorderedInsertMap::Slot::state</a></div><div class="ttdeci">BucketState state() const </div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00377">AtomicUnorderedMap.h:377</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_a553468b4d0c2693128c9c2816900db38"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#a553468b4d0c2693128c9c2816900db38">folly::AtomicUnorderedInsertMap::Slot::raw_</a></div><div class="ttdeci">std::aligned_storage&lt; sizeof(value_type), alignof(value_type)&gt;::type raw_</div><div class="ttdoc">Key and Value. </div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00366">AtomicUnorderedMap.h:366</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_html_a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49a52da358213f42cf4a3c5a49d7bc341f4">folly::AtomicUnorderedInsertMap::EMPTY</a></div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00342">AtomicUnorderedMap.h:342</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_html_ae935b2a3a141e2fd0756b2e390bb15eb"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">folly::AtomicUnorderedInsertMap::value_type</a></div><div class="ttdeci">std::pair&lt; Key, Value &gt; value_type</div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00147">AtomicUnorderedMap.h:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af4bd2d152cc267a23557c9bf654ee1e1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">BucketState</a> <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00377">377</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                              {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">BucketState</a>(<a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#afd7aae4c621d3c766fc147acc4c3ca12">headAndState_</a>.load(std::memory_order_acquire) &amp; 3);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div><div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_html_a3b78eb039cb12dc31ee2a439b3687f49"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">folly::AtomicUnorderedInsertMap::BucketState</a></div><div class="ttdeci">BucketState</div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00341">AtomicUnorderedMap.h:341</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_afd7aae4c621d3c766fc147acc4c3ca12"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#afd7aae4c621d3c766fc147acc4c3ca12">folly::AtomicUnorderedInsertMap::Slot::headAndState_</a></div><div class="ttdeci">Atom&lt; IndexType &gt; headAndState_</div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00359">AtomicUnorderedMap.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab90179dfb15f54ffff359765bc5e7767"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::stateUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">BucketState</a>&#160;</td>
          <td class="paramname"><em>before</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#a3b78eb039cb12dc31ee2a439b3687f49">BucketState</a>&#160;</td>
          <td class="paramname"><em>after</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00381">381</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                                            {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      assert(<a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">state</a>() == before);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <a class="code" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#afd7aae4c621d3c766fc147acc4c3ca12">headAndState_</a> += (after - before);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div><div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_af4bd2d152cc267a23557c9bf654ee1e1"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#af4bd2d152cc267a23557c9bf654ee1e1">folly::AtomicUnorderedInsertMap::Slot::state</a></div><div class="ttdeci">BucketState state() const </div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00377">AtomicUnorderedMap.h:377</a></div></div>
<div class="ttc" id="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot_html_afd7aae4c621d3c766fc147acc4c3ca12"><div class="ttname"><a href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html#afd7aae4c621d3c766fc147acc4c3ca12">folly::AtomicUnorderedInsertMap::Slot::headAndState_</a></div><div class="ttdeci">Atom&lt; IndexType &gt; headAndState_</div><div class="ttdef"><b>Definition:</b> <a href="AtomicUnorderedMap_8h_source.html#l00359">AtomicUnorderedMap.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="afd7aae4c621d3c766fc147acc4c3ca12"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>&lt;IndexType&gt; <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::headAndState_</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The bottom two bits are the BucketState, the rest is the index of the first bucket for the chain whose keys map to this slot. When things are going well the head usually links to this slot, but that doesn't always have to happen. </p>

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00359">359</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>

<p>Referenced by <a class="el" href="AtomicUnorderedMap_8h_source.html#l00432">folly::AtomicUnorderedInsertMap&lt; Key, Value, Hash, KeyEqual, SkipKeyValueDeletion, Atom, IndexType, Allocator &gt;::allocateNear()</a>, and <a class="el" href="AtomicUnorderedMap_8h_source.html#l00419">folly::AtomicUnorderedInsertMap&lt; Key, Value, Hash, KeyEqual, SkipKeyValueDeletion, Atom, IndexType, Allocator &gt;::find()</a>.</p>

</div>
</div>
<a class="anchor" id="afb70766bb70978b27a485098ff7e25b5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">IndexType <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::next_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The next bucket in the chain. </p>

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00362">362</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>

<p>Referenced by <a class="el" href="AtomicUnorderedMap_8h_source.html#l00419">folly::AtomicUnorderedInsertMap&lt; Key, Value, Hash, KeyEqual, SkipKeyValueDeletion, Atom, IndexType, Allocator &gt;::find()</a>.</p>

</div>
</div>
<a class="anchor" id="a553468b4d0c2693128c9c2816900db38"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Value, typename Hash = std::hash&lt;Key&gt;, typename KeyEqual = std::equal_to&lt;Key&gt;, bool SkipKeyValueDeletion = (boost::has_trivial_destructor&lt;Key&gt;::value &amp;&amp;         boost::has_trivial_destructor&lt;Value&gt;::value), template&lt; typename &gt; class Atom = std::atomic, typename IndexType = uint32_t, typename Allocator = folly::detail::MMapAlloc&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::aligned_storage&lt;<a class="el" href="namespacefolly.html#a7c631f0179944e4771e98d398db760dd">sizeof</a>(<a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>), alignof(<a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html#ae935b2a3a141e2fd0756b2e390bb15eb">value_type</a>)&gt;::<a class="el" href="ClientProtocol_8cpp.html#afb6f25e8ca4d7adb175ad413430bbb90">type</a> <a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">folly::AtomicUnorderedInsertMap</a>&lt; Key, Value, <a class="el" href="structfolly_1_1Hash.html">Hash</a>, KeyEqual, SkipKeyValueDeletion, <a class="el" href="ConcurrentHashMapTest_8cpp.html#a98ac53dd3c18b4046e7c5cb0bcb64b75">Atom</a>, IndexType, Allocator &gt;::Slot::raw_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Key and Value. </p>

<p>Definition at line <a class="el" href="AtomicUnorderedMap_8h_source.html#l00366">366</a> of file <a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>proxygen/folly/folly/<a class="el" href="AtomicUnorderedMap_8h_source.html">AtomicUnorderedMap.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefolly.html">folly</a></li><li class="navelem"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap.html">AtomicUnorderedInsertMap</a></li><li class="navelem"><a class="el" href="structfolly_1_1AtomicUnorderedInsertMap_1_1Slot.html">Slot</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
